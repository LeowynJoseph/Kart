/*! For license information please see extension.js.LICENSE.txt */
(()=>{var e={1457:function(e,t,n){var i;i=function(e){return(()=>{var t={"./dist/constants.evaluate.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CSS_WHITE_SPACE_LIQUID_TAGS=t.CSS_WHITE_SPACE_DEFAULT=t.CSS_WHITE_SPACE_TAGS=t.CSS_DISPLAY_DEFAULT=t.CSS_DISPLAY_LIQUID_DEFAULT=t.CSS_DISPLAY_LIQUID_TAGS=t.CSS_DISPLAY_TAGS=void 0;const i=n("./node_modules/html-styles/index.js"),r=e=>Object.fromEntries(i.filter((t=>t.style[e])).flatMap((t=>t.selectorText.split(",").map((e=>e.trim())).filter((e=>/^[\dA-Za-z]+$/.test(e))).map((n=>[n,t.style[e]])))));t.CSS_DISPLAY_TAGS=Object.assign(Object.assign({},r("display")),{button:"inline-block",template:"inline",source:"block",track:"block",script:"block",param:"block",details:"block",summary:"block",dialog:"block",meter:"inline-block",progress:"inline-block",object:"inline-block",video:"inline-block",audio:"inline-block",select:"inline-block",option:"block",optgroup:"block"}),t.CSS_DISPLAY_LIQUID_TAGS={if:"inline",unless:"inline",else:"inline",elsif:"inline",case:"inline",when:"inline",for:"inline",cycle:"inline",tablerow:"block",break:"none",continue:"none",comment:"none",echo:"inline",form:"block",layout:"none",liquid:"inline",paginate:"inline",raw:"inline",render:"inline",include:"inline",section:"block",style:"none",assign:"none",capture:"inline",increment:"inline",decrement:"inline"},t.CSS_DISPLAY_LIQUID_DEFAULT="inline",t.CSS_DISPLAY_DEFAULT="inline",t.CSS_WHITE_SPACE_TAGS=r("white-space"),t.CSS_WHITE_SPACE_DEFAULT="normal",t.CSS_WHITE_SPACE_LIQUID_TAGS={capture:"pre",raw:"pre"}},"./dist/index.js":(e,t,n)=>{"use strict";const i=n("./dist/parser/index.js"),r=n("./dist/printer/index.js"),o={languages:[{name:"LiquidHTML",parsers:[i.liquidHtmlLanguageName],extensions:[".liquid"],vscodeLanguageIds:["liquid","Liquid"]}],parsers:i.parsers,printers:r.printers,options:{liquidSingleQuote:{type:"boolean",category:"LIQUID",default:!0,description:"Use single quotes instead of double quotes in Liquid tags and objects.",since:"0.2.0"},embeddedSingleQuote:{type:"boolean",category:"LIQUID",default:!0,description:"Use single quotes instead of double quotes in embedded languages (JavaScript, CSS, TypeScript inside <script>, <style> or Liquid equivalent).",since:"0.4.0"},singleLineLinkTags:{type:"boolean",category:"HTML",default:!1,description:"Always print link tags on a single line to remove clutter",since:"0.1.0"},indentSchema:{type:"boolean",category:"LIQUID",default:!1,description:"Indent the contents of the {% schema %} tag",since:"0.1.0"}},defaultOptions:{printWidth:120}};e.exports=o},"./dist/parser/conditional-comment.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getConditionalComment=void 0;const n=/(<!--\[if[^\]]*]>)((.|\n)*)(<!\[endif\]-->)$/;t.getConditionalComment=e=>{const t=e.match(n);if(t)return{startTag:t[1],body:t[2].trim(),endTag:t[4]}}},"./dist/parser/errors.js":function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LiquidHTMLASTParsingError=t.LiquidHTMLCSTParsingError=void 0;const r=i(n("./node_modules/line-column/lib/line-column.js"));class o extends SyntaxError{constructor(e){super(e.shortMessage),this.name="LiquidHTMLParsingError";const t=e.input,n=e._rightmostFailurePosition,i=(0,r.default)(t).fromIndex(Math.min(n,t.length-1));i&&(this.loc={start:{line:i.line,column:i.col},end:{line:i.line,column:i.col}})}}t.LiquidHTMLCSTParsingError=o;class s extends SyntaxError{constructor(e,t,n,i){super(e),this.name="LiquidHTMLParsingError";const o=(0,r.default)(t),s=o.fromIndex(n),a=o.fromIndex(Math.min(i,t.length-1));this.loc={start:{line:s.line,column:s.col},end:{line:a.line,column:a.col}}}}t.LiquidHTMLASTParsingError=s},"./dist/parser/grammar.js":function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TAGS_WITHOUT_MARKUP=t.VOID_ELEMENTS=t.BLOCKS=t.liquidStatementsGrammar=t.liquidHtmlGrammar=t.liquidHtmlGrammars=void 0;const r=i(n("./node_modules/ohm-js/dist/ohm.esm.js"));t.liquidHtmlGrammars=r.default.grammars(n("./grammar/liquid-html.ohm.js")),t.liquidHtmlGrammar=t.liquidHtmlGrammars.LiquidHTML,t.liquidStatementsGrammar=t.liquidHtmlGrammars.LiquidStatement,t.BLOCKS=t.liquidHtmlGrammar.rules.blockName.body.factors[0].terms.map((e=>e.obj)),t.VOID_ELEMENTS=t.liquidHtmlGrammar.rules.voidElementName.body.factors[0].terms.map((e=>e.args[0].obj)),t.TAGS_WITHOUT_MARKUP=["style","schema","javascript","else","break","continue","comment","raw"]},"./dist/parser/index.js":function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.parsers=t.liquidHtmlAstFormat=t.liquidHtmlLanguageName=void 0;const o=n("./dist/parser/parser.js");Object.defineProperty(t,"liquidHtmlAstFormat",{enumerable:!0,get:function(){return o.liquidHtmlAstFormat}}),Object.defineProperty(t,"liquidHtmlLanguageName",{enumerable:!0,get:function(){return o.liquidHtmlLanguageName}}),r(n("./dist/parser/stage-2-ast.js"),t),t.parsers={[o.liquidHtmlLanguageName]:o.liquidHtmlParser}},"./dist/parser/parser.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.liquidHtmlParser=t.liquidHtmlLanguageName=t.liquidHtmlAstFormat=t.parse=void 0;const i=n("./dist/utils.js"),r=n("./dist/parser/stage-2-ast.js");function o(e,t,n){return(0,r.toLiquidHtmlAST)(e)}t.parse=o,t.liquidHtmlAstFormat="liquid-html-ast",t.liquidHtmlLanguageName="liquid-html",t.liquidHtmlParser={parse:o,astFormat:t.liquidHtmlAstFormat,locStart:i.locStart,locEnd:i.locEnd}},"./dist/parser/stage-1-cst.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toLiquidHtmlCST=t.LiquidLiteralValues=t.ConcreteNodeTypes=void 0;const i=n("./node_modules/ohm-js/extras/index.js"),r=n("./dist/parser/grammar.js"),o=n("./dist/parser/errors.js"),s=n("./dist/types.js");var a;!function(e){e.HtmlDoctype="HtmlDoctype",e.HtmlComment="HtmlComment",e.HtmlRawTag="HtmlRawTag",e.HtmlVoidElement="HtmlVoidElement",e.HtmlSelfClosingElement="HtmlSelfClosingElement",e.HtmlTagOpen="HtmlTagOpen",e.HtmlTagClose="HtmlTagClose",e.AttrSingleQuoted="AttrSingleQuoted",e.AttrDoubleQuoted="AttrDoubleQuoted",e.AttrUnquoted="AttrUnquoted",e.AttrEmpty="AttrEmpty",e.LiquidDrop="LiquidDrop",e.LiquidRawTag="LiquidRawTag",e.LiquidTag="LiquidTag",e.LiquidTagOpen="LiquidTagOpen",e.LiquidTagClose="LiquidTagClose",e.TextNode="TextNode",e.YAMLFrontmatter="YAMLFrontmatter",e.LiquidVariable="LiquidVariable",e.LiquidFilter="LiquidFilter",e.NamedArgument="NamedArgument",e.LiquidLiteral="LiquidLiteral",e.VariableLookup="VariableLookup",e.String="String",e.Number="Number",e.Range="Range",e.Comparison="Comparison",e.Condition="Condition",e.AssignMarkup="AssignMarkup",e.CycleMarkup="CycleMarkup",e.ForMarkup="ForMarkup",e.RenderMarkup="RenderMarkup",e.PaginateMarkup="PaginateMarkup",e.RenderVariableExpression="RenderVariableExpression"}(a=t.ConcreteNodeTypes||(t.ConcreteNodeTypes={})),t.LiquidLiteralValues={nil:null,null:null,true:!0,false:!1,blank:"",empty:""};const u=e=>t=>t[e].sourceString.trimEnd();t.toLiquidHtmlCST=function(e){let n=0;const c=e=>n+e[0].source.startIdx,l=e=>n+e[e.length-1].source.endIdx,d=e=>n+e[e.length-2].source.endIdx,p={type:a.TextNode,value:function(){return this.sourceString},locStart:c,locEnd:l,source:e},h=r.liquidHtmlGrammar.match(e,"Node");if(h.failed())throw new o.LiquidHTMLCSTParsingError(h);const m={Node:0,TextNode:p,orderedListOf:0,listOf:0,empty:()=>null,emptyListOf:()=>[],nonemptyListOf(e,t,n){return[e.toAST(this.args.mapping)].concat(n.toAST(this.args.mapping))},nonemptyOrderedListOf:0,nonemptyOrderedListOfBoth(e,t,n){return e.toAST(this.args.mapping).concat(n.toAST(this.args.mapping))}},g={liquidNode:0,liquidRawTag:0,liquidRawTagImpl:{type:a.LiquidRawTag,name:3,body:9,markup:6,whitespaceStart:1,whitespaceEnd:7,delimiterWhitespaceStart:11,delimiterWhitespaceEnd:17,locStart:c,locEnd:l,source:e,blockStartLocStart:e=>e[0].source.startIdx,blockStartLocEnd:e=>e[8].source.endIdx,blockEndLocStart:e=>e[10].source.startIdx,blockEndLocEnd:e=>e[18].source.endIdx},liquidBlockComment:{type:a.LiquidRawTag,name:"comment",body:e=>e[1].sourceString,whitespaceStart:e=>e[0].children[1].sourceString,whitespaceEnd:e=>e[0].children[7].sourceString,delimiterWhitespaceStart:e=>e[2].children[1].sourceString,delimiterWhitespaceEnd:e=>e[2].children[7].sourceString,locStart:c,locEnd:l,source:e,blockStartLocStart:e=>e[0].source.startIdx,blockStartLocEnd:e=>e[0].source.endIdx,blockEndLocStart:e=>e[2].source.startIdx,blockEndLocEnd:e=>e[2].source.endIdx},liquidInlineComment:{type:a.LiquidTag,name:3,markup:u(5),whitespaceStart:1,whitespaceEnd:6,locStart:c,locEnd:l,source:e},liquidTagOpen:0,liquidTagOpenBaseCase:0,liquidTagOpenRule:{type:a.LiquidTagOpen,name:3,markup(e){const t=e[6],n=e[3];return s.NamedTags.hasOwnProperty(n.sourceString)?t.toAST(this.args.mapping):t.sourceString.trim()},whitespaceStart:1,whitespaceEnd:7,locStart:c,locEnd:l,source:e},liquidTagOpenCapture:0,liquidTagOpenForm:0,liquidTagOpenFormMarkup:0,liquidTagOpenFor:0,liquidTagOpenForMarkup:{type:a.ForMarkup,variableName:0,collection:4,reversed:6,args:8,locStart:c,locEnd:l,source:e},liquidTagOpenTablerow:0,liquidTagOpenPaginate:0,liquidTagOpenPaginateMarkup:{type:a.PaginateMarkup,collection:0,pageSize:4,args:6,locStart:c,locEnd:l,source:e},liquidTagOpenCase:0,liquidTagOpenCaseMarkup:0,liquidTagWhen:0,liquidTagWhenMarkup:0,liquidTagOpenIf:0,liquidTagOpenUnless:0,liquidTagElsif:0,liquidTagOpenConditionalMarkup:0,condition:{type:a.Condition,relation:0,expression:2,locStart:c,locEnd:l,source:e},comparison:{type:a.Comparison,comparator:2,left:0,right:4,locStart:c,locEnd:l,source:e},liquidTagClose:{type:a.LiquidTagClose,name:4,whitespaceStart:1,whitespaceEnd:7,locStart:c,locEnd:l,source:e},liquidTag:0,liquidTagBaseCase:0,liquidTagAssign:0,liquidTagEcho:0,liquidTagCycle:0,liquidTagIncrement:0,liquidTagDecrement:0,liquidTagRender:0,liquidTagInclude:0,liquidTagSection:0,liquidTagSections:0,liquidTagLayout:0,liquidTagRule:{type:a.LiquidTag,name:3,markup(e){const t=e[6],n=e[3];return s.NamedTags.hasOwnProperty(n.sourceString)?t.toAST(this.args.mapping):t.sourceString.trim()},whitespaceStart:1,whitespaceEnd:7,source:e,locStart:c,locEnd:l},liquidTagLiquid:0,liquidTagLiquidMarkup(e){const t=r.liquidHtmlGrammars.LiquidStatement.match(e.sourceString,"Node");if(t.failed())throw new o.LiquidHTMLCSTParsingError(t);n=e.source.startIdx;const s=(0,i.toAST)(t,Object.assign(Object.assign(Object.assign({},m),g),f));return n=0,s},liquidTagEchoMarkup:0,liquidTagSectionMarkup:0,liquidTagSectionsMarkup:0,liquidTagLayoutMarkup:0,liquidTagAssignMarkup:{type:a.AssignMarkup,name:0,value:4,locStart:c,locEnd:l,source:e},liquidTagCycleMarkup:{type:a.CycleMarkup,groupName:0,args:3,locStart:c,locEnd:l,source:e},liquidTagRenderMarkup:{type:a.RenderMarkup,snippet:0,variable:1,alias:2,args:4,locStart:c,locEnd:l,source:e},snippetExpression:0,renderVariableExpression:{type:a.RenderVariableExpression,kind:1,name:3,locStart:c,locEnd:l,source:e},renderAliasExpression:3,liquidDrop:{type:a.LiquidDrop,markup:3,whitespaceStart:1,whitespaceEnd:4,locStart:c,locEnd:l,source:e},liquidDropCases:0,liquidExpression:0,liquidDropBaseCase:e=>e.sourceString.trimEnd(),liquidVariable:{type:a.LiquidVariable,expression:0,filters:1,rawSource:t=>e.slice(c(t),t[t.length-2].source.endIdx).trimEnd(),locStart:c,locEnd:e=>e[e.length-2].source.endIdx,source:e},liquidFilter:{type:a.LiquidFilter,name:3,locStart:c,locEnd:l,source:e,args(e){return""===e[7].sourceString?[]:e[7].toAST(this.args.mapping)}},arguments:0,tagArguments:0,positionalArgument:0,namedArgument:{type:a.NamedArgument,name:0,value:4,locStart:c,locEnd:l,source:e},liquidString:0,liquidDoubleQuotedString:{type:a.String,single:()=>!1,value:1,locStart:c,locEnd:l,source:e},liquidSingleQuotedString:{type:a.String,single:()=>!0,value:1,locStart:c,locEnd:l,source:e},liquidNumber:{type:a.Number,value:0,locStart:c,locEnd:l,source:e},liquidLiteral:{type:a.LiquidLiteral,value:e=>{const n=e[0].sourceString;return t.LiquidLiteralValues[n]},keyword:0,locStart:c,locEnd:l,source:e},liquidRange:{type:a.Range,start:2,end:6,locStart:c,locEnd:l,source:e},liquidVariableLookup:{type:a.VariableLookup,name:0,lookups:1,locStart:c,locEnd:l,source:e},variableSegmentAsLookupMarkup:0,variableSegmentAsLookup:{type:a.VariableLookup,name:0,lookups:()=>[],locStart:c,locEnd:l,source:e},lookup:0,indexLookup:3,dotLookup:{type:a.String,value:3,locStart:e=>e[2].source.startIdx,locEnd:e=>e[e.length-1].source.endIdx,source:e},tagMarkup:e=>e.sourceString.trim()},f={LiquidStatement:0,liquidTagOpenRule:{type:a.LiquidTagOpen,name:0,markup(e){const t=e[2],n=e[0];return s.NamedTags.hasOwnProperty(n.sourceString)?t.toAST(this.args.mapping):t.sourceString.trim()},whitespaceStart:null,whitespaceEnd:null,locStart:c,locEnd:d,source:e},liquidTagClose:{type:a.LiquidTagClose,name:1,whitespaceStart:null,whitespaceEnd:null,locStart:c,locEnd:d,source:e},liquidTagRule:{type:a.LiquidTag,name:0,markup(e){const t=e[2],n=e[0];return s.NamedTags.hasOwnProperty(n.sourceString)?t.toAST(this.args.mapping):t.sourceString.trim()},whitespaceStart:null,whitespaceEnd:null,locStart:c,locEnd:d,source:e},liquidRawTagImpl:{type:a.LiquidRawTag,name:0,body:4,whitespaceStart:null,whitespaceEnd:null,delimiterWhitespaceStart:null,delimiterWhitespaceEnd:null,locStart:c,locEnd:d,source:e,blockStartLocStart:e=>n+e[0].source.startIdx,blockStartLocEnd:e=>n+e[2].source.endIdx,blockEndLocStart:e=>n+e[5].source.startIdx,blockEndLocEnd:e=>n+e[5].source.endIdx},liquidBlockComment:{type:a.LiquidRawTag,name:"comment",body:e=>e[1].sourceString.slice(1)+e[2].sourceString,whitespaceStart:"",whitespaceEnd:"",delimiterWhitespaceStart:"",delimiterWhitespaceEnd:"",locStart:c,locEnd:l,source:e,blockStartLocStart:e=>n+e[0].source.startIdx,blockStartLocEnd:e=>n+e[0].source.endIdx,blockEndLocStart:e=>n+e[4].source.startIdx,blockEndLocEnd:e=>n+e[4].source.endIdx},liquidInlineComment:{type:a.LiquidTag,name:0,markup:u(2),whitespaceStart:null,whitespaceEnd:null,locStart:c,locEnd:d,source:e}},y={Node(e,t){return(0===e.sourceString.length?[]:[e.toAST(this.args.mapping)]).concat(t.toAST(this.args.mapping))},yamlFrontmatter:{type:a.YAMLFrontmatter,body:2,locStart:c,locEnd:l,source:e},HtmlDoctype:{type:a.HtmlDoctype,legacyDoctypeString:4,locStart:c,locEnd:l,source:e},HtmlComment:{type:a.HtmlComment,body:(1,e=>e[1].sourceString.trim()),locStart:c,locEnd:l,source:e},HtmlRawTagImpl:{type:a.HtmlRawTag,name:e=>e[0].children[1].sourceString,attrList(e){const t=this.args.mapping;return e[0].children[2].toAST(t)},body:t=>e.slice(t[0].source.endIdx,t[2].source.startIdx),locStart:c,locEnd:l,source:e,blockStartLocStart:e=>e[0].source.startIdx,blockStartLocEnd:e=>e[0].source.endIdx,blockEndLocStart:e=>e[2].source.startIdx,blockEndLocEnd:e=>e[2].source.endIdx},HtmlVoidElement:{type:a.HtmlVoidElement,name:1,attrList:3,locStart:c,locEnd:l,source:e},HtmlSelfClosingElement:{type:a.HtmlSelfClosingElement,name:1,attrList:2,locStart:c,locEnd:l,source:e},HtmlTagOpen:{type:a.HtmlTagOpen,name:1,attrList:2,locStart:c,locEnd:l,source:e},HtmlTagClose:{type:a.HtmlTagClose,name:1,locStart:c,locEnd:l,source:e},leadingTagNamePart:0,leadingTagNameTextNode:p,trailingTagNamePart:0,trailingTagNameTextNode:p,tagName(e,t){const n=this.args.mapping;return[e.toAST(n)].concat(t.toAST(n))},AttrUnquoted:{type:a.AttrUnquoted,name:0,value:2,locStart:c,locEnd:l,source:e},AttrSingleQuoted:{type:a.AttrSingleQuoted,name:0,value:3,locStart:c,locEnd:l,source:e},AttrDoubleQuoted:{type:a.AttrDoubleQuoted,name:0,value:3,locStart:c,locEnd:l,source:e},attrEmpty:{type:a.AttrEmpty,name:0,locStart:c,locEnd:l,source:e},attrName:0,attrNameTextNode:p,attrDoubleQuotedValue:0,attrSingleQuotedValue:0,attrUnquotedValue:0,attrDoubleQuotedTextNode:p,attrSingleQuotedTextNode:p,attrUnquotedTextNode:p};return(0,i.toAST)(h,Object.assign(Object.assign(Object.assign({},m),g),y))}},"./dist/parser/stage-2-ast.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.walk=t.cstToAst=t.toLiquidHtmlAST=t.isBranchedTag=t.RawMarkupKinds=void 0;const i=n("./dist/parser/stage-1-cst.js"),r=n("./dist/types.js"),o=n("./dist/utils.js"),s=n("./dist/parser/errors.js"),a=n("./dist/parser/grammar.js");var u;function c(e){return e.type===r.NodeTypes.LiquidTag&&["if","for","unless","case"].includes(e.name)}!function(e){e.css="css",e.html="html",e.javascript="javascript",e.json="json",e.markdown="markdown",e.typescript="typescript",e.text="text"}(u=t.RawMarkupKinds||(t.RawMarkupKinds={})),t.isBranchedTag=c,t.toLiquidHtmlAST=function(e){const t=(0,i.toLiquidHtmlCST)(e);return{type:r.NodeTypes.Document,source:e,children:p(t),name:"#document",position:{start:0,end:e.length}}};class l{constructor(e){this.ast=[],this.cursor=[],this.source=e}get current(){return(0,o.deepGet)(this.cursor,this.ast)}get currentPosition(){return(this.current||[]).length-1}get parent(){if(0!=this.cursor.length)return(0,o.deepGet)((0,o.dropLast)(1,this.cursor),this.ast)}open(e){var t;this.current.push(e),this.cursor.push(this.currentPosition),this.cursor.push("children"),c(e)&&this.open((t=e,{type:r.NodeTypes.LiquidBranch,name:null,markup:"",position:{start:t.position.end,end:t.position.end},blockStartPosition:{start:t.position.end,end:t.position.end},children:[],whitespaceStart:"",whitespaceEnd:"",source:t.source}))}push(e){var t;e.type===r.NodeTypes.LiquidTag&&function(e){return e.type===r.NodeTypes.LiquidTag&&["else","elsif","when"].includes(e.name)}(e)?(this.cursor.pop(),this.cursor.pop(),this.open(function(e){return{name:e.name,type:r.NodeTypes.LiquidBranch,markup:e.markup,position:Object.assign({},e.position),children:[],blockStartPosition:Object.assign({},e.position),whitespaceStart:e.whitespaceStart,whitespaceEnd:e.whitespaceEnd,source:e.source}}(e))):e.type===r.NodeTypes.LiquidBranch?(this.cursor.pop(),this.cursor.pop(),this.open(e)):((null===(t=this.parent)||void 0===t?void 0:t.type)===r.NodeTypes.LiquidBranch&&(this.parent.position.end=e.position.end),this.current.push(e))}close(e,t){var n,o;if(function(e){return!!e&&e.type===r.NodeTypes.LiquidBranch}(this.parent)&&(this.parent.position.end=e.locStart,this.cursor.pop(),this.cursor.pop()),!this.parent)throw new s.LiquidHTMLASTParsingError(`Attempting to close ${t} '${d(e)}' before it was opened`,this.source,e.locStart,e.locEnd);if(d(this.parent)!==d(e)||this.parent.type!==t)throw new s.LiquidHTMLASTParsingError(`Attempting to close ${t} '${d(e)}' before ${this.parent.type} '${d(this.parent)}' was closed`,this.source,this.parent.position.start,e.locEnd);this.parent.position.end=e.locEnd,this.parent.blockEndPosition=H(e),this.parent.type==r.NodeTypes.LiquidTag&&e.type==i.ConcreteNodeTypes.LiquidTagClose&&(this.parent.delimiterWhitespaceStart=null!==(n=e.whitespaceStart)&&void 0!==n?n:"",this.parent.delimiterWhitespaceEnd=null!==(o=e.whitespaceEnd)&&void 0!==o?o:""),this.cursor.pop(),this.cursor.pop()}}function d(e){if(!e)return null;switch(e.type){case r.NodeTypes.HtmlElement:case r.NodeTypes.HtmlSelfClosingElement:case i.ConcreteNodeTypes.HtmlTagClose:return e.name.map((e=>e.type===r.NodeTypes.TextNode||e.type==i.ConcreteNodeTypes.TextNode?e.value:"string"==typeof e.markup?`{{${e.markup.trim()}}}`:`{{${e.markup.rawSource}}}`)).join("");case r.NodeTypes.AttrUnquoted:case r.NodeTypes.AttrDoubleQuoted:case r.NodeTypes.AttrSingleQuoted:return e.name.map((e=>"string"==typeof e?e:e.source.slice(e.position.start,e.position.end))).join("");default:return e.name}}function p(e){var t,n,a,u,c;if(0===e.length)return[];const f=new l(e[0].source);for(const s of e)switch(s.type){case i.ConcreteNodeTypes.TextNode:f.push(M(s));break;case i.ConcreteNodeTypes.LiquidDrop:f.push(k(s));break;case i.ConcreteNodeTypes.LiquidTagOpen:f.open(D(s,{isBlockTag:!0}));break;case i.ConcreteNodeTypes.LiquidTagClose:f.close(s,r.NodeTypes.LiquidTag);break;case i.ConcreteNodeTypes.LiquidTag:f.push(D(s));break;case i.ConcreteNodeTypes.LiquidRawTag:f.push({type:r.NodeTypes.LiquidRawTag,markup:j(s.name,s.markup),name:s.name,body:b(s),whitespaceStart:null!==(t=s.whitespaceStart)&&void 0!==t?t:"",whitespaceEnd:null!==(n=s.whitespaceEnd)&&void 0!==n?n:"",delimiterWhitespaceStart:null!==(a=s.delimiterWhitespaceStart)&&void 0!==a?a:"",delimiterWhitespaceEnd:null!==(u=s.delimiterWhitespaceEnd)&&void 0!==u?u:"",position:H(s),blockStartPosition:{start:s.blockStartLocStart,end:s.blockStartLocEnd},blockEndPosition:{start:s.blockEndLocStart,end:s.blockEndLocEnd},source:s.source});break;case i.ConcreteNodeTypes.HtmlTagOpen:f.open(O(s));break;case i.ConcreteNodeTypes.HtmlTagClose:f.close(s,r.NodeTypes.HtmlElement);break;case i.ConcreteNodeTypes.HtmlVoidElement:f.push(L(s));break;case i.ConcreteNodeTypes.HtmlSelfClosingElement:f.push(B(s));break;case i.ConcreteNodeTypes.HtmlDoctype:f.push({type:r.NodeTypes.HtmlDoctype,legacyDoctypeString:s.legacyDoctypeString,position:H(s),source:s.source});break;case i.ConcreteNodeTypes.HtmlComment:f.push({type:r.NodeTypes.HtmlComment,body:s.body,position:H(s),source:s.source});break;case i.ConcreteNodeTypes.HtmlRawTag:f.push({type:r.NodeTypes.HtmlRawNode,name:s.name,body:b(s),attributes:g(s.attrList||[]),position:H(s),source:s.source,blockStartPosition:{start:s.blockStartLocStart,end:s.blockStartLocEnd},blockEndPosition:{start:s.blockEndLocStart,end:s.blockEndLocEnd}});break;case i.ConcreteNodeTypes.AttrEmpty:f.push({type:r.NodeTypes.AttrEmpty,name:p(s.name),position:H(s),source:s.source});break;case i.ConcreteNodeTypes.AttrSingleQuoted:case i.ConcreteNodeTypes.AttrDoubleQuoted:case i.ConcreteNodeTypes.AttrUnquoted:{const e={type:s.type,name:p(s.name),position:H(s),source:s.source,attributePosition:{start:-1,end:-1},value:[]},t=m(s.value);e.value=t,e.attributePosition=h(s,t),f.push(e);break}case i.ConcreteNodeTypes.YAMLFrontmatter:f.push({type:r.NodeTypes.YAMLFrontmatter,body:s.body,position:H(s),source:s.source});break;default:(0,o.assertNever)(s)}if(0!==f.cursor.length)throw new s.LiquidHTMLASTParsingError(`Attempting to end parsing before ${null===(c=f.parent)||void 0===c?void 0:c.type} '${d(f.parent)}' was closed`,f.source,f.source.length-1,f.source.length);return f.ast}function h(e,t){return 0===t.length?{start:e.locStart+e.name.length+"=".length+'"'.length,end:e.locStart+e.name.length+"=".length+'"'.length}:{start:t[0].position.start,end:t[t.length-1].position.end}}function m(e){return p(e)}function g(e){return p(e)}function f(e){var t,n;return{type:r.NodeTypes.LiquidTag,position:H(e),whitespaceStart:null!==(t=e.whitespaceStart)&&void 0!==t?t:"",whitespaceEnd:null!==(n=e.whitespaceEnd)&&void 0!==n?n:"",blockStartPosition:H(e),source:e.source}}function y(e){var t,n;return{type:r.NodeTypes.LiquidBranch,children:[],position:H(e),whitespaceStart:null!==(t=e.whitespaceStart)&&void 0!==t?t:"",whitespaceEnd:null!==(n=e.whitespaceEnd)&&void 0!==n?n:"",blockStartPosition:H(e),source:e.source}}function D(e,{isBlockTag:t}={isBlockTag:!1}){return"string"!=typeof e.markup?function(e){switch(e.name){case r.NamedTags.echo:return Object.assign(Object.assign({},f(e)),{name:r.NamedTags.echo,markup:_(e.markup)});case r.NamedTags.assign:return Object.assign(Object.assign({},f(e)),{name:r.NamedTags.assign,markup:C(e.markup)});case r.NamedTags.cycle:return Object.assign(Object.assign({},f(e)),{name:e.name,markup:v(e.markup)});case r.NamedTags.increment:case r.NamedTags.decrement:return Object.assign(Object.assign({},f(e)),{name:e.name,markup:N(e.markup)});case r.NamedTags.capture:return Object.assign(Object.assign({},f(e)),{name:e.name,markup:N(e.markup),children:[]});case r.NamedTags.include:case r.NamedTags.render:return Object.assign(Object.assign({},f(e)),{name:e.name,markup:F(e.markup)});case r.NamedTags.layout:case r.NamedTags.section:case r.NamedTags.sections:return Object.assign(Object.assign({},f(e)),{name:e.name,markup:N(e.markup)});case r.NamedTags.form:return Object.assign(Object.assign({},f(e)),{name:e.name,markup:e.markup.map(I),children:[]});case r.NamedTags.tablerow:case r.NamedTags.for:return Object.assign(Object.assign({},f(e)),{name:e.name,markup:S(e.markup),children:[]});case r.NamedTags.paginate:return Object.assign(Object.assign({},f(e)),{name:e.name,markup:E(e.markup),children:[]});case r.NamedTags.if:case r.NamedTags.unless:return Object.assign(Object.assign({},f(e)),{name:e.name,markup:w(e.markup),children:[]});case r.NamedTags.elsif:return Object.assign(Object.assign({},y(e)),{name:e.name,markup:w(e.markup)});case r.NamedTags.case:return Object.assign(Object.assign({},f(e)),{name:e.name,markup:N(e.markup),children:[]});case r.NamedTags.when:return Object.assign(Object.assign({},y(e)),{name:e.name,markup:e.markup.map(N)});case r.NamedTags.liquid:return Object.assign(Object.assign({},f(e)),{name:e.name,markup:p(e.markup)});default:return(0,o.assertNever)(e)}}(e):t?Object.assign({name:e.name,markup:j(e.name,e.markup),children:t?[]:void 0},f(e)):Object.assign({name:e.name,markup:j(e.name,e.markup)},f(e))}function C(e){return{type:r.NodeTypes.AssignMarkup,name:e.name,value:_(e.value),position:H(e),source:e.source}}function v(e){return{type:r.NodeTypes.CycleMarkup,groupName:e.groupName?N(e.groupName):null,args:e.args.map(N),position:H(e),source:e.source}}function S(e){return{type:r.NodeTypes.ForMarkup,variableName:e.variableName,collection:N(e.collection),args:e.args.map(q),reversed:!!e.reversed,position:H(e),source:e.source}}function E(e){return{type:r.NodeTypes.PaginateMarkup,collection:N(e.collection),pageSize:N(e.pageSize),position:H(e),args:e.args?e.args.map(q):[],source:e.source}}function b(e){return{type:r.NodeTypes.RawMarkup,kind:T(e),value:e.body,position:{start:e.blockStartLocEnd,end:e.blockEndLocStart},source:e.source}}function T(e){switch(e.type){case i.ConcreteNodeTypes.HtmlRawTag:return function(e){var t;switch(e.name){case"script":{const n=null===(t=e.attrList)||void 0===t?void 0:t.find((e=>"name"in e&&"string"!=typeof e.name&&1===e.name.length&&e.name[0].type===i.ConcreteNodeTypes.TextNode&&"type"===e.name[0].value));if(!n||!("value"in n)||0===n.value.length||n.value[0].type!==i.ConcreteNodeTypes.TextNode)return u.javascript;const r=n.value[0].value;return"text/markdown"===r?u.markdown:"application/x-typescript"===r?u.typescript:"text/html"===r?u.html:r&&(r.endsWith("json")||r.endsWith("importmap"))||"speculationrules"===r?u.json:u.javascript}case"style":return A.test(e.body)?u.text:u.css;default:return u.text}}(e);case i.ConcreteNodeTypes.LiquidRawTag:return function(e){switch(e.name){case"javascript":return u.javascript;case"stylesheet":case"style":return A.test(e.body)?u.text:u.css;case"schema":return u.json;default:return u.text}}(e);default:return(0,o.assertNever)(e)}}t.cstToAst=p;const A=/(\{%|\{\{)-?/g;function F(e){return{type:r.NodeTypes.RenderMarkup,snippet:N(e.snippet),alias:e.alias,variable:R(e.variable),args:e.args.map(q),position:H(e),source:e.source}}function R(e){return e?{type:r.NodeTypes.RenderVariableExpression,kind:e.kind,name:N(e.name),position:H(e),source:e.source}:null}function w(e){if(1===e.length)return x(e[0]);const[t,n]=e,[,...i]=e;return{type:r.NodeTypes.LogicalExpression,relation:n.relation,left:x(t),right:w(i),position:{start:t.locStart,end:e[e.length-1].locEnd},source:t.source}}function x(e){const t=e.expression;return t.type===i.ConcreteNodeTypes.Comparison?function(e){return{type:r.NodeTypes.Comparison,comparator:e.comparator,left:N(e.left),right:N(e.right),position:H(e),source:e.source}}(t):N(t)}function k(e){var t,n;return{type:r.NodeTypes.LiquidDrop,markup:"string"==typeof e.markup?e.markup:_(e.markup),whitespaceStart:null!==(t=e.whitespaceStart)&&void 0!==t?t:"",whitespaceEnd:null!==(n=e.whitespaceEnd)&&void 0!==n?n:"",position:H(e),source:e.source}}function _(e){return{type:r.NodeTypes.LiquidVariable,expression:N(e.expression),filters:e.filters.map(P),position:H(e),rawSource:e.rawSource,source:e.source}}function N(e){switch(e.type){case i.ConcreteNodeTypes.String:return{type:r.NodeTypes.String,position:H(e),single:e.single,value:e.value,source:e.source};case i.ConcreteNodeTypes.Number:return{type:r.NodeTypes.Number,position:H(e),value:e.value,source:e.source};case i.ConcreteNodeTypes.LiquidLiteral:return{type:r.NodeTypes.LiquidLiteral,position:H(e),value:e.value,keyword:e.keyword,source:e.source};case i.ConcreteNodeTypes.Range:return{type:r.NodeTypes.Range,start:N(e.start),end:N(e.end),position:H(e),source:e.source};case i.ConcreteNodeTypes.VariableLookup:return{type:r.NodeTypes.VariableLookup,name:e.name,lookups:e.lookups.map(N),position:H(e),source:e.source};default:return(0,o.assertNever)(e)}}function P(e){return{type:r.NodeTypes.LiquidFilter,name:e.name,args:e.args.map(I),position:H(e),source:e.source}}function I(e){return e.type===i.ConcreteNodeTypes.NamedArgument?q(e):N(e)}function q(e){return{type:r.NodeTypes.NamedArgument,name:e.name,value:N(e.value),position:H(e),source:e.source}}function O(e){return{type:r.NodeTypes.HtmlElement,name:p(e.name),attributes:g(e.attrList||[]),position:H(e),blockStartPosition:H(e),blockEndPosition:{start:-1,end:-1},children:[],source:e.source}}function L(e){return{type:r.NodeTypes.HtmlVoidElement,name:e.name,attributes:g(e.attrList||[]),position:H(e),blockStartPosition:H(e),source:e.source}}function B(e){return{type:r.NodeTypes.HtmlSelfClosingElement,name:p(e.name),attributes:g(e.attrList||[]),position:H(e),blockStartPosition:H(e),source:e.source}}function M(e){return{type:r.NodeTypes.TextNode,value:e.value,position:H(e),source:e.source}}function j(e,t){return a.TAGS_WITHOUT_MARKUP.includes(e)?"":t}function H(e){return{start:e.locStart,end:e.locEnd}}t.walk=function e(t,n,i){for(const i of Object.keys(t)){if(r.nonTraversableProperties.has(i))continue;const o=t[i];Array.isArray(o)?o.filter(r.isLiquidHtmlNode).forEach((i=>e(i,n,t))):(0,r.isLiquidHtmlNode)(o)&&e(o,n,t)}n(t,i)}},"./dist/printer/embed.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.embed=t.ParserMap=void 0;const i=n("prettier"),r=n("./dist/parser/index.js"),o=n("./dist/types.js");t.ParserMap={[r.RawMarkupKinds.css]:"css",[r.RawMarkupKinds.html]:null,[r.RawMarkupKinds.javascript]:"babel",[r.RawMarkupKinds.json]:"json",[r.RawMarkupKinds.markdown]:"markdown",[r.RawMarkupKinds.typescript]:"typescript",[r.RawMarkupKinds.text]:null},t.embed=(e,n,r,s)=>{const a=e.getValue();if(a.type===o.NodeTypes.RawMarkup){const e=t.ParserMap[a.kind];if(e&&""!==a.value.trim())return i.doc.utils.stripTrailingHardline(r(a.value,Object.assign(Object.assign({},s),{singleQuote:s.embeddedSingleQuote,parser:e,__embeddedInHtml:!0})))}return null}},"./dist/printer/index.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.printers=void 0;const i=n("./dist/printer/printer-liquid-html.js"),r=n("./dist/parser/index.js");t.printers={[r.liquidHtmlAstFormat]:i.printerLiquidHtml}},"./dist/printer/preprocess/augment-with-css-properties.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.augmentWithCSSProperties=void 0;const i=n("./dist/constants.evaluate.js"),r=n("./dist/types.js"),o=n("./dist/utils.js");function s(e){var t;return null===(t=e.match(/^\s*display:\s*([a-z]+)\s*$/))||void 0===t?void 0:t[1]}function a(e){var t;return null===(t=e.match(/^\s*white-?space:\s*([a-z]+)\s*$/))||void 0===t?void 0:t[1]}function u(e,t){if(e.prev&&e.prev.type===r.NodeTypes.HtmlComment){const t=s(e.prev.body);if(t)return t}if(e.prev&&e.prev.type===r.NodeTypes.LiquidTag&&"#"===e.prev.name){const t=s(e.prev.markup);if(t)return t}switch(e.type){case r.NodeTypes.HtmlElement:case r.NodeTypes.HtmlSelfClosingElement:switch(t.htmlWhitespaceSensitivity){case"strict":return"inline";case"ignore":return"block";default:return 1===e.name.length&&e.name[0].type===r.NodeTypes.TextNode&&i.CSS_DISPLAY_TAGS[e.name[0].value]||i.CSS_DISPLAY_DEFAULT}case r.NodeTypes.HtmlVoidElement:case r.NodeTypes.HtmlRawNode:switch(t.htmlWhitespaceSensitivity){case"strict":return"inline";case"ignore":return"block";default:return i.CSS_DISPLAY_TAGS[e.name]||i.CSS_DISPLAY_DEFAULT}case r.NodeTypes.RawMarkup:case r.NodeTypes.TextNode:return"inline";case r.NodeTypes.LiquidTag:case r.NodeTypes.LiquidRawTag:switch(t.htmlWhitespaceSensitivity){case"strict":return"inline";case"ignore":return"block";default:return i.CSS_DISPLAY_LIQUID_TAGS[e.name]||i.CSS_DISPLAY_LIQUID_DEFAULT}case r.NodeTypes.LiquidBranch:case r.NodeTypes.LiquidDrop:case r.NodeTypes.AttrDoubleQuoted:case r.NodeTypes.AttrSingleQuoted:case r.NodeTypes.AttrUnquoted:case r.NodeTypes.AttrEmpty:return"inline";case r.NodeTypes.HtmlDoctype:case r.NodeTypes.HtmlComment:case r.NodeTypes.Document:case r.NodeTypes.YAMLFrontmatter:return"block";case r.NodeTypes.LiquidVariable:case r.NodeTypes.LiquidFilter:case r.NodeTypes.NamedArgument:case r.NodeTypes.LiquidLiteral:case r.NodeTypes.String:case r.NodeTypes.Number:case r.NodeTypes.Range:case r.NodeTypes.VariableLookup:case r.NodeTypes.AssignMarkup:case r.NodeTypes.CycleMarkup:case r.NodeTypes.ForMarkup:case r.NodeTypes.PaginateMarkup:case r.NodeTypes.RenderMarkup:case r.NodeTypes.RenderVariableExpression:case r.NodeTypes.LogicalExpression:case r.NodeTypes.Comparison:return"should not be relevant";default:return(0,o.assertNever)(e)}}function c(e){if(e.prev&&e.prev.type===r.NodeTypes.HtmlComment){const t=a(e.prev.body);if(t)return t}if(e.prev&&e.prev.type===r.NodeTypes.LiquidTag&&"#"===e.prev.name){const t=a(e.prev.markup);if(t)return t}switch(e.type){case r.NodeTypes.HtmlElement:case r.NodeTypes.HtmlSelfClosingElement:return 1===e.name.length&&e.name[0].type===r.NodeTypes.TextNode&&i.CSS_WHITE_SPACE_TAGS[e.name[0].value]||i.CSS_WHITE_SPACE_DEFAULT;case r.NodeTypes.HtmlVoidElement:case r.NodeTypes.HtmlRawNode:return i.CSS_WHITE_SPACE_TAGS[e.name]||i.CSS_WHITE_SPACE_DEFAULT;case r.NodeTypes.TextNode:return i.CSS_WHITE_SPACE_DEFAULT;case r.NodeTypes.RawMarkup:case r.NodeTypes.YAMLFrontmatter:case r.NodeTypes.LiquidRawTag:return"pre";case r.NodeTypes.LiquidTag:return i.CSS_WHITE_SPACE_LIQUID_TAGS[e.name]||i.CSS_WHITE_SPACE_DEFAULT;case r.NodeTypes.LiquidBranch:case r.NodeTypes.LiquidDrop:case r.NodeTypes.AttrDoubleQuoted:case r.NodeTypes.AttrSingleQuoted:case r.NodeTypes.AttrUnquoted:case r.NodeTypes.AttrEmpty:case r.NodeTypes.HtmlDoctype:case r.NodeTypes.HtmlComment:case r.NodeTypes.Document:return i.CSS_WHITE_SPACE_DEFAULT;case r.NodeTypes.LiquidVariable:case r.NodeTypes.LiquidFilter:case r.NodeTypes.NamedArgument:case r.NodeTypes.LiquidLiteral:case r.NodeTypes.String:case r.NodeTypes.Number:case r.NodeTypes.Range:case r.NodeTypes.VariableLookup:case r.NodeTypes.AssignMarkup:case r.NodeTypes.CycleMarkup:case r.NodeTypes.ForMarkup:case r.NodeTypes.PaginateMarkup:case r.NodeTypes.RenderMarkup:case r.NodeTypes.RenderVariableExpression:case r.NodeTypes.LogicalExpression:case r.NodeTypes.Comparison:return"should not be relevant";default:return(0,o.assertNever)(e)}}t.augmentWithCSSProperties=(e,t)=>{const n={cssDisplay:u(t,e),cssWhitespace:c(t)};Object.assign(t,n)}},"./dist/printer/preprocess/augment-with-family.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.augmentWithFamily=void 0,t.augmentWithFamily=(e,t)=>{const n=t.children||[],i={firstChild:n[0],lastChild:n[n.length-1]};Object.assign(t,i)}},"./dist/printer/preprocess/augment-with-parent.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.augmentWithParent=void 0,t.augmentWithParent=(e,t,n)=>{const i={parentNode:n};Object.assign(t,i),Object.defineProperty(t,"_rawSource",{get(){return this.source.slice(this.position.start,this.position.end)}})}},"./dist/printer/preprocess/augment-with-siblings.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.augmentWithSiblings=t.next=t.prev=void 0;const i=n("./dist/types.js");function r(e){if(!e.parentNode)return;const t=s(e);return t[t.indexOf(e)-1]}function o(e){if(!e.parentNode)return;const t=s(e);return t[t.indexOf(e)+1]}function s(e){if(!e.parentNode)return[];for(const t of Object.keys(e.parentNode)){const n=e.parentNode[t];if(Array.isArray(n)&&-1!==n.indexOf(e))return n;if((0,i.isLiquidHtmlNode)(n)&&n===e)return[]}throw new Error("Could not find parent collection of node")}t.prev=r,t.next=o,t.augmentWithSiblings=(e,t)=>{const n={next:o(t),prev:r(t)};Object.assign(t,n)}},"./dist/printer/preprocess/augment-with-whitespace-helpers.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTrimmingInnerRight=t.isTrimmingInnerLeft=t.isTrimmingOuterLeft=t.isTrimmingOuterRight=t.isParentNode=t.isLiquidNode=t.isHtmlNode=t.augmentWithWhitespaceHelpers=void 0;const i=n("./dist/types.js"),r=n("./dist/constants.evaluate.js"),o=n("./dist/parser/index.js"),s=n("./dist/printer/utils/index.js");function a(e){return!(E(t=e.cssDisplay)||"inline-block"===t||(0,s.isScriptLikeTag)(e)||v(e)||S(e));var t}function u(e){return c(e)}function c(e){return function(e){return g(e)&&"string"==typeof e.name&&r.CSS_WHITE_SPACE_TAGS[e.name]||f(e)&&"name"in e&&"string"==typeof e.name&&r.CSS_WHITE_SPACE_LIQUID_TAGS[e.name]||r.CSS_WHITE_SPACE_DEFAULT}(e).startsWith("pre")}function l(e){return!(!e||(!e.parentNode||!(0,s.isAttributeNode)(e.parentNode)||e.type!==i.NodeTypes.LiquidDrop)&&(C(e)||e.prev&&D(e.prev)||!e.parentNode||"none"===e.parentNode.cssDisplay||!(0,s.isPreLikeNode)(e.parentNode)&&((0,s.isScriptLikeTag)(e)||!e.prev&&(e.parentNode.type===i.NodeTypes.Document||(0,s.isPreLikeNode)(e)||(0,s.isScriptLikeTag)(e.parentNode)||(t=e.parentNode.cssDisplay,E(t)||"inline-block"===t)||v(e.parentNode))||e.prev&&!T(e.prev.cssDisplay)||!b(e.cssDisplay))));var t}function d(e){return!(D(e)||(!e.parentNode||!(0,s.isAttributeNode)(e.parentNode)||e.type!==i.NodeTypes.LiquidDrop)&&(e.next&&C(e.next)||!e.parentNode||"none"===e.parentNode.cssDisplay||!(0,s.isPreLikeNode)(e.parentNode)&&((0,s.isScriptLikeTag)(e)||g(e)&&"string"==typeof e.name&&"br"===e.name||!e.next&&(e.parentNode.type===i.NodeTypes.Document||(0,s.isPreLikeNode)(e)||(0,s.isScriptLikeTag)(e.parentNode)||(t=e.parentNode.cssDisplay,E(t)||"inline-block"===t)||S(e.parentNode)||(0,s.isAttributeNode)(e))||e.next&&!b(e.next.cssDisplay)||!T(e.cssDisplay))));var t}function p(e){return!!y(e)&&(e.type===i.NodeTypes.Document?0===e.children.length&&e.source.length>0:!!e.children&&(e.type===i.NodeTypes.LiquidTag&&(0,o.isBranchedTag)(e)&&1===e.children.length?p(e.firstChild):!(e.children.length>0)&&(0,s.isWhitespace)(e.source,e.blockStartPosition.end)))}function h(e){return e.type!==i.NodeTypes.LiquidBranch||e.prev?(0,s.isWhitespace)(e.source,e.position.start-1):e.firstChild?h(e.firstChild):p(e)}function m(e){return e.type===i.NodeTypes.LiquidBranch?e.lastChild?m(e.lastChild):p(e):(0,s.isWhitespace)(e.source,e.position.end)}function g(e){return i.HtmlNodeTypes.includes(e.type)}function f(e){return!!e&&i.LiquidNodeTypes.includes(e.type)}function y(e){return"children"in e}function D(e){var t;if(!e)return!1;switch(e.type){case i.NodeTypes.LiquidRawTag:case i.NodeTypes.LiquidTag:return"-"===(null!==(t=e.delimiterWhitespaceEnd)&&void 0!==t?t:e.whitespaceEnd);case i.NodeTypes.LiquidBranch:return!1;case i.NodeTypes.LiquidDrop:return"-"===e.whitespaceEnd;default:return!1}}function C(e){if(!e)return!1;switch(e.type){case i.NodeTypes.LiquidRawTag:case i.NodeTypes.LiquidTag:case i.NodeTypes.LiquidBranch:case i.NodeTypes.LiquidDrop:return"-"===e.whitespaceStart;default:return!1}}function v(e){if(!e)return!1;switch(e.type){case i.NodeTypes.LiquidRawTag:case i.NodeTypes.LiquidTag:return void 0!==e.delimiterWhitespaceEnd&&"-"===e.whitespaceEnd;case i.NodeTypes.LiquidBranch:return!(!e.parentNode||e.parentNode.type!==i.NodeTypes.LiquidTag)&&(e.prev?"-"===e.whitespaceEnd:v(e.parentNode));case i.NodeTypes.LiquidDrop:default:return!1}}function S(e){if(!e)return!1;switch(e.type){case i.NodeTypes.LiquidRawTag:case i.NodeTypes.LiquidTag:return void 0!==e.delimiterWhitespaceStart&&"-"===e.delimiterWhitespaceStart;case i.NodeTypes.LiquidBranch:return!(!e.parentNode||e.parentNode.type!==i.NodeTypes.LiquidTag)&&(e.next?C(e.next):S(e.parentNode));case i.NodeTypes.LiquidDrop:default:return!1}}function E(e){return"block"===e||"list-item"===e||e.startsWith("table")}function b(e){return!E(e)}function T(e){return!E(e)}t.augmentWithWhitespaceHelpers=(e,t)=>{if("should not be relevant"===t.cssDisplay)return;const n={isDanglingWhitespaceSensitive:a(t),isIndentationSensitive:c(t),isWhitespaceSensitive:u(t),isLeadingWhitespaceSensitive:l(t)&&(!t.prev||d(t.prev)),isTrailingWhitespaceSensitive:d(t)&&(!t.next||l(t.next)),hasLeadingWhitespace:h(t),hasTrailingWhitespace:m(t),hasDanglingWhitespace:p(t)};Object.assign(t,n)},t.isHtmlNode=g,t.isLiquidNode=f,t.isParentNode=y,t.isTrimmingOuterRight=D,t.isTrimmingOuterLeft=C,t.isTrimmingInnerLeft=v,t.isTrimmingInnerRight=S},"./dist/printer/preprocess/index.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AUGMENTATION_PIPELINE=void 0;const i=n("./dist/printer/preprocess/augment-with-css-properties.js"),r=n("./dist/printer/preprocess/augment-with-parent.js"),o=n("./dist/printer/preprocess/augment-with-siblings.js"),s=n("./dist/printer/preprocess/augment-with-whitespace-helpers.js"),a=n("./dist/printer/preprocess/augment-with-family.js");t.AUGMENTATION_PIPELINE=[r.augmentWithParent,o.augmentWithSiblings,a.augmentWithFamily,i.augmentWithCSSProperties,s.augmentWithWhitespaceHelpers]},"./dist/printer/print-preprocess.js":function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.preprocess=void 0;const s=o(n("./dist/parser/stage-2-ast.js")),a=n("./dist/printer/preprocess/index.js");t.preprocess=function(e,t){const n=a.AUGMENTATION_PIPELINE.map((e=>e.bind(null,t)));for(const t of n)s.walk(e,t);return e}},"./dist/printer/print/children.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.printChildren=void 0;const i=n("prettier"),r=n("./dist/utils.js"),o=n("./dist/types.js"),s=n("./dist/printer/utils/index.js"),a=n("./dist/printer/print/tag.js"),{builders:{breakParent:u,group:c,ifBreak:l,line:d,softline:p,hardline:h}}=i.doc,{replaceTextEndOfLine:m}=i.doc.utils;function g(e,t,n,i){const u=e.getValue();if((0,s.hasPrettierIgnore)(u)){const e=u.prev&&(0,a.needsToBorrowNextOpeningTagStartMarker)(u.prev)?(0,a.printOpeningTagStartMarker)(u).length:0,n=(0,r.locStart)(u)+e,i=u.next&&(0,a.needsToBorrowPrevClosingTagEndMarker)(u.next),s=i?(0,a.printClosingTagEndMarker)(u,t).length:0,c=(0,r.locEnd)(u)-s;let l=t.originalText.slice(n,c);return u.type===o.NodeTypes.HtmlElement&&i&&(l=l.trimEnd()),[(0,a.printOpeningTagPrefix)(u,t),...m(l),(0,a.printClosingTagSuffix)(u,t)]}return n(e,i)}function f(e,t){return e&&t?(0,a.needsToBorrowNextOpeningTagStartMarker)(e)&&((0,s.hasPrettierIgnore)(t)||t.firstChild||(0,s.hasNoCloseMarker)(t)||t.type===o.NodeTypes.HtmlElement&&t.attributes.length>0)||e.type===o.NodeTypes.HtmlElement&&(0,s.hasNoCloseMarker)(e)&&(0,a.needsToBorrowPrevClosingTagEndMarker)(t)?"":!t.isLeadingWhitespaceSensitive||(0,s.preferHardlineAsLeadingSpaces)(t)||(0,a.needsToBorrowPrevClosingTagEndMarker)(t)&&e.lastChild&&(0,a.needsToBorrowParentClosingTagStartMarker)(e.lastChild)&&e.lastChild.lastChild&&(0,a.needsToBorrowParentClosingTagStartMarker)(e.lastChild.lastChild)?h:t.hasLeadingWhitespace?d:p:""}t.printChildren=function(e,t,n,i){const r=e.getValue();if(!r.children)throw new Error("attempting to use printChildren on something without children");if((0,s.forceBreakChildren)(r))return[u,...e.map((e=>{const r=e.getValue(),o=f(r.prev,r);return[o?[o,(0,s.forceNextEmptyLine)(r.prev)?h:""]:"",g(e,t,n,Object.assign(Object.assign({},i),{leadingSpaceGroupId:s.FORCE_BREAK_GROUP_ID,trailingSpaceGroupId:s.FORCE_BREAK_GROUP_ID}))]}),"children")];const o=r.children.map(((e,t)=>Symbol(`leading-${t}`))),a=r.children.map(((e,t)=>Symbol(`trailing-${t}`))),d=e.map(((e,t)=>{const n=e.getValue(),i=[],r=[],o=[],u=[],c=[],d=f(n.prev,n),m=f(n,n.next);return(0,s.isTextLikeNode)(n)||(d&&((0,s.forceNextEmptyLine)(n.prev)?i.push(h,h):d===h?i.push(h):(0,s.isTextLikeNode)(n.prev)?(0,s.isLiquidNode)(n)&&d===p?o.push(d):r.push(d):r.push(l("",p,{groupId:a[t-1]}))),m&&((0,s.forceNextEmptyLine)(n)?(0,s.isTextLikeNode)(n.next)&&c.push(h,h):m===h?(0,s.isTextLikeNode)(n.next)&&c.push(h):u.push(m))),{leadingHardlines:i,leadingWhitespace:r,leadingDependentWhitespace:o,trailingWhitespace:u,trailingHardlines:c}}),"children");return e.map(((e,r)=>{const{leadingHardlines:s,leadingWhitespace:u,leadingDependentWhitespace:l,trailingWhitespace:p,trailingHardlines:h}=d[r];return[...s,c([...u,c([...l,g(e,t,n,Object.assign(Object.assign({},i),{leadingSpaceGroupId:m(d,r),trailingSpaceGroupId:y(d,r)})),...p],{id:a[r]})],{id:o[r]}),...h]}),"children");function m(e,t){if(0===t)return i.leadingSpaceGroupId;const n=e[t-1],r=e[t],u=[];return(0,s.isEmpty)(n.trailingHardlines)&&(0,s.isEmpty)(r.leadingHardlines)?((0,s.isEmpty)(n.trailingWhitespace)||u.push(a[t-1]),(0,s.isEmpty)(r.leadingWhitespace)||u.push(o[t]),(0,s.isEmpty)(r.leadingDependentWhitespace)||u.push(a[t]),(0,s.isEmpty)(u)&&u.push(s.FORCE_FLAT_GROUP_ID),u):s.FORCE_BREAK_GROUP_ID}function y(e,t){if(t===e.length-1)return i.trailingSpaceGroupId;const n=e[t],r=e[t+1],o=[];return(0,s.isEmpty)(n.trailingHardlines)&&(0,s.isEmpty)(r.leadingHardlines)?((0,s.isEmpty)(n.trailingWhitespace)||o.push(a[t]),(0,s.isEmpty)(o)&&o.push(s.FORCE_FLAT_GROUP_ID),o):s.FORCE_BREAK_GROUP_ID}}},"./dist/printer/print/element.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.printElement=t.printRawElement=void 0;const i=n("prettier"),r=n("./dist/printer/utils/index.js"),o=n("./dist/printer/print/tag.js"),s=n("./dist/printer/print/children.js"),a=n("./dist/types.js"),u=n("./dist/parser/index.js"),{builders:{breakParent:c,dedentToRoot:l,group:d,indent:p,hardline:h,line:m,softline:g}}=i.doc,{replaceTextEndOfLine:f}=i.doc.utils;function y(e,t,n,i){const r=e.getValue(),s=Symbol("element-attr-group-id");let a=[];const c=""===r.body.value.trim(),m=r.body.kind!==u.RawMarkupKinds.markdown;return c||(a=m?[p([h,e.call(n,"body")]),h]:[l([h,e.call(n,"body")]),h]),d([(0,o.printOpeningTagPrefix)(r,t),d((0,o.printOpeningTag)(e,t,n,s),{id:s}),...a,...(0,o.printClosingTag)(r,t),(0,o.printClosingTagSuffix)(r,t)])}t.printRawElement=y,t.printElement=function(e,t,n,i){const u=e.getValue(),h=Symbol("element-attr-group-id"),D=Symbol("element-group-id");if(u.type===a.NodeTypes.HtmlRawNode)return y(e,t,n);if((0,r.hasNoCloseMarker)(u))return[d((0,o.printOpeningTag)(e,t,n,h),{id:h}),...(0,o.printClosingTag)(u,t),(0,o.printClosingTagSuffix)(u,t)];if((0,r.shouldPreserveContent)(u))return[(0,o.printOpeningTagPrefix)(u,t),d((0,o.printOpeningTag)(e,t,n,h),{id:h}),...f((0,o.getNodeContent)(u,t)),...(0,o.printClosingTag)(u,t),(0,o.printClosingTagSuffix)(u,t)];const C=i=>d([d((0,o.printOpeningTag)(e,t,n,h),{id:h}),i,(0,o.printClosingTag)(u,t)],{id:D});return 0===u.children.length?C(u.hasDanglingWhitespace&&u.isDanglingWhitespaceSensitive?m:""):C([(0,r.forceBreakContent)(u)?c:"",p([u.firstChild.hasLeadingWhitespace&&u.firstChild.isLeadingWhitespaceSensitive?m:u.firstChild.type===a.NodeTypes.TextNode&&u.isWhitespaceSensitive&&u.isIndentationSensitive?l(g):g,(0,s.printChildren)(e,t,n,{leadingSpaceGroupId:D,trailingSpaceGroupId:D})]),(u.next?(0,o.needsToBorrowPrevClosingTagEndMarker)(u.next):(0,o.needsToBorrowLastChildClosingTagEndMarker)(u.parentNode))?u.lastChild.hasTrailingWhitespace&&u.lastChild.isTrailingWhitespaceSensitive?" ":"":u.lastChild.hasTrailingWhitespace&&u.lastChild.isTrailingWhitespaceSensitive?m:g])}},"./dist/printer/print/liquid.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.printLiquidBranch=t.printLiquidRawTag=t.printLiquidTag=t.printLiquidBlockEnd=t.printLiquidBlockStart=t.printLiquidDrop=void 0;const i=n("prettier"),r=n("./dist/types.js"),o=n("./dist/parser/stage-2-ast.js"),s=n("./dist/utils.js"),a=n("./dist/printer/utils/index.js"),u=n("./dist/printer/print/children.js"),c=["for","case"],{builders:l,utils:d}=i.doc,{group:p,hardline:h,ifBreak:m,indent:g,join:f,line:y,softline:D,literalline:C}=l,{replaceTextEndOfLine:v}=i.doc.utils;function S(e,t,n,u={}){const c=e.getValue(),{leadingSpaceGroupId:l,trailingSpaceGroupId:m}=u;if(!c.name)return"";const D=(0,a.getWhitespaceTrim)(c.whitespaceStart,F(c),l),C=(0,a.getWhitespaceTrim)(c.whitespaceEnd,function(e){switch(e.type){case r.NodeTypes.LiquidTag:return(0,o.isBranchedTag)(e)?F(e.firstChild):e.children?(0,a.isEmpty)(e.children)?(0,a.hasMeaningfulLackOfDanglingWhitespace)(e):(0,a.hasMeaningfulLackOfLeadingWhitespace)(e.firstChild):(0,a.hasMeaningfulLackOfTrailingWhitespace)(e);case r.NodeTypes.LiquidBranch:return!(0,a.isAttributeNode)(e.parentNode)&&(e.firstChild?(0,a.hasMeaningfulLackOfLeadingWhitespace)(e.firstChild):(0,a.hasMeaningfulLackOfDanglingWhitespace)(e));default:return(0,s.assertNever)(e)}}(c),m);if("string"!=typeof c.markup)return function(e,t,n,i,o,a){const u=e.getValue(),{isLiquidStatement:c}=i,{wrapper:l,prefix:m,suffix:D}=c?{wrapper:d.removeLines,prefix:"",suffix:()=>""}:{wrapper:p,prefix:["{%",o," "],suffix:e=>[e,a,"%}"]},C=t=>l([...m,u.name," ",g(e.call((e=>n(e,i)),"markup")),...D(t)]),v=t=>l([...m,u.name," ",g([f([",",y],e.map((e=>n(e,i)),"markup"))]),...D(t)]);switch(u.name){case r.NamedTags.echo:return C(u.markup.filters.length>0?y:" ");case r.NamedTags.assign:return C(u.markup.value.filters.length>0?y:" ");case r.NamedTags.cycle:{const t=u.markup.args.length>1?y:" ";return l([...m,u.name,u.markup.groupName?" ":"",g(e.call((e=>n(e,i)),"markup")),...D(t)])}case r.NamedTags.include:case r.NamedTags.render:{const e=u.markup;return C(e.args.length>0||e.variable&&e.alias?y:" ")}case r.NamedTags.capture:case r.NamedTags.increment:case r.NamedTags.decrement:case r.NamedTags.layout:case r.NamedTags.section:case r.NamedTags.sections:return C(" ");case r.NamedTags.form:return v(u.markup.length>1?y:" ");case r.NamedTags.tablerow:case r.NamedTags.for:return C(u.markup.reversed||u.markup.args.length>0?y:" ");case r.NamedTags.paginate:return C(y);case r.NamedTags.if:case r.NamedTags.elsif:case r.NamedTags.unless:return C([r.NodeTypes.Comparison,r.NodeTypes.LogicalExpression].includes(u.markup.type)?y:" ");case r.NamedTags.case:return C(" ");case r.NamedTags.when:return v(u.markup.length>1?y:" ");case r.NamedTags.liquid:return p([...m,u.name,g([h,f(h,e.map((e=>{const t=e.getValue();return[R(t.prev,t),n(e,Object.assign(Object.assign({},i),{isLiquidStatement:!0}))]}),"markup"))]),...D(h)]);default:return(0,s.assertNever)(u)}}(e,0,n,u,D,C);if(u.isLiquidStatement)return function(e,t,n,r){const o=e.getValue(),s=""===o.markup.trim()||"#"===o.name&&o.markup.startsWith("#");return i.doc.utils.removeLines([o.name,s?"":" ",o.markup])}(e);const v=(0,a.markupLines)(c.markup);if("liquid"===c.name)return p(["{%",D," ",c.name,g([h,f(h,(0,a.reindent)(v,!0))]),h,C,"%}"]);if(v.length>1)return p(["{%",D,g([h,c.name," ",f(h,v.map(a.trim))]),h,C,"%}"]);const S=c.markup;return p(["{%",D," ",c.name,S?` ${S}`:""," ",C,"%}"])}function E(e,t,n,i={}){var r,s;const u=e.getValue(),{isLiquidStatement:c,leadingSpaceGroupId:l,trailingSpaceGroupId:d}=i;if(!u.children||!u.blockEndPosition)return"";if(c)return["end",u.name];const h=(0,a.getWhitespaceTrim)(null!==(r=u.delimiterWhitespaceStart)&&void 0!==r?r:"",function(e){if(e.children)return!(0,a.isAttributeNode)(e)&&((0,o.isBranchedTag)(e)?(0,a.hasMeaningfulLackOfTrailingWhitespace)(e.lastChild):(0,a.isEmpty)(e.children)?(0,a.hasMeaningfulLackOfDanglingWhitespace)(e):(0,a.hasMeaningfulLackOfTrailingWhitespace)(e.lastChild));throw new Error("Should only call needsBlockEndLeadingWhitespaceStrippingOnBreak for tags that have closing tags")}(u),l),m=(0,a.getWhitespaceTrim)(null!==(s=u.delimiterWhitespaceEnd)&&void 0!==s?s:"",(0,a.hasMeaningfulLackOfTrailingWhitespace)(u),d);return p(["{%",h,` end${u.name} `,m,"%}"])}function b(e){return e.children&&e.blockEndPosition?e.source.slice(e.blockStartPosition.end,e.blockEndPosition.start):""}function T(e){return e.firstChild?e.firstChild.hasLeadingWhitespace&&e.firstChild.isLeadingWhitespaceSensitive?y:D:e.isDanglingWhitespaceSensitive&&e.hasDanglingWhitespace?y:""}function A(e,t){return!t.isLiquidStatement&&(0,a.shouldPreserveContent)(e)||e.type===r.NodeTypes.LiquidBranch||!e.blockEndPosition||!e.lastChild?"":e.lastChild.hasTrailingWhitespace&&e.lastChild.isTrailingWhitespaceSensitive?y:D}function F(e){switch(e.type){case r.NodeTypes.LiquidTag:return!(0,a.isAttributeNode)(e)&&(0,a.hasMeaningfulLackOfLeadingWhitespace)(e);case r.NodeTypes.LiquidBranch:return!(0,a.isAttributeNode)(e.parentNode)&&(0,a.hasMeaningfulLackOfLeadingWhitespace)(e);default:return(0,s.assertNever)(e)}}function R(e,t){return e&&(t.source.slice(e.position.end,t.position.start).match(/\n/g)||[]).length>1?h:""}t.printLiquidDrop=function(e,t,n,{leadingSpaceGroupId:i,trailingSpaceGroupId:r}){const o=e.getValue(),s=(0,a.getWhitespaceTrim)(o.whitespaceStart,(0,a.hasMeaningfulLackOfLeadingWhitespace)(o),i),u=(0,a.getWhitespaceTrim)(o.whitespaceEnd,(0,a.hasMeaningfulLackOfTrailingWhitespace)(o),r);if("string"!=typeof o.markup){const t=o.markup.filters.length>0?y:" ";return p(["{{",s,g([t,e.call(n,"markup")]),t,u,"}}"])}const c=(0,a.markupLines)(o.markup);return c.length>1?p(["{{",s,g([h,f(h,c.map(a.trim))]),h,u,"}}"]):p(["{{",s," ",o.markup," ",u,"}}"])},t.printLiquidBlockStart=S,t.printLiquidBlockEnd=E,t.printLiquidTag=function(e,t,n,i){const{leadingSpaceGroupId:r,trailingSpaceGroupId:s}=i,l=e.getValue();if(!l.children||!l.blockEndPosition)return S(e,0,n,i);if(!i.isLiquidStatement&&(0,a.shouldPreserveContent)(l))return[S(e,0,n,Object.assign(Object.assign({},i),{leadingSpaceGroupId:r,trailingSpaceGroupId:a.FORCE_FLAT_GROUP_ID})),...v(b(l)),E(e,0,0,Object.assign(Object.assign({},i),{leadingSpaceGroupId:a.FORCE_FLAT_GROUP_ID,trailingSpaceGroupId:s}))];const d=Symbol("tag-group"),h=S(e,0,n,Object.assign(Object.assign({},i),{leadingSpaceGroupId:r,trailingSpaceGroupId:d})),m=E(e,0,0,Object.assign(Object.assign({},i),{leadingSpaceGroupId:d,trailingSpaceGroupId:s}));let f=[];return(0,o.isBranchedTag)(l)?(f=e.map((e=>n(e,Object.assign(Object.assign({},i),{leadingSpaceGroupId:d,trailingSpaceGroupId:d}))),"children").filter((e=>""!==e)),"case"===l.name&&(f=g(f))):l.children.length>0&&(f=g([T(l),(0,u.printChildren)(e,t,n,Object.assign(Object.assign({},i),{leadingSpaceGroupId:d,trailingSpaceGroupId:d}))])),p([h,f,A(l,i),m],{id:d,shouldBreak:c.includes(l.name)||(0,a.originallyHadLineBreaks)(e,t)||(0,a.isAttributeNode)(l)||(0,a.isDeeplyNested)(l)})},t.printLiquidRawTag=function(e,t,n,{isLiquidStatement:i}){let r=[];const o=e.getValue(),s=""===o.body.value.trim(),u="schema"===o.name&&!t.indentSchema,c=o.isIndentationSensitive||!(0,a.hasLineBreakInRange)(o.source,o.body.position.start,o.body.position.end),l=i?[o.name]:p(["{%",o.whitespaceStart," ",o.name," ",o.markup?`${o.markup} `:"",o.whitespaceEnd,"%}"]),d=i?["end",o.name]:["{%",o.whitespaceStart," ","end",o.name," ",o.whitespaceEnd,"%}"];return r=c?[o.source.slice(o.blockStartPosition.end,o.blockEndPosition.start)]:s?[h]:u?[h,e.call(n,"body"),h]:[g([h,e.call(n,"body")]),h],[l,...r,d]},t.printLiquidBranch=function(e,t,n,i){const r=e.getValue();if(!r.name)return function(e,t,n,i){const r=e.getValue(),o=e.getParentNode();if((0,a.isEmpty)(r.children)&&1===o.children.length)return"";if((0,a.isEmpty)(r.children)&&!r.hasDanglingWhitespace)return"";if(r.hasDanglingWhitespace)return m(""," ");const s=r.next&&r.children.length>0&&r.source.slice((0,a.last)(r.children).position.end,r.next.position.start).replace(/ |\t/g,"").length>=2;return g([T(o),(0,u.printChildren)(e,t,n,i),s?C:""])}(e,t,n,i);const o=r.prev,s=o&&(0,a.isEmpty)(o.children),c=r.hasLeadingWhitespace&&!s?y:D,l=r.next&&r.children.length>0&&r.source.slice((0,a.last)(r.children).position.end,r.next.position.start).replace(/ |\t/g,"").length>=2;return[c,S(e,0,n,i),g([T(r),(0,u.printChildren)(e,t,n,i),l?C:""])]}},"./dist/printer/print/tag.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNodeContent=t.printOpeningTagEndMarker=t.printOpeningTagStartMarker=t.printOpeningTagPrefix=t.printOpeningTagStart=t.printOpeningTag=t.needsToBorrowParentOpeningTagEndMarker=t.needsToBorrowNextOpeningTagStartMarker=t.needsToBorrowParentClosingTagStartMarker=t.needsToBorrowLastChildClosingTagEndMarker=t.needsToBorrowPrevClosingTagEndMarker=t.printClosingTagEndMarker=t.printClosingTagStartMarker=t.printClosingTagSuffix=t.printClosingTagEnd=t.printClosingTagStart=t.printClosingTag=void 0;const i=n("prettier"),r=n("./dist/types.js"),o=n("./dist/printer/utils/index.js"),{builders:{breakParent:s,indent:a,join:u,line:c,softline:l,hardline:d}}=i.doc,{replaceTextEndOfLine:p}=i.doc.utils;function h(e,t){return e.lastChild&&E(e.lastChild)?"":[g(e,t),y(e)]}function m(e,t){return(e.next?v(e.next):S(e.parentNode))?"":[D(e),f(e,t)]}function g(e,t){return S(e)?D(e.lastChild):""}function f(e,t){return E(e)?y(e.parentNode):b(e)?x(e.next):""}function y(e,t){if(!e)return"";if(C(e))return"";switch(e.type){case r.NodeTypes.HtmlElement:return`</${_(e)}`;case r.NodeTypes.HtmlRawNode:return`</${e.name}`;default:return""}}function D(e,t){return e?C(e)?"":e.type===r.NodeTypes.HtmlSelfClosingElement?"/>":">":""}function C(e,t){return!(0,o.hasNoCloseMarker)(e)&&!e.blockEndPosition&&((0,o.hasPrettierIgnore)(e)||(0,o.shouldPreserveContent)(e.parentNode))}function v(e){return!(0,o.isLiquidNode)(e)&&e.prev&&(0,o.isHtmlNode)(e.prev)&&(0,o.hasMeaningfulLackOfLeadingWhitespace)(e)}function S(e){return(0,o.isHtmlNode)(e)&&e.lastChild&&(0,o.hasMeaningfulLackOfTrailingWhitespace)(e.lastChild)&&(0,o.isHtmlNode)((0,o.getLastDescendant)(e.lastChild))&&!(0,o.isPreLikeNode)(e)}function E(e){return(0,o.isHtmlNode)(e.parentNode)&&!e.next&&(0,o.hasMeaningfulLackOfTrailingWhitespace)(e)&&!(0,o.isLiquidNode)(e)&&((0,o.isTextLikeNode)((0,o.getLastDescendant)(e))||(0,o.isLiquidNode)((0,o.getLastDescendant)(e)))}function b(e){return e.next&&(0,o.isHtmlNode)(e.next)&&(0,o.isTextLikeNode)(e)&&(0,o.hasMeaningfulLackOfTrailingWhitespace)(e)}function T(e){return(0,o.isHtmlNode)(e.parentNode)&&!e.prev&&(0,o.hasMeaningfulLackOfLeadingWhitespace)(e)&&!(0,o.isLiquidNode)(e)}function A(e,t,n,i){const r=e.getValue();if((0,o.isHtmlComment)(r))return"";if(0===r.attributes.length)return(0,o.isSelfClosing)(r)?" ":"";const h=(0,o.isPrettierIgnoreAttributeNode)(r.prev),m=e.map((e=>{const t=e.getValue();let r="";return t.prev&&(0,o.hasMoreThanOneNewLineBetweenNodes)(t.source,t.prev,t)&&(r=d),[r,n(e,{trailingSpaceGroupId:i})]}),"attributes"),g=r.source.slice(r.blockStartPosition.start,(0,o.last)(r.attributes).position.end).includes("\n"),f=t.singleLineLinkTags&&"string"==typeof r.name&&"link"===r.name,y=((0,o.isHtmlElement)(r)&&r.children.length>0||(0,o.isVoidElement)(r)||(0,o.isSelfClosing)(r))&&!g&&1===r.attributes.length&&!(0,o.isLiquidNode)(r.attributes[0]),D=f||y,C=D?" ":t.singleAttributePerLine&&r.attributes.length>1?d:c,v=h?p(r.source.slice((0,o.first)(r.attributes).position.start,(0,o.last)(r.attributes).position.end)):u(C,m);let E;return E=r.firstChild&&T(r.firstChild)||(0,o.hasNoCloseMarker)(r)&&S(r.parentNode)||D||t.bracketSameLine?(0,o.isSelfClosing)(r)?" ":"":(0,o.isSelfClosing)(r)?c:l,[a([D?" ":c,g?s:"",v]),E]}function F(e){return e.firstChild&&T(e.firstChild)?"":k(e)}function R(e,t){return e.prev&&b(e.prev)?"":[w(e,t),x(e)]}function w(e,t){return T(e)?k(e.parentNode):v(e)?D(e.prev):""}function x(e){if(!e)return"";switch(e.type){case r.NodeTypes.HtmlComment:return"\x3c!--";case r.NodeTypes.HtmlElement:case r.NodeTypes.HtmlSelfClosingElement:return`<${_(e)}`;case r.NodeTypes.HtmlVoidElement:case r.NodeTypes.HtmlRawNode:return`<${e.name}`;default:return""}}function k(e){if(!e)return"";switch(e.type){case r.NodeTypes.HtmlComment:return"--\x3e";case r.NodeTypes.HtmlSelfClosingElement:case r.NodeTypes.HtmlVoidElement:return"";case r.NodeTypes.HtmlElement:case r.NodeTypes.HtmlRawNode:default:return">"}}function _(e){return e.name.map((e=>e.type===r.NodeTypes.TextNode?e.value:"string"==typeof e.markup?`{{ ${e.markup.trim()} }}`:`{{ ${e.markup.rawSource} }}`)).join("")}t.printClosingTag=function(e,t){return[(0,o.hasNoCloseMarker)(e)?"":h(e,t),m(e,t)]},t.printClosingTagStart=h,t.printClosingTagEnd=m,t.printClosingTagSuffix=f,t.printClosingTagStartMarker=y,t.printClosingTagEndMarker=D,t.needsToBorrowPrevClosingTagEndMarker=v,t.needsToBorrowLastChildClosingTagEndMarker=S,t.needsToBorrowParentClosingTagStartMarker=E,t.needsToBorrowNextOpeningTagStartMarker=b,t.needsToBorrowParentOpeningTagEndMarker=T,t.printOpeningTag=function(e,t,n,i){const r=e.getValue();return[R(r,t),A(e,t,n,i),(0,o.hasNoCloseMarker)(r)?"":F(r)]},t.printOpeningTagStart=R,t.printOpeningTagPrefix=w,t.printOpeningTagStartMarker=x,t.printOpeningTagEndMarker=k,t.getNodeContent=function(e,t){let n=e.blockStartPosition.end;e.firstChild&&T(e.firstChild)&&(n-=k(e).length);let i=e.blockEndPosition.start;return e.lastChild&&E(e.lastChild)?i+=y(e).length:e.lastChild&&S(e)&&(i-=D(e.lastChild).length),t.originalText.slice(n,i)}},"./dist/printer/printer-liquid-html.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.printerLiquidHtml=void 0;const i=n("prettier"),r=n("./dist/types.js"),o=n("./dist/utils.js"),s=n("./dist/printer/print-preprocess.js"),a=n("./dist/printer/utils/index.js"),u=n("./dist/printer/print/element.js"),c=n("./dist/printer/print/tag.js"),l=n("./dist/printer/print/liquid.js"),d=n("./dist/printer/print/children.js"),p=n("./dist/printer/embed.js"),h=n("./dist/parser/index.js"),m=n("./dist/parser/conditional-comment.js"),{builders:g,utils:f}=i.doc,{fill:y,group:D,hardline:C,indent:v,join:S,line:E,softline:b}=g,T={'"':"'","'":'"'};function A(e,t,n){return e.getValue().name,S("",e.map((e=>{const t=e.getValue();return"string"==typeof t?t:f.removeLines(n(e))}),"name"))}t.printerLiquidHtml={print:function(e,t,n,i={}){var s;const p=e.getValue();switch(p.type){case r.NodeTypes.Document:return[(0,d.printChildren)(e,t,n,i),C];case r.NodeTypes.HtmlElement:case r.NodeTypes.HtmlVoidElement:case r.NodeTypes.HtmlSelfClosingElement:case r.NodeTypes.HtmlRawNode:return(0,u.printElement)(e,t,n,i);case r.NodeTypes.RawMarkup:{if((()=>{switch(p.kind){case h.RawMarkupKinds.typescript:case h.RawMarkupKinds.javascript:return p.value.includes("`");default:return!1}})())return p.value;const e=(0,a.bodyLines)(p.value),t=!!(null===(s=p.value.split(/\r?\n/)[0])||void 0===s?void 0:s.match(/\S/));return e.length>0&&e.find((e=>""!==e.trim()))?S(C,(0,a.reindent)(e,t)):b}case r.NodeTypes.LiquidDrop:return(0,l.printLiquidDrop)(e,t,n,i);case r.NodeTypes.LiquidRawTag:return(0,l.printLiquidRawTag)(e,t,n,i);case r.NodeTypes.LiquidTag:return(0,l.printLiquidTag)(e,t,n,i);case r.NodeTypes.LiquidBranch:return(0,l.printLiquidBranch)(e,t,n,i);case r.NodeTypes.AttrEmpty:return A(e,0,n);case r.NodeTypes.AttrUnquoted:case r.NodeTypes.AttrSingleQuoted:case r.NodeTypes.AttrDoubleQuoted:return function(e,t,n){const i=e.getValue(),r=Symbol("attr-group-id"),o=i.source.slice(i.attributePosition.start,i.attributePosition.end),s=t.singleQuote?"'":'"',u=i.value.find((e=>(0,a.isTextLikeNode)(e)&&e.value.includes(s)))?T[s]:s;return[A(e,0,n),"=",u,(0,a.hasLineBreakInRange)(i.source,i.attributePosition.start,i.attributePosition.end)?D([v([b,S(C,(0,a.reindent)((0,a.bodyLines)(o),!0))]),b],{id:r}):o,u]}(e,t,n);case r.NodeTypes.HtmlDoctype:return p.legacyDoctypeString?p.source.slice(p.position.start,p.position.end):"<!doctype html>";case r.NodeTypes.HtmlComment:{const e=(0,m.getConditionalComment)(p.source.slice(p.position.start,p.position.end));if(e){const{startTag:t,body:n,endTag:i}=e;return[t,D([v([E,S(C,(0,a.reindent)((0,a.bodyLines)(n),!0))]),E]),i]}return p.body.includes("prettier-ignore")||p.body.startsWith("display:")||p.body.startsWith("white-space:")?p.source.slice(p.position.start,p.position.end):["\x3c!--",D([v([E,S(C,(0,a.reindent)((0,a.bodyLines)(p.body),!0))]),E]),"--\x3e"]}case r.NodeTypes.AssignMarkup:return[p.name," = ",e.call(n,"value")];case r.NodeTypes.CycleMarkup:{const t=[];p.groupName&&t.push(e.call(n,"groupName"),":");const i=p.args.length>1?E:" ";return t.push(i,S([",",i],e.map((e=>n(e)),"args"))),t}case r.NodeTypes.ForMarkup:{const t=[p.variableName," in ",e.call(n,"collection")];return p.reversed&&t.push(E,"reversed"),p.args.length>0&&t.push([E,S(E,e.map((e=>n(e)),"args"))]),t}case r.NodeTypes.PaginateMarkup:{const t=[e.call(n,"collection"),E,"by ",e.call(n,"pageSize")];return p.args.length>0&&t.push([",",E,S([",",E],e.map((e=>n(e)),"args"))]),t}case r.NodeTypes.RenderMarkup:{const t=[e.call(n,"snippet")];if(p.variable){const i=p.alias?E:" ";t.push(i,e.call(n,"variable"))}return p.alias&&t.push(" ","as"," ",p.alias),p.args.length>0&&t.push(",",E,S([",",E],e.map((e=>n(e)),"args"))),t}case r.NodeTypes.RenderVariableExpression:return[p.kind," ",e.call(n,"name")];case r.NodeTypes.LogicalExpression:return[e.call(n,"left"),E,p.relation," ",e.call(n,"right")];case r.NodeTypes.Comparison:return D([e.call(n,"left"),v([E,p.comparator," ",e.call(n,"right")])]);case r.NodeTypes.LiquidVariable:{const t=e.call(n,"expression");let i="";return p.filters.length>0&&(i=[E,S(E,e.map((e=>n(e)),"filters"))]),[t,i]}case r.NodeTypes.LiquidFilter:{let t=[];if(p.args.length>0){const i=e.map((e=>n(e)),"args");if(p.args[0].type!==r.NodeTypes.NamedArgument){const[e,...n]=i;t=[": ",e,(0,a.isEmpty)(n)?"":v([",",E,S([",",E],n)])]}else t=[":",v([E,S([",",E],i)])]}return D(["| ",p.name,...t])}case r.NodeTypes.NamedArgument:return[p.name,": ",e.call(n,"value")];case r.NodeTypes.TextNode:return function(e,t,n){const i=e.getValue();if(function(e){return e.parentNode&&e.parentNode.type===r.NodeTypes.Document&&!e.prev&&/^---\r?\n/.test(e.value)}(i))return i.value;if(i.value.match(/^\s*$/))return"";const o=i.value.split(/(\r?\n){2,}/).filter(Boolean).map((e=>{let t=[];const n=e.trim().split(/\s+/g);let i=!0;for(let e=0;e<n.length;e++){const r=n[e];i?i=!1:t.push(E),t.push(r)}return y(t)}));return[(0,c.printOpeningTagPrefix)(i,t),S(C,o),(0,c.printClosingTagSuffix)(i,t)]}(e,t);case r.NodeTypes.YAMLFrontmatter:return["---",C,p.body,"---"];case r.NodeTypes.String:{const e=t.liquidSingleQuote?"'":'"',n=p.value.includes(e)?T[e]:e;return[n,p.value,n]}case r.NodeTypes.Number:return i.truncate?p.value.replace(/\.\d+$/,""):p.value;case r.NodeTypes.Range:return["(",e.call((e=>n(e,{truncate:!0})),"start"),"..",e.call((e=>n(e,{truncate:!0})),"end"),")"];case r.NodeTypes.LiquidLiteral:return"nil"===p.keyword?"null":p.keyword;case r.NodeTypes.VariableLookup:{const t=[];p.name&&t.push(p.name);const i=e.map(((e,t)=>{const i=e.getValue();if(i.type===r.NodeTypes.String){const r=i.value;return(0!==t||p.name)&&/^[a-z0-9_]+\??$/i.test(r)?[".",r]:["[",n(e),"]"]}return["[",n(e),"]"]}),"lookups");return[...t,...i]}default:return(0,o.assertNever)(p)}},embed:p.embed,preprocess:s.preprocess,getVisitorKeys:(e,t)=>Object.keys(e).filter((e=>!t.has(e)&&!r.nonTraversableProperties.has(e)))}},"./dist/printer/utils/array.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmpty=t.intersperse=t.first=t.last=void 0,t.last=function(e){return e[e.length-1]},t.first=function(e){return e[0]},t.intersperse=function(e,t){return e.flatMap((e=>[t,e])).slice(1)},t.isEmpty=function(e){return 0===e.length}},"./dist/printer/utils/index.js":function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.isNonEmptyArray=t.ifBreakChain=t.FORCE_BREAK_GROUP_ID=t.FORCE_FLAT_GROUP_ID=t.getWhitespaceTrim=t.isDeeplyNested=t.getSource=void 0;const o=n("prettier"),s=n("./dist/parser/index.js"),a=n("./dist/printer/utils/array.js");r(n("./dist/printer/utils/array.js"),t),r(n("./dist/printer/utils/string.js"),t),r(n("./dist/printer/utils/node.js"),t);const{builders:u}=o.doc,{ifBreak:c}=u;function l(e,n,i){return i.includes(t.FORCE_BREAK_GROUP_ID)?e:i.includes(t.FORCE_FLAT_GROUP_ID)?n:i.reduce(((t,n)=>c(e,t,{groupId:n})),n)}t.getSource=function(e){return e.getValue().source},t.isDeeplyNested=function e(t){return!!t.children&&((0,s.isBranchedTag)(t)?!!t.children.find((t=>e(t))):!!t.children.find((e=>!(0,a.isEmpty)(e.children||[]))))},t.getWhitespaceTrim=function(e,t,n){return l(t?"-":e,e,Array.isArray(n)?n:[n])},t.FORCE_FLAT_GROUP_ID=Symbol("force-no-break"),t.FORCE_BREAK_GROUP_ID=Symbol("force-break"),t.ifBreakChain=l,t.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0}},"./dist/printer/utils/node.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLastDescendant=t.hasMeaningfulLackOfDanglingWhitespace=t.hasMeaningfulLackOfTrailingWhitespace=t.hasMeaningfulLackOfLeadingWhitespace=t.preferHardlineAsTrailingSpaces=t.preferHardlineAsLeadingSpaces=t.preferHardlineAsSurroundingSpaces=t.forceBreakChildren=t.forceBreakContent=t.forceNextEmptyLine=t.isPrettierIgnoreAttributeNode=t.hasPrettierIgnore=t.isPrettierIgnoreNode=t.isPrettierIgnoreLiquidNode=t.isPrettierIgnoreHtmlNode=t.shouldPreserveContent=t.hasNonTextChild=t.isAttributeNode=t.isHtmlNode=t.isMultilineLiquidTag=t.isLiquidNode=t.isTextLikeNode=t.isHtmlElement=t.isVoidElement=t.isSelfClosing=t.isHtmlComment=t.hasNoCloseMarker=t.isPreLikeNode=t.isScriptLikeTag=void 0;const i=n("./dist/types.js"),r=n("./dist/printer/utils/array.js");function o(e){return e.cssWhitespace.startsWith("pre")}function s(e){return e.type===i.NodeTypes.HtmlComment}function a(e){return e.type===i.NodeTypes.HtmlSelfClosingElement}function u(e){return e.type===i.NodeTypes.HtmlVoidElement}function c(e){return!!e&&e.type===i.NodeTypes.TextNode}function l(e){return!!e&&i.LiquidNodeTypes.includes(e.type)}function d(e){return!!e&&i.HtmlNodeTypes.includes(e.type)}function p(e){return e.children&&e.children.some((e=>e.type!==i.NodeTypes.TextNode))}function h(e){return!!e&&e.type===i.NodeTypes.HtmlComment&&/^\s*prettier-ignore(?=\s|$)/m.test(e.body)}function m(e){return!!e&&e.type===i.NodeTypes.LiquidTag&&"#"===e.name&&/^\s*prettier-ignore(?=\s|$)/m.test(e.markup)}function g(e){return m(e)||h(e)}function f(e){const t=e.trim().match(/prettier-ignore-attribute(?:s?)(?:\s+(.+))?$/s);return!!t&&(t[1],!0)}function y(e){return e.type===i.NodeTypes.HtmlElement&&e.children.length>0&&(T(["html","head","ul","ol","select"],e.name)||e.cssDisplay.startsWith("table")&&"table-cell"!==e.cssDisplay)}function D(e){switch(e.type){case i.NodeTypes.HtmlComment:return!0;case i.NodeTypes.HtmlElement:return T(["script","select"],e.name);case i.NodeTypes.LiquidTag:return!(e.prev&&c(e.prev)||e.next&&c(e.next))&&e.children&&e.children.length>0}return!1}function C(e){return D(e)||l(e)&&e.next&&(l(e.next)||d(e.next))||e.type===i.NodeTypes.HtmlElement&&T(["br"],e.name)||v(e)}function v(e){return S(e)&&E(e)}function S(e){return e.type!==i.NodeTypes.Document&&e.hasLeadingWhitespace&&b(e.source,e.prev?e.prev.position.end:e.parentNode.blockStartPosition?e.parentNode.blockStartPosition.end:e.parentNode.position.start,e.position.start)}function E(e){return e.type!==i.NodeTypes.Document&&e.hasTrailingWhitespace&&b(e.source,e.position.end,e.next?e.next.position.start:e.parentNode.blockEndPosition?e.parentNode.blockEndPosition.start:e.parentNode.position.end)}function b(e,t,n){const i=e.indexOf("\n",t);return-1!==i&&i<n}function T(e,t){return 1===t.length&&t[0].type===i.NodeTypes.TextNode&&e.includes(t[0].value)}t.isScriptLikeTag=function(e){return e.type===i.NodeTypes.HtmlRawNode},t.isPreLikeNode=o,t.hasNoCloseMarker=function(e){return a(e)||u(e)||s(e)},t.isHtmlComment=s,t.isSelfClosing=a,t.isVoidElement=u,t.isHtmlElement=function(e){return e.type===i.NodeTypes.HtmlElement},t.isTextLikeNode=c,t.isLiquidNode=l,t.isMultilineLiquidTag=function(e){return!!e&&e.type===i.NodeTypes.LiquidTag&&!!e.children&&!(0,r.isEmpty)(e.children)},t.isHtmlNode=d,t.isAttributeNode=function(e){return d(e.parentNode)&&-1!==e.parentNode.attributes.indexOf(e)},t.hasNonTextChild=p,t.shouldPreserveContent=function(e){return!!o(e)},t.isPrettierIgnoreHtmlNode=h,t.isPrettierIgnoreLiquidNode=m,t.isPrettierIgnoreNode=g,t.hasPrettierIgnore=function(e){return g(e)||g(e.prev)},t.isPrettierIgnoreAttributeNode=function(e){return!!e&&(e.type===i.NodeTypes.HtmlComment?f(e.body):e.type===i.NodeTypes.LiquidTag&&"#"===e.name&&f(e.markup))},t.forceNextEmptyLine=function(e){if(!e)return!1;if(!e.next)return!1;const t=e.source;let n;return n=t.indexOf("\n",e.position.end),-1!==n&&(n=t.indexOf("\n",n+1),-1!==n&&n<e.next.position.start)},t.forceBreakContent=function(e){return y(e)||e.type===i.NodeTypes.HtmlElement&&e.children.length>0&&(T(["body","script","style"],e.name)||e.children.some((e=>p(e))))||e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.type!==i.NodeTypes.TextNode&&S(e.firstChild)&&(!e.lastChild.isTrailingWhitespaceSensitive||E(e.lastChild))},t.forceBreakChildren=y,t.preferHardlineAsSurroundingSpaces=D,t.preferHardlineAsLeadingSpaces=function(e){return D(e)||l(e)&&e.prev&&l(e.prev)||e.prev&&C(e.prev)||v(e)},t.preferHardlineAsTrailingSpaces=C,t.hasMeaningfulLackOfLeadingWhitespace=function(e){return e.isLeadingWhitespaceSensitive&&!e.hasLeadingWhitespace},t.hasMeaningfulLackOfTrailingWhitespace=function(e){return e.isTrailingWhitespaceSensitive&&!e.hasTrailingWhitespace},t.hasMeaningfulLackOfDanglingWhitespace=function(e){return e.isDanglingWhitespaceSensitive&&!e.hasDanglingWhitespace},t.getLastDescendant=function e(t){return t.lastChild?e(t.lastChild):t}},"./dist/printer/utils/string.js":(e,t)=>{"use strict";function n(e,t,n){const i=e.indexOf("\n",t);return 0<=i&&i<n}Object.defineProperty(t,"__esModule",{value:!0}),t.hasMoreThanOneNewLineBetweenNodes=t.hasLineBreakInRange=t.originallyHadLineBreaks=t.reindent=t.markupLines=t.bodyLines=t.trimEnd=t.trim=t.isWhitespace=void 0,t.isWhitespace=function(e,t){return!(t<0||t>=e.length||!e[t].match(/\s/))},t.trim=e=>e.trim(),t.trimEnd=e=>e.trimEnd(),t.bodyLines=function(e){return e.replace(/^(?: |\t)*(\r?\n)*|\s*$/g,"").split(/\r?\n/)},t.markupLines=function(e){return e.trim().split("\n")},t.reindent=function(e,n=!1){const i=e.filter(((e,t)=>!n||t>0)).filter((e=>e.trim().length>0)).map((e=>e.match(/^\s*/)[0].length)).reduce(((e,t)=>Math.min(e,t)),1/0);if(i===1/0)return e;const r=new RegExp("^"+"\\s".repeat(i));return e.map((e=>e.replace(r,""))).map(t.trimEnd)},t.originallyHadLineBreaks=function(e,{locStart:t,locEnd:i}){const r=e.getValue();return n(r.source,t(r),i(r))},t.hasLineBreakInRange=n,t.hasMoreThanOneNewLineBetweenNodes=function(e,t,n){var i;return!(!t||!n)&&((null===(i=e.slice(t.position.end,n.position.start).match(/\n/g))||void 0===i?void 0:i.length)||0)>1}},"./dist/types.js":(e,t)=>{"use strict";var n,i,r;Object.defineProperty(t,"__esModule",{value:!0}),t.nonTraversableProperties=t.LiquidNodeTypes=t.HtmlNodeTypes=t.Comparators=t.NamedTags=t.isLiquidHtmlNode=t.NodeTypes=void 0,function(e){e.Document="Document",e.LiquidRawTag="LiquidRawTag",e.LiquidTag="LiquidTag",e.LiquidBranch="LiquidBranch",e.LiquidDrop="LiquidDrop",e.HtmlSelfClosingElement="HtmlSelfClosingElement",e.HtmlVoidElement="HtmlVoidElement",e.HtmlDoctype="HtmlDoctype",e.HtmlComment="HtmlComment",e.HtmlElement="HtmlElement",e.HtmlRawNode="HtmlRawNode",e.AttrSingleQuoted="AttrSingleQuoted",e.AttrDoubleQuoted="AttrDoubleQuoted",e.AttrUnquoted="AttrUnquoted",e.AttrEmpty="AttrEmpty",e.TextNode="TextNode",e.YAMLFrontmatter="YAMLFrontmatter",e.LiquidVariable="LiquidVariable",e.LiquidFilter="LiquidFilter",e.NamedArgument="NamedArgument",e.LiquidLiteral="LiquidLiteral",e.String="String",e.Number="Number",e.Range="Range",e.VariableLookup="VariableLookup",e.Comparison="Comparison",e.LogicalExpression="LogicalExpression",e.AssignMarkup="AssignMarkup",e.CycleMarkup="CycleMarkup",e.ForMarkup="ForMarkup",e.PaginateMarkup="PaginateMarkup",e.RawMarkup="RawMarkup",e.RenderMarkup="RenderMarkup",e.RenderVariableExpression="RenderVariableExpression"}(n=t.NodeTypes||(t.NodeTypes={})),t.isLiquidHtmlNode=function(e){return null!==e&&"object"==typeof e&&"type"in e&&n.hasOwnProperty(e.type)},(r=t.NamedTags||(t.NamedTags={})).assign="assign",r.capture="capture",r.case="case",r.cycle="cycle",r.decrement="decrement",r.echo="echo",r.elsif="elsif",r.for="for",r.form="form",r.if="if",r.include="include",r.increment="increment",r.layout="layout",r.liquid="liquid",r.paginate="paginate",r.render="render",r.section="section",r.sections="sections",r.tablerow="tablerow",r.unless="unless",r.when="when",(i=t.Comparators||(t.Comparators={})).CONTAINS="contains",i.EQUAL="==",i.GREATER_THAN=">",i.GREATER_THAN_OR_EQUAL=">=",i.LESS_THAN="<",i.LESS_THAN_OR_EQUAL="<=",i.NOT_EQUAL="!=",t.HtmlNodeTypes=[n.HtmlElement,n.HtmlRawNode,n.HtmlVoidElement,n.HtmlSelfClosingElement],t.LiquidNodeTypes=[n.LiquidTag,n.LiquidDrop,n.LiquidBranch,n.LiquidRawTag],t.nonTraversableProperties=new Set(["parentNode","prev","next","firstChild","lastChild"])},"./dist/utils.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dropLast=t.deepGet=t.locEnd=t.locStart=t.assertNever=void 0,t.assertNever=function(e){throw new Error(`Unexpected object: ${e.type}`)},t.locStart=function(e){return e.position.start},t.locEnd=function(e){return e.position.end},t.deepGet=function(e,t){return e.reduce(((e,t)=>{if(e&&void 0!==e[t])return e[t]}),t)},t.dropLast=function(e,t){const n=[...t];for(let t=0;t<e;t++)n.pop();return n}},"./grammar/liquid-html.ohm.js":e=>{e.exports=String.raw`Helpers {
  Node = TextNode*
  TextNode = AnyExceptPlus<openControl>
  openControl = empty

  empty = /* nothing */
  anyExcept<lit> = (~ lit any)
  anyExceptStar<lit> = (~ lit any)*
  anyExceptPlus<lit> = (~ lit any)+
  AnyExcept<lit> = (~ lit any)
  AnyExceptPlus<lit> = (~ lit any)+
  AnyExceptStar<lit> = (~ lit any)*
  identifierCharacter = alnum | "_" | "-"

  orderedListOf<a, b, sep> =
    | nonemptyOrderedListOf<a, b, sep>
    | emptyListOf<a, sep>
  nonemptyOrderedListOf<a, b, sep> =
    | nonemptyListOf<b, sep>
    | nonemptyOrderedListOfBoth<a, b, sep>
    | nonemptyListOf<a, sep>
  nonemptyOrderedListOfBoth<a, b, sep> =
    nonemptyListOf<a, sep> (sep nonemptyListOf<b, sep>)

  singleQuote = "'" | "‘" | "’"
  doubleQuote = "\"" | "“" | "”"
  controls = "\u{007F}".."\u{009F}"
  noncharacters = "\u{FDD0}".."\u{FDEF}"
  newline = "\r"? "\n"
}

Liquid <: Helpers {
  Node := (liquidNode | TextNode)*
  openControl := "{{" | "{%"
  endOfTagName = &("-%}" | "-}}" | "%}" | "}}")
  endOfVarName = ~identifierCharacter
  endOfIdentifier = endOfTagName | endOfVarName

  liquidNode =
    | liquidBlockComment
    | liquidRawTag
    | liquidDrop
    | liquidTagClose
    | liquidTagOpen
    | liquidTag
    | liquidInlineComment

  liquidTag =
    | liquidTagAssign
    | liquidTagCycle
    | liquidTagDecrement
    | liquidTagEcho
    | liquidTagElsif
    | liquidTagInclude
    | liquidTagIncrement
    | liquidTagLayout
    | liquidTagLiquid
    | liquidTagRender
    | liquidTagSection
    | liquidTagSections
    | liquidTagWhen
    | liquidTagBaseCase

  liquidTagOpen =
    | liquidTagOpenCase
    | liquidTagOpenCapture
    | liquidTagOpenForm
    | liquidTagOpenFor
    | liquidTagOpenTablerow
    | liquidTagOpenIf
    | liquidTagOpenPaginate
    | liquidTagOpenUnless
    | liquidTagOpenBaseCase
  liquidTagClose = "{%" "-"? space* "end" blockName space* tagMarkup "-"? "%}"

  // These two are the same but transformed differently
  liquidTagRule<name, markup> =
    "{%" "-"? space* (name endOfIdentifier) space* markup "-"? "%}"
  liquidTagOpenRule<name, markup> =
    "{%" "-"? space* (name endOfIdentifier) space* markup "-"? "%}"

  liquidTagBaseCase = liquidTagRule<liquidTagName, tagMarkup>

  liquidTagEcho = liquidTagRule<"echo", liquidTagEchoMarkup>
  liquidTagEchoMarkup = liquidVariable

  liquidTagAssign = liquidTagRule<"assign", liquidTagAssignMarkup>
  liquidTagAssignMarkup = variableSegment space* "=" space* liquidVariable

  liquidTagCycle = liquidTagRule<"cycle", liquidTagCycleMarkup>
  liquidTagCycleMarkup = (liquidExpression ":")? space* nonemptyListOf<liquidExpression, argumentSeparator> space*

  liquidTagIncrement = liquidTagRule<"increment", variableSegmentAsLookupMarkup>
  liquidTagDecrement = liquidTagRule<"decrement", variableSegmentAsLookupMarkup>
  liquidTagOpenCapture = liquidTagOpenRule<"capture", variableSegmentAsLookupMarkup>
  variableSegmentAsLookupMarkup = variableSegmentAsLookup space*

  liquidTagSection = liquidTagRule<"section", liquidTagSectionMarkup>
  liquidTagSectionMarkup = liquidString space*

  liquidTagSections = liquidTagRule<"sections", liquidTagSectionsMarkup>
  liquidTagSectionsMarkup = liquidString space*

  liquidTagLayout = liquidTagRule<"layout", liquidTagLayoutMarkup>
  liquidTagLayoutMarkup = liquidExpression space*

  // We'll black hole the statement and switch parser in the cst builder
  // We do this because it's technically the same grammar (with minor redefinitions)
  // and it would be a huge chore and maintenance hell to rewrite all the rules with
  // hspace = " " | "\t"
  //
  // The alternative is that this grammar parses the {% liquid tagMarkup %} as its own string,
  // and then we switch to the LiquidStatement grammar that
  // redefines liquidTagOpenRule, liquidTagRule, and space.
  liquidTagLiquid = liquidTagRule<"liquid", liquidTagLiquidMarkup>
  liquidTagLiquidMarkup = tagMarkup

  liquidTagInclude = liquidTagRule<"include", liquidTagRenderMarkup>
  liquidTagRender = liquidTagRule<"render", liquidTagRenderMarkup>
  liquidTagRenderMarkup =
    snippetExpression renderVariableExpression? renderAliasExpression? (argumentSeparatorOptionalComma tagArguments) space*
  snippetExpression = liquidString | variableSegmentAsLookup
  renderVariableExpression = space+ ("for" | "with") space+ liquidExpression
  renderAliasExpression = space+ "as" space+ variableSegment

  liquidTagOpenBaseCase = liquidTagOpenRule<blockName, tagMarkup>

  liquidTagOpenForm = liquidTagOpenRule<"form", liquidTagOpenFormMarkup>
  liquidTagOpenFormMarkup = arguments space*

  liquidTagOpenFor = liquidTagOpenRule<"for", liquidTagOpenForMarkup>
  liquidTagOpenForMarkup =
    variableSegment space* "in" space* liquidExpression
    (space* "reversed")? argumentSeparatorOptionalComma
    tagArguments space*

  // It's the same, the difference is support for different named arguments
  liquidTagOpenTablerow = liquidTagOpenRule<"tablerow", liquidTagOpenForMarkup>

  liquidTagOpenCase = liquidTagOpenRule<"case", liquidTagOpenCaseMarkup>
  liquidTagOpenCaseMarkup = liquidExpression space*

  liquidTagWhen = liquidTagRule<"when", liquidTagWhenMarkup>
  liquidTagWhenMarkup = nonemptyListOf<liquidExpression, whenMarkupSep> space*
  whenMarkupSep = space* ("," | "or" ~identifier) space*

  liquidTagOpenIf = liquidTagOpenRule<"if", liquidTagOpenConditionalMarkup>
  liquidTagOpenUnless = liquidTagOpenRule<"unless", liquidTagOpenConditionalMarkup>
  liquidTagElsif = liquidTagRule<"elsif", liquidTagOpenConditionalMarkup>

  liquidTagOpenConditionalMarkup = nonemptyListOf<condition, conditionSeparator> space*
  conditionSeparator = &logicalOperator
  condition = logicalOperator? space* (comparison | liquidExpression) space*
  logicalOperator = ("and" | "or") ~identifier
  comparison = liquidExpression space* comparator space* liquidExpression
  comparator =
    ( "=="
    | "!="
    | ">="
    | "<="
    | ">"
    | "<")
    | ("contains" ~identifier)

  liquidTagOpenPaginate = liquidTagOpenRule<"paginate", liquidTagOpenPaginateMarkup>
  liquidTagOpenPaginateMarkup =
    liquidExpression space+ "by" space+ liquidExpression argumentSeparatorOptionalComma tagArguments space*

  liquidDrop = "{{" "-"? space* liquidDropCases "-"? "}}"
  liquidDropCases = liquidVariable | liquidDropBaseCase
  liquidDropBaseCase = anyExceptStar<("-}}" | "}}")>
  liquidInlineComment = "{%" "-"? space* "#" space? tagMarkup "-"? "%}"

  liquidRawTag =
    | liquidRawTagImpl<"raw">
    | liquidRawTagImpl<"javascript">
    | liquidRawTagImpl<"schema">
    | liquidRawTagImpl<"stylesheet">
    | liquidRawTagImpl<"style">
  liquidRawTagImpl<name> =
    "{%" "-"? space* (name endOfIdentifier) space* tagMarkup "-"? "%}"
    anyExceptStar<liquidRawTagClose<name>>
    "{%" "-"? space* "end" (name endOfIdentifier) space* "-"? "%}"
  liquidRawTagClose<name> =
    "{%" "-"? space* "end" (name endOfIdentifier) space* "-"? "%}"

  liquidBlockComment =
    commentBlockStart
      (liquidBlockComment | anyExceptPlus<(commentBlockStart | commentBlockEnd)>)*
    commentBlockEnd
  commentBlockStart = "{%" "-"? space* ("comment"    endOfIdentifier) space* tagMarkup "-"? "%}"
  commentBlockEnd   = "{%" "-"? space* ("endcomment" endOfIdentifier) space* tagMarkup "-"? "%}"

  // In order for the grammar to "fallback" to the base case, this
  // rule must pass if and only if we support what we parse. This
  // implies that—since we don't support filters yet—we have a
  // positive lookahead on "-}}" or "}}" in the rule. We do this
  // because we'd otherwise positively match the following string
  // instead of falling back to the other rule:
  // {{ 'string' | some_filter }}
  liquidVariable = liquidExpression liquidFilter* space* &liquidStatementEnd
  liquidStatementEnd = ("-}}" | "}}" | "-%}" | "%}")

  liquidExpression =
    | liquidString
    | liquidNumber
    | liquidLiteral
    | liquidRange
    | liquidVariableLookup

  liquidString = liquidSingleQuotedString | liquidDoubleQuotedString
  liquidSingleQuotedString = "'" anyExceptStar<("'"| "%}" | "}}")> "'"
  liquidDoubleQuotedString = "\"" anyExceptStar<("\""| "%}" | "}}")> "\""

  liquidNumber = liquidFloat | liquidInteger
  liquidInteger = "-"? digit+
  liquidFloat = "-"? digit+ "." digit+

  liquidLiteral =
    ( "true"
    | "false"
    | "blank"
    | "empty"
    | "nil"
    | "null"
    ) endOfIdentifier

  liquidRange =
    "(" space* liquidExpression space* ".." space* liquidExpression space* ")"

  liquidVariableLookup =
    | variableSegment lookup*
    | empty lookup+
  lookup =
    | indexLookup
    | dotLookup
  indexLookup = space* "[" space* liquidExpression space* "]"
  dotLookup = space* "." space* identifier

  liquidFilter = space* "|" space* identifier (space* ":" space* arguments)?

  arguments = nonemptyOrderedListOf<positionalArgument, namedArgument, argumentSeparator>
  argumentSeparator = space* "," space*
  argumentSeparatorOptionalComma = space* ","? space*
  positionalArgument = liquidExpression ~(space* ":")
  namedArgument = variableSegment space* ":" space* liquidExpression
  tagArguments = listOf<namedArgument, argumentSeparatorOptionalComma>

  variableSegment = (letter | "_") identifierCharacter*
  variableSegmentAsLookup = variableSegment
  identifier = variableSegment "?"?

  tagMarkup = anyExceptStar<("-%}"| "%}")>

  liquidTagName =
    letter (alnum | "_")*

  blockName =
    // Shopify blocks
    ( "form"
    | "paginate"
    // Base blocks
    | "capture"
    | "case"
    | "for"
    | "ifchanged"
    | "if"
    | "unless"
    | "tablerow"
    ) endOfIdentifier
}

LiquidStatement <: Liquid {
  Node := listOf<LiquidStatement, statementSep> (space | newline)*

  // This is the big brains moment: we redefine space to exclude newlines.
  //
  // Which means that all our other Liquid rules can be reused
  // without modification(!)
  //
  // We don't need to maintain rules like this:
  // - liquidVariable<space>
  // - liquidExpression<space>
  // - variableLookup<space>
  // - ... long list of stuff that takes space as param
  // - liquidString<space>
  //
  // All we need is this little, VERY IMPORTANT, part right here that
  // make it so we can parse the same way in Liquid tags.
  //
  // I'm putting in this huge comment so that it's more obvious.
  space := " " | "\t"

  LiquidStatement =
    | liquidBlockComment
    | liquidRawTag
    | liquidTagClose
    | liquidTagOpen
    | liquidTag
    | liquidInlineComment

  liquidTagOpenRule<name, markup>
    := (name ~identifierCharacter) space* markup &liquidStatementEnd

  liquidTagRule<name, markup>
    := (name ~identifierCharacter) space* markup &liquidStatementEnd

  liquidTagClose
    := "end" (blockName ~identifierCharacter) space* tagMarkup &liquidStatementEnd

  liquidRawTagImpl<name>
    := (name ~identifierCharacter) space* tagMarkup newline
      anyExceptStar<liquidRawTagClose<name>>
      "end" name space* &liquidStatementEnd

  liquidRawTagClose<name>
    := "end" name space* &liquidStatementEnd

  liquidBlockComment :=
    commentBlockStart statementSep
      (listOf<liquidCommentBlockStatement, statementSep> statementSep)?
    commentBlockEnd

  liquidCommentBlockStatement =
    | liquidBlockComment
    | nonTerminalCommentLine

  commentBlockStart
    := ("comment" ~identifierCharacter) space* tagMarkup

  commentBlockEnd
    := ("endcomment" ~identifierCharacter) space* tagMarkup

  nonTerminalCommentLine
    = ~commentBlockEnd anyExceptPlus<newline>

  liquidInlineComment
    := "#" space? tagMarkup &liquidStatementEnd

  tagMarkup := anyExceptStar<liquidStatementEnd>

  // trailing whitespace, newline, + anything else before the next tag
  statementSep = space* newline (space | newline)*

  liquidStatementEnd := newline | end
}

LiquidHTML <: Liquid {
  Node := yamlFrontmatter? (HtmlNode | liquidNode | TextNode)*
  openControl += "<"

  yamlFrontmatter =
    "---" newline anyExceptStar<"---"> "---" newline

  HtmlNode =
    | HtmlDoctype
    | HtmlComment
    | HtmlRawTag
    | HtmlVoidElement
    | HtmlSelfClosingElement
    | HtmlTagClose
    | HtmlTagOpen

  // https://html.spec.whatwg.org/multipage/syntax.html#the-doctype
  HtmlDoctype =
    #("<!" caseInsensitive<"doctype"> space+ caseInsensitive<"html">) legacyDoctypeString? ">"
  legacyDoctypeString
    = anyExceptPlus<">">

  HtmlComment = "<!--" #(anyExceptStar<"-->"> "-->")

  // These are black holes, we'll ignore what's in them
  HtmlRawTag =
    | HtmlRawTagImpl<"script">
    | HtmlRawTagImpl<"style">
    | HtmlRawTagImpl<"svg">

  HtmlRawTagImpl<name> =
    TagStart<name>
      (HtmlRawTagImpl<name> | AnyExceptPlus<(TagStart<name> | TagEnd<name>)>)*
    TagEnd<name>
  TagStart<name> = "<" name AttrList ">"
  TagEnd<name> = "</" name ">"

  HtmlVoidElement =
    #("<" voidElementName &(space | "/" | ">")) AttrList "/"? ">"

  HtmlSelfClosingElement =
    #("<" tagName) AttrList "/>"

  HtmlTagOpen =
    #("<" tagName) AttrList ">"

  HtmlTagClose =
    #("</" tagName) ">"

  tagName = leadingTagNamePart trailingTagNamePart*

  // The difference here is that the first text part must start
  // with a letter, but trailing text parts don't have that
  // requirement
  leadingTagNamePart =
    | liquidDrop
    | leadingTagNameTextNode

  trailingTagNamePart =
    | liquidDrop
    | trailingTagNameTextNode

  leadingTagNameTextNode = letter (alnum | "-" | ":")*
  trailingTagNameTextNode = (alnum | "-" | ":")+

  AttrList = Attr*

  Attr =
    liquidNode | AttrSingleQuoted | AttrDoubleQuoted | AttrUnquoted | attrEmpty

  attrEmpty = attrName

  AttrUnquoted = attrName "=" attrUnquotedValue
  AttrSingleQuoted = attrName "=" singleQuote #(attrSingleQuotedValue singleQuote)
  AttrDoubleQuoted = attrName "=" doubleQuote #(attrDoubleQuotedValue doubleQuote)

  attrName = (liquidDrop | attrNameTextNode)+

  // https://html.spec.whatwg.org/#attributes-2
  attrNameTextNode = anyExceptPlus<(space | quotes | "=" | ">" | "/>" | "{{" | "{%" | controls | noncharacters)>
  attrUnquotedValue = (liquidDrop | attrUnquotedTextNode)*
  attrSingleQuotedValue = (liquidNode | attrSingleQuotedTextNode)*
  attrDoubleQuotedValue = (liquidNode | attrDoubleQuotedTextNode)*

  attrUnquotedTextNode = anyExceptPlus<(space | quotes | "=" | "<" | ">" | "${"`"}" | "{{" | "{%")>
  attrSingleQuotedTextNode = anyExceptPlus<(singleQuote | "{{" | "{%")>
  attrDoubleQuotedTextNode = anyExceptPlus<(doubleQuote | "{{" | "{%")>

  quotes = singleQuote | doubleQuote

  // https://www.w3.org/TR/2011/WD-html-markup-20110113/syntax.html#void-element
  voidElementName =
    ( caseInsensitive<"area">
    | caseInsensitive<"base">
    | caseInsensitive<"br">
    | caseInsensitive<"col">
    | caseInsensitive<"command">
    | caseInsensitive<"embed">
    | caseInsensitive<"hr">
    | caseInsensitive<"img">
    | caseInsensitive<"input">
    | caseInsensitive<"keygen">
    | caseInsensitive<"link">
    | caseInsensitive<"meta">
    | caseInsensitive<"param">
    | caseInsensitive<"source">
    | caseInsensitive<"track">
    | caseInsensitive<"wbr">
    ) ~identifierCharacter
}
`},"./node_modules/html-styles/index.js":(e,t,n)=>{e.exports=n("./node_modules/html-styles/index.json")},"./node_modules/isarray/index.js":e=>{var t={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==t.call(e)}},"./node_modules/isobject/index.js":(e,t,n)=>{"use strict";var i=n("./node_modules/isarray/index.js");e.exports=function(e){return null!=e&&"object"==typeof e&&!1===i(e)}},"./node_modules/line-column/lib/line-column.js":(e,t,n)=>{"use strict";var i=n("./node_modules/isarray/index.js"),r=n("./node_modules/isobject/index.js");function o(e,t){if(!(this instanceof o))return"number"==typeof t?new o(e).fromIndex(t):new o(e,t);this.str=e||"",this.lineToIndex=function(e){for(var t=e.split("\n"),n=new Array(t.length),i=0,r=0,o=t.length;r<o;r++)n[r]=i,i+=t[r].length+1;return n}(this.str),t=t||{},this.origin=void 0===t.origin?1:t.origin}Array.prototype.slice,e.exports=o,o.prototype.fromIndex=function(e){if(e<0||e>=this.str.length||isNaN(e))return null;var t=function(e,t){if(e>=t[t.length-1])return t.length-1;for(var n,i=0,r=t.length-2;i<r;)if(e<t[n=i+(r-i>>1)])r=n-1;else{if(!(e>=t[n+1])){i=n;break}i=n+1}return i}(e,this.lineToIndex);return{line:t+this.origin,col:e-this.lineToIndex[t]+this.origin}},o.prototype.toIndex=function(e,t){if(void 0===t)return i(e)&&e.length>=2?this.toIndex(e[0],e[1]):r(e)&&"line"in e&&("col"in e||"column"in e)?this.toIndex(e.line,"col"in e?e.col:e.column):-1;if(isNaN(e)||isNaN(t))return-1;if(e-=this.origin,t-=this.origin,e>=0&&t>=0&&e<this.lineToIndex.length){var n=this.lineToIndex[e];if(t<(e===this.lineToIndex.length-1?this.str.length:this.lineToIndex[e+1])-n)return n+t}return-1}},"./node_modules/ohm-js/dist/ohm.esm.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>hn,extras:()=>Tn});var i={exports:{}};function r(e,t,n){if(!function(e){return"description"===e||"string"===e||"code"===e}(n))throw new Error("invalid Failure type: "+n);this.pexpr=e,this.text=t,this.type=n,this.fluffy=!1}r.prototype.getPExpr=function(){return this.pexpr},r.prototype.getText=function(){return this.text},r.prototype.getType=function(){return this.type},r.prototype.isDescription=function(){return"description"===this.type},r.prototype.isStringTerminal=function(){return"string"===this.type},r.prototype.isCode=function(){return"code"===this.type},r.prototype.isFluffy=function(){return this.fluffy},r.prototype.makeFluffy=function(){this.fluffy=!0},r.prototype.clearFluffy=function(){this.fluffy=!1},r.prototype.subsumes=function(e){return this.getText()===e.getText()&&this.type===e.type&&(!this.isFluffy()||this.isFluffy()&&e.isFluffy())},r.prototype.toString=function(){return"string"===this.type?JSON.stringify(this.getText()):this.getText()},r.prototype.clone=function(){const e=new r(this.pexpr,this.text,this.type);return this.isFluffy()&&e.makeFluffy(),e},r.prototype.toKey=function(){return this.toString()+"#"+this.type};var o=r,s={};!function(e){const t={};for(let e=0;e<128;e++)t[e]=String.fromCharCode(e);t["'".charCodeAt(0)]="\\'",t['"'.charCodeAt(0)]='\\"',t["\\".charCodeAt(0)]="\\\\",t["\b".charCodeAt(0)]="\\b",t["\f".charCodeAt(0)]="\\f",t["\n".charCodeAt(0)]="\\n",t["\r".charCodeAt(0)]="\\r",t["\t".charCodeAt(0)]="\\t",t["\v".charCodeAt(0)]="\\v",e.abstract=function(e){const t=e||"";return function(){throw new Error("this method "+t+" is abstract! (it has no implementation in class "+this.constructor.name+")")}},e.assert=function(e,t){if(!e)throw new Error(t||"Assertion failed")},e.defineLazyProperty=function(e,t,n){let i;Object.defineProperty(e,t,{get(){return i||(i=n.call(this)),i}})},e.clone=function(e){return e?Object.assign({},e):e},e.repeatFn=function(e,t){const n=[];for(;t-- >0;)n.push(e());return n},e.repeatStr=function(e,t){return new Array(t+1).join(e)},e.repeat=function(t,n){return e.repeatFn((()=>t),n)},e.getDuplicates=function(e){const t=[];for(let n=0;n<e.length;n++){const i=e[n];e.lastIndexOf(i)!==n&&t.indexOf(i)<0&&t.push(i)}return t},e.copyWithoutDuplicates=function(e){const t=[];return e.forEach((e=>{t.indexOf(e)<0&&t.push(e)})),t},e.isSyntactic=function(e){const t=e[0];return t===t.toUpperCase()},e.isLexical=function(t){return!e.isSyntactic(t)},e.padLeft=function(t,n,i){const r=i||" ";return t.length<n?e.repeatStr(r,n-t.length)+t:t},e.StringBuffer=function(){this.strings=[]},e.StringBuffer.prototype.append=function(e){this.strings.push(e)},e.StringBuffer.prototype.contents=function(){return this.strings.join("")};const n=e=>String.fromCodePoint(parseInt(e,16));e.unescapeCodePoint=function(e){if("\\"!==e.charAt(0))return e;switch(e.charAt(1)){case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"\t";case"v":return"\v";case"x":return n(e.slice(2,4));case"u":return"{"===e.charAt(2)?n(e.slice(3,-1)):n(e.slice(2,6));default:return e.charAt(1)}},e.unexpectedObjToString=function(e){if(null==e)return String(e);const t=Object.prototype.toString.call(e);try{let n;return n=e.constructor&&e.constructor.name?e.constructor.name:0===t.indexOf("[object ")?t.slice(8,-1):typeof e,n+": "+JSON.stringify(String(e))}catch(e){return t}}}(s);const a=s;class u{constructor(e){this.matchLength=e}get ctorName(){throw new Error("subclass responsibility")}numChildren(){return this.children?this.children.length:0}childAt(e){if(this.children)return this.children[e]}indexOfChild(e){return this.children.indexOf(e)}hasChildren(){return this.numChildren()>0}hasNoChildren(){return!this.hasChildren()}onlyChild(){if(1!==this.numChildren())throw new Error("cannot get only child of a node of type "+this.ctorName+" (it has "+this.numChildren()+" children)");return this.firstChild()}firstChild(){if(this.hasNoChildren())throw new Error("cannot get first child of a "+this.ctorName+" node, which has no children");return this.childAt(0)}lastChild(){if(this.hasNoChildren())throw new Error("cannot get last child of a "+this.ctorName+" node, which has no children");return this.childAt(this.numChildren()-1)}childBefore(e){const t=this.indexOfChild(e);if(t<0)throw new Error("Node.childBefore() called w/ an argument that is not a child");if(0===t)throw new Error("cannot get child before first child");return this.childAt(t-1)}childAfter(e){const t=this.indexOfChild(e);if(t<0)throw new Error("Node.childAfter() called w/ an argument that is not a child");if(t===this.numChildren()-1)throw new Error("cannot get child after last child");return this.childAt(t+1)}isTerminal(){return!1}isNonterminal(){return!1}isIteration(){return!1}isOptional(){return!1}}var c={Node:u,TerminalNode:class extends u{get ctorName(){return"_terminal"}isTerminal(){return!0}get primitiveValue(){throw new Error("The `primitiveValue` property was removed in Ohm v17.")}},NonterminalNode:class extends u{constructor(e,t,n,i){super(i),this.ruleName=e,this.children=t,this.childOffsets=n}get ctorName(){return this.ruleName}isNonterminal(){return!0}isLexical(){return a.isLexical(this.ctorName)}isSyntactic(){return a.isSyntactic(this.ctorName)}},IterationNode:class extends u{constructor(e,t,n,i){super(n),this.children=e,this.childOffsets=t,this.optional=i}get ctorName(){return"_iter"}isIteration(){return!0}isOptional(){return this.optional}}},l={};const d={Lu:/[A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178\u0179\u017B\u017D\u0181\u0182\u0184\u0186\u0187\u0189-\u018B\u018E-\u0191\u0193\u0194\u0196-\u0198\u019C\u019D\u019F\u01A0\u01A2\u01A4\u01A6\u01A7\u01A9\u01AC\u01AE\u01AF\u01B1-\u01B3\u01B5\u01B7\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A\u023B\u023D\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E\u213F\u2145\u2183\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AE\uA7B0-\uA7B4\uA7B6\uFF21-\uFF3A]|\uD801[\uDC00-\uDC27\uDCB0-\uDCD3]|\uD803[\uDC80-\uDCB2]|\uD806[\uDCA0-\uDCBF]|\uD835[\uDC00-\uDC19\uDC34-\uDC4D\uDC68-\uDC81\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB5\uDCD0-\uDCE9\uDD04\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD38\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD6C-\uDD85\uDDA0-\uDDB9\uDDD4-\uDDED\uDE08-\uDE21\uDE3C-\uDE55\uDE70-\uDE89\uDEA8-\uDEC0\uDEE2-\uDEFA\uDF1C-\uDF34\uDF56-\uDF6E\uDF90-\uDFA8\uDFCA]|\uD83A[\uDD00-\uDD21]/,Ll:/[a-z\xB5\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02AF\u0371\u0373\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D0\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0529\u052B\u052D\u052F\u0561-\u0587\u13F8-\u13FD\u1C80-\u1C88\u1D00-\u1D2B\u1D6B-\u1D77\u1D79-\u1D9A\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6\u1FC7\u1FD0-\u1FD3\u1FD6\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6\u1FF7\u210A\u210E\u210F\u2113\u212F\u2134\u2139\u213C\u213D\u2146-\u2149\u214E\u2184\u2C30-\u2C5E\u2C61\u2C65\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA699\uA69B\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793-\uA795\uA797\uA799\uA79B\uA79D\uA79F\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7B5\uA7B7\uA7FA\uAB30-\uAB5A\uAB60-\uAB65\uAB70-\uABBF\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A]|\uD801[\uDC28-\uDC4F\uDCD8-\uDCFB]|\uD803[\uDCC0-\uDCF2]|\uD806[\uDCC0-\uDCDF]|\uD835[\uDC1A-\uDC33\uDC4E-\uDC54\uDC56-\uDC67\uDC82-\uDC9B\uDCB6-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDCCF\uDCEA-\uDD03\uDD1E-\uDD37\uDD52-\uDD6B\uDD86-\uDD9F\uDDBA-\uDDD3\uDDEE-\uDE07\uDE22-\uDE3B\uDE56-\uDE6F\uDE8A-\uDEA5\uDEC2-\uDEDA\uDEDC-\uDEE1\uDEFC-\uDF14\uDF16-\uDF1B\uDF36-\uDF4E\uDF50-\uDF55\uDF70-\uDF88\uDF8A-\uDF8F\uDFAA-\uDFC2\uDFC4-\uDFC9\uDFCB]|\uD83A[\uDD22-\uDD43]/,Lt:/[\u01C5\u01C8\u01CB\u01F2\u1F88-\u1F8F\u1F98-\u1F9F\u1FA8-\u1FAF\u1FBC\u1FCC\u1FFC]/,Lm:/[\u02B0-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0374\u037A\u0559\u0640\u06E5\u06E6\u07F4\u07F5\u07FA\u081A\u0824\u0828\u0971\u0E46\u0EC6\u10FC\u17D7\u1843\u1AA7\u1C78-\u1C7D\u1D2C-\u1D6A\u1D78\u1D9B-\u1DBF\u2071\u207F\u2090-\u209C\u2C7C\u2C7D\u2D6F\u2E2F\u3005\u3031-\u3035\u303B\u309D\u309E\u30FC-\u30FE\uA015\uA4F8-\uA4FD\uA60C\uA67F\uA69C\uA69D\uA717-\uA71F\uA770\uA788\uA7F8\uA7F9\uA9CF\uA9E6\uAA70\uAADD\uAAF3\uAAF4\uAB5C-\uAB5F\uFF70\uFF9E\uFF9F]|\uD81A[\uDF40-\uDF43]|\uD81B[\uDF93-\uDF9F\uDFE0]/,Lo:/[\xAA\xBA\u01BB\u01C0-\u01C3\u0294\u05D0-\u05EA\u05F0-\u05F2\u0620-\u063F\u0641-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u0800-\u0815\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0972-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E45\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10D0-\u10FA\u10FD-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17DC\u1820-\u1842\u1844-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C77\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u2135-\u2138\u2D30-\u2D67\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3006\u303C\u3041-\u3096\u309F\u30A1-\u30FA\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA014\uA016-\uA48C\uA4D0-\uA4F7\uA500-\uA60B\uA610-\uA61F\uA62A\uA62B\uA66E\uA6A0-\uA6E5\uA78F\uA7F7\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9E0-\uA9E4\uA9E7-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA6F\uAA71-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB\uAADC\uAAE0-\uAAEA\uAAF2\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF66-\uFF6F\uFF71-\uFF9D\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC50-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,Nl:/[\u16EE-\u16F0\u2160-\u2182\u2185-\u2188\u3007\u3021-\u3029\u3038-\u303A\uA6E6-\uA6EF]|\uD800[\uDD40-\uDD74\uDF41\uDF4A\uDFD1-\uDFD5]|\uD809[\uDC00-\uDC6E]/,Nd:/[0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]|\uD801[\uDCA0-\uDCA9]|\uD804[\uDC66-\uDC6F\uDCF0-\uDCF9\uDD36-\uDD3F\uDDD0-\uDDD9\uDEF0-\uDEF9]|[\uD805\uD807][\uDC50-\uDC59\uDCD0-\uDCD9\uDE50-\uDE59\uDEC0-\uDEC9\uDF30-\uDF39]|\uD806[\uDCE0-\uDCE9]|\uD81A[\uDE60-\uDE69\uDF50-\uDF59]|\uD835[\uDFCE-\uDFFF]|\uD83A[\uDD50-\uDD59]/,Mn:/[\u0300-\u036F\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D4-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D01\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF5\u1DFB-\u1DFF\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA8C4\uA8C5\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD804[\uDC01\uDC38-\uDC46\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDCA-\uDDCC\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3C\uDF40\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDCB3-\uDCB8\uDCBA\uDCBF\uDCC0\uDCC2\uDCC3\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF8F-\uDF92]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD67-\uDD69\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF]/,Mc:/[\u0903-\u0903]|[\u093E-\u0940]|[\u0949-\u094C]|[\u0982-\u0983]|[\u09BE-\u09C0]|[\u09C7-\u09C8]|[\u09CB-\u09CC]|[\u09D7-\u09D7]|[\u0A3E-\u0A40]|[\u0A83-\u0A83]|[\u0ABE-\u0AC0]|[\u0AC9-\u0AC9]|[\u0ACB-\u0ACC]|[\u0B02-\u0B03]|[\u0B3E-\u0B3E]|[\u0B40-\u0B40]|[\u0B47-\u0B48]|[\u0B4B-\u0B4C]|[\u0B57-\u0B57]|[\u0B83-\u0B83]|[\u0BBE-\u0BBF]|[\u0BC1-\u0BC2]|[\u0BC6-\u0BC8]|[\u0BCA-\u0BCC]|[\u0BD7-\u0BD7]|[\u0C01-\u0C03]|[\u0C41-\u0C44]|[\u0C82-\u0C83]|[\u0CBE-\u0CBE]|[\u0CC0-\u0CC4]|[\u0CC7-\u0CC8]|[\u0CCA-\u0CCB]|[\u0CD5-\u0CD6]|[\u0D02-\u0D03]|[\u0D3E-\u0D40]|[\u0D46-\u0D48]|[\u0D4A-\u0D4C]|[\u0D57-\u0D57]|[\u0F3E-\u0F3F]|[\u0F7F-\u0F7F]/,Pc:/[_\u203F\u2040\u2054\uFE33\uFE34\uFE4D-\uFE4F\uFF3F]/,Zs:/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,L:/[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,Ltmo:/[\u01C5\u01C8\u01CB\u01F2\u1F88-\u1F8F\u1F98-\u1F9F\u1FA8-\u1FAF\u1FBC\u1FCC\u1FFC]|[\u02B0-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0374\u037A\u0559\u0640\u06E5\u06E6\u07F4\u07F5\u07FA\u081A\u0824\u0828\u0971\u0E46\u0EC6\u10FC\u17D7\u1843\u1AA7\u1C78-\u1C7D\u1D2C-\u1D6A\u1D78\u1D9B-\u1DBF\u2071\u207F\u2090-\u209C\u2C7C\u2C7D\u2D6F\u2E2F\u3005\u3031-\u3035\u303B\u309D\u309E\u30FC-\u30FE\uA015\uA4F8-\uA4FD\uA60C\uA67F\uA69C\uA69D\uA717-\uA71F\uA770\uA788\uA7F8\uA7F9\uA9CF\uA9E6\uAA70\uAADD\uAAF3\uAAF4\uAB5C-\uAB5F\uFF70\uFF9E\uFF9F]|\uD81A[\uDF40-\uDF43]|\uD81B[\uDF93-\uDF9F\uDFE0]|[\xAA\xBA\u01BB\u01C0-\u01C3\u0294\u05D0-\u05EA\u05F0-\u05F2\u0620-\u063F\u0641-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u0800-\u0815\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0972-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E45\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10D0-\u10FA\u10FD-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17DC\u1820-\u1842\u1844-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C77\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u2135-\u2138\u2D30-\u2D67\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3006\u303C\u3041-\u3096\u309F\u30A1-\u30FA\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA014\uA016-\uA48C\uA4D0-\uA4F7\uA500-\uA60B\uA610-\uA61F\uA62A\uA62B\uA66E\uA6A0-\uA6E5\uA78F\uA7F7\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9E0-\uA9E4\uA9E7-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA6F\uAA71-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB\uAADC\uAAE0-\uAAEA\uAAF2\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF66-\uFF6F\uFF71-\uFF9D\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC50-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/},p=s;class h{constructor(){if(this.constructor===h)throw new Error("PExpr cannot be instantiated -- it's abstract")}withSource(e){return e&&(this.source=e.trimmed()),this}}const m=Object.create(h.prototype),g=Object.create(h.prototype);class f extends h{constructor(e){super(),this.terms=e}}class y extends h{constructor(e){super(),this.expr=e}}class D extends y{}class C extends y{}class v extends y{}D.prototype.operator="*",C.prototype.operator="+",v.prototype.operator="?",D.prototype.minNumMatches=0,C.prototype.minNumMatches=1,v.prototype.minNumMatches=0,D.prototype.maxNumMatches=Number.POSITIVE_INFINITY,C.prototype.maxNumMatches=Number.POSITIVE_INFINITY,v.prototype.maxNumMatches=1,l.PExpr=h,l.any=m,l.end=g,l.Terminal=class extends h{constructor(e){super(),this.obj=e}},l.Range=class extends h{constructor(e,t){super(),this.from=e,this.to=t,this.matchCodePoint=e.length>1||t.length>1}},l.Param=class extends h{constructor(e){super(),this.index=e}},l.Alt=f,l.Extend=class extends f{constructor(e,t,n){super([n,e.rules[t].body]),this.superGrammar=e,this.name=t,this.body=n}},l.Splice=class extends f{constructor(e,t,n,i){const r=e.rules[t].body;super([...n,r,...i]),this.superGrammar=e,this.ruleName=t,this.expansionPos=n.length}},l.Seq=class extends h{constructor(e){super(),this.factors=e}},l.Iter=y,l.Star=D,l.Plus=C,l.Opt=v,l.Not=class extends h{constructor(e){super(),this.expr=e}},l.Lookahead=class extends h{constructor(e){super(),this.expr=e}},l.Lex=class extends h{constructor(e){super(),this.expr=e}},l.Apply=class extends h{constructor(e,t=[]){super(),this.ruleName=e,this.args=t}isSyntactic(){return p.isSyntactic(this.ruleName)}toMemoKey(){return this._memoKey||Object.defineProperty(this,"_memoKey",{value:this.toString()}),this._memoKey}},l.UnicodeChar=class extends h{constructor(e){super(),this.category=e,this.pattern=d[e]}};const S=s,E=l;function b(){}E.PExpr.prototype.allowsSkippingPrecedingSpace=S.abstract("allowsSkippingPrecedingSpace"),E.any.allowsSkippingPrecedingSpace=E.end.allowsSkippingPrecedingSpace=E.Apply.prototype.allowsSkippingPrecedingSpace=E.Terminal.prototype.allowsSkippingPrecedingSpace=E.Range.prototype.allowsSkippingPrecedingSpace=E.UnicodeChar.prototype.allowsSkippingPrecedingSpace=function(){return!0},E.Alt.prototype.allowsSkippingPrecedingSpace=E.Iter.prototype.allowsSkippingPrecedingSpace=E.Lex.prototype.allowsSkippingPrecedingSpace=E.Lookahead.prototype.allowsSkippingPrecedingSpace=E.Not.prototype.allowsSkippingPrecedingSpace=E.Param.prototype.allowsSkippingPrecedingSpace=E.Seq.prototype.allowsSkippingPrecedingSpace=function(){return!1},b.prototype=Object.create(null),b.asNamespace=function(e){return e instanceof b?e:b.createNamespace(e)},b.createNamespace=function(e){return b.extend(b.prototype,e)},b.extend=function(e,t){if(e!==b.prototype&&!(e instanceof b))throw new TypeError("not a Namespace object: "+e);const n=Object.create(e,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});return Object.assign(n,t)},b.toString=function(e){return Object.prototype.toString.call(e)};var T=b;const{assert:A}=s,F=T,R=l;function w(e,t){let n;return t?(n=new Error(t.getLineAndColumnMessage()+e),n.shortMessage=e,n.interval=t):n=new Error(e),n}var x={applicationOfSyntacticRuleFromLexicalContext:function(e,t){return w("Cannot apply syntactic rule "+e+" from here (inside a lexical context)",t.source)},applySyntacticWithLexicalRuleApplication:function(e){const{ruleName:t}=e;return w(`applySyntactic is for syntactic rules, but '${t}' is a lexical rule. NOTE: A _syntactic rule_ is a rule whose name begins with a capital letter. See https://ohmjs.org/d/svl for more details.`,e.source)},cannotExtendUndeclaredRule:function(e,t,n){return w("Cannot extend rule "+e+" because it is not declared in "+t,n)},cannotOverrideUndeclaredRule:function(e,t,n){return w("Cannot override rule "+e+" because it is not declared in "+t,n)},duplicateGrammarDeclaration:function(e,t){return w("Grammar "+e.name+" is already declared in this namespace")},duplicateParameterNames:function(e,t,n){return w("Duplicate parameter names in rule "+e+": "+t.join(", "),n)},duplicatePropertyNames:function(e){return w("Object pattern has duplicate property names: "+e.join(", "))},duplicateRuleDeclaration:function(e,t,n,i){let r="Duplicate declaration for rule '"+e+"' in grammar '"+t+"'";return t!==n&&(r+=" (originally declared in '"+n+"')"),w(r,i)},inconsistentArity:function(e,t,n,i){return w("Rule "+e+" involves an alternation which has inconsistent arity (expected "+t+", got "+n+")",i.source)},incorrectArgumentType:function(e,t){return w("Incorrect argument type: expected "+e,t.source)},intervalSourcesDontMatch:function(){return w("Interval sources don't match")},invalidCodePoint:function(e){const t=e._node;A(t&&t.isNonterminal()&&"escapeChar_unicodeCodePoint"===t.ctorName);const n=e.children.slice(1,-1).map((e=>e.source)),i=n[0].coverageWith(...n.slice(1));return w(`U+${i.contents} is not a valid Unicode code point`,i)},invalidConstructorCall:function(e,t,n){return w("Attempt to invoke constructor "+t+" with invalid or unexpected arguments")},invalidParameter:function(e,t){return w("Invalid parameter to rule "+e+": "+t+" has arity "+t.getArity()+", but parameter expressions must have arity 1",t.source)},grammarSyntaxError:function(e){const t=new Error;return Object.defineProperty(t,"message",{enumerable:!0,get:()=>e.message}),Object.defineProperty(t,"shortMessage",{enumerable:!0,get:()=>"Expected "+e.getExpectedText()}),t.interval=e.getInterval(),t},kleeneExprHasNullableOperand:function(e,t){const n=t.length>0?t[t.length-1].args:[];let i="Nullable expression "+e.expr.substituteParams(n)+" is not allowed inside '"+e.operator+"' (possible infinite loop)";return t.length>0&&(i+="\nApplication stack (most recent application last):\n"+t.map((e=>new R.Apply(e.ruleName,e.args))).join("\n")),w(i,e.expr.source)},missingSemanticAction:function(e,t,n,i){let r=i.slice(0,-1).map((e=>{const t="  "+e[0].name+" > "+e[1];return 3===e.length?t+" for '"+e[2]+"'":t})).join("\n");r+="\n  "+t+" > "+e;let o="";"_iter"===e&&(o=["\nNOTE: as of Ohm v16, there is no default action for iteration nodes — see ","  https://ohmjs.org/d/dsa for details."].join("\n"));const s=w([`Missing semantic action for '${e}' in ${n} '${t}'.${o}`,"Action stack (most recent call last):",r].join("\n"));return s.name="missingSemanticAction",s},multipleSuperSplices:function(e){return w("'...' can appear at most once in a rule body",e.source)},undeclaredGrammar:function(e,t,n){return w(t?"Grammar "+e+" is not declared in namespace "+F.toString(t):"Undeclared grammar "+e,n)},undeclaredRule:function(e,t,n){return w("Rule "+e+" is not declared in grammar "+t,n)},unnecessaryExperimentalApplySyntactic:function(e){return w("applySyntactic is not required here (in a syntactic context)",e.source)},wrongNumberOfArguments:function(e,t,n,i){return w("Wrong number of arguments for rule "+e+" (expected "+t+", got "+n+")",i)},wrongNumberOfParameters:function(e,t,n,i){return w("Wrong number of parameters for rule "+e+" (expected "+t+", got "+n+")",i)},throwErrors(e){if(1===e.length)throw e[0];if(e.length>1)throw function(e){const t=e.map((e=>e.message));return w(["Errors:"].concat(t).join("\n- "),e[0].interval)}(e)}},k={};!function(e){const t=s;function n(e,t,n){const i=e.length;return(e.slice(0,n)+t+e.slice(n+t.length)).substr(0,i)}function i(...e){const i=this,{offset:r}=i,{repeatStr:o}=t,s=new t.StringBuffer;s.append("Line "+i.lineNum+", col "+i.colNum+":\n");const a=function(e){let n=0;return e.map((e=>{const t=e.toString();return n=Math.max(n,t.length),t})).map((e=>t.padLeft(e,n)))}([null==i.prevLine?0:i.lineNum-1,i.lineNum,null==i.nextLine?0:i.lineNum+1]),u=(e,t,n)=>{s.append(n+a[e]+" | "+t+"\n")};null!=i.prevLine&&u(0,i.prevLine,"  "),u(1,i.line,"> ");const c=i.line.length;let l=o(" ",c+1);for(let s=0;s<e.length;++s){let a=e[s][0],u=e[s][1];t.assert(a>=0&&a<=u,"range start must be >= 0 and <= end");const d=r-i.colNum+1;a=Math.max(0,a-d),u=Math.min(u-d,c),l=n(l,o("~",u-a),a)}const d=2+a[1].length+3;return s.append(o(" ",d)),l=n(l,"^",i.colNum-1),s.append(l.replace(/ +$/,"")+"\n"),null!=i.nextLine&&u(2,i.nextLine,"  "),s.contents()}let r=[];e.awaitBuiltInRules=e=>{r.push(e)},e.announceBuiltInRules=e=>{r.forEach((t=>{t(e)})),r=null},e.getLineAndColumn=(e,t)=>{let n=1,r=1,o=0,s=0,a=null,u=null,c=-1;for(;o<t;){const t=e.charAt(o++);"\n"===t?(n++,r=1,c=s,s=o):"\r"!==t&&r++}let l=e.indexOf("\n",s);if(-1===l)l=e.length;else{const t=e.indexOf("\n",l+1);a=-1===t?e.slice(l):e.slice(l,t),a=a.replace(/^\r?\n/,"").replace(/\r$/,"")}return c>=0&&(u=e.slice(c,s).replace(/\r?\n$/,"")),{offset:t,lineNum:n,colNum:r,line:e.slice(s,l).replace(/\r$/,""),prevLine:u,nextLine:a,toString:i}},e.getLineAndColumnMessage=function(t,n,...i){return e.getLineAndColumn(t,n).toString(...i)},e.uniqueId=(()=>{let e=0;return t=>""+t+e++})()}(k);const{abstract:_,isSyntactic:N}=s,P=x,I=l;let q,O;k.awaitBuiltInRules((e=>{q=e})),I.PExpr.prototype.assertAllApplicationsAreValid=function(e,t){O=0,this._assertAllApplicationsAreValid(e,t)},I.PExpr.prototype._assertAllApplicationsAreValid=_("_assertAllApplicationsAreValid"),I.any._assertAllApplicationsAreValid=I.end._assertAllApplicationsAreValid=I.Terminal.prototype._assertAllApplicationsAreValid=I.Range.prototype._assertAllApplicationsAreValid=I.Param.prototype._assertAllApplicationsAreValid=I.UnicodeChar.prototype._assertAllApplicationsAreValid=function(e,t){},I.Lex.prototype._assertAllApplicationsAreValid=function(e,t){O++,this.expr._assertAllApplicationsAreValid(e,t),O--},I.Alt.prototype._assertAllApplicationsAreValid=function(e,t){for(let n=0;n<this.terms.length;n++)this.terms[n]._assertAllApplicationsAreValid(e,t)},I.Seq.prototype._assertAllApplicationsAreValid=function(e,t){for(let n=0;n<this.factors.length;n++)this.factors[n]._assertAllApplicationsAreValid(e,t)},I.Iter.prototype._assertAllApplicationsAreValid=I.Not.prototype._assertAllApplicationsAreValid=I.Lookahead.prototype._assertAllApplicationsAreValid=function(e,t){this.expr._assertAllApplicationsAreValid(e,t)},I.Apply.prototype._assertAllApplicationsAreValid=function(e,t,n=!1){const i=t.rules[this.ruleName],r=N(e)&&0===O;if(!i)throw P.undeclaredRule(this.ruleName,t.name,this.source);if(!n&&N(this.ruleName)&&!r)throw P.applicationOfSyntacticRuleFromLexicalContext(this.ruleName,this);const o=this.args.length,s=i.formals.length;if(o!==s)throw P.wrongNumberOfArguments(this.ruleName,s,o,this.source);const a=q&&i===q.rules.applySyntactic;if(q&&i===q.rules.caseInsensitive&&!(this.args[0]instanceof I.Terminal))throw P.incorrectArgumentType('a Terminal (e.g. "abc")',this.args[0]);if(a){const e=this.args[0];if(!(e instanceof I.Apply))throw P.incorrectArgumentType("a syntactic rule application",e);if(!N(e.ruleName))throw P.applySyntacticWithLexicalRuleApplication(e);if(r)throw P.unnecessaryExperimentalApplySyntactic(this)}this.args.forEach((n=>{if(n._assertAllApplicationsAreValid(e,t,a),1!==n.getArity())throw P.invalidParameter(this.ruleName,n)}))};const L=s,B=x,M=l;M.PExpr.prototype.assertChoicesHaveUniformArity=L.abstract("assertChoicesHaveUniformArity"),M.any.assertChoicesHaveUniformArity=M.end.assertChoicesHaveUniformArity=M.Terminal.prototype.assertChoicesHaveUniformArity=M.Range.prototype.assertChoicesHaveUniformArity=M.Param.prototype.assertChoicesHaveUniformArity=M.Lex.prototype.assertChoicesHaveUniformArity=M.UnicodeChar.prototype.assertChoicesHaveUniformArity=function(e){},M.Alt.prototype.assertChoicesHaveUniformArity=function(e){if(0===this.terms.length)return;const t=this.terms[0].getArity();for(let n=0;n<this.terms.length;n++){const i=this.terms[n];i.assertChoicesHaveUniformArity();const r=i.getArity();if(t!==r)throw B.inconsistentArity(e,t,r,i)}},M.Extend.prototype.assertChoicesHaveUniformArity=function(e){const t=this.terms[0].getArity(),n=this.terms[1].getArity();if(t!==n)throw B.inconsistentArity(e,n,t,this.terms[0])},M.Seq.prototype.assertChoicesHaveUniformArity=function(e){for(let t=0;t<this.factors.length;t++)this.factors[t].assertChoicesHaveUniformArity(e)},M.Iter.prototype.assertChoicesHaveUniformArity=function(e){this.expr.assertChoicesHaveUniformArity(e)},M.Not.prototype.assertChoicesHaveUniformArity=function(e){},M.Lookahead.prototype.assertChoicesHaveUniformArity=function(e){this.expr.assertChoicesHaveUniformArity(e)},M.Apply.prototype.assertChoicesHaveUniformArity=function(e){};const j=s,H=x,W=l;W.PExpr.prototype.assertIteratedExprsAreNotNullable=j.abstract("assertIteratedExprsAreNotNullable"),W.any.assertIteratedExprsAreNotNullable=W.end.assertIteratedExprsAreNotNullable=W.Terminal.prototype.assertIteratedExprsAreNotNullable=W.Range.prototype.assertIteratedExprsAreNotNullable=W.Param.prototype.assertIteratedExprsAreNotNullable=W.UnicodeChar.prototype.assertIteratedExprsAreNotNullable=function(e){},W.Alt.prototype.assertIteratedExprsAreNotNullable=function(e){for(let t=0;t<this.terms.length;t++)this.terms[t].assertIteratedExprsAreNotNullable(e)},W.Seq.prototype.assertIteratedExprsAreNotNullable=function(e){for(let t=0;t<this.factors.length;t++)this.factors[t].assertIteratedExprsAreNotNullable(e)},W.Iter.prototype.assertIteratedExprsAreNotNullable=function(e){if(this.expr.assertIteratedExprsAreNotNullable(e),this.expr.isNullable(e))throw H.kleeneExprHasNullableOperand(this,[])},W.Opt.prototype.assertIteratedExprsAreNotNullable=W.Not.prototype.assertIteratedExprsAreNotNullable=W.Lookahead.prototype.assertIteratedExprsAreNotNullable=W.Lex.prototype.assertIteratedExprsAreNotNullable=function(e){this.expr.assertIteratedExprsAreNotNullable(e)},W.Apply.prototype.assertIteratedExprsAreNotNullable=function(e){this.args.forEach((t=>{t.assertIteratedExprsAreNotNullable(e)}))};const{assert:$}=s,U=x,K=k;function V(e,t,n){this.sourceString=e,this.startIdx=t,this.endIdx=n}V.coverage=function(e,...t){let{startIdx:n,endIdx:i}=e;for(const r of t){if(r.sourceString!==e.sourceString)throw U.intervalSourcesDontMatch();n=Math.min(n,r.startIdx),i=Math.max(i,r.endIdx)}return new V(e.sourceString,n,i)},V.prototype={coverageWith(...e){return V.coverage(...e,this)},collapsedLeft(){return new V(this.sourceString,this.startIdx,this.startIdx)},collapsedRight(){return new V(this.sourceString,this.endIdx,this.endIdx)},getLineAndColumn(){return K.getLineAndColumn(this.sourceString,this.startIdx)},getLineAndColumnMessage(){const e=[this.startIdx,this.endIdx];return K.getLineAndColumnMessage(this.sourceString,this.startIdx,e)},minus(e){if(this.sourceString!==e.sourceString)throw U.intervalSourcesDontMatch();return this.startIdx===e.startIdx&&this.endIdx===e.endIdx?[]:this.startIdx<e.startIdx&&e.endIdx<this.endIdx?[new V(this.sourceString,this.startIdx,e.startIdx),new V(this.sourceString,e.endIdx,this.endIdx)]:this.startIdx<e.endIdx&&e.endIdx<this.endIdx?[new V(this.sourceString,e.endIdx,this.endIdx)]:this.startIdx<e.startIdx&&e.startIdx<this.endIdx?[new V(this.sourceString,this.startIdx,e.startIdx)]:[this]},relativeTo(e){if(this.sourceString!==e.sourceString)throw U.intervalSourcesDontMatch();return $(this.startIdx>=e.startIdx&&this.endIdx<=e.endIdx,"other interval does not cover this one"),new V(this.sourceString,this.startIdx-e.startIdx,this.endIdx-e.startIdx)},trimmed(){const{contents:e}=this,t=this.startIdx+e.match(/^\s*/)[0].length,n=this.endIdx-e.match(/\s*$/)[0].length;return new V(this.sourceString,t,n)},subInterval(e,t){const n=this.startIdx+e;return new V(this.sourceString,n,n+t)}},Object.defineProperties(V.prototype,{contents:{get(){return void 0===this._contents&&(this._contents=this.sourceString.slice(this.startIdx,this.endIdx)),this._contents},enumerable:!0},length:{get(){return this.endIdx-this.startIdx},enumerable:!0}});var z=V;const G=z,Q=s,X={succeeded:1,isRootNode:2,isImplicitSpaces:4,isMemoized:8,isHeadOfLeftRecursion:16,terminatesLR:32};function J(e){return"string"==typeof e?e.replace(/ /g,"⋅").replace(/\t/g,"␉").replace(/\n/g,"␊").replace(/\r/g,"␍"):String(e)}function Y(e,t,n,i,r,o,s){this.input=e,this.pos=this.pos1=t,this.pos2=n,this.source=new G(e,t,n),this.expr=i,this.bindings=o,this.children=s||[],this.terminatingLREntry=null,this._flags=r?X.succeeded:0}Y.prototype.SKIP={},Object.defineProperty(Y.prototype,"displayString",{get(){return this.expr.toDisplayString()}}),Object.keys(X).forEach((e=>{const t=X[e];Object.defineProperty(Y.prototype,e,{get(){return 0!=(this._flags&t)},set(e){e?this._flags|=t:this._flags&=~t}})})),Y.prototype.clone=function(){return this.cloneWithExpr(this.expr)},Y.prototype.cloneWithExpr=function(e){const t=new Y(this.input,this.pos,this.pos2,e,this.succeeded,this.bindings,this.children);return t.isHeadOfLeftRecursion=this.isHeadOfLeftRecursion,t.isImplicitSpaces=this.isImplicitSpaces,t.isMemoized=this.isMemoized,t.isRootNode=this.isRootNode,t.terminatesLR=this.terminatesLR,t.terminatingLREntry=this.terminatingLREntry,t},Y.prototype.recordLRTermination=function(e,t){this.terminatingLREntry=new Y(this.input,this.pos,this.pos2,this.expr,!1,[t],[e]),this.terminatingLREntry.terminatesLR=!0},Y.prototype.walk=function(e,t){let n=e;function i(e,r,o){let s=!0;n.enter&&n.enter.call(t,e,r,o)===Y.prototype.SKIP&&(s=!1),s&&(e.children.forEach((t=>{i(t,e,o+1)})),n.exit&&n.exit.call(t,e,r,o))}"function"==typeof n&&(n={enter:n}),this.isRootNode?this.children.forEach((e=>{i(e,null,0)})):i(this,null,0)},Y.prototype.toString=function(){const e=new Q.StringBuffer;return this.walk(((t,n,i)=>{if(!t)return this.SKIP;if("Alt"!==t.expr.constructor.name){var r;if(e.append(function(e,t,n){const i=J(e.slice(t,t+10));return i.length<10?i+Q.repeat(" ",10-i.length).join(""):i}(t.input,t.pos)+(r=2*i+1,Q.repeat(" ",r).join(""))),e.append((t.succeeded?"✓":"✗")+" "+t.displayString),t.isHeadOfLeftRecursion&&e.append(" (LR)"),t.succeeded){const n=J(t.source.contents);e.append(" ⇒  "),e.append("string"==typeof n?'"'+n+'"':n)}e.append("\n")}})),e.contents()};var Z=Y;const ee=Z,te=s,ne=x,ie=c,re=l,{TerminalNode:oe}=ie,{NonterminalNode:se}=ie,{IterationNode:ae}=ie;re.PExpr.prototype.eval=te.abstract("eval"),re.any.eval=function(e){const{inputStream:t}=e,n=t.pos,i=t.next();return i?(e.pushBinding(new oe(i.length),n),!0):(e.processFailure(n,this),!1)},re.end.eval=function(e){const{inputStream:t}=e,n=t.pos;return t.atEnd()?(e.pushBinding(new oe(0),n),!0):(e.processFailure(n,this),!1)},re.Terminal.prototype.eval=function(e){const{inputStream:t}=e,n=t.pos;return t.matchString(this.obj)?(e.pushBinding(new oe(this.obj.length),n),!0):(e.processFailure(n,this),!1)},re.Range.prototype.eval=function(e){const{inputStream:t}=e,n=t.pos,i=this.matchCodePoint?t.nextCodePoint():t.nextCharCode();return void 0!==i&&this.from.codePointAt(0)<=i&&i<=this.to.codePointAt(0)?(e.pushBinding(new oe(String.fromCodePoint(i).length),n),!0):(e.processFailure(n,this),!1)},re.Param.prototype.eval=function(e){return e.eval(e.currentApplication().args[this.index])},re.Lex.prototype.eval=function(e){e.enterLexifiedContext();const t=e.eval(this.expr);return e.exitLexifiedContext(),t},re.Alt.prototype.eval=function(e){for(let t=0;t<this.terms.length;t++)if(e.eval(this.terms[t]))return!0;return!1},re.Seq.prototype.eval=function(e){for(let t=0;t<this.factors.length;t++){const n=this.factors[t];if(!e.eval(n))return!1}return!0},re.Iter.prototype.eval=function(e){const{inputStream:t}=e,n=t.pos,i=this.getArity(),r=[],o=[];for(;r.length<i;)r.push([]),o.push([]);let s,a=0,u=n;for(;a<this.maxNumMatches&&e.eval(this.expr);){if(t.pos===u)throw ne.kleeneExprHasNullableOperand(this,e._applicationStack);u=t.pos,a++;const n=e._bindings.splice(e._bindings.length-i,i),c=e._bindingOffsets.splice(e._bindingOffsets.length-i,i);for(s=0;s<n.length;s++)r[s].push(n[s]),o[s].push(c[s])}if(a<this.minNumMatches)return!1;let c=e.posToOffset(n),l=0;if(a>0){const e=r[i-1],t=o[i-1],n=t[t.length-1]+e[e.length-1].matchLength;c=o[0][0],l=n-c}const d=this instanceof re.Opt;for(s=0;s<r.length;s++)e._bindings.push(new ae(r[s],o[s],l,d)),e._bindingOffsets.push(c);return!0},re.Not.prototype.eval=function(e){const{inputStream:t}=e,n=t.pos;e.pushFailuresInfo();const i=e.eval(this.expr);return e.popFailuresInfo(),i?(e.processFailure(n,this),!1):(t.pos=n,!0)},re.Lookahead.prototype.eval=function(e){const{inputStream:t}=e,n=t.pos;return!!e.eval(this.expr)&&(t.pos=n,!0)},re.Apply.prototype.eval=function(e){const t=e.currentApplication(),n=t?t.args:[],i=this.substituteParams(n),r=e.getCurrentPosInfo();if(r.isActive(i))return i.handleCycle(e);const o=i.toMemoKey(),s=r.memo[o];if(s&&r.shouldUseMemoizedResult(s)){if(e.hasNecessaryInfo(s))return e.useMemoizedResult(e.inputStream.pos,s);delete r.memo[o]}return i.reallyEval(e)},re.Apply.prototype.handleCycle=function(e){const t=e.getCurrentPosInfo(),{currentLeftRecursion:n}=t,i=this.toMemoKey();let r=t.memo[i];return n&&n.headApplication.toMemoKey()===i?r.updateInvolvedApplicationMemoKeys():r||(r=t.memoize(i,{matchLength:0,examinedLength:0,value:!1,rightmostFailureOffset:-1}),t.startLeftRecursion(this,r)),e.useMemoizedResult(e.inputStream.pos,r)},re.Apply.prototype.reallyEval=function(e){const{inputStream:t}=e,n=t.pos,i=e.getCurrentPosInfo(),r=e.grammar.rules[this.ruleName],{body:o}=r,{description:s}=r;e.enterApplication(i,this),s&&e.pushFailuresInfo();const a=t.examinedLength;t.examinedLength=0;let u=this.evalOnce(o,e);const c=i.currentLeftRecursion,l=this.toMemoKey(),d=c&&c.headApplication.toMemoKey()===l;let p;d?(u=this.growSeedResult(o,e,n,c,u),i.endLeftRecursion(),p=c,p.examinedLength=t.examinedLength-n,p.rightmostFailureOffset=e._getRightmostFailureOffset(),i.memoize(l,p)):c&&c.isInvolved(l)||(p=i.memoize(l,{matchLength:t.pos-n,examinedLength:t.examinedLength-n,value:u,failuresAtRightmostPosition:e.cloneRecordedFailures(),rightmostFailureOffset:e._getRightmostFailureOffset()}));const h=!!u;if(s&&(e.popFailuresInfo(),h||e.processFailure(n,this),p&&(p.failuresAtRightmostPosition=e.cloneRecordedFailures())),e.isTracing()&&p){const t=e.getTraceEntry(n,this,h,h?[u]:[]);d&&(te.assert(null!=t.terminatingLREntry||!h),t.isHeadOfLeftRecursion=!0),p.traceEntry=t}return t.examinedLength=Math.max(t.examinedLength,a),e.exitApplication(i,u),h},re.Apply.prototype.evalOnce=function(e,t){const{inputStream:n}=t,i=n.pos;if(t.eval(e)){const r=e.getArity(),o=t._bindings.splice(t._bindings.length-r,r),s=t._bindingOffsets.splice(t._bindingOffsets.length-r,r),a=n.pos-i;return new se(this.ruleName,o,s,a)}return!1},re.Apply.prototype.growSeedResult=function(e,t,n,i,r){if(!r)return!1;const{inputStream:o}=t;for(;;){if(i.matchLength=o.pos-n,i.value=r,i.failuresAtRightmostPosition=t.cloneRecordedFailures(),t.isTracing()){const e=t.trace[t.trace.length-1];i.traceEntry=new ee(t.input,n,o.pos,this,!0,[r],[e.clone()])}if(o.pos=n,r=this.evalOnce(e,t),o.pos-n<=i.matchLength)break;t.isTracing()&&t.trace.splice(-2,1)}return t.isTracing()&&i.traceEntry.recordLRTermination(t.trace.pop(),r),o.pos=n+i.matchLength,i.value},re.UnicodeChar.prototype.eval=function(e){const{inputStream:t}=e,n=t.pos,i=t.next();return i&&this.pattern.test(i)?(e.pushBinding(new oe(i.length),n),!0):(e.processFailure(n,this),!1)};const ue=s,ce=l;ce.PExpr.prototype.getArity=ue.abstract("getArity"),ce.any.getArity=ce.end.getArity=ce.Terminal.prototype.getArity=ce.Range.prototype.getArity=ce.Param.prototype.getArity=ce.Apply.prototype.getArity=ce.UnicodeChar.prototype.getArity=function(){return 1},ce.Alt.prototype.getArity=function(){return 0===this.terms.length?0:this.terms[0].getArity()},ce.Seq.prototype.getArity=function(){let e=0;for(let t=0;t<this.factors.length;t++)e+=this.factors[t].getArity();return e},ce.Iter.prototype.getArity=function(){return this.expr.getArity()},ce.Not.prototype.getArity=function(){return 0},ce.Lookahead.prototype.getArity=ce.Lex.prototype.getArity=function(){return this.expr.getArity()};const le=s,de=l;function pe(e,t){const n={};if(e.source&&t){const i=e.source.relativeTo(t);n.sourceInterval=[i.startIdx,i.endIdx]}return n}de.PExpr.prototype.outputRecipe=le.abstract("outputRecipe"),de.any.outputRecipe=function(e,t){return["any",pe(this,t)]},de.end.outputRecipe=function(e,t){return["end",pe(this,t)]},de.Terminal.prototype.outputRecipe=function(e,t){return["terminal",pe(this,t),this.obj]},de.Range.prototype.outputRecipe=function(e,t){return["range",pe(this,t),this.from,this.to]},de.Param.prototype.outputRecipe=function(e,t){return["param",pe(this,t),this.index]},de.Alt.prototype.outputRecipe=function(e,t){return["alt",pe(this,t)].concat(this.terms.map((n=>n.outputRecipe(e,t))))},de.Extend.prototype.outputRecipe=function(e,t){return this.terms[0].outputRecipe(e,t)},de.Splice.prototype.outputRecipe=function(e,t){const n=this.terms.slice(0,this.expansionPos),i=this.terms.slice(this.expansionPos+1);return["splice",pe(this,t),n.map((n=>n.outputRecipe(e,t))),i.map((n=>n.outputRecipe(e,t)))]},de.Seq.prototype.outputRecipe=function(e,t){return["seq",pe(this,t)].concat(this.factors.map((n=>n.outputRecipe(e,t))))},de.Star.prototype.outputRecipe=de.Plus.prototype.outputRecipe=de.Opt.prototype.outputRecipe=de.Not.prototype.outputRecipe=de.Lookahead.prototype.outputRecipe=de.Lex.prototype.outputRecipe=function(e,t){return[this.constructor.name.toLowerCase(),pe(this,t),this.expr.outputRecipe(e,t)]},de.Apply.prototype.outputRecipe=function(e,t){return["app",pe(this,t),this.ruleName,this.args.map((n=>n.outputRecipe(e,t)))]},de.UnicodeChar.prototype.outputRecipe=function(e,t){return["unicodeChar",pe(this,t),this.category]};const he=s,me=l;me.PExpr.prototype.introduceParams=he.abstract("introduceParams"),me.any.introduceParams=me.end.introduceParams=me.Terminal.prototype.introduceParams=me.Range.prototype.introduceParams=me.Param.prototype.introduceParams=me.UnicodeChar.prototype.introduceParams=function(e){return this},me.Alt.prototype.introduceParams=function(e){return this.terms.forEach(((t,n,i)=>{i[n]=t.introduceParams(e)})),this},me.Seq.prototype.introduceParams=function(e){return this.factors.forEach(((t,n,i)=>{i[n]=t.introduceParams(e)})),this},me.Iter.prototype.introduceParams=me.Not.prototype.introduceParams=me.Lookahead.prototype.introduceParams=me.Lex.prototype.introduceParams=function(e){return this.expr=this.expr.introduceParams(e),this},me.Apply.prototype.introduceParams=function(e){const t=e.indexOf(this.ruleName);if(t>=0){if(this.args.length>0)throw new Error("Parameterized rules cannot be passed as arguments to another rule.");return new me.Param(t).withSource(this.source)}return this.args.forEach(((t,n,i)=>{i[n]=t.introduceParams(e)})),this};const ge=s,fe=l;fe.PExpr.prototype.isNullable=function(e){return this._isNullable(e,Object.create(null))},fe.PExpr.prototype._isNullable=ge.abstract("_isNullable"),fe.any._isNullable=fe.Range.prototype._isNullable=fe.Param.prototype._isNullable=fe.Plus.prototype._isNullable=fe.UnicodeChar.prototype._isNullable=function(e,t){return!1},fe.end._isNullable=function(e,t){return!0},fe.Terminal.prototype._isNullable=function(e,t){return"string"==typeof this.obj&&""===this.obj},fe.Alt.prototype._isNullable=function(e,t){return 0===this.terms.length||this.terms.some((n=>n._isNullable(e,t)))},fe.Seq.prototype._isNullable=function(e,t){return this.factors.every((n=>n._isNullable(e,t)))},fe.Star.prototype._isNullable=fe.Opt.prototype._isNullable=fe.Not.prototype._isNullable=fe.Lookahead.prototype._isNullable=function(e,t){return!0},fe.Lex.prototype._isNullable=function(e,t){return this.expr._isNullable(e,t)},fe.Apply.prototype._isNullable=function(e,t){const n=this.toMemoKey();if(!Object.prototype.hasOwnProperty.call(t,n)){const{body:i}=e.rules[this.ruleName],r=i.substituteParams(this.args);t[n]=!1,t[n]=r._isNullable(e,t)}return t[n]};const ye=s,De=l;De.PExpr.prototype.substituteParams=ye.abstract("substituteParams"),De.any.substituteParams=De.end.substituteParams=De.Terminal.prototype.substituteParams=De.Range.prototype.substituteParams=De.UnicodeChar.prototype.substituteParams=function(e){return this},De.Param.prototype.substituteParams=function(e){return e[this.index]},De.Alt.prototype.substituteParams=function(e){return new De.Alt(this.terms.map((t=>t.substituteParams(e))))},De.Seq.prototype.substituteParams=function(e){return new De.Seq(this.factors.map((t=>t.substituteParams(e))))},De.Iter.prototype.substituteParams=De.Not.prototype.substituteParams=De.Lookahead.prototype.substituteParams=De.Lex.prototype.substituteParams=function(e){return new this.constructor(this.expr.substituteParams(e))},De.Apply.prototype.substituteParams=function(e){if(0===this.args.length)return this;{const t=this.args.map((t=>t.substituteParams(e)));return new De.Apply(this.ruleName,t)}};const Ce=s,ve=l,{copyWithoutDuplicates:Se}=Ce;function Ee(e){return/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)}function be(e){const t=Object.create(null);e.forEach((e=>{t[e]=(t[e]||0)+1})),Object.keys(t).forEach((n=>{if(t[n]<=1)return;let i=1;e.forEach(((t,r)=>{t===n&&(e[r]=t+"_"+i++)}))}))}ve.PExpr.prototype.toArgumentNameList=Ce.abstract("toArgumentNameList"),ve.any.toArgumentNameList=function(e,t){return["any"]},ve.end.toArgumentNameList=function(e,t){return["end"]},ve.Terminal.prototype.toArgumentNameList=function(e,t){return"string"==typeof this.obj&&/^[_a-zA-Z0-9]+$/.test(this.obj)?["_"+this.obj]:["$"+e]},ve.Range.prototype.toArgumentNameList=function(e,t){let n=this.from+"_to_"+this.to;return Ee(n)||(n="_"+n),Ee(n)||(n="$"+e),[n]},ve.Alt.prototype.toArgumentNameList=function(e,t){const n=this.terms.map((t=>t.toArgumentNameList(e,!0))),i=[],r=n[0].length;for(let e=0;e<r;e++){const t=[];for(let i=0;i<this.terms.length;i++)t.push(n[i][e]);const r=Se(t);i.push(r.join("_or_"))}return t||be(i),i},ve.Seq.prototype.toArgumentNameList=function(e,t){let n=[];return this.factors.forEach((t=>{const i=t.toArgumentNameList(e,!0);n=n.concat(i),e+=i.length})),t||be(n),n},ve.Iter.prototype.toArgumentNameList=function(e,t){const n=this.expr.toArgumentNameList(e,t).map((e=>"s"===e[e.length-1]?e+"es":e+"s"));return t||be(n),n},ve.Opt.prototype.toArgumentNameList=function(e,t){return this.expr.toArgumentNameList(e,t).map((e=>"opt"+e[0].toUpperCase()+e.slice(1)))},ve.Not.prototype.toArgumentNameList=function(e,t){return[]},ve.Lookahead.prototype.toArgumentNameList=ve.Lex.prototype.toArgumentNameList=function(e,t){return this.expr.toArgumentNameList(e,t)},ve.Apply.prototype.toArgumentNameList=function(e,t){return[this.ruleName]},ve.UnicodeChar.prototype.toArgumentNameList=function(e,t){return["$"+e]},ve.Param.prototype.toArgumentNameList=function(e,t){return["param"+this.index]};const Te=s,Ae=l;Ae.PExpr.prototype.toDisplayString=Te.abstract("toDisplayString"),Ae.Alt.prototype.toDisplayString=Ae.Seq.prototype.toDisplayString=function(){return this.source?this.source.trimmed().contents:"["+this.constructor.name+"]"},Ae.any.toDisplayString=Ae.end.toDisplayString=Ae.Iter.prototype.toDisplayString=Ae.Not.prototype.toDisplayString=Ae.Lookahead.prototype.toDisplayString=Ae.Lex.prototype.toDisplayString=Ae.Terminal.prototype.toDisplayString=Ae.Range.prototype.toDisplayString=Ae.Param.prototype.toDisplayString=function(){return this.toString()},Ae.Apply.prototype.toDisplayString=function(){if(this.args.length>0){const e=this.args.map((e=>e.toDisplayString()));return this.ruleName+"<"+e.join(",")+">"}return this.ruleName},Ae.UnicodeChar.prototype.toDisplayString=function(){return"Unicode ["+this.category+"] character"};const Fe=o,Re=s,we=l;we.PExpr.prototype.toFailure=Re.abstract("toFailure"),we.any.toFailure=function(e){return new Fe(this,"any object","description")},we.end.toFailure=function(e){return new Fe(this,"end of input","description")},we.Terminal.prototype.toFailure=function(e){return new Fe(this,this.obj,"string")},we.Range.prototype.toFailure=function(e){return new Fe(this,JSON.stringify(this.from)+".."+JSON.stringify(this.to),"code")},we.Not.prototype.toFailure=function(e){const t=this.expr===we.any?"nothing":"not "+this.expr.toFailure(e);return new Fe(this,t,"description")},we.Lookahead.prototype.toFailure=function(e){return this.expr.toFailure(e)},we.Apply.prototype.toFailure=function(e){let{description:t}=e.rules[this.ruleName];return t||(t=(/^[aeiouAEIOU]/.test(this.ruleName)?"an":"a")+" "+this.ruleName),new Fe(this,t,"description")},we.UnicodeChar.prototype.toFailure=function(e){return new Fe(this,"a Unicode ["+this.category+"] character","description")},we.Alt.prototype.toFailure=function(e){const t="("+this.terms.map((t=>t.toFailure(e))).join(" or ")+")";return new Fe(this,t,"description")},we.Seq.prototype.toFailure=function(e){const t="("+this.factors.map((t=>t.toFailure(e))).join(" ")+")";return new Fe(this,t,"description")},we.Iter.prototype.toFailure=function(e){const t="("+this.expr.toFailure(e)+this.operator+")";return new Fe(this,t,"description")};const xe=s,ke=l;ke.PExpr.prototype.toString=xe.abstract("toString"),ke.any.toString=function(){return"any"},ke.end.toString=function(){return"end"},ke.Terminal.prototype.toString=function(){return JSON.stringify(this.obj)},ke.Range.prototype.toString=function(){return JSON.stringify(this.from)+".."+JSON.stringify(this.to)},ke.Param.prototype.toString=function(){return"$"+this.index},ke.Lex.prototype.toString=function(){return"#("+this.expr.toString()+")"},ke.Alt.prototype.toString=function(){return 1===this.terms.length?this.terms[0].toString():"("+this.terms.map((e=>e.toString())).join(" | ")+")"},ke.Seq.prototype.toString=function(){return 1===this.factors.length?this.factors[0].toString():"("+this.factors.map((e=>e.toString())).join(" ")+")"},ke.Iter.prototype.toString=function(){return this.expr+this.operator},ke.Not.prototype.toString=function(){return"~"+this.expr},ke.Lookahead.prototype.toString=function(){return"&"+this.expr},ke.Apply.prototype.toString=function(){if(this.args.length>0){const e=this.args.map((e=>e.toString()));return this.ruleName+"<"+e.join(",")+">"}return this.ruleName},ke.UnicodeChar.prototype.toString=function(){return"\\p{"+this.category+"}"};var _e=l;const Ne=o,{TerminalNode:Pe}=c,{assert:Ie}=s,{PExpr:qe,Terminal:Oe}=_e;class Le extends qe{constructor(e){super(),this.obj=e}_getString(e){const t=e.currentApplication().args[this.obj.index];return Ie(t instanceof Oe,"expected a Terminal expression"),t.obj}allowsSkippingPrecedingSpace(){return!0}eval(e){const{inputStream:t}=e,n=t.pos,i=this._getString(e);return t.matchString(i,!0)?(e.pushBinding(new Pe(i.length),n),!0):(e.processFailure(n,this),!1)}getArity(){return 1}substituteParams(e){return new Le(this.obj.substituteParams(e))}toDisplayString(){return this.obj.toDisplayString()+" (case-insensitive)"}toFailure(e){return new Ne(this,this.obj.toFailure(e)+" (case-insensitive)","description")}_isNullable(e,t){return this.obj._isNullable(e,t)}}var Be=Le;const Me=z;function je(e){this.source=e,this.pos=0,this.examinedLength=0}je.prototype={atEnd(){const e=this.pos===this.source.length;return this.examinedLength=Math.max(this.examinedLength,this.pos+1),e},next(){const e=this.source[this.pos++];return this.examinedLength=Math.max(this.examinedLength,this.pos),e},nextCharCode(){const e=this.next();return e&&e.charCodeAt(0)},nextCodePoint(){const e=this.source.slice(this.pos++).codePointAt(0);return e>65535&&(this.pos+=1),this.examinedLength=Math.max(this.examinedLength,this.pos),e},matchString(e,t){let n;if(t){for(n=0;n<e.length;n++){const t=this.next(),i=e[n];if(null==t||t.toUpperCase()!==i.toUpperCase())return!1}return!0}for(n=0;n<e.length;n++)if(this.next()!==e[n])return!1;return!0},sourceSlice(e,t){return this.source.slice(e,t)},interval(e,t){return new Me(this.source,e,t||this.pos)}};var He=je;const We=s,$e=k,Ue=z;function Ke(e,t,n,i,r,o,s){this.matcher=e,this.input=t,this.startExpr=n,this._cst=i,this._cstOffset=r,this._rightmostFailurePosition=o,this._rightmostFailures=s,this.failed()&&(We.defineLazyProperty(this,"message",(function(){const e="Expected "+this.getExpectedText();return $e.getLineAndColumnMessage(this.input,this.getRightmostFailurePosition())+e})),We.defineLazyProperty(this,"shortMessage",(function(){const e="expected "+this.getExpectedText(),t=$e.getLineAndColumn(this.input,this.getRightmostFailurePosition());return"Line "+t.lineNum+", col "+t.colNum+": "+e})))}Ke.prototype.succeeded=function(){return!!this._cst},Ke.prototype.failed=function(){return!this.succeeded()},Ke.prototype.getRightmostFailurePosition=function(){return this._rightmostFailurePosition},Ke.prototype.getRightmostFailures=function(){if(!this._rightmostFailures){this.matcher.setInput(this.input);const e=this.matcher._match(this.startExpr,!1,this.getRightmostFailurePosition());this._rightmostFailures=e.getRightmostFailures()}return this._rightmostFailures},Ke.prototype.toString=function(){return this.succeeded()?"[match succeeded]":"[match failed at position "+this.getRightmostFailurePosition()+"]"},Ke.prototype.getExpectedText=function(){if(this.succeeded())throw new Error("cannot get expected text of a successful MatchResult");const e=new We.StringBuffer;let t=this.getRightmostFailures();t=t.filter((e=>!e.isFluffy()));for(let n=0;n<t.length;n++)n>0&&(n===t.length-1?e.append(t.length>2?", or ":" or "):e.append(", ")),e.append(t[n].toString());return e.contents()},Ke.prototype.getInterval=function(){const e=this.getRightmostFailurePosition();return new Ue(this.input,e,e)};var Ve=Ke;function ze(){this.applicationMemoKeyStack=[],this.memo={},this.maxExaminedLength=0,this.maxRightmostFailureOffset=-1,this.currentLeftRecursion=void 0}ze.prototype={isActive(e){return this.applicationMemoKeyStack.indexOf(e.toMemoKey())>=0},enter(e){this.applicationMemoKeyStack.push(e.toMemoKey())},exit(){this.applicationMemoKeyStack.pop()},startLeftRecursion(e,t){t.isLeftRecursion=!0,t.headApplication=e,t.nextLeftRecursion=this.currentLeftRecursion,this.currentLeftRecursion=t;const{applicationMemoKeyStack:n}=this,i=n.indexOf(e.toMemoKey())+1,r=n.slice(i);t.isInvolved=function(e){return r.indexOf(e)>=0},t.updateInvolvedApplicationMemoKeys=function(){for(let e=i;e<n.length;e++){const t=n[e];this.isInvolved(t)||r.push(t)}}},endLeftRecursion(){this.currentLeftRecursion=this.currentLeftRecursion.nextLeftRecursion},shouldUseMemoizedResult(e){if(!e.isLeftRecursion)return!0;const{applicationMemoKeyStack:t}=this;for(let n=0;n<t.length;n++){const i=t[n];if(e.isInvolved(i))return!1}return!0},memoize(e,t){return this.memo[e]=t,this.maxExaminedLength=Math.max(this.maxExaminedLength,t.examinedLength),this.maxRightmostFailureOffset=Math.max(this.maxRightmostFailureOffset,t.rightmostFailureOffset),t},clearObsoleteEntries(e,t){if(e+this.maxExaminedLength<=t)return;const{memo:n}=this;this.maxExaminedLength=0,this.maxRightmostFailureOffset=-1,Object.keys(n).forEach((i=>{const r=n[i];e+r.examinedLength>t?delete n[i]:(this.maxExaminedLength=Math.max(this.maxExaminedLength,r.examinedLength),this.maxRightmostFailureOffset=Math.max(this.maxRightmostFailureOffset,r.rightmostFailureOffset))}))}};const Ge=He,Qe=Ve,Xe=ze,Je=Z,Ye=_e;let Ze;k.awaitBuiltInRules((e=>{Ze=e.rules.applySyntactic.body}));const et=new Ye.Apply("spaces");function tt(e,t,n){this.matcher=e,this.startExpr=t,this.grammar=e.grammar,this.input=e.input,this.inputStream=new Ge(e.input),this.memoTable=e.memoTable,this._bindings=[],this._bindingOffsets=[],this._applicationStack=[],this._posStack=[0],this.inLexifiedContextStack=[!1],this.rightmostFailurePosition=-1,this._rightmostFailurePositionStack=[],this._recordedFailuresStack=[],void 0!==n&&(this.positionToRecordFailures=n,this.recordedFailures=Object.create(null))}tt.prototype={posToOffset(e){return e-this._posStack[this._posStack.length-1]},enterApplication(e,t){this._posStack.push(this.inputStream.pos),this._applicationStack.push(t),this.inLexifiedContextStack.push(!1),e.enter(t),this._rightmostFailurePositionStack.push(this.rightmostFailurePosition),this.rightmostFailurePosition=-1},exitApplication(e,t){const n=this._posStack.pop();this._applicationStack.pop(),this.inLexifiedContextStack.pop(),e.exit(),this.rightmostFailurePosition=Math.max(this.rightmostFailurePosition,this._rightmostFailurePositionStack.pop()),t&&this.pushBinding(t,n)},enterLexifiedContext(){this.inLexifiedContextStack.push(!0)},exitLexifiedContext(){this.inLexifiedContextStack.pop()},currentApplication(){return this._applicationStack[this._applicationStack.length-1]},inSyntacticContext(){const e=this.currentApplication();return e?e.isSyntactic()&&!this.inLexifiedContext():this.startExpr.factors[0].isSyntactic()},inLexifiedContext(){return this.inLexifiedContextStack[this.inLexifiedContextStack.length-1]},skipSpaces(){return this.pushFailuresInfo(),this.eval(et),this.popBinding(),this.popFailuresInfo(),this.inputStream.pos},skipSpacesIfInSyntacticContext(){return this.inSyntacticContext()?this.skipSpaces():this.inputStream.pos},maybeSkipSpacesBefore(e){return e.allowsSkippingPrecedingSpace()&&e!==et?this.skipSpacesIfInSyntacticContext():this.inputStream.pos},pushBinding(e,t){this._bindings.push(e),this._bindingOffsets.push(this.posToOffset(t))},popBinding(){this._bindings.pop(),this._bindingOffsets.pop()},numBindings(){return this._bindings.length},truncateBindings(e){for(;this._bindings.length>e;)this.popBinding()},getCurrentPosInfo(){return this.getPosInfo(this.inputStream.pos)},getPosInfo(e){let t=this.memoTable[e];return t||(t=this.memoTable[e]=new Xe),t},processFailure(e,t){if(this.rightmostFailurePosition=Math.max(this.rightmostFailurePosition,e),this.recordedFailures&&e===this.positionToRecordFailures){const e=this.currentApplication();e&&(t=t.substituteParams(e.args)),this.recordFailure(t.toFailure(this.grammar),!1)}},recordFailure(e,t){const n=e.toKey();this.recordedFailures[n]?this.recordedFailures[n].isFluffy()&&!e.isFluffy()&&this.recordedFailures[n].clearFluffy():this.recordedFailures[n]=t?e.clone():e},recordFailures(e,t){Object.keys(e).forEach((n=>{this.recordFailure(e[n],t)}))},cloneRecordedFailures(){if(!this.recordedFailures)return;const e=Object.create(null);return Object.keys(this.recordedFailures).forEach((t=>{e[t]=this.recordedFailures[t].clone()})),e},getRightmostFailurePosition(){return this.rightmostFailurePosition},_getRightmostFailureOffset(){return this.rightmostFailurePosition>=0?this.posToOffset(this.rightmostFailurePosition):-1},getMemoizedTraceEntry(e,t){const n=this.memoTable[e];if(n&&t instanceof Ye.Apply){const e=n.memo[t.toMemoKey()];if(e&&e.traceEntry){const n=e.traceEntry.cloneWithExpr(t);return n.isMemoized=!0,n}}return null},getTraceEntry(e,t,n,i){if(t instanceof Ye.Apply){const e=this.currentApplication(),n=e?e.args:[];t=t.substituteParams(n)}return this.getMemoizedTraceEntry(e,t)||new Je(this.input,e,this.inputStream.pos,t,n,i,this.trace)},isTracing(){return!!this.trace},hasNecessaryInfo(e){return!(this.trace&&!e.traceEntry||this.recordedFailures&&this.inputStream.pos+e.rightmostFailureOffset===this.positionToRecordFailures&&!e.failuresAtRightmostPosition)},useMemoizedResult(e,t){this.trace&&this.trace.push(t.traceEntry);const n=this.inputStream.pos+t.rightmostFailureOffset;return this.rightmostFailurePosition=Math.max(this.rightmostFailurePosition,n),this.recordedFailures&&this.positionToRecordFailures===n&&t.failuresAtRightmostPosition&&this.recordFailures(t.failuresAtRightmostPosition,!0),this.inputStream.examinedLength=Math.max(this.inputStream.examinedLength,t.examinedLength+e),!!t.value&&(this.inputStream.pos+=t.matchLength,this.pushBinding(t.value,e),!0)},eval(e){const{inputStream:t}=this,n=this._bindings.length;let i;this.recordedFailures&&(i=this.recordedFailures,this.recordedFailures=Object.create(null));const r=t.pos,o=this.maybeSkipSpacesBefore(e);let s;this.trace&&(s=this.trace,this.trace=[]);const a=e.eval(this);if(this.trace){const t=this._bindings.slice(n),i=this.getTraceEntry(o,e,a,t);i.isImplicitSpaces=e===et,i.isRootNode=e===this.startExpr,s.push(i),this.trace=s}return a?this.recordedFailures&&t.pos===this.positionToRecordFailures&&Object.keys(this.recordedFailures).forEach((e=>{this.recordedFailures[e].makeFluffy()})):(t.pos=r,this.truncateBindings(n)),this.recordedFailures&&this.recordFailures(i,!1),e===Ze&&this.skipSpaces(),a},getMatchResult(){let e;this.eval(this.startExpr),this.recordedFailures&&(e=Object.keys(this.recordedFailures).map((e=>this.recordedFailures[e])));const t=this._bindings[0];return t&&(t.grammar=this.grammar),new Qe(this.matcher,this.input,this.startExpr,t,this._bindingOffsets[0],this.rightmostFailurePosition,e)},getTrace(){this.trace=[];const e=this.getMatchResult(),t=this.trace[this.trace.length-1];return t.result=e,t},pushFailuresInfo(){this._rightmostFailurePositionStack.push(this.rightmostFailurePosition),this._recordedFailuresStack.push(this.recordedFailures)},popFailuresInfo(){this.rightmostFailurePosition=this._rightmostFailurePositionStack.pop(),this.recordedFailures=this._recordedFailuresStack.pop()}};const nt=tt,it=_e;function rt(e){this.grammar=e,this.memoTable=[],this.input=""}rt.prototype.getInput=function(){return this.input},rt.prototype.setInput=function(e){return this.input!==e&&this.replaceInputRange(0,this.input.length,e),this},rt.prototype.replaceInputRange=function(e,t,n){const i=this.input;if(e<0||e>i.length||t<0||t>i.length||e>t)throw new Error("Invalid indices: "+e+" and "+t);this.input=i.slice(0,e)+n+i.slice(t);const r=this.memoTable.slice(t);this.memoTable.length=e;for(let e=0;e<n.length;e++)this.memoTable.push(void 0);r.forEach((function(e){this.memoTable.push(e)}),this);for(let t=0;t<e;t++){const n=this.memoTable[t];n&&n.clearObsoleteEntries(t,e)}return this},rt.prototype.match=function(e){return this._match(this._getStartExpr(e),!1)},rt.prototype.trace=function(e){return this._match(this._getStartExpr(e),!0)},rt.prototype._match=function(e,t,n){const i=new nt(this,e,n);return t?i.getTrace():i.getMatchResult()},rt.prototype._getStartExpr=function(e){const t=e||this.grammar.defaultStartRule;if(!t)throw new Error("Missing start rule argument -- the grammar has no default start rule.");const n=this.grammar.parseApplication(t);return new it.Seq([n,it.end])};var ot=rt;const st=He,{IterationNode:at}=c,ut=Ve,ct=s,lt=x,dt=k,pt=[],ht=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);class mt{constructor(e,t,n){this._node=e,this.source=t,this._baseInterval=n,e.isNonterminal()&&ct.assert(t===n),this._childWrappers=[]}toString(){return"[semantics wrapper for "+this._node.grammar.name+"]"}_forgetMemoizedResultFor(e){delete this._node[this._semantics.attributeKeys[e]],this.children.forEach((t=>{t._forgetMemoizedResultFor(e)}))}child(e){if(!(0<=e&&e<this._node.numChildren()))return;let t=this._childWrappers[e];if(!t){const n=this._node.childAt(e),i=this._node.childOffsets[e],r=this._baseInterval.subInterval(i,n.matchLength),o=n.isNonterminal()?r:this._baseInterval;t=this._childWrappers[e]=this._semantics.wrap(n,r,o)}return t}_children(){for(let e=0;e<this._node.numChildren();e++)this.child(e);return this._childWrappers}isIteration(){return this._node.isIteration()}isTerminal(){return this._node.isTerminal()}isNonterminal(){return this._node.isNonterminal()}isSyntactic(){return this.isNonterminal()&&this._node.isSyntactic()}isLexical(){return this.isNonterminal()&&this._node.isLexical()}isOptional(){return this._node.isOptional()}iteration(e){const t=e||[],n=t.map((e=>e._node)),i=new at(n,[],-1,!1),r=this._semantics.wrap(i,null,null);return r._childWrappers=t,r}get children(){return this._children()}get ctorName(){return this._node.ctorName}get interval(){throw new Error("The `interval` property is deprecated -- use `source` instead")}get numChildren(){return this._node.numChildren()}get sourceString(){return this.source.contents}}function gt(e,t){const n=this;if(this.grammar=e,this.checkedActionDicts=!1,this.Wrapper=class extends(t?t.Wrapper:mt){constructor(e,t,i){super(e,t,i),n.checkActionDictsIfHaventAlready(),this._semantics=n}},this.super=t,t){if(!e.equals(this.super.grammar)&&!e._inheritsFrom(this.super.grammar))throw new Error("Cannot extend a semantics for grammar '"+this.super.grammar.name+"' for use with grammar '"+e.name+"' (not a sub-grammar)");this.operations=Object.create(this.super.operations),this.attributes=Object.create(this.super.attributes),this.attributeKeys=Object.create(null);for(const e in this.attributes)Object.defineProperty(this.attributeKeys,e,{value:dt.uniqueId(e)})}else this.operations=Object.create(null),this.attributes=Object.create(null),this.attributeKeys=Object.create(null)}function ft(e,t){if(!gt.prototypeGrammar)return ct.assert(-1===e.indexOf("(")),{name:e,formals:[]};const n=gt.prototypeGrammar.match(e,"operation"===t?"OperationSignature":"AttributeSignature");if(n.failed())throw new Error(n.message);return gt.prototypeGrammarSemantics(n).parse()}gt.prototype.toString=function(){return"[semantics for "+this.grammar.name+"]"},gt.prototype.checkActionDictsIfHaventAlready=function(){this.checkedActionDicts||(this.checkActionDicts(),this.checkedActionDicts=!0)},gt.prototype.checkActionDicts=function(){let e;for(e in this.operations)this.operations[e].checkActionDict(this.grammar);for(e in this.attributes)this.attributes[e].checkActionDict(this.grammar)},gt.prototype.toRecipe=function(e){function t(e){return e.super!==gt.BuiltInSemantics._getSemantics()}let n="(function(g) {\n";if(t(this)){n+="  var semantics = "+this.super.toRecipe(!0)+"(g";const e=this.super.grammar;let t=this.grammar;for(;t!==e;)n+=".superGrammar",t=t.superGrammar;n+=");\n",n+="  return g.extendSemantics(semantics)"}else n+="  return g.createSemantics()";return["Operation","Attribute"].forEach((e=>{const i=this[e.toLowerCase()+"s"];Object.keys(i).forEach((r=>{const{actionDict:o,formals:s,builtInDefault:a}=i[r];let u,c=r;s.length>0&&(c+="("+s.join(", ")+")"),u=t(this)&&this.super[e.toLowerCase()+"s"][r]?"extend"+e:"add"+e,n+="\n    ."+u+"("+JSON.stringify(c)+", {";const l=[];Object.keys(o).forEach((e=>{if(o[e]!==a){let t=o[e].toString().trim();t=t.replace(/^.*\(/,"function("),l.push("\n      "+JSON.stringify(e)+": "+t)}})),n+=l.join(",")+"\n    })"}))})),n+=";\n  })",e||(n="(function() {\n  var grammar = this.fromRecipe("+this.grammar.toRecipe()+");\n  var semantics = "+n+"(grammar);\n  return semantics;\n});\n"),n},gt.prototype.addOperationOrAttribute=function(e,t,n){const i=e+"s",r=ft(t,e),{name:o}=r,{formals:s}=r;this.assertNewName(o,e);const a=function(e,t,n){return function(...i){const r=(this._semantics.operations[t]||this._semantics.attributes[t]).formals.map((e=>this.args[e]));if(this.isIteration()||1!==i.length)throw lt.missingSemanticAction(this.ctorName,t,e,pt);return n.apply(i[0],r)}}(e,o,l),u={_default:a};Object.keys(n).forEach((e=>{u[e]=n[e]}));const c="operation"===e?new yt(o,s,u,a):new Dt(o,u,a);function l(...t){const n=this._semantics[i][o];if(arguments.length!==n.formals.length)throw new Error("Invalid number of arguments passed to "+o+" "+e+" (expected "+n.formals.length+", got "+arguments.length+")");const r=Object.create(null);for(const[e,i]of Object.entries(t))r[n.formals[e]]=i;const s=this.args;this.args=r;const a=n.execute(this._semantics,this);return this.args=s,a}c.checkActionDict(this.grammar),this[i][o]=c,"operation"===e?(this.Wrapper.prototype[o]=l,this.Wrapper.prototype[o].toString=function(){return"["+o+" operation]"}):(Object.defineProperty(this.Wrapper.prototype,o,{get:l,configurable:!0}),Object.defineProperty(this.attributeKeys,o,{value:dt.uniqueId(o)}))},gt.prototype.extendOperationOrAttribute=function(e,t,n){const i=e+"s";if(ft(t,"attribute"),!this.super||!(t in this.super[i]))throw new Error("Cannot extend "+e+" '"+t+"': did not inherit an "+e+" with that name");if(ht(this[i],t))throw new Error("Cannot extend "+e+" '"+t+"' again");const r=this[i][t].formals,o=this[i][t].actionDict,s=Object.create(o);Object.keys(n).forEach((e=>{s[e]=n[e]})),this[i][t]="operation"===e?new yt(t,r,s):new Dt(t,s),this[i][t].checkActionDict(this.grammar)},gt.prototype.assertNewName=function(e,t){if(ht(mt.prototype,e))throw new Error("Cannot add "+t+" '"+e+"': that's a reserved name");if(e in this.operations)throw new Error("Cannot add "+t+" '"+e+"': an operation with that name already exists");if(e in this.attributes)throw new Error("Cannot add "+t+" '"+e+"': an attribute with that name already exists")},gt.prototype.wrap=function(e,t,n){const i=n||t;return e instanceof this.Wrapper?e:new this.Wrapper(e,t,i)},gt.createSemantics=function(e,t){const n=new gt(e,void 0!==t?t:gt.BuiltInSemantics._getSemantics()),i=function(t){if(!(t instanceof ut))throw new TypeError("Semantics expected a MatchResult, but got "+ct.unexpectedObjToString(t));if(t.failed())throw new TypeError("cannot apply Semantics to "+t.toString());const i=t._cst;if(i.grammar!==e)throw new Error("Cannot use a MatchResult from grammar '"+i.grammar.name+"' with a semantics for '"+e.name+"'");const r=new st(t.input);return n.wrap(i,r.interval(t._cstOffset,t.input.length))};return i.addOperation=function(e,t){return n.addOperationOrAttribute("operation",e,t),i},i.extendOperation=function(e,t){return n.extendOperationOrAttribute("operation",e,t),i},i.addAttribute=function(e,t){return n.addOperationOrAttribute("attribute",e,t),i},i.extendAttribute=function(e,t){return n.extendOperationOrAttribute("attribute",e,t),i},i._getActionDict=function(t){const i=n.operations[t]||n.attributes[t];if(!i)throw new Error('"'+t+'" is not a valid operation or attribute name in this semantics for "'+e.name+'"');return i.actionDict},i._remove=function(e){let t;return e in n.operations?(t=n.operations[e],delete n.operations[e]):e in n.attributes&&(t=n.attributes[e],delete n.attributes[e]),delete n.Wrapper.prototype[e],t},i.getOperationNames=function(){return Object.keys(n.operations)},i.getAttributeNames=function(){return Object.keys(n.attributes)},i.getGrammar=function(){return n.grammar},i.toRecipe=function(e){return n.toRecipe(e)},i.toString=n.toString.bind(n),i._getSemantics=function(){return n},i};class yt{constructor(e,t,n,i){this.name=e,this.formals=t,this.actionDict=n,this.builtInDefault=i}checkActionDict(e){e._checkTopDownActionDict(this.typeName,this.name,this.actionDict)}execute(e,t){try{const{ctorName:e}=t._node;let n=this.actionDict[e];return n?(pt.push([this,e]),n.apply(t,t._children())):t.isNonterminal()&&(n=this.actionDict._nonterminal,n)?(pt.push([this,"_nonterminal",e]),n.apply(t,t._children())):(pt.push([this,"default action",e]),this.actionDict._default.apply(t,t._children()))}finally{pt.pop()}}}yt.prototype.typeName="operation";class Dt extends yt{constructor(e,t,n){super(e,[],t,n)}execute(e,t){const n=t._node,i=e.attributeKeys[this.name];return ht(n,i)||(n[i]=yt.prototype.execute.call(this,e,t)),n[i]}}Dt.prototype.typeName="attribute";var Ct=gt;const vt=Be,St=ot,Et=Ct,bt=s,Tt=x,At=_e,Ft=["_iter","_terminal","_nonterminal","_default"];function Rt(e){return Object.keys(e.rules).sort().map((t=>e.rules[t]))}function wt(e,t,n,i){if(this.name=e,this.superGrammar=t,this.rules=n,i){if(!(i in n))throw new Error("Invalid start rule: '"+i+"' is not a rule in grammar '"+e+"'");this.defaultStartRule=i}}let xt,kt;wt.initApplicationParser=function(e,t){xt=e,kt=t},wt.prototype={matcher(){return new St(this)},isBuiltIn(){return this===wt.ProtoBuiltInRules||this===wt.BuiltInRules},equals(e){if(this===e)return!0;if(null==e||this.name!==e.name||this.defaultStartRule!==e.defaultStartRule||this.superGrammar!==e.superGrammar&&!this.superGrammar.equals(e.superGrammar))return!1;const t=Rt(this),n=Rt(e);return t.length===n.length&&t.every(((e,t)=>e.description===n[t].description&&e.formals.join(",")===n[t].formals.join(",")&&e.body.toString()===n[t].body.toString()))},match(e,t){const n=this.matcher();return n.replaceInputRange(0,0,e),n.match(t)},trace(e,t){const n=this.matcher();return n.replaceInputRange(0,0,e),n.trace(t)},createSemantics(){return Et.createSemantics(this)},extendSemantics(e){return Et.createSemantics(this,e._getSemantics())},_checkTopDownActionDict(e,t,n){const i=[];for(const e in n){const t=n[e];if(!Ft.includes(e)&&!(e in this.rules)){i.push(`'${e}' is not a valid semantic action for '${this.name}'`);continue}if("function"!=typeof t){i.push(`'${e}' must be a function in an action dictionary for '${this.name}'`);continue}const r=t.length,o=this._topDownActionArity(e);if(r!==o){let t;t="_iter"===e||"_nonterminal"===e?`it should use a rest parameter, e.g. \`${e}(...children) {}\`. NOTE: this is new in Ohm v16 — see https://ohmjs.org/d/ati for details.`:`expected ${o}, got ${r}`,i.push(`Semantic action '${e}' has the wrong arity: ${t}`)}}if(i.length>0){const n=i.map((e=>"- "+e)),r=new Error([`Found errors in the action dictionary of the '${t}' ${e}:`,...n].join("\n"));throw r.problems=i,r}},_topDownActionArity(e){return Ft.includes(e)?0:this.rules[e].body.getArity()},_inheritsFrom(e){let t=this.superGrammar;for(;t;){if(t.equals(e,!0))return!0;t=t.superGrammar}return!1},toRecipe(e){const t={};this.source&&(t.source=this.source.contents);let n=null;this.defaultStartRule&&(n=this.defaultStartRule);const i={};Object.keys(this.rules).forEach((e=>{const t=this.rules[e],{body:n}=t,r=!this.superGrammar||!this.superGrammar.rules[e];let o;o=r?"define":n instanceof At.Extend?"extend":"override";const s={};if(t.source&&this.source){const e=t.source.relativeTo(this.source);s.sourceInterval=[e.startIdx,e.endIdx]}const a=r?t.description:null,u=n.outputRecipe(t.formals,this.source);i[e]=[o,s,a,t.formals,u]}));let r="null";e?r=e:this.superGrammar&&!this.superGrammar.isBuiltIn()&&(r=this.superGrammar.toRecipe());return`[${[...["grammar",t,this.name].map(JSON.stringify),r,...[n,i].map(JSON.stringify)].join(",")}]`.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")},toOperationActionDictionaryTemplate(){return this._toOperationOrAttributeActionDictionaryTemplate()},toAttributeActionDictionaryTemplate(){return this._toOperationOrAttributeActionDictionaryTemplate()},_toOperationOrAttributeActionDictionaryTemplate(){const e=new bt.StringBuffer;e.append("{");let t=!0;for(const n in this.rules){const{body:i}=this.rules[n];t?t=!1:e.append(","),e.append("\n"),e.append("  "),this.addSemanticActionTemplate(n,i,e)}return e.append("\n}"),e.contents()},addSemanticActionTemplate(e,t,n){n.append(e),n.append(": function(");const i=this._topDownActionArity(e);n.append(bt.repeat("_",i).join(", ")),n.append(") {\n"),n.append("  }")},parseApplication(e){let t;if(-1===e.indexOf("<"))t=new At.Apply(e);else{const n=xt.match(e,"Base_application");t=kt(n,{})}if(!(t.ruleName in this.rules))throw Tt.undeclaredRule(t.ruleName,this.name);const{formals:n}=this.rules[t.ruleName];if(n.length!==t.args.length){const{source:e}=this.rules[t.ruleName];throw Tt.wrongNumberOfParameters(t.ruleName,n.length,t.args.length,e)}return t}},wt.ProtoBuiltInRules=new wt("ProtoBuiltInRules",void 0,{any:{body:At.any,formals:[],description:"any character",primitive:!0},end:{body:At.end,formals:[],description:"end of input",primitive:!0},caseInsensitive:{body:new vt(new At.Param(0)),formals:["str"],primitive:!0},lower:{body:new At.UnicodeChar("Ll"),formals:[],description:"a lowercase letter",primitive:!0},upper:{body:new At.UnicodeChar("Lu"),formals:[],description:"an uppercase letter",primitive:!0},unicodeLtmo:{body:new At.UnicodeChar("Ltmo"),formals:[],description:"a Unicode character in Lt, Lm, or Lo",primitive:!0},spaces:{body:new At.Star(new At.Apply("space")),formals:[]},space:{body:new At.Range("\0"," "),formals:[],description:"a space"}});var _t=wt;const Nt=_t,Pt=He,It=s,qt=x,Ot=_e;function Lt(e){this.name=e}Lt.prototype.sourceInterval=function(e,t){return this.source.subInterval(e,t-e)},Lt.prototype.ensureSuperGrammar=function(){return this.superGrammar||this.withSuperGrammar("BuiltInRules"===this.name?Nt.ProtoBuiltInRules:Nt.BuiltInRules),this.superGrammar},Lt.prototype.ensureSuperGrammarRuleForOverriding=function(e,t){const n=this.ensureSuperGrammar().rules[e];if(!n)throw qt.cannotOverrideUndeclaredRule(e,this.superGrammar.name,t);return n},Lt.prototype.installOverriddenOrExtendedRule=function(e,t,n,i){const r=It.getDuplicates(t);if(r.length>0)throw qt.duplicateParameterNames(e,r,i);const o=this.ensureSuperGrammar().rules[e],s=o.formals,a=s?s.length:0;if(t.length!==a)throw qt.wrongNumberOfParameters(e,a,t.length,i);return this.install(e,t,n,o.description,i)},Lt.prototype.install=function(e,t,n,i,r){return this.rules[e]={body:n.introduceParams(t),formals:t,description:i,source:r},this},Lt.prototype.withSuperGrammar=function(e){if(this.superGrammar)throw new Error("the super grammar of a GrammarDecl cannot be set more than once");return this.superGrammar=e,this.rules=Object.create(e.rules),e.isBuiltIn()||(this.defaultStartRule=e.defaultStartRule),this},Lt.prototype.withDefaultStartRule=function(e){return this.defaultStartRule=e,this},Lt.prototype.withSource=function(e){return this.source=new Pt(e).interval(0,e.length),this},Lt.prototype.build=function(){const e=new Nt(this.name,this.ensureSuperGrammar(),this.rules,this.defaultStartRule),t=[];let n=!1;return Object.keys(e.rules).forEach((i=>{const{body:r}=e.rules[i];try{r.assertChoicesHaveUniformArity(i)}catch(e){t.push(e)}try{r.assertAllApplicationsAreValid(i,e)}catch(e){t.push(e),n=!0}})),n||Object.keys(e.rules).forEach((n=>{const{body:i}=e.rules[n];try{i.assertIteratedExprsAreNotNullable(e,[])}catch(e){t.push(e)}})),t.length>0&&qt.throwErrors(t),this.source&&(e.source=this.source),e},Lt.prototype.define=function(e,t,n,i,r){if(this.ensureSuperGrammar(),this.superGrammar.rules[e])throw qt.duplicateRuleDeclaration(e,this.name,this.superGrammar.name,r);if(this.rules[e])throw qt.duplicateRuleDeclaration(e,this.name,this.name,r);const o=It.getDuplicates(t);if(o.length>0)throw qt.duplicateParameterNames(e,o,r);return this.install(e,t,n,i,r)},Lt.prototype.override=function(e,t,n,i,r){return this.ensureSuperGrammarRuleForOverriding(e,r),this.installOverriddenOrExtendedRule(e,t,n,r),this},Lt.prototype.extend=function(e,t,n,i,r){if(!this.ensureSuperGrammar().rules[e])throw qt.cannotExtendUndeclaredRule(e,this.superGrammar.name,r);const o=new Ot.Extend(this.superGrammar,e,n);return o.source=n.source,this.installOverriddenOrExtendedRule(e,t,o,r),this};const Bt=_t,Mt=Lt,jt=_e;function Ht(){}Ht.prototype={currentDecl:null,currentRuleName:null,newGrammar:e=>new Mt(e),grammar(e,t,n,i,r){const o=new Mt(t);return n&&o.withSuperGrammar(n instanceof Bt?n:this.fromRecipe(n)),i&&o.withDefaultStartRule(i),e&&e.source&&o.withSource(e.source),this.currentDecl=o,Object.keys(r).forEach((e=>{this.currentRuleName=e;const t=r[e],n=t[0],i=t[1],s=t[2],a=t[3],u=this.fromRecipe(t[4]);let c;o.source&&i&&i.sourceInterval&&(c=o.source.subInterval(i.sourceInterval[0],i.sourceInterval[1]-i.sourceInterval[0])),o[n](e,a,u,s,c)})),this.currentRuleName=this.currentDecl=null,o.build()},terminal:e=>new jt.Terminal(e),range:(e,t)=>new jt.Range(e,t),param:e=>new jt.Param(e),alt(...e){let t=[];for(let n of e)n instanceof jt.PExpr||(n=this.fromRecipe(n)),n instanceof jt.Alt?t=t.concat(n.terms):t.push(n);return 1===t.length?t[0]:new jt.Alt(t)},seq(...e){let t=[];for(let n of e)n instanceof jt.PExpr||(n=this.fromRecipe(n)),n instanceof jt.Seq?t=t.concat(n.factors):t.push(n);return 1===t.length?t[0]:new jt.Seq(t)},star(e){return e instanceof jt.PExpr||(e=this.fromRecipe(e)),new jt.Star(e)},plus(e){return e instanceof jt.PExpr||(e=this.fromRecipe(e)),new jt.Plus(e)},opt(e){return e instanceof jt.PExpr||(e=this.fromRecipe(e)),new jt.Opt(e)},not(e){return e instanceof jt.PExpr||(e=this.fromRecipe(e)),new jt.Not(e)},la(e){return this.lookahead(e)},lookahead(e){return e instanceof jt.PExpr||(e=this.fromRecipe(e)),new jt.Lookahead(e)},lex(e){return e instanceof jt.PExpr||(e=this.fromRecipe(e)),new jt.Lex(e)},app(e,t){return t&&t.length>0&&(t=t.map((function(e){return e instanceof jt.PExpr?e:this.fromRecipe(e)}),this)),new jt.Apply(e,t)},splice(e,t){return new jt.Splice(this.currentDecl.superGrammar,this.currentRuleName,e.map((e=>this.fromRecipe(e))),t.map((e=>this.fromRecipe(e))))},fromRecipe(e){const t="grammar"===e[0]?e.slice(1):e.slice(2),n=this[e[0]](...t),i=e[1];return i&&i.sourceInterval&&this.currentDecl&&n.withSource(this.currentDecl.sourceInterval(...i.sourceInterval)),n}};var Wt=Ht,$t="string"==typeof __GLOBAL_OHM_VERSION__?__GLOBAL_OHM_VERSION__:"16.3.4",Ut={};const Kt=Wt;Ut.makeRecipe=function(e){return"function"==typeof e?e.call(new Kt):("string"==typeof e&&(e=JSON.parse(e)),(new Kt).fromRecipe(e))};var{makeRecipe:Vt}=Ut,zt=Vt(["grammar",{source:'BuiltInRules {\n\n  alnum  (an alpha-numeric character)\n    = letter\n    | digit\n\n  letter  (a letter)\n    = lower\n    | upper\n    | unicodeLtmo\n\n  digit  (a digit)\n    = "0".."9"\n\n  hexDigit  (a hexadecimal digit)\n    = digit\n    | "a".."f"\n    | "A".."F"\n\n  ListOf<elem, sep>\n    = NonemptyListOf<elem, sep>\n    | EmptyListOf<elem, sep>\n\n  NonemptyListOf<elem, sep>\n    = elem (sep elem)*\n\n  EmptyListOf<elem, sep>\n    = /* nothing */\n\n  listOf<elem, sep>\n    = nonemptyListOf<elem, sep>\n    | emptyListOf<elem, sep>\n\n  nonemptyListOf<elem, sep>\n    = elem (sep elem)*\n\n  emptyListOf<elem, sep>\n    = /* nothing */\n\n  // Allows a syntactic rule application within a lexical context.\n  applySyntactic<app> = app\n}'},"BuiltInRules",null,null,{alnum:["define",{sourceInterval:[18,78]},"an alpha-numeric character",[],["alt",{sourceInterval:[60,78]},["app",{sourceInterval:[60,66]},"letter",[]],["app",{sourceInterval:[73,78]},"digit",[]]]],letter:["define",{sourceInterval:[82,142]},"a letter",[],["alt",{sourceInterval:[107,142]},["app",{sourceInterval:[107,112]},"lower",[]],["app",{sourceInterval:[119,124]},"upper",[]],["app",{sourceInterval:[131,142]},"unicodeLtmo",[]]]],digit:["define",{sourceInterval:[146,177]},"a digit",[],["range",{sourceInterval:[169,177]},"0","9"]],hexDigit:["define",{sourceInterval:[181,254]},"a hexadecimal digit",[],["alt",{sourceInterval:[219,254]},["app",{sourceInterval:[219,224]},"digit",[]],["range",{sourceInterval:[231,239]},"a","f"],["range",{sourceInterval:[246,254]},"A","F"]]],ListOf:["define",{sourceInterval:[258,336]},null,["elem","sep"],["alt",{sourceInterval:[282,336]},["app",{sourceInterval:[282,307]},"NonemptyListOf",[["param",{sourceInterval:[297,301]},0],["param",{sourceInterval:[303,306]},1]]],["app",{sourceInterval:[314,336]},"EmptyListOf",[["param",{sourceInterval:[326,330]},0],["param",{sourceInterval:[332,335]},1]]]]],NonemptyListOf:["define",{sourceInterval:[340,388]},null,["elem","sep"],["seq",{sourceInterval:[372,388]},["param",{sourceInterval:[372,376]},0],["star",{sourceInterval:[377,388]},["seq",{sourceInterval:[378,386]},["param",{sourceInterval:[378,381]},1],["param",{sourceInterval:[382,386]},0]]]]],EmptyListOf:["define",{sourceInterval:[392,434]},null,["elem","sep"],["seq",{sourceInterval:[438,438]}]],listOf:["define",{sourceInterval:[438,516]},null,["elem","sep"],["alt",{sourceInterval:[462,516]},["app",{sourceInterval:[462,487]},"nonemptyListOf",[["param",{sourceInterval:[477,481]},0],["param",{sourceInterval:[483,486]},1]]],["app",{sourceInterval:[494,516]},"emptyListOf",[["param",{sourceInterval:[506,510]},0],["param",{sourceInterval:[512,515]},1]]]]],nonemptyListOf:["define",{sourceInterval:[520,568]},null,["elem","sep"],["seq",{sourceInterval:[552,568]},["param",{sourceInterval:[552,556]},0],["star",{sourceInterval:[557,568]},["seq",{sourceInterval:[558,566]},["param",{sourceInterval:[558,561]},1],["param",{sourceInterval:[562,566]},0]]]]],emptyListOf:["define",{sourceInterval:[572,682]},null,["elem","sep"],["seq",{sourceInterval:[685,685]}]],applySyntactic:["define",{sourceInterval:[685,710]},null,["app"],["param",{sourceInterval:[707,710]},0]]}]);_t.BuiltInRules=zt;var{makeRecipe:Gt}=Ut,Qt=Gt(["grammar",{source:'OperationsAndAttributes {\n\n  AttributeSignature =\n    name\n\n  OperationSignature =\n    name Formals?\n\n  Formals\n    = "(" ListOf<name, ","> ")"\n\n  name  (a name)\n    = nameFirst nameRest*\n\n  nameFirst\n    = "_"\n    | letter\n\n  nameRest\n    = "_"\n    | alnum\n\n}'},"OperationsAndAttributes",null,"AttributeSignature",{AttributeSignature:["define",{sourceInterval:[29,58]},null,[],["app",{sourceInterval:[54,58]},"name",[]]],OperationSignature:["define",{sourceInterval:[62,100]},null,[],["seq",{sourceInterval:[87,100]},["app",{sourceInterval:[87,91]},"name",[]],["opt",{sourceInterval:[92,100]},["app",{sourceInterval:[92,99]},"Formals",[]]]]],Formals:["define",{sourceInterval:[104,143]},null,[],["seq",{sourceInterval:[118,143]},["terminal",{sourceInterval:[118,121]},"("],["app",{sourceInterval:[122,139]},"ListOf",[["app",{sourceInterval:[129,133]},"name",[]],["terminal",{sourceInterval:[135,138]},","]]],["terminal",{sourceInterval:[140,143]},")"]]],name:["define",{sourceInterval:[147,187]},"a name",[],["seq",{sourceInterval:[168,187]},["app",{sourceInterval:[168,177]},"nameFirst",[]],["star",{sourceInterval:[178,187]},["app",{sourceInterval:[178,186]},"nameRest",[]]]]],nameFirst:["define",{sourceInterval:[191,223]},null,[],["alt",{sourceInterval:[207,223]},["terminal",{sourceInterval:[207,210]},"_"],["app",{sourceInterval:[217,223]},"letter",[]]]],nameRest:["define",{sourceInterval:[227,257]},null,[],["alt",{sourceInterval:[242,257]},["terminal",{sourceInterval:[242,245]},"_"],["app",{sourceInterval:[252,257]},"alnum",[]]]]}]);const Xt=Ct;k.awaitBuiltInRules((e=>{const t=Qt;var n;!function(e){const t={empty(){return this.iteration()},nonEmpty(e,t,n){return this.iteration([e].concat(n.children))}};Xt.BuiltInSemantics=Xt.createSemantics(e,null).addOperation("asIteration",{emptyListOf:t.empty,nonemptyListOf:t.nonEmpty,EmptyListOf:t.empty,NonemptyListOf:t.nonEmpty})}(e),n=t,Xt.prototypeGrammarSemantics=n.createSemantics().addOperation("parse",{AttributeSignature:e=>({name:e.parse(),formals:[]}),OperationSignature:(e,t)=>({name:e.parse(),formals:t.children.map((e=>e.parse()))[0]||[]}),Formals:(e,t,n)=>t.asIteration().children.map((e=>e.parse())),name(e,t){return this.sourceString}}),Xt.prototypeGrammar=n}));var{makeRecipe:Jt}=Ut,Yt=Jt(["grammar",{source:'Ohm {\n\n  Grammars\n    = Grammar*\n\n  Grammar\n    = ident SuperGrammar? "{" Rule* "}"\n\n  SuperGrammar\n    = "<:" ident\n\n  Rule\n    = ident Formals? ruleDescr? "="  RuleBody  -- define\n    | ident Formals?            ":=" OverrideRuleBody  -- override\n    | ident Formals?            "+=" RuleBody  -- extend\n\n  RuleBody\n    = "|"? NonemptyListOf<TopLevelTerm, "|">\n\n  TopLevelTerm\n    = Seq caseName  -- inline\n    | Seq\n\n  OverrideRuleBody\n    = "|"? NonemptyListOf<OverrideTopLevelTerm, "|">\n\n  OverrideTopLevelTerm\n    = "..."  -- superSplice\n    | TopLevelTerm\n\n  Formals\n    = "<" ListOf<ident, ","> ">"\n\n  Params\n    = "<" ListOf<Seq, ","> ">"\n\n  Alt\n    = NonemptyListOf<Seq, "|">\n\n  Seq\n    = Iter*\n\n  Iter\n    = Pred "*"  -- star\n    | Pred "+"  -- plus\n    | Pred "?"  -- opt\n    | Pred\n\n  Pred\n    = "~" Lex  -- not\n    | "&" Lex  -- lookahead\n    | Lex\n\n  Lex\n    = "#" Base  -- lex\n    | Base\n\n  Base\n    = ident Params? ~(ruleDescr? "=" | ":=" | "+=")  -- application\n    | oneCharTerminal ".." oneCharTerminal           -- range\n    | terminal                                       -- terminal\n    | "(" Alt ")"                                    -- paren\n\n  ruleDescr  (a rule description)\n    = "(" ruleDescrText ")"\n\n  ruleDescrText\n    = (~")" any)*\n\n  caseName\n    = "--" (~"\\n" space)* name (~"\\n" space)* ("\\n" | &"}")\n\n  name  (a name)\n    = nameFirst nameRest*\n\n  nameFirst\n    = "_"\n    | letter\n\n  nameRest\n    = "_"\n    | alnum\n\n  ident  (an identifier)\n    = name\n\n  terminal\n    = "\\"" terminalChar* "\\""\n\n  oneCharTerminal\n    = "\\"" terminalChar "\\""\n\n  terminalChar\n    = escapeChar\n      | ~"\\\\" ~"\\"" ~"\\n" "\\u{0}".."\\u{10FFFF}"\n\n  escapeChar  (an escape sequence)\n    = "\\\\\\\\"                                     -- backslash\n    | "\\\\\\""                                     -- doubleQuote\n    | "\\\\\\\'"                                     -- singleQuote\n    | "\\\\b"                                      -- backspace\n    | "\\\\n"                                      -- lineFeed\n    | "\\\\r"                                      -- carriageReturn\n    | "\\\\t"                                      -- tab\n    | "\\\\u{" hexDigit hexDigit? hexDigit?\n             hexDigit? hexDigit? hexDigit? "}"   -- unicodeCodePoint\n    | "\\\\u" hexDigit hexDigit hexDigit hexDigit  -- unicodeEscape\n    | "\\\\x" hexDigit hexDigit                    -- hexEscape\n\n  space\n   += comment\n\n  comment\n    = "//" (~"\\n" any)* &("\\n" | end)  -- singleLine\n    | "/*" (~"*/" any)* "*/"  -- multiLine\n\n  tokens = token*\n\n  token = caseName | comment | ident | operator | punctuation | terminal | any\n\n  operator = "<:" | "=" | ":=" | "+=" | "*" | "+" | "?" | "~" | "&"\n\n  punctuation = "<" | ">" | "," | "--"\n}'},"Ohm",null,"Grammars",{Grammars:["define",{sourceInterval:[9,32]},null,[],["star",{sourceInterval:[24,32]},["app",{sourceInterval:[24,31]},"Grammar",[]]]],Grammar:["define",{sourceInterval:[36,83]},null,[],["seq",{sourceInterval:[50,83]},["app",{sourceInterval:[50,55]},"ident",[]],["opt",{sourceInterval:[56,69]},["app",{sourceInterval:[56,68]},"SuperGrammar",[]]],["terminal",{sourceInterval:[70,73]},"{"],["star",{sourceInterval:[74,79]},["app",{sourceInterval:[74,78]},"Rule",[]]],["terminal",{sourceInterval:[80,83]},"}"]]],SuperGrammar:["define",{sourceInterval:[87,116]},null,[],["seq",{sourceInterval:[106,116]},["terminal",{sourceInterval:[106,110]},"<:"],["app",{sourceInterval:[111,116]},"ident",[]]]],Rule_define:["define",{sourceInterval:[131,181]},null,[],["seq",{sourceInterval:[131,170]},["app",{sourceInterval:[131,136]},"ident",[]],["opt",{sourceInterval:[137,145]},["app",{sourceInterval:[137,144]},"Formals",[]]],["opt",{sourceInterval:[146,156]},["app",{sourceInterval:[146,155]},"ruleDescr",[]]],["terminal",{sourceInterval:[157,160]},"="],["app",{sourceInterval:[162,170]},"RuleBody",[]]]],Rule_override:["define",{sourceInterval:[188,248]},null,[],["seq",{sourceInterval:[188,235]},["app",{sourceInterval:[188,193]},"ident",[]],["opt",{sourceInterval:[194,202]},["app",{sourceInterval:[194,201]},"Formals",[]]],["terminal",{sourceInterval:[214,218]},":="],["app",{sourceInterval:[219,235]},"OverrideRuleBody",[]]]],Rule_extend:["define",{sourceInterval:[255,305]},null,[],["seq",{sourceInterval:[255,294]},["app",{sourceInterval:[255,260]},"ident",[]],["opt",{sourceInterval:[261,269]},["app",{sourceInterval:[261,268]},"Formals",[]]],["terminal",{sourceInterval:[281,285]},"+="],["app",{sourceInterval:[286,294]},"RuleBody",[]]]],Rule:["define",{sourceInterval:[120,305]},null,[],["alt",{sourceInterval:[131,305]},["app",{sourceInterval:[131,170]},"Rule_define",[]],["app",{sourceInterval:[188,235]},"Rule_override",[]],["app",{sourceInterval:[255,294]},"Rule_extend",[]]]],RuleBody:["define",{sourceInterval:[309,362]},null,[],["seq",{sourceInterval:[324,362]},["opt",{sourceInterval:[324,328]},["terminal",{sourceInterval:[324,327]},"|"]],["app",{sourceInterval:[329,362]},"NonemptyListOf",[["app",{sourceInterval:[344,356]},"TopLevelTerm",[]],["terminal",{sourceInterval:[358,361]},"|"]]]]],TopLevelTerm_inline:["define",{sourceInterval:[385,408]},null,[],["seq",{sourceInterval:[385,397]},["app",{sourceInterval:[385,388]},"Seq",[]],["app",{sourceInterval:[389,397]},"caseName",[]]]],TopLevelTerm:["define",{sourceInterval:[366,418]},null,[],["alt",{sourceInterval:[385,418]},["app",{sourceInterval:[385,397]},"TopLevelTerm_inline",[]],["app",{sourceInterval:[415,418]},"Seq",[]]]],OverrideRuleBody:["define",{sourceInterval:[422,491]},null,[],["seq",{sourceInterval:[445,491]},["opt",{sourceInterval:[445,449]},["terminal",{sourceInterval:[445,448]},"|"]],["app",{sourceInterval:[450,491]},"NonemptyListOf",[["app",{sourceInterval:[465,485]},"OverrideTopLevelTerm",[]],["terminal",{sourceInterval:[487,490]},"|"]]]]],OverrideTopLevelTerm_superSplice:["define",{sourceInterval:[522,543]},null,[],["terminal",{sourceInterval:[522,527]},"..."]],OverrideTopLevelTerm:["define",{sourceInterval:[495,562]},null,[],["alt",{sourceInterval:[522,562]},["app",{sourceInterval:[522,527]},"OverrideTopLevelTerm_superSplice",[]],["app",{sourceInterval:[550,562]},"TopLevelTerm",[]]]],Formals:["define",{sourceInterval:[566,606]},null,[],["seq",{sourceInterval:[580,606]},["terminal",{sourceInterval:[580,583]},"<"],["app",{sourceInterval:[584,602]},"ListOf",[["app",{sourceInterval:[591,596]},"ident",[]],["terminal",{sourceInterval:[598,601]},","]]],["terminal",{sourceInterval:[603,606]},">"]]],Params:["define",{sourceInterval:[610,647]},null,[],["seq",{sourceInterval:[623,647]},["terminal",{sourceInterval:[623,626]},"<"],["app",{sourceInterval:[627,643]},"ListOf",[["app",{sourceInterval:[634,637]},"Seq",[]],["terminal",{sourceInterval:[639,642]},","]]],["terminal",{sourceInterval:[644,647]},">"]]],Alt:["define",{sourceInterval:[651,685]},null,[],["app",{sourceInterval:[661,685]},"NonemptyListOf",[["app",{sourceInterval:[676,679]},"Seq",[]],["terminal",{sourceInterval:[681,684]},"|"]]]],Seq:["define",{sourceInterval:[689,704]},null,[],["star",{sourceInterval:[699,704]},["app",{sourceInterval:[699,703]},"Iter",[]]]],Iter_star:["define",{sourceInterval:[719,736]},null,[],["seq",{sourceInterval:[719,727]},["app",{sourceInterval:[719,723]},"Pred",[]],["terminal",{sourceInterval:[724,727]},"*"]]],Iter_plus:["define",{sourceInterval:[743,760]},null,[],["seq",{sourceInterval:[743,751]},["app",{sourceInterval:[743,747]},"Pred",[]],["terminal",{sourceInterval:[748,751]},"+"]]],Iter_opt:["define",{sourceInterval:[767,783]},null,[],["seq",{sourceInterval:[767,775]},["app",{sourceInterval:[767,771]},"Pred",[]],["terminal",{sourceInterval:[772,775]},"?"]]],Iter:["define",{sourceInterval:[708,794]},null,[],["alt",{sourceInterval:[719,794]},["app",{sourceInterval:[719,727]},"Iter_star",[]],["app",{sourceInterval:[743,751]},"Iter_plus",[]],["app",{sourceInterval:[767,775]},"Iter_opt",[]],["app",{sourceInterval:[790,794]},"Pred",[]]]],Pred_not:["define",{sourceInterval:[809,824]},null,[],["seq",{sourceInterval:[809,816]},["terminal",{sourceInterval:[809,812]},"~"],["app",{sourceInterval:[813,816]},"Lex",[]]]],Pred_lookahead:["define",{sourceInterval:[831,852]},null,[],["seq",{sourceInterval:[831,838]},["terminal",{sourceInterval:[831,834]},"&"],["app",{sourceInterval:[835,838]},"Lex",[]]]],Pred:["define",{sourceInterval:[798,862]},null,[],["alt",{sourceInterval:[809,862]},["app",{sourceInterval:[809,816]},"Pred_not",[]],["app",{sourceInterval:[831,838]},"Pred_lookahead",[]],["app",{sourceInterval:[859,862]},"Lex",[]]]],Lex_lex:["define",{sourceInterval:[876,892]},null,[],["seq",{sourceInterval:[876,884]},["terminal",{sourceInterval:[876,879]},"#"],["app",{sourceInterval:[880,884]},"Base",[]]]],Lex:["define",{sourceInterval:[866,903]},null,[],["alt",{sourceInterval:[876,903]},["app",{sourceInterval:[876,884]},"Lex_lex",[]],["app",{sourceInterval:[899,903]},"Base",[]]]],Base_application:["define",{sourceInterval:[918,979]},null,[],["seq",{sourceInterval:[918,963]},["app",{sourceInterval:[918,923]},"ident",[]],["opt",{sourceInterval:[924,931]},["app",{sourceInterval:[924,930]},"Params",[]]],["not",{sourceInterval:[932,963]},["alt",{sourceInterval:[934,962]},["seq",{sourceInterval:[934,948]},["opt",{sourceInterval:[934,944]},["app",{sourceInterval:[934,943]},"ruleDescr",[]]],["terminal",{sourceInterval:[945,948]},"="]],["terminal",{sourceInterval:[951,955]},":="],["terminal",{sourceInterval:[958,962]},"+="]]]]],Base_range:["define",{sourceInterval:[986,1041]},null,[],["seq",{sourceInterval:[986,1022]},["app",{sourceInterval:[986,1001]},"oneCharTerminal",[]],["terminal",{sourceInterval:[1002,1006]},".."],["app",{sourceInterval:[1007,1022]},"oneCharTerminal",[]]]],Base_terminal:["define",{sourceInterval:[1048,1106]},null,[],["app",{sourceInterval:[1048,1056]},"terminal",[]]],Base_paren:["define",{sourceInterval:[1113,1168]},null,[],["seq",{sourceInterval:[1113,1124]},["terminal",{sourceInterval:[1113,1116]},"("],["app",{sourceInterval:[1117,1120]},"Alt",[]],["terminal",{sourceInterval:[1121,1124]},")"]]],Base:["define",{sourceInterval:[907,1168]},null,[],["alt",{sourceInterval:[918,1168]},["app",{sourceInterval:[918,963]},"Base_application",[]],["app",{sourceInterval:[986,1022]},"Base_range",[]],["app",{sourceInterval:[1048,1056]},"Base_terminal",[]],["app",{sourceInterval:[1113,1124]},"Base_paren",[]]]],ruleDescr:["define",{sourceInterval:[1172,1231]},"a rule description",[],["seq",{sourceInterval:[1210,1231]},["terminal",{sourceInterval:[1210,1213]},"("],["app",{sourceInterval:[1214,1227]},"ruleDescrText",[]],["terminal",{sourceInterval:[1228,1231]},")"]]],ruleDescrText:["define",{sourceInterval:[1235,1266]},null,[],["star",{sourceInterval:[1255,1266]},["seq",{sourceInterval:[1256,1264]},["not",{sourceInterval:[1256,1260]},["terminal",{sourceInterval:[1257,1260]},")"]],["app",{sourceInterval:[1261,1264]},"any",[]]]]],caseName:["define",{sourceInterval:[1270,1338]},null,[],["seq",{sourceInterval:[1285,1338]},["terminal",{sourceInterval:[1285,1289]},"--"],["star",{sourceInterval:[1290,1304]},["seq",{sourceInterval:[1291,1302]},["not",{sourceInterval:[1291,1296]},["terminal",{sourceInterval:[1292,1296]},"\n"]],["app",{sourceInterval:[1297,1302]},"space",[]]]],["app",{sourceInterval:[1305,1309]},"name",[]],["star",{sourceInterval:[1310,1324]},["seq",{sourceInterval:[1311,1322]},["not",{sourceInterval:[1311,1316]},["terminal",{sourceInterval:[1312,1316]},"\n"]],["app",{sourceInterval:[1317,1322]},"space",[]]]],["alt",{sourceInterval:[1326,1337]},["terminal",{sourceInterval:[1326,1330]},"\n"],["lookahead",{sourceInterval:[1333,1337]},["terminal",{sourceInterval:[1334,1337]},"}"]]]]],name:["define",{sourceInterval:[1342,1382]},"a name",[],["seq",{sourceInterval:[1363,1382]},["app",{sourceInterval:[1363,1372]},"nameFirst",[]],["star",{sourceInterval:[1373,1382]},["app",{sourceInterval:[1373,1381]},"nameRest",[]]]]],nameFirst:["define",{sourceInterval:[1386,1418]},null,[],["alt",{sourceInterval:[1402,1418]},["terminal",{sourceInterval:[1402,1405]},"_"],["app",{sourceInterval:[1412,1418]},"letter",[]]]],nameRest:["define",{sourceInterval:[1422,1452]},null,[],["alt",{sourceInterval:[1437,1452]},["terminal",{sourceInterval:[1437,1440]},"_"],["app",{sourceInterval:[1447,1452]},"alnum",[]]]],ident:["define",{sourceInterval:[1456,1489]},"an identifier",[],["app",{sourceInterval:[1485,1489]},"name",[]]],terminal:["define",{sourceInterval:[1493,1531]},null,[],["seq",{sourceInterval:[1508,1531]},["terminal",{sourceInterval:[1508,1512]},'"'],["star",{sourceInterval:[1513,1526]},["app",{sourceInterval:[1513,1525]},"terminalChar",[]]],["terminal",{sourceInterval:[1527,1531]},'"']]],oneCharTerminal:["define",{sourceInterval:[1535,1579]},null,[],["seq",{sourceInterval:[1557,1579]},["terminal",{sourceInterval:[1557,1561]},'"'],["app",{sourceInterval:[1562,1574]},"terminalChar",[]],["terminal",{sourceInterval:[1575,1579]},'"']]],terminalChar:["define",{sourceInterval:[1583,1660]},null,[],["alt",{sourceInterval:[1602,1660]},["app",{sourceInterval:[1602,1612]},"escapeChar",[]],["seq",{sourceInterval:[1621,1660]},["not",{sourceInterval:[1621,1626]},["terminal",{sourceInterval:[1622,1626]},"\\"]],["not",{sourceInterval:[1627,1632]},["terminal",{sourceInterval:[1628,1632]},'"']],["not",{sourceInterval:[1633,1638]},["terminal",{sourceInterval:[1634,1638]},"\n"]],["range",{sourceInterval:[1639,1660]},"\0","􏿿"]]]],escapeChar_backslash:["define",{sourceInterval:[1703,1758]},null,[],["terminal",{sourceInterval:[1703,1709]},"\\\\"]],escapeChar_doubleQuote:["define",{sourceInterval:[1765,1822]},null,[],["terminal",{sourceInterval:[1765,1771]},'\\"']],escapeChar_singleQuote:["define",{sourceInterval:[1829,1886]},null,[],["terminal",{sourceInterval:[1829,1835]},"\\'"]],escapeChar_backspace:["define",{sourceInterval:[1893,1948]},null,[],["terminal",{sourceInterval:[1893,1898]},"\\b"]],escapeChar_lineFeed:["define",{sourceInterval:[1955,2009]},null,[],["terminal",{sourceInterval:[1955,1960]},"\\n"]],escapeChar_carriageReturn:["define",{sourceInterval:[2016,2076]},null,[],["terminal",{sourceInterval:[2016,2021]},"\\r"]],escapeChar_tab:["define",{sourceInterval:[2083,2132]},null,[],["terminal",{sourceInterval:[2083,2088]},"\\t"]],escapeChar_unicodeCodePoint:["define",{sourceInterval:[2139,2243]},null,[],["seq",{sourceInterval:[2139,2221]},["terminal",{sourceInterval:[2139,2145]},"\\u{"],["app",{sourceInterval:[2146,2154]},"hexDigit",[]],["opt",{sourceInterval:[2155,2164]},["app",{sourceInterval:[2155,2163]},"hexDigit",[]]],["opt",{sourceInterval:[2165,2174]},["app",{sourceInterval:[2165,2173]},"hexDigit",[]]],["opt",{sourceInterval:[2188,2197]},["app",{sourceInterval:[2188,2196]},"hexDigit",[]]],["opt",{sourceInterval:[2198,2207]},["app",{sourceInterval:[2198,2206]},"hexDigit",[]]],["opt",{sourceInterval:[2208,2217]},["app",{sourceInterval:[2208,2216]},"hexDigit",[]]],["terminal",{sourceInterval:[2218,2221]},"}"]]],escapeChar_unicodeEscape:["define",{sourceInterval:[2250,2309]},null,[],["seq",{sourceInterval:[2250,2291]},["terminal",{sourceInterval:[2250,2255]},"\\u"],["app",{sourceInterval:[2256,2264]},"hexDigit",[]],["app",{sourceInterval:[2265,2273]},"hexDigit",[]],["app",{sourceInterval:[2274,2282]},"hexDigit",[]],["app",{sourceInterval:[2283,2291]},"hexDigit",[]]]],escapeChar_hexEscape:["define",{sourceInterval:[2316,2371]},null,[],["seq",{sourceInterval:[2316,2339]},["terminal",{sourceInterval:[2316,2321]},"\\x"],["app",{sourceInterval:[2322,2330]},"hexDigit",[]],["app",{sourceInterval:[2331,2339]},"hexDigit",[]]]],escapeChar:["define",{sourceInterval:[1664,2371]},"an escape sequence",[],["alt",{sourceInterval:[1703,2371]},["app",{sourceInterval:[1703,1709]},"escapeChar_backslash",[]],["app",{sourceInterval:[1765,1771]},"escapeChar_doubleQuote",[]],["app",{sourceInterval:[1829,1835]},"escapeChar_singleQuote",[]],["app",{sourceInterval:[1893,1898]},"escapeChar_backspace",[]],["app",{sourceInterval:[1955,1960]},"escapeChar_lineFeed",[]],["app",{sourceInterval:[2016,2021]},"escapeChar_carriageReturn",[]],["app",{sourceInterval:[2083,2088]},"escapeChar_tab",[]],["app",{sourceInterval:[2139,2221]},"escapeChar_unicodeCodePoint",[]],["app",{sourceInterval:[2250,2291]},"escapeChar_unicodeEscape",[]],["app",{sourceInterval:[2316,2339]},"escapeChar_hexEscape",[]]]],space:["extend",{sourceInterval:[2375,2394]},null,[],["app",{sourceInterval:[2387,2394]},"comment",[]]],comment_singleLine:["define",{sourceInterval:[2412,2458]},null,[],["seq",{sourceInterval:[2412,2443]},["terminal",{sourceInterval:[2412,2416]},"//"],["star",{sourceInterval:[2417,2429]},["seq",{sourceInterval:[2418,2427]},["not",{sourceInterval:[2418,2423]},["terminal",{sourceInterval:[2419,2423]},"\n"]],["app",{sourceInterval:[2424,2427]},"any",[]]]],["lookahead",{sourceInterval:[2430,2443]},["alt",{sourceInterval:[2432,2442]},["terminal",{sourceInterval:[2432,2436]},"\n"],["app",{sourceInterval:[2439,2442]},"end",[]]]]]],comment_multiLine:["define",{sourceInterval:[2465,2501]},null,[],["seq",{sourceInterval:[2465,2487]},["terminal",{sourceInterval:[2465,2469]},"/*"],["star",{sourceInterval:[2470,2482]},["seq",{sourceInterval:[2471,2480]},["not",{sourceInterval:[2471,2476]},["terminal",{sourceInterval:[2472,2476]},"*/"]],["app",{sourceInterval:[2477,2480]},"any",[]]]],["terminal",{sourceInterval:[2483,2487]},"*/"]]],comment:["define",{sourceInterval:[2398,2501]},null,[],["alt",{sourceInterval:[2412,2501]},["app",{sourceInterval:[2412,2443]},"comment_singleLine",[]],["app",{sourceInterval:[2465,2487]},"comment_multiLine",[]]]],tokens:["define",{sourceInterval:[2505,2520]},null,[],["star",{sourceInterval:[2514,2520]},["app",{sourceInterval:[2514,2519]},"token",[]]]],token:["define",{sourceInterval:[2524,2600]},null,[],["alt",{sourceInterval:[2532,2600]},["app",{sourceInterval:[2532,2540]},"caseName",[]],["app",{sourceInterval:[2543,2550]},"comment",[]],["app",{sourceInterval:[2553,2558]},"ident",[]],["app",{sourceInterval:[2561,2569]},"operator",[]],["app",{sourceInterval:[2572,2583]},"punctuation",[]],["app",{sourceInterval:[2586,2594]},"terminal",[]],["app",{sourceInterval:[2597,2600]},"any",[]]]],operator:["define",{sourceInterval:[2604,2669]},null,[],["alt",{sourceInterval:[2615,2669]},["terminal",{sourceInterval:[2615,2619]},"<:"],["terminal",{sourceInterval:[2622,2625]},"="],["terminal",{sourceInterval:[2628,2632]},":="],["terminal",{sourceInterval:[2635,2639]},"+="],["terminal",{sourceInterval:[2642,2645]},"*"],["terminal",{sourceInterval:[2648,2651]},"+"],["terminal",{sourceInterval:[2654,2657]},"?"],["terminal",{sourceInterval:[2660,2663]},"~"],["terminal",{sourceInterval:[2666,2669]},"&"]]],punctuation:["define",{sourceInterval:[2673,2709]},null,[],["alt",{sourceInterval:[2687,2709]},["terminal",{sourceInterval:[2687,2690]},"<"],["terminal",{sourceInterval:[2693,2696]},">"],["terminal",{sourceInterval:[2699,2702]},","],["terminal",{sourceInterval:[2705,2709]},"--"]]]}]);const Zt=Wt,en=_t,tn=T,nn=s,rn=x,on=_e,sn=k,an=$t,{makeRecipe:un}=Ut;let cn;const ln=Object.create(on.PExpr.prototype);function dn(e,t,n){const i=new Zt;let r,o,s,a=!1;return(n||cn).createSemantics().addOperation("visit",{Grammars:e=>e.children.map((e=>e.visit())),Grammar(e,n,o,s,a){const u=e.visit();r=i.newGrammar(u,t),n.child(0)&&n.child(0).visit(),s.children.map((e=>e.visit()));const c=r.build();if(c.source=this.source.trimmed(),u in t)throw rn.duplicateGrammarDeclaration(c,t);return t[u]=c,c},SuperGrammar(e,n){const i=n.visit();if("null"===i)r.withSuperGrammar(null);else{if(!t||!(i in t))throw rn.undeclaredGrammar(i,t,n.source);r.withSuperGrammar(t[i])}},Rule_define(e,t,n,i,a){o=e.visit(),s=t.children.map((e=>e.visit()))[0]||[],r.defaultStartRule||r.ensureSuperGrammar()===en.ProtoBuiltInRules||r.withDefaultStartRule(o);const u=a.visit(),c=n.children.map((e=>e.visit()))[0],l=this.source.trimmed();return r.define(o,s,u,c,l)},Rule_override(e,t,n,i){o=e.visit(),s=t.children.map((e=>e.visit()))[0]||[];const u=this.source.trimmed();r.ensureSuperGrammarRuleForOverriding(o,u),a=!0;const c=i.visit();return a=!1,r.override(o,s,c,null,u)},Rule_extend(e,t,n,i){o=e.visit(),s=t.children.map((e=>e.visit()))[0]||[];const a=i.visit(),u=this.source.trimmed();return r.extend(o,s,a,null,u)},RuleBody(e,t){return i.alt(...t.visit()).withSource(this.source)},OverrideRuleBody(e,t){const n=t.visit(),s=n.indexOf(ln);if(s>=0){const e=n.slice(0,s),t=n.slice(s+1);return t.forEach((e=>{if(e===ln)throw rn.multipleSuperSplices(e)})),new on.Splice(r.superGrammar,o,e,t).withSource(this.source)}return i.alt(...n).withSource(this.source)},Formals:(e,t,n)=>t.visit(),Params:(e,t,n)=>t.visit(),Alt(e){return i.alt(...e.visit()).withSource(this.source)},TopLevelTerm_inline(e,t){const n=o+"_"+t.visit(),u=e.visit(),c=this.source.trimmed(),l=!(r.superGrammar&&r.superGrammar.rules[n]);a&&!l?r.override(n,s,u,null,c):r.define(n,s,u,null,c);const d=s.map((e=>i.app(e)));return i.app(n,d).withSource(u.source)},OverrideTopLevelTerm_superSplice:e=>ln,Seq(e){return i.seq(...e.children.map((e=>e.visit()))).withSource(this.source)},Iter_star(e,t){return i.star(e.visit()).withSource(this.source)},Iter_plus(e,t){return i.plus(e.visit()).withSource(this.source)},Iter_opt(e,t){return i.opt(e.visit()).withSource(this.source)},Pred_not(e,t){return i.not(t.visit()).withSource(this.source)},Pred_lookahead(e,t){return i.lookahead(t.visit()).withSource(this.source)},Lex_lex(e,t){return i.lex(t.visit()).withSource(this.source)},Base_application(e,t){const n=t.children.map((e=>e.visit()))[0]||[];return i.app(e.visit(),n).withSource(this.source)},Base_range(e,t,n){return i.range(e.visit(),n.visit()).withSource(this.source)},Base_terminal(e){return i.terminal(e.visit()).withSource(this.source)},Base_paren:(e,t,n)=>t.visit(),ruleDescr:(e,t,n)=>t.visit(),ruleDescrText(e){return this.sourceString.trim()},caseName:(e,t,n,i,r)=>n.visit(),name(e,t){return this.sourceString},nameFirst(e){},nameRest(e){},terminal:(e,t,n)=>t.children.map((e=>e.visit())).join(""),oneCharTerminal:(e,t,n)=>t.visit(),escapeChar(e){try{return nn.unescapeCodePoint(this.sourceString)}catch(t){if(t instanceof RangeError&&t.message.startsWith("Invalid code point "))throw rn.invalidCodePoint(e);throw t}},NonemptyListOf:(e,t,n)=>[e.visit()].concat(n.children.map((e=>e.visit()))),EmptyListOf:()=>[],_terminal(){return this.sourceString}})(e).visit()}function pn(e,t){const n=tn.extend(tn.asNamespace(t));if("string"!=typeof e){if(!(i=e).constructor||"function"!=typeof i.constructor.isBuffer||!i.constructor.isBuffer(i))throw new TypeError("Expected string as first argument, got "+nn.unexpectedObjToString(e));e=e.toString()}var i;return function(e,t){const n=cn.match(e,"Grammars");if(n.failed())throw rn.grammarSyntaxError(n);dn(n,t)}(e,n),n}i.exports={createNamespace:tn.createNamespace,grammar:function(e,t){const n=pn(e,t),i=Object.keys(n);if(0===i.length)throw new Error("Missing grammar definition");if(i.length>1){const e=n[i[1]].source;throw new Error(sn.getLineAndColumnMessage(e.sourceString,e.startIdx)+"Found more than one grammar definition -- use ohm.grammars() instead.")}return n[i[0]]},grammars:pn,grammarFromScriptElement:function(e){throw new Error("grammarFromScriptElement was removed in Ohm v16.0. See https://ohmjs.org/d/gfs for more info.")},grammarsFromScriptElements:function(e){throw new Error("grammarsFromScriptElements was removed in Ohm v16.0. See https://ohmjs.org/d/gfs for more info.")},makeRecipe:un,ohmGrammar:null,pexprs:on,util:sn,version:an},i.exports._buildGrammar=dn,sn.announceBuiltInRules(en.BuiltInRules),i.exports.ohmGrammar=cn=Yt,en.initApplicationParser(cn,dn);var hn=i.exports;const{assert:mn}=s;function gn(e,t,n){return n(t[e])}function fn(e,t,n){return t[e].map(n)}function yn(e){const t=e.split(/ ?\[\]/);return 2===t.length?fn.bind(null,t[0]):gn.bind(null,e)}function Dn(e,t,n){return e.map((e=>e(t,n)))}function Cn(e){return/^[a-zA-Z_][0-9a-zA-Z_]*$/.test(e)}function vn(e){return e.trim()}function Sn(e){this._shapes=e.shapes,this._getTag=e.getTag,this.Adapter=function(e,t){this._adaptee=e,this._family=t},this.Adapter.prototype.valueOf=function(){throw new Error("heeey!")},this.operations={},this._arities=Object.create(null),this._getChildren=Object.create(null),Object.keys(this._shapes).forEach((e=>{const t=this._shapes[e];this._getChildren[e]=function(e){return"string"==typeof e?Dn.bind(null,[yn(e)]):Array.isArray(e)?Dn.bind(null,e.map(yn)):(mn("function"==typeof e,"Expected a string, Array, or function"),mn(2===e.length,"Expected a function of arity 2, got "+e.length),e)}(t),"function"!=typeof t&&(this._arities[e]=Array.isArray(t)?t.length:1)})),this._wrap=e=>new this.Adapter(e,this)}Sn.prototype.wrap=function(e){return this._wrap(e)},Sn.prototype._checkActionDict=function(e){Object.keys(e).forEach((t=>{mn(t in this._getChildren,"Unrecognized action name '"+t+"'");const n=e[t];if(mn("function"==typeof n,"Key '"+t+"': expected function, got "+n),t in this._arities){const n=this._arities[t],i=e[t].length;mn(i===n,"Action '"+t+"' has the wrong arity: expected "+n+", got "+i)}}))},Sn.prototype.addOperation=function(e,t){const n=function(e){const t=e.split(/[()]/).map(vn);if(3===t.length&&""===t[2]){const e=t[0];let n=[];if(t[1].length>0&&(n=t[1].split(",").map(vn)),Cn(e)&&n.every(Cn))return{name:e,formals:n}}throw new Error("Invalid operation signature: "+e)}(e),{name:i}=n;this._checkActionDict(t),this.operations[i]={name:i,formals:n.formals,actions:t};const r=this;return this.Adapter.prototype[i]=function(...e){const o=r._getTag(this._adaptee);mn(o in r._getChildren,"getTag returned unrecognized tag '"+o+"'"),mn(o in t,"No action for '"+o+"' in operation '"+i+"'");const s=Object.create(null);for(const[t,i]of Object.entries(e))s[n.formals[t]]=i;const a=this.args;this.args=s;const u=t[o].apply(this,r._getChildren[o](this._adaptee,r._wrap));return this.args=a,u},this};const En={_terminal(){return this.sourceString},_nonterminal(...e){const{ctorName:t}=this._node,{mapping:n}=this.args;if(!Object.prototype.hasOwnProperty.call(n,t)){if(this.isLexical())return this.sourceString;const t=e.filter((e=>!e.isTerminal()));if(1===t.length)return t[0].toAST(n)}if("number"==typeof n[t])return e[n[t]].toAST(n);const i=n[t]||e,r={type:t};for(const o in i){const i=n[t]&&n[t][o];"number"==typeof i?r[o]=e[i].toAST(n):"string"==typeof i||"boolean"==typeof i||null===i?r[o]=i:"object"==typeof i&&i instanceof Number?r[o]=Number(i):"function"==typeof i?r[o]=i.call(this,e):void 0===i&&(e[o]&&!e[o].isTerminal()?r[o]=e[o].toAST(n):delete r[o])}return r},_iter(...e){return this._node.isOptional()?0===this.numChildren?null:e[0].toAST(this.args.mapping):e.map((function(e){return e.toAST(this.args.mapping)}),this)},NonemptyListOf(e,t,n){return[e.toAST(this.args.mapping)].concat(n.toAST(this.args.mapping))},EmptyListOf:()=>[]};var bn={helper:function(e,t){if("function"!=typeof e.failed||e.failed())throw new Error("toAST() expects a succesful MatchResult as first parameter");t=Object.assign({},t);const n=Object.assign({},En);for(const e in t)"function"==typeof t[e]&&(n[e]=t[e],delete t[e]);return e._cst.grammar.createSemantics().addOperation("toAST(mapping)",n)(e).toAST(t)},semantics:function(e){if("function"!=typeof e.createSemantics)throw new Error("semanticsToAST() expects a Grammar as parameter");return e.createSemantics().addOperation("toAST(mapping)",En)}},Tn={VisitorFamily:Sn,semanticsForToAST:bn.semantics,toAST:bn.helper}},"./node_modules/ohm-js/extras/VisitorFamily.js":(e,t,n)=>{"use strict";const{assert:i}=n("./node_modules/ohm-js/src/common.js");function r(e,t,n){return n(t[e])}function o(e,t,n){return t[e].map(n)}function s(e){const t=e.split(/ ?\[\]/);return 2===t.length?o.bind(null,t[0]):r.bind(null,e)}function a(e,t,n){return e.map((e=>e(t,n)))}function u(e){return/^[a-zA-Z_][0-9a-zA-Z_]*$/.test(e)}function c(e){return e.trim()}function l(e){this._shapes=e.shapes,this._getTag=e.getTag,this.Adapter=function(e,t){this._adaptee=e,this._family=t},this.Adapter.prototype.valueOf=function(){throw new Error("heeey!")},this.operations={},this._arities=Object.create(null),this._getChildren=Object.create(null),Object.keys(this._shapes).forEach((e=>{const t=this._shapes[e];this._getChildren[e]=function(e){return"string"==typeof e?a.bind(null,[s(e)]):Array.isArray(e)?a.bind(null,e.map(s)):(i("function"==typeof e,"Expected a string, Array, or function"),i(2===e.length,"Expected a function of arity 2, got "+e.length),e)}(t),"function"!=typeof t&&(this._arities[e]=Array.isArray(t)?t.length:1)})),this._wrap=e=>new this.Adapter(e,this)}l.prototype.wrap=function(e){return this._wrap(e)},l.prototype._checkActionDict=function(e){Object.keys(e).forEach((t=>{i(t in this._getChildren,"Unrecognized action name '"+t+"'");const n=e[t];if(i("function"==typeof n,"Key '"+t+"': expected function, got "+n),t in this._arities){const n=this._arities[t],r=e[t].length;i(r===n,"Action '"+t+"' has the wrong arity: expected "+n+", got "+r)}}))},l.prototype.addOperation=function(e,t){const n=function(e){const t=e.split(/[()]/).map(c);if(3===t.length&&""===t[2]){const e=t[0];let n=[];if(t[1].length>0&&(n=t[1].split(",").map(c)),u(e)&&n.every(u))return{name:e,formals:n}}throw new Error("Invalid operation signature: "+e)}(e),{name:r}=n;this._checkActionDict(t),this.operations[r]={name:r,formals:n.formals,actions:t};const o=this;return this.Adapter.prototype[r]=function(...e){const s=o._getTag(this._adaptee);i(s in o._getChildren,"getTag returned unrecognized tag '"+s+"'"),i(s in t,"No action for '"+s+"' in operation '"+r+"'");const a=Object.create(null);for(const[t,i]of Object.entries(e))a[n.formals[t]]=i;const u=this.args;this.args=a;const c=t[s].apply(this,o._getChildren[s](this._adaptee,o._wrap));return this.args=u,c},this},e.exports=l},"./node_modules/ohm-js/extras/index.js":(e,t,n)=>{"use strict";e.exports={VisitorFamily:n("./node_modules/ohm-js/extras/VisitorFamily.js"),semanticsForToAST:n("./node_modules/ohm-js/extras/semantics-toAST.js").semantics,toAST:n("./node_modules/ohm-js/extras/semantics-toAST.js").helper}},"./node_modules/ohm-js/extras/semantics-toAST.js":e=>{"use strict";const t={_terminal(){return this.sourceString},_nonterminal(...e){const{ctorName:t}=this._node,{mapping:n}=this.args;if(!Object.prototype.hasOwnProperty.call(n,t)){if(this.isLexical())return this.sourceString;const t=e.filter((e=>!e.isTerminal()));if(1===t.length)return t[0].toAST(n)}if("number"==typeof n[t])return e[n[t]].toAST(n);const i=n[t]||e,r={type:t};for(const o in i){const i=n[t]&&n[t][o];"number"==typeof i?r[o]=e[i].toAST(n):"string"==typeof i||"boolean"==typeof i||null===i?r[o]=i:"object"==typeof i&&i instanceof Number?r[o]=Number(i):"function"==typeof i?r[o]=i.call(this,e):void 0===i&&(e[o]&&!e[o].isTerminal()?r[o]=e[o].toAST(n):delete r[o])}return r},_iter(...e){return this._node.isOptional()?0===this.numChildren?null:e[0].toAST(this.args.mapping):e.map((function(e){return e.toAST(this.args.mapping)}),this)},NonemptyListOf(e,t,n){return[e.toAST(this.args.mapping)].concat(n.toAST(this.args.mapping))},EmptyListOf:()=>[]};e.exports={helper:function(e,n){if("function"!=typeof e.failed||e.failed())throw new Error("toAST() expects a succesful MatchResult as first parameter");n=Object.assign({},n);const i=Object.assign({},t);for(const e in n)"function"==typeof n[e]&&(i[e]=n[e],delete n[e]);return e._cst.grammar.createSemantics().addOperation("toAST(mapping)",i)(e).toAST(n)},semantics:function(e){if("function"!=typeof e.createSemantics)throw new Error("semanticsToAST() expects a Grammar as parameter");return e.createSemantics().addOperation("toAST(mapping)",t)}}},"./node_modules/ohm-js/src/common.js":(e,t)=>{"use strict";const n={};for(let e=0;e<128;e++)n[e]=String.fromCharCode(e);n["'".charCodeAt(0)]="\\'",n['"'.charCodeAt(0)]='\\"',n["\\".charCodeAt(0)]="\\\\",n["\b".charCodeAt(0)]="\\b",n["\f".charCodeAt(0)]="\\f",n["\n".charCodeAt(0)]="\\n",n["\r".charCodeAt(0)]="\\r",n["\t".charCodeAt(0)]="\\t",n["\v".charCodeAt(0)]="\\v",t.abstract=function(e){const t=e||"";return function(){throw new Error("this method "+t+" is abstract! (it has no implementation in class "+this.constructor.name+")")}},t.assert=function(e,t){if(!e)throw new Error(t||"Assertion failed")},t.defineLazyProperty=function(e,t,n){let i;Object.defineProperty(e,t,{get(){return i||(i=n.call(this)),i}})},t.clone=function(e){return e?Object.assign({},e):e},t.repeatFn=function(e,t){const n=[];for(;t-- >0;)n.push(e());return n},t.repeatStr=function(e,t){return new Array(t+1).join(e)},t.repeat=function(e,n){return t.repeatFn((()=>e),n)},t.getDuplicates=function(e){const t=[];for(let n=0;n<e.length;n++){const i=e[n];e.lastIndexOf(i)!==n&&t.indexOf(i)<0&&t.push(i)}return t},t.copyWithoutDuplicates=function(e){const t=[];return e.forEach((e=>{t.indexOf(e)<0&&t.push(e)})),t},t.isSyntactic=function(e){const t=e[0];return t===t.toUpperCase()},t.isLexical=function(e){return!t.isSyntactic(e)},t.padLeft=function(e,n,i){const r=i||" ";return e.length<n?t.repeatStr(r,n-e.length)+e:e},t.StringBuffer=function(){this.strings=[]},t.StringBuffer.prototype.append=function(e){this.strings.push(e)},t.StringBuffer.prototype.contents=function(){return this.strings.join("")};const i=e=>String.fromCodePoint(parseInt(e,16));t.unescapeCodePoint=function(e){if("\\"!==e.charAt(0))return e;switch(e.charAt(1)){case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"\t";case"v":return"\v";case"x":return i(e.slice(2,4));case"u":return"{"===e.charAt(2)?i(e.slice(3,-1)):i(e.slice(2,6));default:return e.charAt(1)}},t.unexpectedObjToString=function(e){if(null==e)return String(e);const t=Object.prototype.toString.call(e);try{let n;return n=e.constructor&&e.constructor.name?e.constructor.name:0===t.indexOf("[object ")?t.slice(8,-1):typeof e,n+": "+JSON.stringify(String(e))}catch(e){return t}}},prettier:t=>{"use strict";t.exports=e},"./node_modules/html-styles/index.json":e=>{"use strict";e.exports=JSON.parse('[{"selectorText":"[hidden], area, base, basefont, datalist, head, link, meta,\\nnoembed, noframes, param, rp, script, source, style, template, track, title","type":"CSSStyleRule","style":{"display":"none"}},{"selectorText":"embed[hidden]","type":"CSSStyleRule","style":{"display":"inline","height":"0","width":"0"}},{"selectorText":"input[type=hidden i]","type":"CSSStyleRule","style":{"display":"none"}},{"selectorText":"html, body","type":"CSSStyleRule","style":{"display":"block"}},{"selectorText":"address, blockquote, center, div, figure, figcaption, footer, form, header, hr,\\nlegend, listing, main, p, plaintext, pre, xmp","type":"CSSStyleRule","style":{"display":"block"}},{"selectorText":"blockquote, figure, listing, p, plaintext, pre, xmp","type":"CSSStyleRule","style":{"margin-block-start":"1em","margin-block-end":"1em"}},{"selectorText":"blockquote, figure","type":"CSSStyleRule","style":{"margin-inline-start":"40px","margin-inline-end":"40px"}},{"selectorText":"address","type":"CSSStyleRule","style":{"font-style":"italic"}},{"selectorText":"listing, plaintext, pre, xmp","type":"CSSStyleRule","style":{"font-family":"monospace","white-space":"pre"}},{"selectorText":"dialog:not([open])","type":"CSSStyleRule","style":{"display":"none"}},{"selectorText":"dialog","type":"CSSStyleRule","style":{"position":"absolute","left":"0","right":"0","width":"fit-content","height":"fit-content","margin":"auto","border":"solid","padding":"1em","background":"white","color":"black"}},{"selectorText":"dialog::backdrop","type":"CSSStyleRule","style":{"background":"rgba(0,0,0,0.1)"}},{"selectorText":"slot","type":"CSSStyleRule","style":{"display":"contents"}},{"selectorText":"pre[wrap]","type":"CSSStyleRule","style":{"white-space":"pre-wrap"}},{"selectorText":"form","type":"CSSStyleRule","style":{"margin-block-end":"1em"}},{"selectorText":"cite, dfn, em, i, var","type":"CSSStyleRule","style":{"font-style":"italic"}},{"selectorText":"b, strong","type":"CSSStyleRule","style":{"font-weight":"bolder"}},{"selectorText":"code, kbd, samp, tt","type":"CSSStyleRule","style":{"font-family":"monospace"}},{"selectorText":"big","type":"CSSStyleRule","style":{"font-size":"larger"}},{"selectorText":"small","type":"CSSStyleRule","style":{"font-size":"smaller"}},{"selectorText":"sub","type":"CSSStyleRule","style":{"vertical-align":"sub"}},{"selectorText":"sup","type":"CSSStyleRule","style":{"vertical-align":"super"}},{"selectorText":"sub, sup","type":"CSSStyleRule","style":{"line-height":"normal","font-size":"smaller"}},{"selectorText":"ruby","type":"CSSStyleRule","style":{"display":"ruby"}},{"selectorText":"rt","type":"CSSStyleRule","style":{"display":"ruby-text"}},{"selectorText":":link","type":"CSSStyleRule","style":{"color":"#0000EE"}},{"selectorText":":visited","type":"CSSStyleRule","style":{"color":"#551A8B"}},{"selectorText":":link:active, :visited:active","type":"CSSStyleRule","style":{"color":"#FF0000"}},{"selectorText":":link, :visited","type":"CSSStyleRule","style":{"text-decoration":"underline","cursor":"pointer"}},{"selectorText":"a:link[rel~=help], a:visited[rel~=help],\\narea:link[rel~=help], area:visited[rel~=help]","type":"CSSStyleRule","style":{"cursor":"help"}},{"selectorText":":focus","type":"CSSStyleRule","style":{"outline":"auto"}},{"selectorText":"mark","type":"CSSStyleRule","style":{"background":"yellow","color":"black"}},{"selectorText":"abbr[title], acronym[title]","type":"CSSStyleRule","style":{"text-decoration":"dotted underline"}},{"selectorText":"ins, u","type":"CSSStyleRule","style":{"text-decoration":"underline"}},{"selectorText":"del, s, strike","type":"CSSStyleRule","style":{"text-decoration":"line-through"}},{"selectorText":"blink","type":"CSSStyleRule","style":{"text-decoration":"blink"}},{"selectorText":"q::before","type":"CSSStyleRule","style":{"content":"open-quote"}},{"selectorText":"q::after","type":"CSSStyleRule","style":{"content":"close-quote"}},{"selectorText":"br","type":"CSSStyleRule","style":{"display-outside":"newline"}},{"selectorText":"nobr","type":"CSSStyleRule","style":{"white-space":"nowrap"}},{"selectorText":"wbr","type":"CSSStyleRule","style":{"display-outside":"break-opportunity"}},{"selectorText":"nobr wbr","type":"CSSStyleRule","style":{"white-space":"normal"}},{"selectorText":"br[clear=left i]","type":"CSSStyleRule","style":{"clear":"left"}},{"selectorText":"br[clear=right i]","type":"CSSStyleRule","style":{"clear":"right"}},{"selectorText":"br[clear=all i], br[clear=both i]","type":"CSSStyleRule","style":{"clear":"both"}},{"selectorText":"[dir]:dir(ltr), bdi:dir(ltr), input[type=tel i]:dir(ltr)","type":"CSSStyleRule","style":{"direction":"ltr"}},{"selectorText":"[dir]:dir(rtl), bdi:dir(rtl)","type":"CSSStyleRule","style":{"direction":"rtl"}},{"selectorText":"address, blockquote, center, div, figure, figcaption, footer, form, header, hr,\\nlegend, listing, main, p, plaintext, pre, summary, xmp, article, aside, h1, h2,\\nh3, h4, h5, h6, hgroup, nav, section, table, caption, colgroup, col, thead,\\ntbody, tfoot, tr, td, th, dir, dd, dl, dt, ol, ul, li, bdi, output,\\n[dir=ltr i], [dir=rtl i], [dir=auto i]","type":"CSSStyleRule","style":{"unicode-bidi":"isolate"}},{"selectorText":"bdo, bdo[dir]","type":"CSSStyleRule","style":{"unicode-bidi":"isolate-override"}},{"selectorText":"input[dir=auto i][type=search i], input[dir=auto i][type=tel i], input[dir=auto i][type=url i], input[dir=auto i][type=email i], textarea[dir=auto i], pre[dir=auto i]","type":"CSSStyleRule","style":{"unicode-bidi":"plaintext"}},{"selectorText":"address, blockquote, center, div, figure, figcaption, footer, form, header, hr,\\nlegend, listing, main, p, plaintext, pre, summary, xmp, article, aside, h1, h2,\\nh3, h4, h5, h6, hgroup, nav, section, table, caption, colgroup, col, thead,\\ntbody, tfoot, tr, td, th, dir, dd, dl, dt, ol, ul, li, [dir=ltr i],\\n[dir=rtl i], [dir=auto i], *|*","type":"CSSStyleRule","style":{"unicode-bidi":"bidi-override"}},{"selectorText":"input:not([type=submit i]):not([type=reset i]):not([type=button i]),\\ntextarea","type":"CSSStyleRule","style":{"unicode-bidi":"normal"}},{"selectorText":"article, aside, h1, h2, h3, h4, h5, h6, hgroup, nav, section","type":"CSSStyleRule","style":{"display":"block"}},{"selectorText":"h1","type":"CSSStyleRule","style":{"margin-block-start":"0.67em","margin-block-end":"0.67em","font-size":"2.00em","font-weight":"bold"}},{"selectorText":"h2","type":"CSSStyleRule","style":{"margin-block-start":"0.83em","margin-block-end":"0.83em","font-size":"1.50em","font-weight":"bold"}},{"selectorText":"h3","type":"CSSStyleRule","style":{"margin-block-start":"1.00em","margin-block-end":"1.00em","font-size":"1.17em","font-weight":"bold"}},{"selectorText":"h4","type":"CSSStyleRule","style":{"margin-block-start":"1.33em","margin-block-end":"1.33em","font-size":"1.00em","font-weight":"bold"}},{"selectorText":"h5","type":"CSSStyleRule","style":{"margin-block-start":"1.67em","margin-block-end":"1.67em","font-size":"0.83em","font-weight":"bold"}},{"selectorText":"h6","type":"CSSStyleRule","style":{"margin-block-start":"2.33em","margin-block-end":"2.33em","font-size":"0.67em","font-weight":"bold"}},{"selectorText":"x h1","type":"CSSStyleRule","style":{"margin-block-start":"0.83em","margin-block-end":"0.83em","font-size":"1.50em"}},{"selectorText":"x x h1","type":"CSSStyleRule","style":{"margin-block-start":"1.00em","margin-block-end":"1.00em","font-size":"1.17em"}},{"selectorText":"x x x h1","type":"CSSStyleRule","style":{"margin-block-start":"1.33em","margin-block-end":"1.33em","font-size":"1.00em"}},{"selectorText":"x x x x h1","type":"CSSStyleRule","style":{"margin-block-start":"1.67em","margin-block-end":"1.67em","font-size":"0.83em"}},{"selectorText":"x x x x x h1","type":"CSSStyleRule","style":{"margin-block-start":"2.33em","margin-block-end":"2.33em","font-size":"0.67em"}},{"selectorText":"x hgroup > h1 ~ h2","type":"CSSStyleRule","style":{"margin-block-start":"1.00em","margin-block-end":"1.00em","font-size":"1.17em"}},{"selectorText":"x x hgroup > h1 ~ h2","type":"CSSStyleRule","style":{"margin-block-start":"1.33em","margin-block-end":"1.33em","font-size":"1.00em"}},{"selectorText":"x x x hgroup > h1 ~ h2","type":"CSSStyleRule","style":{"margin-block-start":"1.67em","margin-block-end":"1.67em","font-size":"0.83em"}},{"selectorText":"x x x x hgroup > h1 ~ h2","type":"CSSStyleRule","style":{"margin-block-start":"2.33em","margin-block-end":"2.33em","font-size":"0.67em"}},{"selectorText":"x hgroup > h1 ~ h3","type":"CSSStyleRule","style":{"margin-block-start":"1.33em","margin-block-end":"1.33em","font-size":"1.00em"}},{"selectorText":"x x hgroup > h1 ~ h3","type":"CSSStyleRule","style":{"margin-block-start":"1.67em","margin-block-end":"1.67em","font-size":"0.83em"}},{"selectorText":"x x x hgroup > h1 ~ h3","type":"CSSStyleRule","style":{"margin-block-start":"2.33em","margin-block-end":"2.33em","font-size":"0.67em"}},{"selectorText":"x hgroup > h1 ~ h4","type":"CSSStyleRule","style":{"margin-block-start":"1.67em","margin-block-end":"1.67em","font-size":"0.83em"}},{"selectorText":"x x hgroup > h1 ~ h4","type":"CSSStyleRule","style":{"margin-block-start":"2.33em","margin-block-end":"2.33em","font-size":"0.67em"}},{"selectorText":"x hgroup > h1 ~ h5","type":"CSSStyleRule","style":{"margin-block-start":"2.33em","margin-block-end":"2.33em","font-size":"0.67em"}},{"selectorText":"dir, dd, dl, dt, ol, ul","type":"CSSStyleRule","style":{"display":"block"}},{"selectorText":"li","type":"CSSStyleRule","style":{"display":"list-item"}},{"selectorText":"dir, dl, ol, ul","type":"CSSStyleRule","style":{"margin-block-start":"1em","margin-block-end":"1em"}},{"selectorText":"dir dir, dl dir, ol dir, ul dir, dir dl, dl dl, ol dl, ul dl, dir ol, dl ol, ol ol, ul ol, dir ul, dl ul, ol ul, ul ul","type":"CSSStyleRule","style":{"margin-block-start":"0","margin-block-end":"0"}},{"selectorText":"dd","type":"CSSStyleRule","style":{"margin-inline-start":"40px"}},{"selectorText":"dir, ol, ul","type":"CSSStyleRule","style":{"padding-inline-start":"40px"}},{"selectorText":"ol","type":"CSSStyleRule","style":{"list-style-type":"decimal"}},{"selectorText":"dir, ul","type":"CSSStyleRule","style":{"list-style-type":"disc"}},{"selectorText":"dir dir, ol dir, ul dir, dir ul, ol ul, ul ul","type":"CSSStyleRule","style":{"list-style-type":"circle"}},{"selectorText":"dir dir dir, ol dir dir, ul dir dir, dir ol dir, ol ol dir, ul ol dir, dir ul dir, ol ul dir, ul ul dir, dir dir ul, ol dir ul, ul dir ul, dir ol ul, ol ol ul, ul ol ul, dir ul ul, ol ul ul, ul ul ul","type":"CSSStyleRule","style":{"list-style-type":"square"}},{"selectorText":"ol[type=\\"1\\"], li[type=\\"1\\"]","type":"CSSStyleRule","style":{"list-style-type":"decimal"}},{"selectorText":"ol[type=a], li[type=a]","type":"CSSStyleRule","style":{"list-style-type":"lower-alpha"}},{"selectorText":"ol[type=A], li[type=A]","type":"CSSStyleRule","style":{"list-style-type":"upper-alpha"}},{"selectorText":"ol[type=i], li[type=i]","type":"CSSStyleRule","style":{"list-style-type":"lower-roman"}},{"selectorText":"ol[type=I], li[type=I]","type":"CSSStyleRule","style":{"list-style-type":"upper-roman"}},{"selectorText":"ul[type=none i], li[type=none i]","type":"CSSStyleRule","style":{"list-style-type":"none"}},{"selectorText":"ul[type=disc i], li[type=disc i]","type":"CSSStyleRule","style":{"list-style-type":"disc"}},{"selectorText":"ul[type=circle i], li[type=circle i]","type":"CSSStyleRule","style":{"list-style-type":"circle"}},{"selectorText":"ul[type=square i], li[type=square i]","type":"CSSStyleRule","style":{"list-style-type":"square"}},{"selectorText":"table","type":"CSSStyleRule","style":{"display":"table"}},{"selectorText":"caption","type":"CSSStyleRule","style":{"display":"table-caption"}},{"selectorText":"colgroup, colgroup[hidden]","type":"CSSStyleRule","style":{"display":"table-column-group"}},{"selectorText":"col, col[hidden]","type":"CSSStyleRule","style":{"display":"table-column"}},{"selectorText":"thead, thead[hidden]","type":"CSSStyleRule","style":{"display":"table-header-group"}},{"selectorText":"tbody, tbody[hidden]","type":"CSSStyleRule","style":{"display":"table-row-group"}},{"selectorText":"tfoot, tfoot[hidden]","type":"CSSStyleRule","style":{"display":"table-footer-group"}},{"selectorText":"tr, tr[hidden]","type":"CSSStyleRule","style":{"display":"table-row"}},{"selectorText":"td, th, td[hidden], th[hidden]","type":"CSSStyleRule","style":{"display":"table-cell"}},{"selectorText":"colgroup[hidden], col[hidden], thead[hidden], tbody[hidden],\\ntfoot[hidden], tr[hidden], td[hidden], th[hidden]","type":"CSSStyleRule","style":{"visibility":"collapse"}},{"selectorText":"table","type":"CSSStyleRule","style":{"box-sizing":"border-box","border-spacing":"2px","border-collapse":"separate","text-indent":"initial"}},{"selectorText":"td, th","type":"CSSStyleRule","style":{"padding":"1px"}},{"selectorText":"th","type":"CSSStyleRule","style":{"font-weight":"bold"}},{"selectorText":"caption","type":"CSSStyleRule","style":{"text-align":"center"}},{"selectorText":"thead, tbody, tfoot, table > tr","type":"CSSStyleRule","style":{"vertical-align":"middle"}},{"selectorText":"tr, td, th","type":"CSSStyleRule","style":{"vertical-align":"inherit"}},{"selectorText":"table, td, th","type":"CSSStyleRule","style":{"border-color":"gray"}},{"selectorText":"thead, tbody, tfoot, tr","type":"CSSStyleRule","style":{"border-color":"inherit"}},{"selectorText":"table[rules=none i], table[rules=groups i], table[rules=rows i],\\ntable[rules=cols i], table[rules=all i], table[frame=void i],\\ntable[frame=above i], table[frame=below i], table[frame=hsides i],\\ntable[frame=lhs i], table[frame=rhs i], table[frame=vsides i],\\ntable[frame=box i], table[frame=border i],\\ntable[rules=none i] > tr > td, table[rules=none i] > tr > th,\\ntable[rules=groups i] > tr > td, table[rules=groups i] > tr > th,\\ntable[rules=rows i] > tr > td, table[rules=rows i] > tr > th,\\ntable[rules=cols i] > tr > td, table[rules=cols i] > tr > th,\\ntable[rules=all i] > tr > td, table[rules=all i] > tr > th,\\ntable[rules=none i] > thead > tr > td, table[rules=none i] > thead > tr > th,\\ntable[rules=groups i] > thead > tr > td, table[rules=groups i] > thead > tr > th,\\ntable[rules=rows i] > thead > tr > td, table[rules=rows i] > thead > tr > th,\\ntable[rules=cols i] > thead > tr > td, table[rules=cols i] > thead > tr > th,\\ntable[rules=all i] > thead > tr > td, table[rules=all i] > thead > tr > th,\\ntable[rules=none i] > tbody > tr > td, table[rules=none i] > tbody > tr > th,\\ntable[rules=groups i] > tbody > tr > td, table[rules=groups i] > tbody > tr > th,\\ntable[rules=rows i] > tbody > tr > td, table[rules=rows i] > tbody > tr > th,\\ntable[rules=cols i] > tbody > tr > td, table[rules=cols i] > tbody > tr > th,\\ntable[rules=all i] > tbody > tr > td, table[rules=all i] > tbody > tr > th,\\ntable[rules=none i] > tfoot > tr > td, table[rules=none i] > tfoot > tr > th,\\ntable[rules=groups i] > tfoot > tr > td, table[rules=groups i] > tfoot > tr > th,\\ntable[rules=rows i] > tfoot > tr > td, table[rules=rows i] > tfoot > tr > th,\\ntable[rules=cols i] > tfoot > tr > td, table[rules=cols i] > tfoot > tr > th,\\ntable[rules=all i] > tfoot > tr > td, table[rules=all i] > tfoot > tr > th","type":"CSSStyleRule","style":{"border-color":"black"}},{"selectorText":"table[align=left i]","type":"CSSStyleRule","style":{"float":"left"}},{"selectorText":"table[align=right i]","type":"CSSStyleRule","style":{"float":"right"}},{"selectorText":"table[align=center i]","type":"CSSStyleRule","style":{"margin-inline-start":"auto","margin-inline-end":"auto"}},{"selectorText":"thead[align=absmiddle i], tbody[align=absmiddle i], tfoot[align=absmiddle i],\\ntr[align=absmiddle i], td[align=absmiddle i], th[align=absmiddle i]","type":"CSSStyleRule","style":{"text-align":"center"}},{"selectorText":"caption[align=bottom i]","type":"CSSStyleRule","style":{"caption-side":"bottom"}},{"selectorText":"p[align=left i], h1[align=left i], h2[align=left i], h3[align=left i],\\nh4[align=left i], h5[align=left i], h6[align=left i]","type":"CSSStyleRule","style":{"text-align":"left"}},{"selectorText":"p[align=right i], h1[align=right i], h2[align=right i], h3[align=right i],\\nh4[align=right i], h5[align=right i], h6[align=right i]","type":"CSSStyleRule","style":{"text-align":"right"}},{"selectorText":"p[align=center i], h1[align=center i], h2[align=center i], h3[align=center i],\\nh4[align=center i], h5[align=center i], h6[align=center i]","type":"CSSStyleRule","style":{"text-align":"center"}},{"selectorText":"p[align=justify i], h1[align=justify i], h2[align=justify i], h3[align=justify i],\\nh4[align=justify i], h5[align=justify i], h6[align=justify i]","type":"CSSStyleRule","style":{"text-align":"justify"}},{"selectorText":"thead[valign=top i], tbody[valign=top i], tfoot[valign=top i],\\ntr[valign=top i], td[valign=top i], th[valign=top i]","type":"CSSStyleRule","style":{"vertical-align":"top"}},{"selectorText":"thead[valign=middle i], tbody[valign=middle i], tfoot[valign=middle i],\\ntr[valign=middle i], td[valign=middle i], th[valign=middle i]","type":"CSSStyleRule","style":{"vertical-align":"middle"}},{"selectorText":"thead[valign=bottom i], tbody[valign=bottom i], tfoot[valign=bottom i],\\ntr[valign=bottom i], td[valign=bottom i], th[valign=bottom i]","type":"CSSStyleRule","style":{"vertical-align":"bottom"}},{"selectorText":"thead[valign=baseline i], tbody[valign=baseline i], tfoot[valign=baseline i],\\ntr[valign=baseline i], td[valign=baseline i], th[valign=baseline i]","type":"CSSStyleRule","style":{"vertical-align":"baseline"}},{"selectorText":"td[nowrap], th[nowrap]","type":"CSSStyleRule","style":{"white-space":"nowrap"}},{"selectorText":"table[rules=none i], table[rules=groups i], table[rules=rows i],\\ntable[rules=cols i], table[rules=all i]","type":"CSSStyleRule","style":{"border-style":"hidden","border-collapse":"collapse"}},{"selectorText":"table[border]","type":"CSSStyleRule","style":{"border-style":"outset"}},{"selectorText":"table[frame=void i]","type":"CSSStyleRule","style":{"border-style":"hidden"}},{"selectorText":"table[frame=above i]","type":"CSSStyleRule","style":{"border-style":"outset hidden hidden hidden"}},{"selectorText":"table[frame=below i]","type":"CSSStyleRule","style":{"border-style":"hidden hidden outset hidden"}},{"selectorText":"table[frame=hsides i]","type":"CSSStyleRule","style":{"border-style":"outset hidden outset hidden"}},{"selectorText":"table[frame=lhs i]","type":"CSSStyleRule","style":{"border-style":"hidden hidden hidden outset"}},{"selectorText":"table[frame=rhs i]","type":"CSSStyleRule","style":{"border-style":"hidden outset hidden hidden"}},{"selectorText":"table[frame=vsides i]","type":"CSSStyleRule","style":{"border-style":"hidden outset"}},{"selectorText":"table[frame=box i], table[frame=border i]","type":"CSSStyleRule","style":{"border-style":"outset"}},{"selectorText":"table[border] > tr > td, table[border] > tr > th,\\ntable[border] > thead > tr > td, table[border] > thead > tr > th,\\ntable[border] > tbody > tr > td, table[border] > tbody > tr > th,\\ntable[border] > tfoot > tr > td, table[border] > tfoot > tr > th","type":"CSSStyleRule","style":{"border-width":"1px","border-style":"inset"}},{"selectorText":"table[rules=none i] > tr > td, table[rules=none i] > tr > th,\\ntable[rules=none i] > thead > tr > td, table[rules=none i] > thead > tr > th,\\ntable[rules=none i] > tbody > tr > td, table[rules=none i] > tbody > tr > th,\\ntable[rules=none i] > tfoot > tr > td, table[rules=none i] > tfoot > tr > th,\\ntable[rules=groups i] > tr > td, table[rules=groups i] > tr > th,\\ntable[rules=groups i] > thead > tr > td, table[rules=groups i] > thead > tr > th,\\ntable[rules=groups i] > tbody > tr > td, table[rules=groups i] > tbody > tr > th,\\ntable[rules=groups i] > tfoot > tr > td, table[rules=groups i] > tfoot > tr > th,\\ntable[rules=rows i] > tr > td, table[rules=rows i] > tr > th,\\ntable[rules=rows i] > thead > tr > td, table[rules=rows i] > thead > tr > th,\\ntable[rules=rows i] > tbody > tr > td, table[rules=rows i] > tbody > tr > th,\\ntable[rules=rows i] > tfoot > tr > td, table[rules=rows i] > tfoot > tr > th","type":"CSSStyleRule","style":{"border-width":"1px","border-style":"none"}},{"selectorText":"table[rules=cols i] > tr > td, table[rules=cols i] > tr > th,\\ntable[rules=cols i] > thead > tr > td, table[rules=cols i] > thead > tr > th,\\ntable[rules=cols i] > tbody > tr > td, table[rules=cols i] > tbody > tr > th,\\ntable[rules=cols i] > tfoot > tr > td, table[rules=cols i] > tfoot > tr > th","type":"CSSStyleRule","style":{"border-width":"1px","block-start-style":"none","border-inline-end-style":"solid","border-block-end-style":"none","border-inline-start-style":"solid"}},{"selectorText":"table[rules=all i] > tr > td, table[rules=all i] > tr > th,\\ntable[rules=all i] > thead > tr > td, table[rules=all i] > thead > tr > th,\\ntable[rules=all i] > tbody > tr > td, table[rules=all i] > tbody > tr > th,\\ntable[rules=all i] > tfoot > tr > td, table[rules=all i] > tfoot > tr > th","type":"CSSStyleRule","style":{"border-width":"1px","border-style":"solid"}},{"selectorText":"table[rules=groups i] > colgroup","type":"CSSStyleRule","style":{"border-inline-start-width":"1px","border-inline-start-style":"solid","border-inline-end-width":"1px","border-inline-end-style":"solid"}},{"selectorText":"table[rules=groups i] > thead,\\ntable[rules=groups i] > tbody,\\ntable[rules=groups i] > tfoot","type":"CSSStyleRule","style":{"border-block-start-width":"1px","border-block-start-style":"solid","border-block-end-width":"1px","border-block-end-style":"solid"}},{"selectorText":"table[rules=rows i] > tr, table[rules=rows i] > thead > tr,\\ntable[rules=rows i] > tbody > tr, table[rules=rows i] > tfoot > tr","type":"CSSStyleRule","style":{"border-block-start-width":"1px","border-block-start-style":"solid","border-block-end-width":"1px","border-block-end-style":"solid"}},{"selectorText":"table","type":"CSSStyleRule","style":{"font-weight":"initial","font-style":"initial","font-variant":"initial","font-size":"initial","line-height":"initial","white-space":"initial","text-align":"initial"}},{"selectorText":"table > form, thead > form, tbody > form, tfoot > form, tr > form","type":"CSSStyleRule","style":{"display":"none"}},{"selectorText":"input, select, option, optgroup, button, textarea","type":"CSSStyleRule","style":{"text-indent":"initial"}},{"selectorText":"input[type=radio i], input[type=checkbox i], input[type=reset i], input[type=button i], input[type=submit i], input[type=search i], select, button","type":"CSSStyleRule","style":{"box-sizing":"border-box"}},{"selectorText":"textarea","type":"CSSStyleRule","style":{"white-space":"pre-wrap"}},{"selectorText":"input:not([type=image i]), textarea","type":"CSSStyleRule","style":{"box-sizing":"border-box"}},{"selectorText":"hr","type":"CSSStyleRule","style":{"color":"gray","border-style":"inset","border-width":"1px","margin-block-start":"0.5em","margin-inline-end":"auto","margin-block-end":"0.5em","margin-inline-start":"auto"}},{"selectorText":"hr[align=left i]","type":"CSSStyleRule","style":{"margin-left":"0","margin-right":"auto"}},{"selectorText":"hr[align=right i]","type":"CSSStyleRule","style":{"margin-left":"auto","margin-right":"0"}},{"selectorText":"hr[align=center i]","type":"CSSStyleRule","style":{"margin-left":"auto","margin-right":"auto"}},{"selectorText":"hr[color], hr[noshade]","type":"CSSStyleRule","style":{"border-style":"solid"}},{"selectorText":"fieldset","type":"CSSStyleRule","style":{"display":"block","margin-inline-start":"2px","margin-inline-end":"2px","border":"groove 2px ThreeDFace","padding-block-start":"0.35em","padding-inline-end":"0.625em","padding-block-end":"0.75em","padding-inline-start":"0.625em","min-width":"min-content"}},{"selectorText":"legend","type":"CSSStyleRule","style":{"padding-inline-start":"2px","padding-inline-end":"2px"}},{"selectorText":"iframe","type":"CSSStyleRule","style":{"border":"2px inset"}},{"selectorText":"video","type":"CSSStyleRule","style":{"object-fit":"contain"}},{"selectorText":"img[align=left i]","type":"CSSStyleRule","style":{"margin-right":"3px"}},{"selectorText":"img[align=right i]","type":"CSSStyleRule","style":{"margin-left":"3px"}},{"selectorText":"iframe[frameborder=\\"0\\"], iframe[frameborder=no i]","type":"CSSStyleRule","style":{"border":"none"}},{"selectorText":"applet[align=left i], embed[align=left i], iframe[align=left i],\\nimg[align=left i], input[type=image i][align=left i], object[align=left i]","type":"CSSStyleRule","style":{"float":"left"}},{"selectorText":"applet[align=right i], embed[align=right i], iframe[align=right i],\\nimg[align=right i], input[type=image i][align=right i], object[align=right i]","type":"CSSStyleRule","style":{"float":"right"}},{"selectorText":"applet[align=top i], embed[align=top i], iframe[align=top i],\\nimg[align=top i], input[type=image i][align=top i], object[align=top i]","type":"CSSStyleRule","style":{"vertical-align":"top"}},{"selectorText":"applet[align=baseline i], embed[align=baseline i], iframe[align=baseline i],\\nimg[align=baseline i], input[type=image i][align=baseline i], object[align=baseline i]","type":"CSSStyleRule","style":{"vertical-align":"baseline"}},{"selectorText":"applet[align=texttop i], embed[align=texttop i], iframe[align=texttop i],\\nimg[align=texttop i], input[type=image i][align=texttop i], object[align=texttop i]","type":"CSSStyleRule","style":{"vertical-align":"text-top"}},{"selectorText":"applet[align=absmiddle i], embed[align=absmiddle i], iframe[align=absmiddle i],\\nimg[align=absmiddle i], input[type=image i][align=absmiddle i], object[align=absmiddle i],\\napplet[align=abscenter i], embed[align=abscenter i], iframe[align=abscenter i],\\nimg[align=abscenter i], input[type=image i][align=abscenter i], object[align=abscenter i]","type":"CSSStyleRule","style":{"vertical-align":"middle"}},{"selectorText":"applet[align=bottom i], embed[align=bottom i], iframe[align=bottom i],\\nimg[align=bottom i], input[type=image i][align=bottom i],\\nobject[align=bottom i]","type":"CSSStyleRule","style":{"vertical-align":"bottom"}},{"selectorText":"textarea","type":"CSSStyleRule","style":{"white-space":"pre-wrap"}}]')}},n={};function i(e){var r=n[e];if(void 0!==r)return r.exports;var o=n[e]={exports:{}};return t[e].call(o.exports,o,o.exports,i),o.exports}return i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i("./dist/index.js")})()},e.exports=i(n(3920))},5623:e=>{"use strict";function t(e,t,r){e instanceof RegExp&&(e=n(e,r)),t instanceof RegExp&&(t=n(t,r));var o=i(e,t,r);return o&&{start:o[0],end:o[1],pre:r.slice(0,o[0]),body:r.slice(o[0]+e.length,o[1]),post:r.slice(o[1]+t.length)}}function n(e,t){var n=t.match(e);return n?n[0]:null}function i(e,t,n){var i,r,o,s,a,u=n.indexOf(e),c=n.indexOf(t,u+1),l=u;if(u>=0&&c>0){for(i=[],o=n.length;l>=0&&!a;)l==u?(i.push(l),u=n.indexOf(e,l+1)):1==i.length?a=[i.pop(),c]:((r=i.pop())<o&&(o=r,s=c),c=n.indexOf(t,l+1)),l=u<c&&u>=0?u:c;i.length&&(a=[o,s])}return a}e.exports=t,t.range=i},3644:(e,t,n)=>{var i=n(1048),r=n(5623);e.exports=function(e){return e?("{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2)),y(function(e){return e.split("\\\\").join(o).split("\\{").join(s).split("\\}").join(a).split("\\,").join(u).split("\\.").join(c)}(e),!0).map(d)):[]};var o="\0SLASH"+Math.random()+"\0",s="\0OPEN"+Math.random()+"\0",a="\0CLOSE"+Math.random()+"\0",u="\0COMMA"+Math.random()+"\0",c="\0PERIOD"+Math.random()+"\0";function l(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function d(e){return e.split(o).join("\\").split(s).join("{").split(a).join("}").split(u).join(",").split(c).join(".")}function p(e){if(!e)return[""];var t=[],n=r("{","}",e);if(!n)return e.split(",");var i=n.pre,o=n.body,s=n.post,a=i.split(",");a[a.length-1]+="{"+o+"}";var u=p(s);return s.length&&(a[a.length-1]+=u.shift(),a.push.apply(a,u)),t.push.apply(t,a),t}function h(e){return"{"+e+"}"}function m(e){return/^-?0\d/.test(e)}function g(e,t){return e<=t}function f(e,t){return e>=t}function y(e,t){var n=[],o=r("{","}",e);if(!o||/\$$/.test(o.pre))return[e];var s,u=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(o.body),c=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(o.body),d=u||c,D=o.body.indexOf(",")>=0;if(!d&&!D)return o.post.match(/,.*\}/)?y(e=o.pre+"{"+o.body+a+o.post):[e];if(d)s=o.body.split(/\.\./);else if(1===(s=p(o.body)).length&&1===(s=y(s[0],!1).map(h)).length)return(S=o.post.length?y(o.post,!1):[""]).map((function(e){return o.pre+s[0]+e}));var C,v=o.pre,S=o.post.length?y(o.post,!1):[""];if(d){var E=l(s[0]),b=l(s[1]),T=Math.max(s[0].length,s[1].length),A=3==s.length?Math.abs(l(s[2])):1,F=g;b<E&&(A*=-1,F=f);var R=s.some(m);C=[];for(var w=E;F(w,b);w+=A){var x;if(c)"\\"===(x=String.fromCharCode(w))&&(x="");else if(x=String(w),R){var k=T-x.length;if(k>0){var _=new Array(k+1).join("0");x=w<0?"-"+_+x.slice(1):_+x}}C.push(x)}}else C=i(s,(function(e){return y(e,!1)}));for(var N=0;N<C.length;N++)for(var P=0;P<S.length;P++){var I=v+C[N]+S[P];(!t||d||I)&&n.push(I)}return n}},1048:e=>{e.exports=function(e,n){for(var i=[],r=0;r<e.length;r++){var o=n(e[r],r);t(o)?i.push.apply(i,o):i.push(o)}return i};var t=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},9593:(e,t,n)=>{"use strict";const i=n(4411),r=Symbol("max"),o=Symbol("length"),s=Symbol("lengthCalculator"),a=Symbol("allowStale"),u=Symbol("maxAge"),c=Symbol("dispose"),l=Symbol("noDisposeOnSet"),d=Symbol("lruList"),p=Symbol("cache"),h=Symbol("updateAgeOnGet"),m=()=>1,g=(e,t,n)=>{const i=e[p].get(t);if(i){const t=i.value;if(f(e,t)){if(D(e,i),!e[a])return}else n&&(e[h]&&(i.value.now=Date.now()),e[d].unshiftNode(i));return t.value}},f=(e,t)=>{if(!t||!t.maxAge&&!e[u])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[u]&&n>e[u]},y=e=>{if(e[o]>e[r])for(let t=e[d].tail;e[o]>e[r]&&null!==t;){const n=t.prev;D(e,t),t=n}},D=(e,t)=>{if(t){const n=t.value;e[c]&&e[c](n.key,n.value),e[o]-=n.length,e[p].delete(n.key),e[d].removeNode(t)}};class C{constructor(e,t,n,i,r){this.key=e,this.value=t,this.length=n,this.now=i,this.maxAge=r||0}}const v=(e,t,n,i)=>{let r=n.value;f(e,r)&&(D(e,n),e[a]||(r=void 0)),r&&t.call(i,r.value,r.key,e)};e.exports=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[r]=e.max||1/0;const t=e.length||m;if(this[s]="function"!=typeof t?m:t,this[a]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[u]=e.maxAge||0,this[c]=e.dispose,this[l]=e.noDisposeOnSet||!1,this[h]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[r]=e||1/0,y(this)}get max(){return this[r]}set allowStale(e){this[a]=!!e}get allowStale(){return this[a]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[u]=e,y(this)}get maxAge(){return this[u]}set lengthCalculator(e){"function"!=typeof e&&(e=m),e!==this[s]&&(this[s]=e,this[o]=0,this[d].forEach((e=>{e.length=this[s](e.value,e.key),this[o]+=e.length}))),y(this)}get lengthCalculator(){return this[s]}get length(){return this[o]}get itemCount(){return this[d].length}rforEach(e,t){t=t||this;for(let n=this[d].tail;null!==n;){const i=n.prev;v(this,e,n,t),n=i}}forEach(e,t){t=t||this;for(let n=this[d].head;null!==n;){const i=n.next;v(this,e,n,t),n=i}}keys(){return this[d].toArray().map((e=>e.key))}values(){return this[d].toArray().map((e=>e.value))}reset(){this[c]&&this[d]&&this[d].length&&this[d].forEach((e=>this[c](e.key,e.value))),this[p]=new Map,this[d]=new i,this[o]=0}dump(){return this[d].map((e=>!f(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[d]}set(e,t,n){if((n=n||this[u])&&"number"!=typeof n)throw new TypeError("maxAge must be a number");const i=n?Date.now():0,a=this[s](t,e);if(this[p].has(e)){if(a>this[r])return D(this,this[p].get(e)),!1;const s=this[p].get(e).value;return this[c]&&(this[l]||this[c](e,s.value)),s.now=i,s.maxAge=n,s.value=t,this[o]+=a-s.length,s.length=a,this.get(e),y(this),!0}const h=new C(e,t,a,i,n);return h.length>this[r]?(this[c]&&this[c](e,t),!1):(this[o]+=h.length,this[d].unshift(h),this[p].set(e,this[d].head),y(this),!0)}has(e){if(!this[p].has(e))return!1;const t=this[p].get(e).value;return!f(this,t)}get(e){return g(this,e,!0)}peek(e){return g(this,e,!1)}pop(){const e=this[d].tail;return e?(D(this,e),e.value):null}del(e){D(this,this[p].get(e))}load(e){this.reset();const t=Date.now();for(let n=e.length-1;n>=0;n--){const i=e[n],r=i.e||0;if(0===r)this.set(i.k,i.v);else{const e=r-t;e>0&&this.set(i.k,i.v,e)}}}prune(){this[p].forEach(((e,t)=>g(this,t,!1)))}}},1171:(e,t,n)=>{e.exports=p,p.Minimatch=h;var i={sep:"/"};try{i=n(1017)}catch(e){}var r=p.GLOBSTAR=h.GLOBSTAR={},o=n(3644),s={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},a="[^/]",u=a+"*?",c="().*{}+?[]^$\\!".split("").reduce((function(e,t){return e[t]=!0,e}),{}),l=/\/+/;function d(e,t){e=e||{},t=t||{};var n={};return Object.keys(t).forEach((function(e){n[e]=t[e]})),Object.keys(e).forEach((function(t){n[t]=e[t]})),n}function p(e,t,n){if("string"!=typeof t)throw new TypeError("glob pattern string required");return n||(n={}),!(!n.nocomment&&"#"===t.charAt(0))&&(""===t.trim()?""===e:new h(t,n).match(e))}function h(e,t){if(!(this instanceof h))return new h(e,t);if("string"!=typeof e)throw new TypeError("glob pattern string required");t||(t={}),e=e.trim(),"/"!==i.sep&&(e=e.split(i.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function m(e,t){if(t||(t=this instanceof h?this.options:{}),void 0===(e=void 0===e?this.pattern:e))throw new TypeError("undefined pattern");return t.nobrace||!e.match(/\{.*\}/)?[e]:o(e)}p.filter=function(e,t){return t=t||{},function(n,i,r){return p(n,e,t)}},p.defaults=function(e){if(!e||!Object.keys(e).length)return p;var t=p,n=function(n,i,r){return t.minimatch(n,i,d(e,r))};return n.Minimatch=function(n,i){return new t.Minimatch(n,d(e,i))},n},h.defaults=function(e){return e&&Object.keys(e).length?p.defaults(e).Minimatch:h},h.prototype.debug=function(){},h.prototype.make=function(){if(!this._made){var e=this.pattern,t=this.options;if(t.nocomment||"#"!==e.charAt(0))if(e){this.parseNegate();var n=this.globSet=this.braceExpand();t.debug&&(this.debug=console.error),this.debug(this.pattern,n),n=this.globParts=n.map((function(e){return e.split(l)})),this.debug(this.pattern,n),n=n.map((function(e,t,n){return e.map(this.parse,this)}),this),this.debug(this.pattern,n),n=n.filter((function(e){return-1===e.indexOf(!1)})),this.debug(this.pattern,n),this.set=n}else this.empty=!0;else this.comment=!0}},h.prototype.parseNegate=function(){var e=this.pattern,t=!1,n=0;if(!this.options.nonegate){for(var i=0,r=e.length;i<r&&"!"===e.charAt(i);i++)t=!t,n++;n&&(this.pattern=e.substr(n)),this.negate=t}},p.braceExpand=function(e,t){return m(e,t)},h.prototype.braceExpand=m,h.prototype.parse=function(e,t){if(e.length>65536)throw new TypeError("pattern is too long");var n=this.options;if(!n.noglobstar&&"**"===e)return r;if(""===e)return"";var i,o="",l=!!n.nocase,d=!1,p=[],h=[],m=!1,f=-1,y=-1,D="."===e.charAt(0)?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",C=this;function v(){if(i){switch(i){case"*":o+=u,l=!0;break;case"?":o+=a,l=!0;break;default:o+="\\"+i}C.debug("clearStateChar %j %j",i,o),i=!1}}for(var S,E=0,b=e.length;E<b&&(S=e.charAt(E));E++)if(this.debug("%s\t%s %s %j",e,E,o,S),d&&c[S])o+="\\"+S,d=!1;else switch(S){case"/":return!1;case"\\":v(),d=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",e,E,o,S),m){this.debug("  in class"),"!"===S&&E===y+1&&(S="^"),o+=S;continue}C.debug("call clearStateChar %j",i),v(),i=S,n.noext&&v();continue;case"(":if(m){o+="(";continue}if(!i){o+="\\(";continue}p.push({type:i,start:E-1,reStart:o.length,open:s[i].open,close:s[i].close}),o+="!"===i?"(?:(?!(?:":"(?:",this.debug("plType %j %j",i,o),i=!1;continue;case")":if(m||!p.length){o+="\\)";continue}v(),l=!0;var T=p.pop();o+=T.close,"!"===T.type&&h.push(T),T.reEnd=o.length;continue;case"|":if(m||!p.length||d){o+="\\|",d=!1;continue}v(),o+="|";continue;case"[":if(v(),m){o+="\\"+S;continue}m=!0,y=E,f=o.length,o+=S;continue;case"]":if(E===y+1||!m){o+="\\"+S,d=!1;continue}if(m){var A=e.substring(y+1,E);try{RegExp("["+A+"]")}catch(e){var F=this.parse(A,g);o=o.substr(0,f)+"\\["+F[0]+"\\]",l=l||F[1],m=!1;continue}}l=!0,m=!1,o+=S;continue;default:v(),d?d=!1:!c[S]||"^"===S&&m||(o+="\\"),o+=S}for(m&&(A=e.substr(y+1),F=this.parse(A,g),o=o.substr(0,f)+"\\["+F[0],l=l||F[1]),T=p.pop();T;T=p.pop()){var R=o.slice(T.reStart+T.open.length);this.debug("setting tail",o,T),R=R.replace(/((?:\\{2}){0,64})(\\?)\|/g,(function(e,t,n){return n||(n="\\"),t+t+n+"|"})),this.debug("tail=%j\n   %s",R,R,T,o);var w="*"===T.type?u:"?"===T.type?a:"\\"+T.type;l=!0,o=o.slice(0,T.reStart)+w+"\\("+R}v(),d&&(o+="\\\\");var x=!1;switch(o.charAt(0)){case".":case"[":case"(":x=!0}for(var k=h.length-1;k>-1;k--){var _=h[k],N=o.slice(0,_.reStart),P=o.slice(_.reStart,_.reEnd-8),I=o.slice(_.reEnd-8,_.reEnd),q=o.slice(_.reEnd);I+=q;var O=N.split("(").length-1,L=q;for(E=0;E<O;E++)L=L.replace(/\)[+*?]?/,"");var B="";""===(q=L)&&t!==g&&(B="$"),o=N+P+q+B+I}if(""!==o&&l&&(o="(?=.)"+o),x&&(o=D+o),t===g)return[o,l];if(!l)return e.replace(/\\(.)/g,"$1");var M=n.nocase?"i":"";try{var j=new RegExp("^"+o+"$",M)}catch(e){return new RegExp("$.")}return j._glob=e,j._src=o,j};var g={};p.makeRe=function(e,t){return new h(e,t||{}).makeRe()},h.prototype.makeRe=function(){if(this.regexp||!1===this.regexp)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,n=t.noglobstar?u:t.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",i=t.nocase?"i":"",o=e.map((function(e){return e.map((function(e){return e===r?n:"string"==typeof e?e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):e._src})).join("\\/")})).join("|");o="^(?:"+o+")$",this.negate&&(o="^(?!"+o+").*$");try{this.regexp=new RegExp(o,i)}catch(e){this.regexp=!1}return this.regexp},p.match=function(e,t,n){var i=new h(t,n=n||{});return e=e.filter((function(e){return i.match(e)})),i.options.nonull&&!e.length&&e.push(t),e},h.prototype.match=function(e,t){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&t)return!0;var n=this.options;"/"!==i.sep&&(e=e.split(i.sep).join("/")),e=e.split(l),this.debug(this.pattern,"split",e);var r,o,s=this.set;for(this.debug(this.pattern,"set",s),o=e.length-1;o>=0&&!(r=e[o]);o--);for(o=0;o<s.length;o++){var a=s[o],u=e;if(n.matchBase&&1===a.length&&(u=[r]),this.matchOne(u,a,t))return!!n.flipNegate||!this.negate}return!n.flipNegate&&this.negate},h.prototype.matchOne=function(e,t,n){var i=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var o=0,s=0,a=e.length,u=t.length;o<a&&s<u;o++,s++){this.debug("matchOne loop");var c,l=t[s],d=e[o];if(this.debug(t,l,d),!1===l)return!1;if(l===r){this.debug("GLOBSTAR",[t,l,d]);var p=o,h=s+1;if(h===u){for(this.debug("** at the end");o<a;o++)if("."===e[o]||".."===e[o]||!i.dot&&"."===e[o].charAt(0))return!1;return!0}for(;p<a;){var m=e[p];if(this.debug("\nglobstar while",e,p,t,h,m),this.matchOne(e.slice(p),t.slice(h),n))return this.debug("globstar found match!",p,a,m),!0;if("."===m||".."===m||!i.dot&&"."===m.charAt(0)){this.debug("dot detected!",e,p,t,h);break}this.debug("globstar swallow a segment, and continue"),p++}return!(!n||(this.debug("\n>>> no match, partial?",e,p,t,h),p!==a))}if("string"==typeof l?(c=i.nocase?d.toLowerCase()===l.toLowerCase():d===l,this.debug("string match",l,d,c)):(c=d.match(l),this.debug("pattern match",l,d,c)),!c)return!1}if(o===a&&s===u)return!0;if(o===a)return n;if(s===u)return o===a-1&&""===e[o];throw new Error("wtf?")}},2257:(e,t,n)=>{const i=Symbol("SemVer ANY");class r{static get ANY(){return i}constructor(e,t){if(t=o(t),e instanceof r){if(e.loose===!!t.loose)return e;e=e.value}c("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===i?this.value="":this.value=this.operator+this.semver.version,c("comp",this)}parse(e){const t=this.options.loose?s[a.COMPARATORLOOSE]:s[a.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new l(n[2],this.options.loose):this.semver=i}toString(){return this.value}test(e){if(c("Comparator.test",e,this.options.loose),this.semver===i||e===i)return!0;if("string"==typeof e)try{e=new l(e,this.options)}catch(e){return!1}return u(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Comparator is required");if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||new d(e.value,t).test(this.value);if(""===e.operator)return""===e.value||new d(this.value,t).test(e.semver);const n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=u(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=u(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||i||o&&s||a||c}}e.exports=r;const o=n(2893),{re:s,t:a}=n(5765),u=n(7539),c=n(4225),l=n(6376),d=n(6902)},6902:(e,t,n)=>{class i{constructor(e,t){if(t=o(t),e instanceof i)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new i(e.raw,t);if(e instanceof s)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!m(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&g(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();const t=`parseRange:${Object.keys(this.options).join(",")}:${e}`,n=r.get(t);if(n)return n;const i=this.options.loose,o=i?c[l.HYPHENRANGELOOSE]:c[l.HYPHENRANGE];e=e.replace(o,R(this.options.includePrerelease)),a("hyphen replace",e),e=e.replace(c[l.COMPARATORTRIM],d),a("comparator trim",e);let u=(e=(e=(e=e.replace(c[l.TILDETRIM],p)).replace(c[l.CARETTRIM],h)).split(/\s+/).join(" ")).split(" ").map((e=>y(e,this.options))).join(" ").split(/\s+/).map((e=>F(e,this.options)));i&&(u=u.filter((e=>(a("loose invalid filter",e,this.options),!!e.match(c[l.COMPARATORLOOSE]))))),a("range list",u);const g=new Map,f=u.map((e=>new s(e,this.options)));for(const e of f){if(m(e))return[e];g.set(e.value,e)}g.size>1&&g.has("")&&g.delete("");const D=[...g.values()];return r.set(t,D),D}intersects(e,t){if(!(e instanceof i))throw new TypeError("a Range is required");return this.set.some((n=>f(n,t)&&e.set.some((e=>f(e,t)&&n.every((n=>e.every((e=>n.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new u(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(w(this.set[t],e,this.options))return!0;return!1}}e.exports=i;const r=new(n(9593))({max:1e3}),o=n(2893),s=n(2257),a=n(4225),u=n(6376),{re:c,t:l,comparatorTrimReplace:d,tildeTrimReplace:p,caretTrimReplace:h}=n(5765),m=e=>"<0.0.0-0"===e.value,g=e=>""===e.value,f=(e,t)=>{let n=!0;const i=e.slice();let r=i.pop();for(;n&&i.length;)n=i.every((e=>r.intersects(e,t))),r=i.pop();return n},y=(e,t)=>(a("comp",e,t),e=S(e,t),a("caret",e),e=C(e,t),a("tildes",e),e=b(e,t),a("xrange",e),e=A(e,t),a("stars",e),e),D=e=>!e||"x"===e.toLowerCase()||"*"===e,C=(e,t)=>e.trim().split(/\s+/).map((e=>v(e,t))).join(" "),v=(e,t)=>{const n=t.loose?c[l.TILDELOOSE]:c[l.TILDE];return e.replace(n,((t,n,i,r,o)=>{let s;return a("tilde",e,t,n,i,r,o),D(n)?s="":D(i)?s=`>=${n}.0.0 <${+n+1}.0.0-0`:D(r)?s=`>=${n}.${i}.0 <${n}.${+i+1}.0-0`:o?(a("replaceTilde pr",o),s=`>=${n}.${i}.${r}-${o} <${n}.${+i+1}.0-0`):s=`>=${n}.${i}.${r} <${n}.${+i+1}.0-0`,a("tilde return",s),s}))},S=(e,t)=>e.trim().split(/\s+/).map((e=>E(e,t))).join(" "),E=(e,t)=>{a("caret",e,t);const n=t.loose?c[l.CARETLOOSE]:c[l.CARET],i=t.includePrerelease?"-0":"";return e.replace(n,((t,n,r,o,s)=>{let u;return a("caret",e,t,n,r,o,s),D(n)?u="":D(r)?u=`>=${n}.0.0${i} <${+n+1}.0.0-0`:D(o)?u="0"===n?`>=${n}.${r}.0${i} <${n}.${+r+1}.0-0`:`>=${n}.${r}.0${i} <${+n+1}.0.0-0`:s?(a("replaceCaret pr",s),u="0"===n?"0"===r?`>=${n}.${r}.${o}-${s} <${n}.${r}.${+o+1}-0`:`>=${n}.${r}.${o}-${s} <${n}.${+r+1}.0-0`:`>=${n}.${r}.${o}-${s} <${+n+1}.0.0-0`):(a("no pr"),u="0"===n?"0"===r?`>=${n}.${r}.${o}${i} <${n}.${r}.${+o+1}-0`:`>=${n}.${r}.${o}${i} <${n}.${+r+1}.0-0`:`>=${n}.${r}.${o} <${+n+1}.0.0-0`),a("caret return",u),u}))},b=(e,t)=>(a("replaceXRanges",e,t),e.split(/\s+/).map((e=>T(e,t))).join(" ")),T=(e,t)=>{e=e.trim();const n=t.loose?c[l.XRANGELOOSE]:c[l.XRANGE];return e.replace(n,((n,i,r,o,s,u)=>{a("xRange",e,n,i,r,o,s,u);const c=D(r),l=c||D(o),d=l||D(s),p=d;return"="===i&&p&&(i=""),u=t.includePrerelease?"-0":"",c?n=">"===i||"<"===i?"<0.0.0-0":"*":i&&p?(l&&(o=0),s=0,">"===i?(i=">=",l?(r=+r+1,o=0,s=0):(o=+o+1,s=0)):"<="===i&&(i="<",l?r=+r+1:o=+o+1),"<"===i&&(u="-0"),n=`${i+r}.${o}.${s}${u}`):l?n=`>=${r}.0.0${u} <${+r+1}.0.0-0`:d&&(n=`>=${r}.${o}.0${u} <${r}.${+o+1}.0-0`),a("xRange return",n),n}))},A=(e,t)=>(a("replaceStars",e,t),e.trim().replace(c[l.STAR],"")),F=(e,t)=>(a("replaceGTE0",e,t),e.trim().replace(c[t.includePrerelease?l.GTE0PRE:l.GTE0],"")),R=e=>(t,n,i,r,o,s,a,u,c,l,d,p,h)=>`${n=D(i)?"":D(r)?`>=${i}.0.0${e?"-0":""}`:D(o)?`>=${i}.${r}.0${e?"-0":""}`:s?`>=${n}`:`>=${n}${e?"-0":""}`} ${u=D(c)?"":D(l)?`<${+c+1}.0.0-0`:D(d)?`<${c}.${+l+1}.0-0`:p?`<=${c}.${l}.${d}-${p}`:e?`<${c}.${l}.${+d+1}-0`:`<=${u}`}`.trim(),w=(e,t,n)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let n=0;n<e.length;n++)if(a(e[n].semver),e[n].semver!==s.ANY&&e[n].semver.prerelease.length>0){const i=e[n].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}},6376:(e,t,n)=>{const i=n(4225),{MAX_LENGTH:r,MAX_SAFE_INTEGER:o}=n(3295),{re:s,t:a}=n(5765),u=n(2893),{compareIdentifiers:c}=n(6742);class l{constructor(e,t){if(t=u(t),e instanceof l){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>r)throw new TypeError(`version is longer than ${r} characters`);i("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?s[a.LOOSE]:s[a.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<o)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(i("SemVer.compare",this.version,this.options,e),!(e instanceof l)){if("string"==typeof e&&e===this.version)return 0;e=new l(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof l||(e=new l(e,this.options)),c(this.major,e.major)||c(this.minor,e.minor)||c(this.patch,e.patch)}comparePre(e){if(e instanceof l||(e=new l(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],r=e.prerelease[t];if(i("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return c(n,r)}while(++t)}compareBuild(e){e instanceof l||(e=new l(e,this.options));let t=0;do{const n=this.build[t],r=e.build[t];if(i("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return c(n,r)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(0===c(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}e.exports=l},7539:(e,t,n)=>{const i=n(8718),r=n(1194),o=n(1312),s=n(5903),a=n(1544),u=n(2056);e.exports=(e,t,n,c)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return i(e,n,c);case"!=":return r(e,n,c);case">":return o(e,n,c);case">=":return s(e,n,c);case"<":return a(e,n,c);case"<=":return u(e,n,c);default:throw new TypeError(`Invalid operator: ${t}`)}}},6269:(e,t,n)=>{const i=n(6376);e.exports=(e,t,n)=>new i(e,n).compare(new i(t,n))},8718:(e,t,n)=>{const i=n(6269);e.exports=(e,t,n)=>0===i(e,t,n)},1312:(e,t,n)=>{const i=n(6269);e.exports=(e,t,n)=>i(e,t,n)>0},5903:(e,t,n)=>{const i=n(6269);e.exports=(e,t,n)=>i(e,t,n)>=0},1544:(e,t,n)=>{const i=n(6269);e.exports=(e,t,n)=>i(e,t,n)<0},2056:(e,t,n)=>{const i=n(6269);e.exports=(e,t,n)=>i(e,t,n)<=0},1194:(e,t,n)=>{const i=n(6269);e.exports=(e,t,n)=>0!==i(e,t,n)},3959:(e,t,n)=>{const{MAX_LENGTH:i}=n(3295),{re:r,t:o}=n(5765),s=n(6376),a=n(2893);e.exports=(e,t)=>{if(t=a(t),e instanceof s)return e;if("string"!=typeof e)return null;if(e.length>i)return null;if(!(t.loose?r[o.LOOSE]:r[o.FULL]).test(e))return null;try{return new s(e,t)}catch(e){return null}}},5712:(e,t,n)=>{const i=n(6902);e.exports=(e,t,n)=>{try{t=new i(t,n)}catch(e){return!1}return t.test(e)}},3295:e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:t,MAX_SAFE_COMPONENT_LENGTH:16}},4225:e=>{const t="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t},6742:e=>{const t=/^[0-9]+$/,n=(e,n)=>{const i=t.test(e),r=t.test(n);return i&&r&&(e=+e,n=+n),e===n?0:i&&!r?-1:r&&!i?1:e<n?-1:1};e.exports={compareIdentifiers:n,rcompareIdentifiers:(e,t)=>n(t,e)}},2893:e=>{const t=["includePrerelease","loose","rtl"];e.exports=e=>e?"object"!=typeof e?{loose:!0}:t.filter((t=>e[t])).reduce(((e,t)=>(e[t]=!0,e)),{}):{}},5765:(e,t,n)=>{const{MAX_SAFE_COMPONENT_LENGTH:i}=n(3295),r=n(4225),o=(t=e.exports={}).re=[],s=t.src=[],a=t.t={};let u=0;const c=(e,t,n)=>{const i=u++;r(e,i,t),a[e]=i,s[i]=t,o[i]=new RegExp(t,n?"g":void 0)};c("NUMERICIDENTIFIER","0|[1-9]\\d*"),c("NUMERICIDENTIFIERLOOSE","[0-9]+"),c("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),c("MAINVERSION",`(${s[a.NUMERICIDENTIFIER]})\\.(${s[a.NUMERICIDENTIFIER]})\\.(${s[a.NUMERICIDENTIFIER]})`),c("MAINVERSIONLOOSE",`(${s[a.NUMERICIDENTIFIERLOOSE]})\\.(${s[a.NUMERICIDENTIFIERLOOSE]})\\.(${s[a.NUMERICIDENTIFIERLOOSE]})`),c("PRERELEASEIDENTIFIER",`(?:${s[a.NUMERICIDENTIFIER]}|${s[a.NONNUMERICIDENTIFIER]})`),c("PRERELEASEIDENTIFIERLOOSE",`(?:${s[a.NUMERICIDENTIFIERLOOSE]}|${s[a.NONNUMERICIDENTIFIER]})`),c("PRERELEASE",`(?:-(${s[a.PRERELEASEIDENTIFIER]}(?:\\.${s[a.PRERELEASEIDENTIFIER]})*))`),c("PRERELEASELOOSE",`(?:-?(${s[a.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${s[a.PRERELEASEIDENTIFIERLOOSE]})*))`),c("BUILDIDENTIFIER","[0-9A-Za-z-]+"),c("BUILD",`(?:\\+(${s[a.BUILDIDENTIFIER]}(?:\\.${s[a.BUILDIDENTIFIER]})*))`),c("FULLPLAIN",`v?${s[a.MAINVERSION]}${s[a.PRERELEASE]}?${s[a.BUILD]}?`),c("FULL",`^${s[a.FULLPLAIN]}$`),c("LOOSEPLAIN",`[v=\\s]*${s[a.MAINVERSIONLOOSE]}${s[a.PRERELEASELOOSE]}?${s[a.BUILD]}?`),c("LOOSE",`^${s[a.LOOSEPLAIN]}$`),c("GTLT","((?:<|>)?=?)"),c("XRANGEIDENTIFIERLOOSE",`${s[a.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),c("XRANGEIDENTIFIER",`${s[a.NUMERICIDENTIFIER]}|x|X|\\*`),c("XRANGEPLAIN",`[v=\\s]*(${s[a.XRANGEIDENTIFIER]})(?:\\.(${s[a.XRANGEIDENTIFIER]})(?:\\.(${s[a.XRANGEIDENTIFIER]})(?:${s[a.PRERELEASE]})?${s[a.BUILD]}?)?)?`),c("XRANGEPLAINLOOSE",`[v=\\s]*(${s[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[a.XRANGEIDENTIFIERLOOSE]})(?:${s[a.PRERELEASELOOSE]})?${s[a.BUILD]}?)?)?`),c("XRANGE",`^${s[a.GTLT]}\\s*${s[a.XRANGEPLAIN]}$`),c("XRANGELOOSE",`^${s[a.GTLT]}\\s*${s[a.XRANGEPLAINLOOSE]}$`),c("COERCE",`(^|[^\\d])(\\d{1,${i}})(?:\\.(\\d{1,${i}}))?(?:\\.(\\d{1,${i}}))?(?:$|[^\\d])`),c("COERCERTL",s[a.COERCE],!0),c("LONETILDE","(?:~>?)"),c("TILDETRIM",`(\\s*)${s[a.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",c("TILDE",`^${s[a.LONETILDE]}${s[a.XRANGEPLAIN]}$`),c("TILDELOOSE",`^${s[a.LONETILDE]}${s[a.XRANGEPLAINLOOSE]}$`),c("LONECARET","(?:\\^)"),c("CARETTRIM",`(\\s*)${s[a.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",c("CARET",`^${s[a.LONECARET]}${s[a.XRANGEPLAIN]}$`),c("CARETLOOSE",`^${s[a.LONECARET]}${s[a.XRANGEPLAINLOOSE]}$`),c("COMPARATORLOOSE",`^${s[a.GTLT]}\\s*(${s[a.LOOSEPLAIN]})$|^$`),c("COMPARATOR",`^${s[a.GTLT]}\\s*(${s[a.FULLPLAIN]})$|^$`),c("COMPARATORTRIM",`(\\s*)${s[a.GTLT]}\\s*(${s[a.LOOSEPLAIN]}|${s[a.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",c("HYPHENRANGE",`^\\s*(${s[a.XRANGEPLAIN]})\\s+-\\s+(${s[a.XRANGEPLAIN]})\\s*$`),c("HYPHENRANGELOOSE",`^\\s*(${s[a.XRANGEPLAINLOOSE]})\\s+-\\s+(${s[a.XRANGEPLAINLOOSE]})\\s*$`),c("STAR","(<|>)?=?\\s*\\*"),c("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),c("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},4654:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(9496),r=n(3920),o=n(1457);async function s(e){const t=await r.resolveConfig(e.uri.fsPath),n=e.getText(),s=r.format(n,{...t,parser:"liquid-html",plugins:[o]}),a=e.positionAt(0),u=e.positionAt(n.length);return i.TextEdit.replace(new i.Range(a,u),s)}t.default=class{constructor(e,t){this.diagnosticCollection=e,this.diagnosticTextDocumentVersion=t}async provideDocumentFormattingEdits(e){try{const t=[await s(e)];return this.diagnosticCollection.has(e.uri)&&(this.diagnosticCollection.delete(e.uri),this.diagnosticTextDocumentVersion.delete(e.uri)),t}catch(t){if(t&&"name"in t&&"loc"in t&&"LiquidHTMLParsingError"===t.name){const n=function(e){if(!e.loc)return;const{start:t,end:n}=e.loc,r=e.message.split("\n")[0],o=new i.Diagnostic(new i.Range(new i.Position(t.line-1,t.column),new i.Position(n.line-1,n.column)),r);return o.source="prettier-plugin-liquid",o.code=e.name,o}(t);n&&(this.diagnosticCollection.set(e.uri,[n]),this.diagnosticTextDocumentVersion.set(e.uri,e.version))}return null}}}},3870:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TraceFormat=t.TraceValues=t.Trace=t.ProgressType=t.ProgressToken=t.createMessageConnection=t.NullLogger=t.ConnectionOptions=t.ConnectionStrategy=t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=t.CancellationToken=t.CancellationTokenSource=t.Emitter=t.Event=t.Disposable=t.LRUCache=t.Touch=t.LinkedMap=t.ParameterStructures=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.ErrorCodes=t.ResponseError=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType0=t.RequestType=t.Message=t.RAL=void 0,t.CancellationStrategy=t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=void 0;const i=n(839);Object.defineProperty(t,"Message",{enumerable:!0,get:function(){return i.Message}}),Object.defineProperty(t,"RequestType",{enumerable:!0,get:function(){return i.RequestType}}),Object.defineProperty(t,"RequestType0",{enumerable:!0,get:function(){return i.RequestType0}}),Object.defineProperty(t,"RequestType1",{enumerable:!0,get:function(){return i.RequestType1}}),Object.defineProperty(t,"RequestType2",{enumerable:!0,get:function(){return i.RequestType2}}),Object.defineProperty(t,"RequestType3",{enumerable:!0,get:function(){return i.RequestType3}}),Object.defineProperty(t,"RequestType4",{enumerable:!0,get:function(){return i.RequestType4}}),Object.defineProperty(t,"RequestType5",{enumerable:!0,get:function(){return i.RequestType5}}),Object.defineProperty(t,"RequestType6",{enumerable:!0,get:function(){return i.RequestType6}}),Object.defineProperty(t,"RequestType7",{enumerable:!0,get:function(){return i.RequestType7}}),Object.defineProperty(t,"RequestType8",{enumerable:!0,get:function(){return i.RequestType8}}),Object.defineProperty(t,"RequestType9",{enumerable:!0,get:function(){return i.RequestType9}}),Object.defineProperty(t,"ResponseError",{enumerable:!0,get:function(){return i.ResponseError}}),Object.defineProperty(t,"ErrorCodes",{enumerable:!0,get:function(){return i.ErrorCodes}}),Object.defineProperty(t,"NotificationType",{enumerable:!0,get:function(){return i.NotificationType}}),Object.defineProperty(t,"NotificationType0",{enumerable:!0,get:function(){return i.NotificationType0}}),Object.defineProperty(t,"NotificationType1",{enumerable:!0,get:function(){return i.NotificationType1}}),Object.defineProperty(t,"NotificationType2",{enumerable:!0,get:function(){return i.NotificationType2}}),Object.defineProperty(t,"NotificationType3",{enumerable:!0,get:function(){return i.NotificationType3}}),Object.defineProperty(t,"NotificationType4",{enumerable:!0,get:function(){return i.NotificationType4}}),Object.defineProperty(t,"NotificationType5",{enumerable:!0,get:function(){return i.NotificationType5}}),Object.defineProperty(t,"NotificationType6",{enumerable:!0,get:function(){return i.NotificationType6}}),Object.defineProperty(t,"NotificationType7",{enumerable:!0,get:function(){return i.NotificationType7}}),Object.defineProperty(t,"NotificationType8",{enumerable:!0,get:function(){return i.NotificationType8}}),Object.defineProperty(t,"NotificationType9",{enumerable:!0,get:function(){return i.NotificationType9}}),Object.defineProperty(t,"ParameterStructures",{enumerable:!0,get:function(){return i.ParameterStructures}});const r=n(6184);Object.defineProperty(t,"LinkedMap",{enumerable:!0,get:function(){return r.LinkedMap}}),Object.defineProperty(t,"LRUCache",{enumerable:!0,get:function(){return r.LRUCache}}),Object.defineProperty(t,"Touch",{enumerable:!0,get:function(){return r.Touch}});const o=n(3911);Object.defineProperty(t,"Disposable",{enumerable:!0,get:function(){return o.Disposable}});const s=n(7135);Object.defineProperty(t,"Event",{enumerable:!0,get:function(){return s.Event}}),Object.defineProperty(t,"Emitter",{enumerable:!0,get:function(){return s.Emitter}});const a=n(3881);Object.defineProperty(t,"CancellationTokenSource",{enumerable:!0,get:function(){return a.CancellationTokenSource}}),Object.defineProperty(t,"CancellationToken",{enumerable:!0,get:function(){return a.CancellationToken}});const u=n(6525);Object.defineProperty(t,"MessageReader",{enumerable:!0,get:function(){return u.MessageReader}}),Object.defineProperty(t,"AbstractMessageReader",{enumerable:!0,get:function(){return u.AbstractMessageReader}}),Object.defineProperty(t,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return u.ReadableStreamMessageReader}});const c=n(6654);Object.defineProperty(t,"MessageWriter",{enumerable:!0,get:function(){return c.MessageWriter}}),Object.defineProperty(t,"AbstractMessageWriter",{enumerable:!0,get:function(){return c.AbstractMessageWriter}}),Object.defineProperty(t,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return c.WriteableStreamMessageWriter}});const l=n(1343);Object.defineProperty(t,"ConnectionStrategy",{enumerable:!0,get:function(){return l.ConnectionStrategy}}),Object.defineProperty(t,"ConnectionOptions",{enumerable:!0,get:function(){return l.ConnectionOptions}}),Object.defineProperty(t,"NullLogger",{enumerable:!0,get:function(){return l.NullLogger}}),Object.defineProperty(t,"createMessageConnection",{enumerable:!0,get:function(){return l.createMessageConnection}}),Object.defineProperty(t,"ProgressToken",{enumerable:!0,get:function(){return l.ProgressToken}}),Object.defineProperty(t,"ProgressType",{enumerable:!0,get:function(){return l.ProgressType}}),Object.defineProperty(t,"Trace",{enumerable:!0,get:function(){return l.Trace}}),Object.defineProperty(t,"TraceValues",{enumerable:!0,get:function(){return l.TraceValues}}),Object.defineProperty(t,"TraceFormat",{enumerable:!0,get:function(){return l.TraceFormat}}),Object.defineProperty(t,"SetTraceNotification",{enumerable:!0,get:function(){return l.SetTraceNotification}}),Object.defineProperty(t,"LogTraceNotification",{enumerable:!0,get:function(){return l.LogTraceNotification}}),Object.defineProperty(t,"ConnectionErrors",{enumerable:!0,get:function(){return l.ConnectionErrors}}),Object.defineProperty(t,"ConnectionError",{enumerable:!0,get:function(){return l.ConnectionError}}),Object.defineProperty(t,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return l.CancellationReceiverStrategy}}),Object.defineProperty(t,"CancellationSenderStrategy",{enumerable:!0,get:function(){return l.CancellationSenderStrategy}}),Object.defineProperty(t,"CancellationStrategy",{enumerable:!0,get:function(){return l.CancellationStrategy}});const d=n(147);t.RAL=d.default},3881:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationTokenSource=t.CancellationToken=void 0;const i=n(147),r=n(7574),o=n(7135);var s;!function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:o.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:o.Event.None}),e.is=function(t){const n=t;return n&&(n===e.None||n===e.Cancelled||r.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}}(s=t.CancellationToken||(t.CancellationToken={}));const a=Object.freeze((function(e,t){const n=(0,i.default)().timer.setTimeout(e.bind(t),0);return{dispose(){n.dispose()}}}));class u{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?a:(this._emitter||(this._emitter=new o.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}t.CancellationTokenSource=class{get token(){return this._token||(this._token=new u),this._token}cancel(){this._token?this._token.cancel():this._token=s.Cancelled}dispose(){this._token?this._token instanceof u&&this._token.dispose():this._token=s.None}}},1343:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.ConnectionOptions=t.CancellationStrategy=t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.ConnectionStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=t.TraceFormat=t.TraceValues=t.Trace=t.NullLogger=t.ProgressType=t.ProgressToken=void 0;const i=n(147),r=n(7574),o=n(839),s=n(6184),a=n(7135),u=n(3881);var c,l,d,p,h,m,g,f,y,D,C,v,S,E,b;!function(e){e.type=new o.NotificationType("$/cancelRequest")}(c||(c={})),function(e){e.is=function(e){return"string"==typeof e||"number"==typeof e}}(l=t.ProgressToken||(t.ProgressToken={})),function(e){e.type=new o.NotificationType("$/progress")}(d||(d={})),t.ProgressType=class{constructor(){}},function(e){e.is=function(e){return r.func(e)}}(p||(p={})),t.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}}),function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Compact=2]="Compact",e[e.Verbose=3]="Verbose"}(h=t.Trace||(t.Trace={})),(b=t.TraceValues||(t.TraceValues={})).Off="off",b.Messages="messages",b.Compact="compact",b.Verbose="verbose",function(e){e.fromString=function(t){if(!r.string(t))return e.Off;switch(t=t.toLowerCase()){case"off":default:return e.Off;case"messages":return e.Messages;case"compact":return e.Compact;case"verbose":return e.Verbose}},e.toString=function(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Compact:return"compact";case e.Verbose:return"verbose";default:return"off"}}}(h=t.Trace||(t.Trace={})),function(e){e.Text="text",e.JSON="json"}(t.TraceFormat||(t.TraceFormat={})),function(e){e.fromString=function(t){return r.string(t)&&"json"===(t=t.toLowerCase())?e.JSON:e.Text}}(m=t.TraceFormat||(t.TraceFormat={})),function(e){e.type=new o.NotificationType("$/setTrace")}(g=t.SetTraceNotification||(t.SetTraceNotification={})),function(e){e.type=new o.NotificationType("$/logTrace")}(f=t.LogTraceNotification||(t.LogTraceNotification={})),function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"}(y=t.ConnectionErrors||(t.ConnectionErrors={}));class T extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,T.prototype)}}t.ConnectionError=T,function(e){e.is=function(e){const t=e;return t&&r.func(t.cancelUndispatched)}}(D=t.ConnectionStrategy||(t.ConnectionStrategy={})),function(e){e.Message=Object.freeze({createCancellationTokenSource:e=>new u.CancellationTokenSource}),e.is=function(e){const t=e;return t&&r.func(t.createCancellationTokenSource)}}(C=t.CancellationReceiverStrategy||(t.CancellationReceiverStrategy={})),function(e){e.Message=Object.freeze({sendCancellation:(e,t)=>e.sendNotification(c.type,{id:t}),cleanup(e){}}),e.is=function(e){const t=e;return t&&r.func(t.sendCancellation)&&r.func(t.cleanup)}}(v=t.CancellationSenderStrategy||(t.CancellationSenderStrategy={})),function(e){e.Message=Object.freeze({receiver:C.Message,sender:v.Message}),e.is=function(e){const t=e;return t&&C.is(t.receiver)&&v.is(t.sender)}}(S=t.CancellationStrategy||(t.CancellationStrategy={})),(t.ConnectionOptions||(t.ConnectionOptions={})).is=function(e){const t=e;return t&&(S.is(t.cancellationStrategy)||D.is(t.connectionStrategy))},function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"}(E||(E={})),t.createMessageConnection=function(e,n,D,C){const v=void 0!==D?D:t.NullLogger;let b=0,A=0,F=0;const R="2.0";let w;const x=new Map;let k;const _=new Map,N=new Map;let P,I,q=new s.LinkedMap,O=new Map,L=new Set,B=new Map,M=h.Off,j=m.Text,H=E.New;const W=new a.Emitter,$=new a.Emitter,U=new a.Emitter,K=new a.Emitter,V=new a.Emitter,z=C&&C.cancellationStrategy?C.cancellationStrategy:S.Message;function G(e){if(null===e)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+e.toString()}function Q(e){}function X(){return H===E.Listening}function J(){return H===E.Closed}function Y(){return H===E.Disposed}function Z(){H!==E.New&&H!==E.Listening||(H=E.Closed,$.fire(void 0))}function ee(){P||0===q.size||(P=(0,i.default)().timer.setImmediate((()=>{P=void 0,function(){if(0===q.size)return;const e=q.shift();try{o.Message.isRequest(e)?function(e){if(Y())return;function t(t,i,r){const s={jsonrpc:R,id:e.id};t instanceof o.ResponseError?s.error=t.toJson():s.result=void 0===t?null:t,ie(s,i,r),n.write(s).catch((()=>v.error("Sending response failed.")))}function i(t,i,r){const o={jsonrpc:R,id:e.id,error:t.toJson()};ie(o,i,r),n.write(o).catch((()=>v.error("Sending response failed.")))}!function(e){if(M!==h.Off&&I)if(j===m.Text){let t;M!==h.Verbose&&M!==h.Compact||!e.params||(t=`Params: ${ne(e.params)}\n\n`),I.log(`Received request '${e.method} - (${e.id})'.`,t)}else oe("receive-request",e)}(e);const s=x.get(e.method);let a,u;s&&(a=s.type,u=s.handler);const c=Date.now();if(u||w){const s=e.id??String(Date.now()),l=z.receiver.createCancellationTokenSource(s);null!==e.id&&L.has(e.id)&&l.cancel(),null!==e.id&&B.set(s,l);try{let d;if(u)if(void 0===e.params){if(void 0!==a&&0!==a.numberOfParams)return void i(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${e.method} defines ${a.numberOfParams} params but received none.`),e.method,c);d=u(l.token)}else if(Array.isArray(e.params)){if(void 0!==a&&a.parameterStructures===o.ParameterStructures.byName)return void i(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by name but received parameters by position`),e.method,c);d=u(...e.params,l.token)}else{if(void 0!==a&&a.parameterStructures===o.ParameterStructures.byPosition)return void i(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by position but received parameters by name`),e.method,c);d=u(e.params,l.token)}else w&&(d=w(e.method,e.params,l.token));const p=d;d?p.then?p.then((n=>{B.delete(s),t(n,e.method,c)}),(t=>{B.delete(s),t instanceof o.ResponseError?i(t,e.method,c):t&&r.string(t.message)?i(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,c):i(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,c)})):(B.delete(s),t(d,e.method,c)):(B.delete(s),function(t,i,r){void 0===t&&(t=null);const o={jsonrpc:R,id:e.id,result:t};ie(o,i,r),n.write(o).catch((()=>v.error("Sending response failed.")))}(d,e.method,c))}catch(n){B.delete(s),n instanceof o.ResponseError?t(n,e.method,c):n&&r.string(n.message)?i(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${n.message}`),e.method,c):i(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,c)}}else i(new o.ResponseError(o.ErrorCodes.MethodNotFound,`Unhandled method ${e.method}`),e.method,c)}(e):o.Message.isNotification(e)?function(e){if(Y())return;let t,n;if(e.method===c.type.method){const t=e.params.id;return L.delete(t),void re(e)}{const i=_.get(e.method);i&&(n=i.handler,t=i.type)}if(n||k)try{if(re(e),n)if(void 0===e.params)void 0!==t&&0!==t.numberOfParams&&t.parameterStructures!==o.ParameterStructures.byName&&v.error(`Notification ${e.method} defines ${t.numberOfParams} params but received none.`),n();else if(Array.isArray(e.params)){const i=e.params;e.method===d.type.method&&2===i.length&&l.is(i[0])?n({token:i[0],value:i[1]}):(void 0!==t&&(t.parameterStructures===o.ParameterStructures.byName&&v.error(`Notification ${e.method} defines parameters by name but received parameters by position`),t.numberOfParams!==e.params.length&&v.error(`Notification ${e.method} defines ${t.numberOfParams} params but received ${i.length} arguments`)),n(...i))}else void 0!==t&&t.parameterStructures===o.ParameterStructures.byPosition&&v.error(`Notification ${e.method} defines parameters by position but received parameters by name`),n(e.params);else k&&k(e.method,e.params)}catch(t){t.message?v.error(`Notification handler '${e.method}' failed with message: ${t.message}`):v.error(`Notification handler '${e.method}' failed unexpectedly.`)}else U.fire(e)}(e):o.Message.isResponse(e)?function(e){if(!Y())if(null===e.id)e.error?v.error(`Received response message without id: Error is: \n${JSON.stringify(e.error,void 0,4)}`):v.error("Received response message without id. No further error information provided.");else{const t=e.id,n=O.get(t);if(function(e,t){if(M!==h.Off&&I)if(j===m.Text){let n;if(M!==h.Verbose&&M!==h.Compact||(e.error&&e.error.data?n=`Error data: ${ne(e.error.data)}\n\n`:e.result?n=`Result: ${ne(e.result)}\n\n`:void 0===e.error&&(n="No result returned.\n\n")),t){const i=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";I.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${i}`,n)}else I.log(`Received response ${e.id} without active response promise.`,n)}else oe("receive-response",e)}(e,n),void 0!==n){O.delete(t);try{if(e.error){const t=e.error;n.reject(new o.ResponseError(t.code,t.message,t.data))}else{if(void 0===e.result)throw new Error("Should never happen.");n.resolve(e.result)}}catch(e){e.message?v.error(`Response handler '${n.method}' failed with message: ${e.message}`):v.error(`Response handler '${n.method}' failed unexpectedly.`)}}}}(e):function(e){if(!e)return void v.error("Received empty message.");v.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(e,null,4)}`);const t=e;if(r.string(t.id)||r.number(t.id)){const e=t.id,n=O.get(e);n&&n.reject(new Error("The received response has neither a result nor an error property."))}}(e)}finally{ee()}}()})))}e.onClose(Z),e.onError((function(e){W.fire([e,void 0,void 0])})),n.onClose(Z),n.onError((function(e){W.fire(e)}));const te=e=>{try{if(o.Message.isNotification(e)&&e.method===c.type.method){const t=e.params.id,i=G(t),r=q.get(i);if(o.Message.isRequest(r)){const o=C?.connectionStrategy,s=o&&o.cancelUndispatched?o.cancelUndispatched(r,Q):void 0;if(s&&(void 0!==s.error||void 0!==s.result))return q.delete(i),B.delete(t),s.id=r.id,ie(s,e.method,Date.now()),void n.write(s).catch((()=>v.error("Sending response for canceled message failed.")))}const s=B.get(t);if(void 0!==s)return s.cancel(),void re(e);L.add(t)}!function(e,t){var n;o.Message.isRequest(t)?e.set(G(t.id),t):o.Message.isResponse(t)?e.set(null===(n=t.id)?"res-unknown-"+(++F).toString():"res-"+n.toString(),t):e.set("not-"+(++A).toString(),t)}(q,e)}finally{ee()}};function ne(e){if(null!=e)switch(M){case h.Verbose:return JSON.stringify(e,null,4);case h.Compact:return JSON.stringify(e);default:return}}function ie(e,t,n){if(M!==h.Off&&I)if(j===m.Text){let i;M!==h.Verbose&&M!==h.Compact||(e.error&&e.error.data?i=`Error data: ${ne(e.error.data)}\n\n`:e.result?i=`Result: ${ne(e.result)}\n\n`:void 0===e.error&&(i="No result returned.\n\n")),I.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-n}ms`,i)}else oe("send-response",e)}function re(e){if(M!==h.Off&&I&&e.method!==f.type.method)if(j===m.Text){let t;M!==h.Verbose&&M!==h.Compact||(t=e.params?`Params: ${ne(e.params)}\n\n`:"No parameters provided.\n\n"),I.log(`Received notification '${e.method}'.`,t)}else oe("receive-notification",e)}function oe(e,t){if(!I||M===h.Off)return;const n={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};I.log(n)}function se(){if(J())throw new T(y.Closed,"Connection is closed.");if(Y())throw new T(y.Disposed,"Connection is disposed.")}function ae(e){return void 0===e?null:e}function ue(e){return null===e?void 0:e}function ce(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function le(e,t){switch(e){case o.ParameterStructures.auto:return ce(t)?ue(t):[ae(t)];case o.ParameterStructures.byName:if(!ce(t))throw new Error("Received parameters by name but param is not an object literal.");return ue(t);case o.ParameterStructures.byPosition:return[ae(t)];default:throw new Error(`Unknown parameter structure ${e.toString()}`)}}function de(e,t){let n;const i=e.numberOfParams;switch(i){case 0:n=void 0;break;case 1:n=le(e.parameterStructures,t[0]);break;default:n=[];for(let e=0;e<t.length&&e<i;e++)n.push(ae(t[e]));if(t.length<i)for(let e=t.length;e<i;e++)n.push(null)}return n}const pe={sendNotification:(e,...t)=>{let i,s;if(se(),r.string(e)){i=e;const n=t[0];let r=0,a=o.ParameterStructures.auto;o.ParameterStructures.is(n)&&(r=1,a=n);let u=t.length;const c=u-r;switch(c){case 0:s=void 0;break;case 1:s=le(a,t[r]);break;default:if(a===o.ParameterStructures.byName)throw new Error(`Received ${c} parameters for 'by Name' notification parameter structure.`);s=t.slice(r,u).map((e=>ae(e)))}}else{const n=t;i=e.method,s=de(e,n)}const a={jsonrpc:R,method:i,params:s};return function(e){if(M!==h.Off&&I)if(j===m.Text){let t;M!==h.Verbose&&M!==h.Compact||(t=e.params?`Params: ${ne(e.params)}\n\n`:"No parameters provided.\n\n"),I.log(`Sending notification '${e.method}'.`,t)}else oe("send-notification",e)}(a),n.write(a).catch((()=>v.error("Sending notification failed.")))},onNotification:(e,t)=>{let n;return se(),r.func(e)?k=e:t&&(r.string(e)?(n=e,_.set(e,{type:void 0,handler:t})):(n=e.method,_.set(e.method,{type:e,handler:t}))),{dispose:()=>{void 0!==n?_.delete(n):k=void 0}}},onProgress:(e,t,n)=>{if(N.has(t))throw new Error(`Progress handler for token ${t} already registered`);return N.set(t,n),{dispose:()=>{N.delete(t)}}},sendProgress:(e,t,n)=>pe.sendNotification(d.type,{token:t,value:n}),onUnhandledProgress:K.event,sendRequest:(e,...t)=>{let i,s,a;if(se(),function(){if(!X())throw new Error("Call listen() first.")}(),r.string(e)){i=e;const n=t[0],r=t[t.length-1];let c=0,l=o.ParameterStructures.auto;o.ParameterStructures.is(n)&&(c=1,l=n);let d=t.length;u.CancellationToken.is(r)&&(d-=1,a=r);const p=d-c;switch(p){case 0:s=void 0;break;case 1:s=le(l,t[c]);break;default:if(l===o.ParameterStructures.byName)throw new Error(`Received ${p} parameters for 'by Name' request parameter structure.`);s=t.slice(c,d).map((e=>ae(e)))}}else{const n=t;i=e.method,s=de(e,n);const r=e.numberOfParams;a=u.CancellationToken.is(n[r])?n[r]:void 0}const c=b++;let l;return a&&(l=a.onCancellationRequested((()=>{const e=z.sender.sendCancellation(pe,c);return void 0===e?(v.log(`Received no promise from cancellation strategy when cancelling id ${c}`),Promise.resolve()):e.catch((()=>{v.log(`Sending cancellation messages for id ${c} failed`)}))}))),new Promise(((e,t)=>{const r={jsonrpc:R,id:c,method:i,params:s};let a={method:i,timerStart:Date.now(),resolve:t=>{e(t),z.sender.cleanup(c),l?.dispose()},reject:e=>{t(e),z.sender.cleanup(c),l?.dispose()}};!function(e){if(M!==h.Off&&I)if(j===m.Text){let t;M!==h.Verbose&&M!==h.Compact||!e.params||(t=`Params: ${ne(e.params)}\n\n`),I.log(`Sending request '${e.method} - (${e.id})'.`,t)}else oe("send-request",e)}(r);try{n.write(r).catch((()=>v.error("Sending request failed.")))}catch(e){a.reject(new o.ResponseError(o.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason")),a=null}a&&O.set(c,a)}))},onRequest:(e,t)=>{se();let n=null;return p.is(e)?(n=void 0,w=e):r.string(e)?(n=null,void 0!==t&&(n=e,x.set(e,{handler:t,type:void 0}))):void 0!==t&&(n=e.method,x.set(e.method,{type:e,handler:t})),{dispose:()=>{null!==n&&(void 0!==n?x.delete(n):w=void 0)}}},hasPendingResponse:()=>O.size>0,trace:async(e,t,n)=>{let i=!1,o=m.Text;void 0!==n&&(r.boolean(n)?i=n:(i=n.sendNotification||!1,o=n.traceFormat||m.Text)),M=e,j=o,I=M===h.Off?void 0:t,!i||J()||Y()||await pe.sendNotification(g.type,{value:h.toString(e)})},onError:W.event,onClose:$.event,onUnhandledNotification:U.event,onDispose:V.event,end:()=>{n.end()},dispose:()=>{if(Y())return;H=E.Disposed,V.fire(void 0);const t=new o.ResponseError(o.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(const e of O.values())e.reject(t);O=new Map,B=new Map,L=new Set,q=new s.LinkedMap,r.func(n.dispose)&&n.dispose(),r.func(e.dispose)&&e.dispose()},listen:()=>{se(),function(){if(X())throw new T(y.AlreadyListening,"Connection is already listening")}(),H=E.Listening,e.listen(te)},inspect:()=>{(0,i.default)().console.log("inspect")}};return pe.onNotification(f.type,(e=>{if(M===h.Off||!I)return;const t=M===h.Verbose||M===h.Compact;I.log(e.message,t?e.verbose:void 0)})),pe.onNotification(d.type,(e=>{const t=N.get(e.token);t?t(e.value):K.fire(e)})),pe}},3911:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Disposable=void 0,(t.Disposable||(t.Disposable={})).create=function(e){return{dispose:e}}},7135:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Emitter=t.Event=void 0;const i=n(147);!function(e){const t={dispose(){}};e.None=function(){return t}}(t.Event||(t.Event={}));class r{add(e,t=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let n=!1;for(let i=0,r=this._callbacks.length;i<r;i++)if(this._callbacks[i]===e){if(this._contexts[i]===t)return this._callbacks.splice(i,1),void this._contexts.splice(i,1);n=!0}if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];const t=[],n=this._callbacks.slice(0),r=this._contexts.slice(0);for(let o=0,s=n.length;o<s;o++)try{t.push(n[o].apply(r[o],e))}catch(e){(0,i.default)().console.error(e)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class o{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,n)=>{this._callbacks||(this._callbacks=new r),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);const i={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,t),i.dispose=o._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(n)&&n.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}t.Emitter=o,o._noop=function(){}},7574:(e,t)=>{"use strict";function n(e){return"string"==typeof e||e instanceof String}function i(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0,t.boolean=function(e){return!0===e||!1===e},t.string=n,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=i,t.stringArray=function(e){return i(e)&&e.every((e=>n(e)))}},6184:(e,t)=>{"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=t.LinkedMap=t.Touch=void 0,function(e){e.None=0,e.First=1,e.AsOld=e.First,e.Last=2,e.AsNew=e.Last}(i=t.Touch||(t.Touch={}));class r{constructor(){this[n]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=i.None){const n=this._map.get(e);if(n)return t!==i.None&&this.touch(n,t),n.value}set(e,t,n=i.None){let r=this._map.get(e);if(r)r.value=t,n!==i.None&&this.touch(r,n);else{switch(r={key:e,value:t,next:void 0,previous:void 0},n){case i.None:this.addItemLast(r);break;case i.First:this.addItemFirst(r);break;case i.Last:default:this.addItemLast(r)}this._map.set(e,r),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const n=this._state;let i=this._head;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){const e=this._state;let t=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:t.key,done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return n}values(){const e=this._state;let t=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:t.value,done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return n}entries(){const e=this._state;let t=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:[t.key,t.value],done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return n}[(n=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(0===e)return void this.clear();let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e,this._state++}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(t===i.First||t===i.Last)if(t===i.First){if(e===this._head)return;const t=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(t.previous=n,n.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===i.Last){if(e===this._tail)return;const t=e.next,n=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=n,n.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}toJSON(){const e=[];return this.forEach(((t,n)=>{e.push([n,t])})),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}}t.LinkedMap=r,t.LRUCache=class extends r{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=i.AsNew){return super.get(e,t)}peek(e){return super.get(e,i.None)}set(e,t){return super.set(e,t,i.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}},5530:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractMessageBuffer=void 0,t.AbstractMessageBuffer=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){const t="string"==typeof e?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(){if(0===this._chunks.length)return;let e=0,t=0,n=0,i=0;e:for(;t<this._chunks.length;){const r=this._chunks[t];for(n=0;n<r.length;){switch(r[n]){case 13:switch(e){case 0:e=1;break;case 2:e=3;break;default:e=0}break;case 10:switch(e){case 1:e=2;break;case 3:e=4,n++;break e;default:e=0}break;default:e=0}n++}i+=r.byteLength,t++}if(4!==e)return;const r=this._read(i+n),o=new Map,s=this.toString(r,"ascii").split("\r\n");if(s.length<2)return o;for(let e=0;e<s.length-2;e++){const t=s[e],n=t.indexOf(":");if(-1===n)throw new Error("Message header must separate key and value using :");const i=t.substr(0,n),r=t.substr(n+1).trim();o.set(i,r)}return o}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(0===e)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){const t=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(t)}if(this._chunks[0].byteLength>e){const t=this._chunks[0],n=this.asNative(t,e);return this._chunks[0]=t.slice(e),this._totalLength-=e,n}const t=this.allocNative(e);let n=0;for(;e>0;){const i=this._chunks[0];if(i.byteLength>e){const r=i.slice(0,e);t.set(r,n),n+=e,this._chunks[0]=i.slice(e),this._totalLength-=e,e-=e}else t.set(i,n),n+=i.byteLength,this._chunks.shift(),this._totalLength-=i.byteLength,e-=i.byteLength}return t}}},6525:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=void 0;const i=n(147),r=n(7574),o=n(7135);var s;(t.MessageReader||(t.MessageReader={})).is=function(e){let t=e;return t&&r.func(t.listen)&&r.func(t.dispose)&&r.func(t.onError)&&r.func(t.onClose)&&r.func(t.onPartialMessage)};class a{constructor(){this.errorEmitter=new o.Emitter,this.closeEmitter=new o.Emitter,this.partialMessageEmitter=new o.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${r.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageReader=a,function(e){e.fromOptions=function(e){let t,n;const r=new Map;let o;const s=new Map;if(void 0===e||"string"==typeof e)t=e??"utf-8";else{if(t=e.charset??"utf-8",void 0!==e.contentDecoder&&(n=e.contentDecoder,r.set(n.name,n)),void 0!==e.contentDecoders)for(const t of e.contentDecoders)r.set(t.name,t);if(void 0!==e.contentTypeDecoder&&(o=e.contentTypeDecoder,s.set(o.name,o)),void 0!==e.contentTypeDecoders)for(const t of e.contentTypeDecoders)s.set(t.name,t)}return void 0===o&&(o=(0,i.default)().applicationJson.decoder,s.set(o.name,o)),{charset:t,contentDecoder:n,contentDecoders:r,contentTypeDecoder:o,contentTypeDecoders:s}}}(s||(s={})),t.ReadableStreamMessageReader=class extends a{constructor(e,t){super(),this.readable=e,this.options=s.fromOptions(t),this.buffer=(0,i.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;const t=this.readable.onData((e=>{this.onData(e)}));return this.readable.onError((e=>this.fireError(e))),this.readable.onClose((()=>this.fireClose())),t}onData(e){for(this.buffer.append(e);;){if(-1===this.nextMessageLength){const e=this.buffer.tryReadHeaders();if(!e)return;const t=e.get("Content-Length");if(!t)throw new Error("Header must provide a Content-Length property.");const n=parseInt(t);if(isNaN(n))throw new Error("Content-Length value must be a number.");this.nextMessageLength=n}const e=this.buffer.tryReadBody(this.nextMessageLength);if(void 0===e)return void this.setPartialMessageTimer();let t;this.clearPartialMessageTimer(),this.nextMessageLength=-1,t=void 0!==this.options.contentDecoder?this.options.contentDecoder.decode(e):Promise.resolve(e),t.then((e=>{this.options.contentTypeDecoder.decode(e,this.options).then((e=>{this.callback(e)}),(e=>{this.fireError(e)}))}),(e=>{this.fireError(e)}))}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=(0,i.default)().timer.setTimeout(((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())}),this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}},6654:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=void 0;const i=n(147),r=n(7574),o=n(142),s=n(7135);var a;(t.MessageWriter||(t.MessageWriter={})).is=function(e){let t=e;return t&&r.func(t.dispose)&&r.func(t.onClose)&&r.func(t.onError)&&r.func(t.write)};class u{constructor(){this.errorEmitter=new s.Emitter,this.closeEmitter=new s.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${r.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageWriter=u,function(e){e.fromOptions=function(e){return void 0===e||"string"==typeof e?{charset:e??"utf-8",contentTypeEncoder:(0,i.default)().applicationJson.encoder}:{charset:e.charset??"utf-8",contentEncoder:e.contentEncoder,contentTypeEncoder:e.contentTypeEncoder??(0,i.default)().applicationJson.encoder}}}(a||(a={})),t.WriteableStreamMessageWriter=class extends u{constructor(e,t){super(),this.writable=e,this.options=a.fromOptions(t),this.errorCount=0,this.writeSemaphore=new o.Semaphore(1),this.writable.onError((e=>this.fireError(e))),this.writable.onClose((()=>this.fireClose()))}async write(e){return this.writeSemaphore.lock((async()=>this.options.contentTypeEncoder.encode(e,this.options).then((e=>void 0!==this.options.contentEncoder?this.options.contentEncoder.encode(e):e)).then((t=>{const n=[];return n.push("Content-Length: ",t.byteLength.toString(),"\r\n"),n.push("\r\n"),this.doWrite(e,n,t)}),(e=>{throw this.fireError(e),e}))))}async doWrite(e,t,n){try{return await this.writable.write(t.join(""),"ascii"),this.writable.write(n)}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){this.writable.end()}}},839:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType=t.RequestType0=t.AbstractMessageSignature=t.ParameterStructures=t.ResponseError=t.ErrorCodes=void 0;const i=n(7574);var r,o;!function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.jsonrpcReservedErrorRangeStart=-32099,e.serverErrorStart=-32099,e.MessageWriteError=-32099,e.MessageReadError=-32098,e.PendingResponseRejected=-32097,e.ConnectionInactive=-32096,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.jsonrpcReservedErrorRangeEnd=-32e3,e.serverErrorEnd=-32e3}(r=t.ErrorCodes||(t.ErrorCodes={}));class s extends Error{constructor(e,t,n){super(t),this.code=i.number(e)?e:r.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,s.prototype)}toJson(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data),e}}t.ResponseError=s;class a{constructor(e){this.kind=e}static is(e){return e===a.auto||e===a.byName||e===a.byPosition}toString(){return this.kind}}t.ParameterStructures=a,a.auto=new a("auto"),a.byPosition=new a("byPosition"),a.byName=new a("byName");class u{constructor(e,t){this.method=e,this.numberOfParams=t}get parameterStructures(){return a.auto}}t.AbstractMessageSignature=u,t.RequestType0=class extends u{constructor(e){super(e,0)}},t.RequestType=class extends u{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.RequestType1=class extends u{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.RequestType2=class extends u{constructor(e){super(e,2)}},t.RequestType3=class extends u{constructor(e){super(e,3)}},t.RequestType4=class extends u{constructor(e){super(e,4)}},t.RequestType5=class extends u{constructor(e){super(e,5)}},t.RequestType6=class extends u{constructor(e){super(e,6)}},t.RequestType7=class extends u{constructor(e){super(e,7)}},t.RequestType8=class extends u{constructor(e){super(e,8)}},t.RequestType9=class extends u{constructor(e){super(e,9)}},t.NotificationType=class extends u{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.NotificationType0=class extends u{constructor(e){super(e,0)}},t.NotificationType1=class extends u{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.NotificationType2=class extends u{constructor(e){super(e,2)}},t.NotificationType3=class extends u{constructor(e){super(e,3)}},t.NotificationType4=class extends u{constructor(e){super(e,4)}},t.NotificationType5=class extends u{constructor(e){super(e,5)}},t.NotificationType6=class extends u{constructor(e){super(e,6)}},t.NotificationType7=class extends u{constructor(e){super(e,7)}},t.NotificationType8=class extends u{constructor(e){super(e,8)}},t.NotificationType9=class extends u{constructor(e){super(e,9)}},(o=t.Message||(t.Message={})).isRequest=function(e){const t=e;return t&&i.string(t.method)&&(i.string(t.id)||i.number(t.id))},o.isNotification=function(e){const t=e;return t&&i.string(t.method)&&void 0===e.id},o.isResponse=function(e){const t=e;return t&&(void 0!==t.result||!!t.error)&&(i.string(t.id)||i.number(t.id)||null===t.id)}},147:(e,t)=>{"use strict";let n;function i(){if(void 0===n)throw new Error("No runtime abstraction layer installed");return n}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.install=function(e){if(void 0===e)throw new Error("No runtime abstraction layer provided");n=e}}(i||(i={})),t.default=i},142:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Semaphore=void 0;const i=n(147);t.Semaphore=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise(((t,n)=>{this._waiting.push({thunk:e,resolve:t,reject:n}),this.runNext()}))}get active(){return this._active}runNext(){0!==this._waiting.length&&this._active!==this._capacity&&(0,i.default)().timer.setImmediate((()=>this.doRunNext()))}doRunNext(){if(0===this._waiting.length||this._active===this._capacity)return;const e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const t=e.thunk();t instanceof Promise?t.then((t=>{this._active--,e.resolve(t),this.runNext()}),(t=>{this._active--,e.reject(t),this.runNext()})):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}}},4389:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.createServerSocketTransport=t.createClientSocketTransport=t.createServerPipeTransport=t.createClientPipeTransport=t.generateRandomPipeName=t.StreamMessageWriter=t.StreamMessageReader=t.SocketMessageWriter=t.SocketMessageReader=t.IPCMessageWriter=t.IPCMessageReader=void 0;const o=n(3034);o.default.install();const s=n(3870),a=n(1017),u=n(2037),c=n(6113),l=n(1808);r(n(3870),t);class d extends s.AbstractMessageReader{constructor(e){super(),this.process=e;let t=this.process;t.on("error",(e=>this.fireError(e))),t.on("close",(()=>this.fireClose()))}listen(e){return this.process.on("message",e),s.Disposable.create((()=>this.process.off("message",e)))}}t.IPCMessageReader=d;class p extends s.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let t=this.process;t.on("error",(e=>this.fireError(e))),t.on("close",(()=>this.fireClose))}write(e){try{return"function"==typeof this.process.send&&this.process.send(e,void 0,void 0,(t=>{t?(this.errorCount++,this.handleError(t,e)):this.errorCount=0})),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}}t.IPCMessageWriter=p;class h extends s.ReadableStreamMessageReader{constructor(e,t="utf-8"){super((0,o.default)().stream.asReadableStream(e),t)}}t.SocketMessageReader=h;class m extends s.WriteableStreamMessageWriter{constructor(e,t){super((0,o.default)().stream.asWritableStream(e),t),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}}t.SocketMessageWriter=m;class g extends s.ReadableStreamMessageReader{constructor(e,t){super((0,o.default)().stream.asReadableStream(e),t)}}t.StreamMessageReader=g;class f extends s.WriteableStreamMessageWriter{constructor(e,t){super((0,o.default)().stream.asWritableStream(e),t)}}t.StreamMessageWriter=f;const y=process.env.XDG_RUNTIME_DIR,D=new Map([["linux",107],["darwin",103]]);t.generateRandomPipeName=function(){const e=(0,c.randomBytes)(21).toString("hex");if("win32"===process.platform)return`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`;let t;t=y?a.join(y,`vscode-ipc-${e}.sock`):a.join(u.tmpdir(),`vscode-${e}.sock`);const n=D.get(process.platform);return void 0!==n&&t.length>=n&&(0,o.default)().console.warn(`WARNING: IPC handle "${t}" is longer than ${n} characters.`),t},t.createClientPipeTransport=function(e,t="utf-8"){let n;const i=new Promise(((e,t)=>{n=e}));return new Promise(((r,o)=>{let s=(0,l.createServer)((e=>{s.close(),n([new h(e,t),new m(e,t)])}));s.on("error",o),s.listen(e,(()=>{s.removeListener("error",o),r({onConnected:()=>i})}))}))},t.createServerPipeTransport=function(e,t="utf-8"){const n=(0,l.createConnection)(e);return[new h(n,t),new m(n,t)]},t.createClientSocketTransport=function(e,t="utf-8"){let n;const i=new Promise(((e,t)=>{n=e}));return new Promise(((r,o)=>{const s=(0,l.createServer)((e=>{s.close(),n([new h(e,t),new m(e,t)])}));s.on("error",o),s.listen(e,"127.0.0.1",(()=>{s.removeListener("error",o),r({onConnected:()=>i})}))}))},t.createServerSocketTransport=function(e,t="utf-8"){const n=(0,l.createConnection)(e,"127.0.0.1");return[new h(n,t),new m(n,t)]},t.createMessageConnection=function(e,t,n,i){n||(n=s.NullLogger);const r=function(e){const t=e;return void 0!==t.read&&void 0!==t.addListener}(e)?new g(e):e,o=function(e){const t=e;return void 0!==t.write&&void 0!==t.addListener}(t)?new f(t):t;return s.ConnectionStrategy.is(i)&&(i={connectionStrategy:i}),(0,s.createMessageConnection)(r,o,n,i)}},3034:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(147),r=n(3837),o=n(3911),s=n(5530);class a extends s.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return a.emptyBuffer}fromString(e,t){return Buffer.from(e,t)}toString(e,t){return e instanceof Buffer?e.toString(t):new r.TextDecoder(t).decode(e)}asNative(e,t){return void 0===t?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,t):Buffer.from(e,0,t)}allocNative(e){return Buffer.allocUnsafe(e)}}a.emptyBuffer=Buffer.allocUnsafe(0);class u{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),o.Disposable.create((()=>this.stream.off("close",e)))}onError(e){return this.stream.on("error",e),o.Disposable.create((()=>this.stream.off("error",e)))}onEnd(e){return this.stream.on("end",e),o.Disposable.create((()=>this.stream.off("end",e)))}onData(e){return this.stream.on("data",e),o.Disposable.create((()=>this.stream.off("data",e)))}}class c{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),o.Disposable.create((()=>this.stream.off("close",e)))}onError(e){return this.stream.on("error",e),o.Disposable.create((()=>this.stream.off("error",e)))}onEnd(e){return this.stream.on("end",e),o.Disposable.create((()=>this.stream.off("end",e)))}write(e,t){return new Promise(((n,i)=>{const r=e=>{null==e?n():i(e)};"string"==typeof e?this.stream.write(e,t,r):this.stream.write(e,r)}))}end(){this.stream.end()}}const l=Object.freeze({messageBuffer:Object.freeze({create:e=>new a(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(e,void 0,0),t.charset))}catch(e){return Promise.reject(e)}}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{try{return e instanceof Buffer?Promise.resolve(JSON.parse(e.toString(t.charset))):Promise.resolve(JSON.parse(new r.TextDecoder(t.charset).decode(e)))}catch(e){return Promise.reject(e)}}})}),stream:Object.freeze({asReadableStream:e=>new u(e),asWritableStream:e=>new c(e)}),console,timer:Object.freeze({setTimeout(e,t,...n){const i=setTimeout(e,t,...n);return{dispose:()=>clearTimeout(i)}},setImmediate(e,...t){const n=setImmediate(e,...t);return{dispose:()=>clearImmediate(n)}},setInterval(e,t,...n){const i=setInterval(e,t,...n);return{dispose:()=>clearInterval(i)}}})});function d(){return l}!function(e){e.install=function(){i.default.install(l)}}(d||(d={})),t.default=d},5028:(e,t,n)=>{"use strict";e.exports=n(4389)},5734:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.DiagnosticPullMode=t.vsdiag=void 0,r(n(273),t),r(n(8909),t);var o=n(2570);Object.defineProperty(t,"vsdiag",{enumerable:!0,get:function(){return o.vsdiag}}),Object.defineProperty(t,"DiagnosticPullMode",{enumerable:!0,get:function(){return o.DiagnosticPullMode}}),r(n(4384),t)},5578:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallHierarchyFeature=void 0;const i=n(9496),r=n(273),o=n(8909);class s{constructor(e){this.client=e,this.middleware=e.middleware}prepareCallHierarchy(e,t,n){const i=this.client,o=this.middleware,s=(e,t,n)=>{const o=i.code2ProtocolConverter.asTextDocumentPositionParams(e,t);return i.sendRequest(r.CallHierarchyPrepareRequest.type,o,n).then((e=>n.isCancellationRequested?null:i.protocol2CodeConverter.asCallHierarchyItems(e,n)),(e=>i.handleFailedRequest(r.CallHierarchyPrepareRequest.type,n,e,null)))};return o.prepareCallHierarchy?o.prepareCallHierarchy(e,t,n,s):s(e,t,n)}provideCallHierarchyIncomingCalls(e,t){const n=this.client,i=this.middleware,o=(e,t)=>{const i={item:n.code2ProtocolConverter.asCallHierarchyItem(e)};return n.sendRequest(r.CallHierarchyIncomingCallsRequest.type,i,t).then((e=>t.isCancellationRequested?null:n.protocol2CodeConverter.asCallHierarchyIncomingCalls(e,t)),(e=>n.handleFailedRequest(r.CallHierarchyIncomingCallsRequest.type,t,e,null)))};return i.provideCallHierarchyIncomingCalls?i.provideCallHierarchyIncomingCalls(e,t,o):o(e,t)}provideCallHierarchyOutgoingCalls(e,t){const n=this.client,i=this.middleware,o=(e,t)=>{const i={item:n.code2ProtocolConverter.asCallHierarchyItem(e)};return n.sendRequest(r.CallHierarchyOutgoingCallsRequest.type,i,t).then((e=>t.isCancellationRequested?null:n.protocol2CodeConverter.asCallHierarchyOutgoingCalls(e,t)),(e=>n.handleFailedRequest(r.CallHierarchyOutgoingCallsRequest.type,t,e,null)))};return i.provideCallHierarchyOutgoingCalls?i.provideCallHierarchyOutgoingCalls(e,t,o):o(e,t)}}class a extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){const t=e;(0,o.ensure)((0,o.ensure)(t,"textDocument"),"callHierarchy").dynamicRegistration=!0}initialize(e,t){const[n,i]=this.getRegistration(t,e.callHierarchyProvider);n&&i&&this.register({id:n,registerOptions:i})}registerLanguageProvider(e){const t=this._client,n=new s(t);return[i.languages.registerCallHierarchyProvider(this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector),n),n]}}t.CallHierarchyFeature=a},4384:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProposedFeatures=t.BaseLanguageClient=t.MessageTransports=t.SuspendMode=t.State=t.CloseAction=t.ErrorAction=t.RevealOutputChannelOn=void 0;const i=n(9496),r=n(273),o=n(71),s=n(8785),a=n(9763),u=n(4904),c=n(1980),l=n(8071),d=n(8909),p=n(2570),h=n(203),m=n(6495),g=n(743),f=n(1435),y=n(6782),D=n(122),C=n(2908),v=n(9959),S=n(2483),E=n(3051),b=n(8480),T=n(9474),A=n(7711),F=n(6426),R=n(6458),w=n(3471),x=n(4849),k=n(5338),_=n(8880),N=n(9889),P=n(328),I=n(5941),q=n(6454),O=n(707),L=n(750),B=n(3603),M=n(5578),j=n(9957),H=n(7606),W=n(3483),$=n(4175),U=n(5098),K=n(6190);var V,z,G,Q,X,J,Y;!function(e){e[e.Info=1]="Info",e[e.Warn=2]="Warn",e[e.Error=3]="Error",e[e.Never=4]="Never"}(V=t.RevealOutputChannelOn||(t.RevealOutputChannelOn={})),function(e){e[e.Continue=1]="Continue",e[e.Shutdown=2]="Shutdown"}(z=t.ErrorAction||(t.ErrorAction={})),function(e){e[e.DoNotRestart=1]="DoNotRestart",e[e.Restart=2]="Restart"}(G=t.CloseAction||(t.CloseAction={})),function(e){e[e.Stopped=1]="Stopped",e[e.Starting=3]="Starting",e[e.Running=2]="Running"}(Q=t.State||(t.State={})),(Y=t.SuspendMode||(t.SuspendMode={})).off="off",Y.on="on";class Z{constructor(e,t){this.client=e,this.maxRestartCount=t,this.restarts=[]}error(e,t,n){return n&&n<=3?{action:z.Continue}:{action:z.Shutdown}}closed(){return this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount?{action:G.Restart}:this.restarts[this.restarts.length-1]-this.restarts[0]<=18e4?{action:G.DoNotRestart,message:`The ${this.client.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted. See the output for more information.`}:(this.restarts.shift(),{action:G.Restart})}}!function(e){e.Initial="initial",e.Starting="starting",e.StartFailed="startFailed",e.Running="running",e.Stopping="stopping",e.Stopped="stopped"}(X||(X={})),(t.MessageTransports||(t.MessageTransports={})).is=function(e){return e&&r.MessageReader.is(e.reader)&&r.MessageWriter.is(e.writer)};class ee{constructor(e,t,n){this._traceFormat=r.TraceFormat.Text,this._diagnosticQueue=new Map,this._diagnosticQueueState={state:"idle"},this._features=[],this._dynamicFeatures=new Map,this.workspaceEditLock=new u.Semaphore(1),this._id=e,this._name=t;const i={isTrusted:!1,supportHtml:!1};void 0!==(n=n||{}).markdown&&(i.isTrusted=!0===n.markdown.isTrusted,i.supportHtml=!0===n.markdown.supportHtml),this._clientOptions={documentSelector:n.documentSelector??[],synchronize:n.synchronize??{},diagnosticCollectionName:n.diagnosticCollectionName,outputChannelName:n.outputChannelName??this._name,revealOutputChannelOn:n.revealOutputChannelOn??V.Error,stdioEncoding:n.stdioEncoding??"utf8",initializationOptions:n.initializationOptions,initializationFailedHandler:n.initializationFailedHandler,progressOnInitialization:!!n.progressOnInitialization,errorHandler:n.errorHandler??this.createDefaultErrorHandler(n.connectionOptions?.maxRestartCount),middleware:n.middleware??{},uriConverters:n.uriConverters,workspaceFolder:n.workspaceFolder,connectionOptions:n.connectionOptions,markdown:i,diagnosticPullOptions:n.diagnosticPullOptions??{onChange:!0,onSave:!1},notebookDocumentOptions:n.notebookDocumentOptions??{}},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=X.Initial,this._ignoredRegistrations=new Set,this._listeners=[],this._notificationHandlers=new Map,this._pendingNotificationHandlers=new Map,this._notificationDisposables=new Map,this._requestHandlers=new Map,this._pendingRequestHandlers=new Map,this._requestDisposables=new Map,this._progressHandlers=new Map,this._pendingProgressHandlers=new Map,this._progressDisposables=new Map,this._connection=void 0,this._initializeResult=void 0,n.outputChannel?(this._outputChannel=n.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=n.traceOutputChannel,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new u.Delayer(250),this._onStop=void 0,this._telemetryEmitter=new r.Emitter,this._stateChangeEmitter=new r.Emitter,this._trace=r.Trace.Off,this._tracer={log:(e,t)=>{a.string(e)?this.logTrace(e,t):this.logObjectTrace(e)}},this._c2p=o.createConverter(n.uriConverters?n.uriConverters.code2Protocol:void 0),this._p2c=s.createConverter(n.uriConverters?n.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted,this._clientOptions.markdown.supportHtml),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get name(){return this._name}get middleware(){return this._clientOptions.middleware??Object.create(null)}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=i.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}get state(){return this.getPublicState()}get $state(){return this._state}set $state(e){let t=this.getPublicState();this._state=e;let n=this.getPublicState();n!==t&&this._stateChangeEmitter.fire({oldState:t,newState:n})}getPublicState(){switch(this.$state){case X.Starting:return Q.Starting;case X.Running:return Q.Running;default:return Q.Stopped}}get initializeResult(){return this._initializeResult}async sendRequest(e,...t){if(this.$state===X.StartFailed||this.$state===X.Stopping||this.$state===X.Stopped)return Promise.reject(new r.ResponseError(r.ErrorCodes.ConnectionInactive,"Client is not running"));try{const n=await this.$start();return await this.forceDocumentSync(),n.sendRequest(e,...t)}catch(t){throw this.error(`Sending request ${a.string(e)?e:e.method} failed.`,t),t}}onRequest(e,t){const n="string"==typeof e?e:e.method;this._requestHandlers.set(n,t);const i=this.activeConnection();let r;return void 0!==i?(this._requestDisposables.set(n,i.onRequest(e,t)),r={dispose:()=>{const e=this._requestDisposables.get(n);void 0!==e&&(e.dispose(),this._requestDisposables.delete(n))}}):(this._pendingRequestHandlers.set(n,t),r={dispose:()=>{this._pendingRequestHandlers.delete(n);const e=this._requestDisposables.get(n);void 0!==e&&(e.dispose(),this._requestDisposables.delete(n))}}),{dispose:()=>{this._requestHandlers.delete(n),r.dispose()}}}async sendNotification(e,t){if(this.$state===X.StartFailed||this.$state===X.Stopping||this.$state===X.Stopped)return Promise.reject(new r.ResponseError(r.ErrorCodes.ConnectionInactive,"Client is not running"));try{const n=await this.$start();return await this.forceDocumentSync(),n.sendNotification(e,t)}catch(t){throw this.error(`Sending notification ${a.string(e)?e:e.method} failed.`,t),t}}onNotification(e,t){const n="string"==typeof e?e:e.method;this._notificationHandlers.set(n,t);const i=this.activeConnection();let r;return void 0!==i?(this._notificationDisposables.set(n,i.onNotification(e,t)),r={dispose:()=>{const e=this._notificationDisposables.get(n);void 0!==e&&(e.dispose(),this._notificationDisposables.delete(n))}}):(this._pendingNotificationHandlers.set(n,t),r={dispose:()=>{this._pendingNotificationHandlers.delete(n);const e=this._notificationDisposables.get(n);void 0!==e&&(e.dispose(),this._notificationDisposables.delete(n))}}),{dispose:()=>{this._notificationHandlers.delete(n),r.dispose()}}}async sendProgress(e,t,n){if(this.$state===X.StartFailed||this.$state===X.Stopping||this.$state===X.Stopped)return Promise.reject(new r.ResponseError(r.ErrorCodes.ConnectionInactive,"Client is not running"));try{return(await this.$start()).sendProgress(e,t,n)}catch(e){throw this.error(`Sending progress for token ${t} failed.`,e),e}}onProgress(e,t,n){this._progressHandlers.set(t,{type:e,handler:n});const i=this.activeConnection();let o;const s=this._clientOptions.middleware?.handleWorkDoneProgress,a=r.WorkDoneProgress.is(e)&&void 0!==s?e=>{s(t,e,(()=>n(e)))}:n;return void 0!==i?(this._progressDisposables.set(t,i.onProgress(e,t,a)),o={dispose:()=>{const e=this._progressDisposables.get(t);void 0!==e&&(e.dispose(),this._progressDisposables.delete(t))}}):(this._pendingProgressHandlers.set(t,{type:e,handler:n}),o={dispose:()=>{this._pendingProgressHandlers.delete(t);const e=this._progressDisposables.get(t);void 0!==e&&(e.dispose(),this._progressDisposables.delete(t))}}),{dispose:()=>{this._progressHandlers.delete(t),o.dispose()}}}createDefaultErrorHandler(e){if(void 0!==e&&e<0)throw new Error(`Invalid maxRestartCount: ${e}`);return new Z(this,e??4)}async setTrace(e){this._trace=e;const t=this.activeConnection();void 0!==t&&await t.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})}data2String(e){if(e instanceof r.ResponseError){const t=e;return`  Message: ${t.message}\n  Code: ${t.code} ${t.data?"\n"+t.data.toString():""}`}return e instanceof Error?a.string(e.stack)?e.stack:e.message:a.string(e)?e:e.toString()}info(e,t,n=!0){this.outputChannel.appendLine(`[Info  - ${(new Date).toLocaleTimeString()}] ${e}`),null!=t&&this.outputChannel.appendLine(this.data2String(t)),n&&this._clientOptions.revealOutputChannelOn<=V.Info&&this.showNotificationMessage(r.MessageType.Info,e)}warn(e,t,n=!0){this.outputChannel.appendLine(`[Warn  - ${(new Date).toLocaleTimeString()}] ${e}`),null!=t&&this.outputChannel.appendLine(this.data2String(t)),n&&this._clientOptions.revealOutputChannelOn<=V.Warn&&this.showNotificationMessage(r.MessageType.Warning,e)}error(e,t,n=!0){this.outputChannel.appendLine(`[Error - ${(new Date).toLocaleTimeString()}] ${e}`),null!=t&&this.outputChannel.appendLine(this.data2String(t)),("force"===n||n&&this._clientOptions.revealOutputChannelOn<=V.Error)&&this.showNotificationMessage(r.MessageType.Error,e)}showNotificationMessage(e,t){t=t??"A request has failed. See the output for more information.",(e===r.MessageType.Error?i.window.showErrorMessage:e===r.MessageType.Warning?i.window.showWarningMessage:i.window.showInformationMessage)(t,"Go to output").then((e=>{void 0!==e&&this.outputChannel.show(!0)}))}logTrace(e,t){this.traceOutputChannel.appendLine(`[Trace - ${(new Date).toLocaleTimeString()}] ${e}`),t&&this.traceOutputChannel.appendLine(this.data2String(t))}logObjectTrace(e){e.isLSPMessage&&e.type?this.traceOutputChannel.append(`[LSP   - ${(new Date).toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${(new Date).toLocaleTimeString()}] `),e&&this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.$state===X.Initial||this.$state===X.Stopping||this.$state===X.Stopped}needsStop(){return this.$state===X.Starting||this.$state===X.Running}activeConnection(){return this.$state===X.Running&&void 0!==this._connection?this._connection:void 0}isRunning(){return this.$state===X.Running}async start(){if("disposing"===this._disposed||"disposed"===this._disposed)throw new Error("Client got disposed and can't be restarted.");if(this.$state===X.Stopping)throw new Error("Client is currently stopping. Can only restart a full stopped client");if(void 0!==this._onStart)return this._onStart;const[e,t,n]=this.createOnStartPromise();this._onStart=e,void 0===this._diagnostics&&(this._diagnostics=this._clientOptions.diagnosticCollectionName?i.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):i.languages.createDiagnosticCollection());for(const[e,t]of this._notificationHandlers)this._pendingNotificationHandlers.has(e)||this._pendingNotificationHandlers.set(e,t);for(const[e,t]of this._requestHandlers)this._pendingRequestHandlers.has(e)||this._pendingRequestHandlers.set(e,t);for(const[e,t]of this._progressHandlers)this._pendingProgressHandlers.has(e)||this._pendingProgressHandlers.set(e,t);this.$state=X.Starting;try{const e=await this.createConnection();e.onNotification(r.LogMessageNotification.type,(e=>{switch(e.type){case r.MessageType.Error:this.error(e.message,void 0,!1);break;case r.MessageType.Warning:this.warn(e.message,void 0,!1);break;case r.MessageType.Info:this.info(e.message,void 0,!1);break;default:this.outputChannel.appendLine(e.message)}})),e.onNotification(r.ShowMessageNotification.type,(e=>{switch(e.type){case r.MessageType.Error:i.window.showErrorMessage(e.message);break;case r.MessageType.Warning:i.window.showWarningMessage(e.message);break;case r.MessageType.Info:default:i.window.showInformationMessage(e.message)}})),e.onRequest(r.ShowMessageRequest.type,(e=>{let t;switch(e.type){case r.MessageType.Error:t=i.window.showErrorMessage;break;case r.MessageType.Warning:t=i.window.showWarningMessage;break;case r.MessageType.Info:default:t=i.window.showInformationMessage}let n=e.actions||[];return t(e.message,...n)})),e.onNotification(r.TelemetryEventNotification.type,(e=>{this._telemetryEmitter.fire(e)})),e.onRequest(r.ShowDocumentRequest.type,(async e=>{const t=async e=>{const t=this.protocol2CodeConverter.asUri(e.uri);try{if(!0===e.external)return{success:await i.env.openExternal(t)};{const n={};return void 0!==e.selection&&(n.selection=this.protocol2CodeConverter.asRange(e.selection)),void 0===e.takeFocus||!1===e.takeFocus?n.preserveFocus=!0:!0===e.takeFocus&&(n.preserveFocus=!1),await i.window.showTextDocument(t,n),{success:!0}}}catch(e){return{success:!1}}},n=this._clientOptions.middleware.window?.showDocument;return void 0!==n?n(e,t):t(e)})),e.listen(),await this.initialize(e),t()}catch(e){this.$state=X.StartFailed,this.error(`${this._name} client: couldn't create connection to server.`,e,"force"),n(e)}return this._onStart}createOnStartPromise(){let e,t;return[new Promise(((n,i)=>{e=n,t=i})),e,t]}async initialize(e){this.refreshTrace(e,!1);const t=this._clientOptions.initializationOptions,[n,o]=void 0!==this._clientOptions.workspaceFolder?[this._clientOptions.workspaceFolder.uri.fsPath,[{uri:this._c2p.asUri(this._clientOptions.workspaceFolder.uri),name:this._clientOptions.workspaceFolder.name}]]:[this._clientGetRootPath(),null],s={processId:null,clientInfo:{name:i.env.appName,version:i.version},locale:this.getLocale(),rootPath:n||null,rootUri:n?this._c2p.asUri(i.Uri.file(n)):null,capabilities:this.computeClientCapabilities(),initializationOptions:a.func(t)?t():t,trace:r.Trace.toString(this._trace),workspaceFolders:o};if(this.fillInitializeParams(s),!this._clientOptions.progressOnInitialization)return this.doInitialize(e,s);{const t=c.generateUuid(),n=new l.ProgressPart(e,t);s.workDoneToken=t;try{const t=await this.doInitialize(e,s);return n.done(),t}catch(e){throw n.cancel(),e}}}async doInitialize(e,t){try{const n=await e.initialize(t);if(void 0!==n.capabilities.positionEncoding&&n.capabilities.positionEncoding!==r.PositionEncodingKind.UTF16)throw new Error(`Unsupported position encoding (${n.capabilities.positionEncoding}) received from server ${this.name}`);let i;this._initializeResult=n,this.$state=X.Running,a.number(n.capabilities.textDocumentSync)?i=n.capabilities.textDocumentSync===r.TextDocumentSyncKind.None?{openClose:!1,change:r.TextDocumentSyncKind.None,save:void 0}:{openClose:!0,change:n.capabilities.textDocumentSync,save:{includeText:!1}}:void 0!==n.capabilities.textDocumentSync&&null!==n.capabilities.textDocumentSync&&(i=n.capabilities.textDocumentSync),this._capabilities=Object.assign({},n.capabilities,{resolvedTextDocumentSync:i}),e.onNotification(r.PublishDiagnosticsNotification.type,(e=>this.handleDiagnostics(e))),e.onRequest(r.RegistrationRequest.type,(e=>this.handleRegistrationRequest(e))),e.onRequest("client/registerFeature",(e=>this.handleRegistrationRequest(e))),e.onRequest(r.UnregistrationRequest.type,(e=>this.handleUnregistrationRequest(e))),e.onRequest("client/unregisterFeature",(e=>this.handleUnregistrationRequest(e))),e.onRequest(r.ApplyWorkspaceEditRequest.type,(e=>this.handleApplyWorkspaceEdit(e)));for(const[t,n]of this._pendingNotificationHandlers)this._notificationDisposables.set(t,e.onNotification(t,n));this._pendingNotificationHandlers.clear();for(const[t,n]of this._pendingRequestHandlers)this._requestDisposables.set(t,e.onRequest(t,n));this._pendingRequestHandlers.clear();for(const[t,n]of this._pendingProgressHandlers)this._progressDisposables.set(t,e.onProgress(n.type,t,n.handler));return this._pendingProgressHandlers.clear(),await e.sendNotification(r.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),n}catch(t){throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(t)?this.initialize(e):this.stop():t instanceof r.ResponseError&&t.data&&t.data.retry?i.window.showErrorMessage(t.message,{title:"Retry",id:"retry"}).then((t=>{t&&"retry"===t.id?this.initialize(e):this.stop()})):(t&&t.message&&i.window.showErrorMessage(t.message),this.error("Server initialization failed.",t),this.stop()),t}}_clientGetRootPath(){let e=i.workspace.workspaceFolders;if(!e||0===e.length)return;let t=e[0];return"file"===t.uri.scheme?t.uri.fsPath:void 0}stop(e=2e3){return this.shutdown("stop",e)}dispose(e=2e3){try{return this._disposed="disposing",this.stop(e)}finally{this._disposed="disposed"}}async shutdown(e,t){if(this.$state===X.Stopped||this.$state===X.Initial)return;if(this.$state===X.Stopping){if(void 0!==this._onStop)return this._onStop;throw new Error("Client is stopping but no stop promise available.")}const n=this.activeConnection();if(void 0===n||this.$state!==X.Running)throw new Error(`Client is not running and can't be stopped. It's current state is: ${this.$state}`);this._initializeResult=void 0,this.$state=X.Stopping,this.cleanUp(e);const i=new Promise((e=>{(0,r.RAL)().timer.setTimeout(e,t)})),o=(async e=>(await e.shutdown(),await e.exit(),e))(n);return this._onStop=Promise.race([i,o]).then((e=>{if(void 0===e)throw this.error("Stopping server timed out",void 0,!1),new Error("Stopping the server timed out");e.end(),e.dispose()}),(e=>{throw this.error("Stopping server failed",e,!1),e})).finally((()=>{this.$state=X.Stopped,"stop"===e&&this.cleanUpChannel(),this._onStart=void 0,this._onStop=void 0,this._connection=void 0,this._ignoredRegistrations.clear()}))}cleanUp(e){this._fileEvents=[],this._fileEventDelayer.cancel();const t=this._listeners.splice(0,this._listeners.length);for(const e of t)e.dispose();this._syncedDocuments&&this._syncedDocuments.clear();for(const e of Array.from(this._features.entries()).map((e=>e[1])).reverse())e.dispose();"stop"===e&&void 0!==this._diagnostics&&(this._diagnostics.dispose(),this._diagnostics=void 0),void 0!==this._idleInterval&&(this._idleInterval.dispose(),this._idleInterval=void 0)}cleanUpChannel(){void 0!==this._outputChannel&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){const t=this;async function n(e){return t._fileEvents.push(e),t._fileEventDelayer.trigger((async()=>{const e=await t.$start();await t.forceDocumentSync();const n=e.sendNotification(r.DidChangeWatchedFilesNotification.type,{changes:t._fileEvents});return t._fileEvents=[],n}))}const i=this.clientOptions.middleware?.workspace;(i?.didChangeWatchedFile?i.didChangeWatchedFile(e,n):n(e)).catch((e=>{t.error("Notify file events failed.",e)}))}async forceDocumentSync(){return void 0===this._didChangeTextDocumentFeature&&(this._didChangeTextDocumentFeature=this._dynamicFeatures.get(r.DidChangeTextDocumentNotification.type.method)),this._didChangeTextDocumentFeature.forceDelivery()}handleDiagnostics(e){if(!this._diagnostics)return;const t=e.uri;"busy"===this._diagnosticQueueState.state&&this._diagnosticQueueState.document===t&&this._diagnosticQueueState.tokenSource.cancel(),this._diagnosticQueue.set(e.uri,e.diagnostics),this.triggerDiagnosticQueue()}triggerDiagnosticQueue(){(0,r.RAL)().timer.setImmediate((()=>{this.workDiagnosticQueue()}))}workDiagnosticQueue(){if("busy"===this._diagnosticQueueState.state)return;const e=this._diagnosticQueue.entries().next();if(!0===e.done)return;const[t,n]=e.value;this._diagnosticQueue.delete(t);const r=new i.CancellationTokenSource;this._diagnosticQueueState={state:"busy",document:t,tokenSource:r},this._p2c.asDiagnostics(n,r.token).then((e=>{if(!r.token.isCancellationRequested){const n=this._p2c.asUri(t),i=this.clientOptions.middleware;i.handleDiagnostics?i.handleDiagnostics(n,e,((e,t)=>this.setDiagnostics(e,t))):this.setDiagnostics(n,e)}})).finally((()=>{this._diagnosticQueueState={state:"idle"},this.triggerDiagnosticQueue()}))}setDiagnostics(e,t){this._diagnostics&&this._diagnostics.set(e,t)}async $start(){if(this.$state===X.StartFailed)throw new Error("Previous start failed. Can't restart server.");await this.start();const e=this.activeConnection();if(void 0===e)throw new Error("Starting server failed");return e}async createConnection(){const e=await this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8");return this._connection=function(e,t,n,i,o){let s=-1;const u=new te,c=(0,r.createProtocolConnection)(e,t,u,o);return c.onError((e=>{n(e[0],e[1],e[2])})),c.onClose(i),{get lastUsed(){return s},resetLastUsed:()=>{s=-1},listen:()=>c.listen(),sendRequest:(e,...t)=>(s=Date.now(),c.sendRequest(e,...t)),onRequest:(e,t)=>c.onRequest(e,t),hasPendingResponse:()=>c.hasPendingResponse(),sendNotification:(e,t)=>(s=Date.now(),c.sendNotification(e,t)),onNotification:(e,t)=>c.onNotification(e,t),onProgress:c.onProgress,sendProgress:c.sendProgress,trace:(e,t,n)=>{const i={sendNotification:!1,traceFormat:r.TraceFormat.Text};return void 0===n?c.trace(e,t,i):(a.boolean(n),c.trace(e,t,n))},initialize:e=>(s=Date.now(),c.sendRequest(r.InitializeRequest.type,e)),shutdown:()=>(s=Date.now(),c.sendRequest(r.ShutdownRequest.type,void 0)),exit:()=>(s=Date.now(),c.sendNotification(r.ExitNotification.type)),end:()=>c.end(),dispose:()=>c.dispose()}}(e.reader,e.writer,((e,t,n)=>{this.handleConnectionError(e,t,n)}),(()=>{this.handleConnectionClosed()}),this._clientOptions.connectionOptions),this._connection}handleConnectionClosed(){if(this.$state===X.Stopped)return;try{void 0!==this._connection&&this._connection.dispose()}catch(e){}let e={action:G.DoNotRestart};if(this.$state!==X.Stopping)try{e=this._clientOptions.errorHandler.closed()}catch(e){}this._connection=void 0,e.action===G.DoNotRestart?(this.error(e.message??"Connection to server got closed. Server will not be restarted.",void 0,"force"),this.cleanUp("stop"),this.$state===X.Starting?this.$state=X.StartFailed:this.$state=X.Stopped,this._onStop=Promise.resolve(),this._onStart=void 0):e.action===G.Restart&&(this.info(e.message??"Connection to server got closed. Server will restart."),this.cleanUp("restart"),this.$state=X.Initial,this._onStop=Promise.resolve(),this._onStart=void 0,this.start().catch((e=>this.error("Restarting server failed",e,"force"))))}handleConnectionError(e,t,n){const i=this._clientOptions.errorHandler.error(e,t,n);i.action===z.Shutdown&&(this.error(i.message??`Client ${this._name}: connection to server is erroring. Shutting down server.`,void 0,"force"),this.stop().catch((e=>{this.error("Stopping server failed",e,!1)})))}hookConfigurationChanged(e){this._listeners.push(i.workspace.onDidChangeConfiguration((()=>{this.refreshTrace(e,!0)})))}refreshTrace(e,t=!1){const n=i.workspace.getConfiguration(this._id);let o=r.Trace.Off,s=r.TraceFormat.Text;if(n){const e=n.get("trace.server","off");"string"==typeof e?o=r.Trace.fromString(e):(o=r.Trace.fromString(n.get("trace.server.verbosity","off")),s=r.TraceFormat.fromString(n.get("trace.server.format","text")))}this._trace=o,this._traceFormat=s,e.trace(this._trace,this._tracer,{sendNotification:t,traceFormat:this._traceFormat}).catch((e=>{this.error("Updating trace failed with error",e,!1)}))}hookFileEvents(e){let t,n=this._clientOptions.synchronize.fileEvents;n&&(t=a.array(n)?n:[n],t&&this._dynamicFeatures.get(r.DidChangeWatchedFilesNotification.type.method).registerRaw(c.generateUuid(),t))}registerFeatures(e){for(let t of e)this.registerFeature(t)}registerFeature(e){if(this._features.push(e),d.DynamicFeature.is(e)){const t=e.registrationType;this._dynamicFeatures.set(t.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}hasDedicatedTextSynchronizationFeature(e){const t=this.getFeature(r.NotebookDocumentSyncRegistrationType.method);return void 0!==t&&t instanceof h.NotebookDocumentSyncFeature&&t.handles(e)}registerBuiltinFeatures(){this.registerFeature(new m.ConfigurationFeature(this)),this.registerFeature(new g.DidOpenTextDocumentFeature(this,this._syncedDocuments)),this.registerFeature(new g.DidChangeTextDocumentFeature(this)),this.registerFeature(new g.WillSaveFeature(this)),this.registerFeature(new g.WillSaveWaitUntilFeature(this)),this.registerFeature(new g.DidSaveTextDocumentFeature(this)),this.registerFeature(new g.DidCloseTextDocumentFeature(this,this._syncedDocuments)),this.registerFeature(new k.FileSystemWatcherFeature(this,(e=>this.notifyFileEvent(e)))),this.registerFeature(new f.CompletionItemFeature(this)),this.registerFeature(new y.HoverFeature(this)),this.registerFeature(new C.SignatureHelpFeature(this)),this.registerFeature(new D.DefinitionFeature(this)),this.registerFeature(new b.ReferencesFeature(this)),this.registerFeature(new v.DocumentHighlightFeature(this)),this.registerFeature(new S.DocumentSymbolFeature(this)),this.registerFeature(new E.WorkspaceSymbolFeature(this)),this.registerFeature(new T.CodeActionFeature(this)),this.registerFeature(new A.CodeLensFeature(this)),this.registerFeature(new F.DocumentFormattingFeature(this)),this.registerFeature(new F.DocumentRangeFormattingFeature(this)),this.registerFeature(new F.DocumentOnTypeFormattingFeature(this)),this.registerFeature(new R.RenameFeature(this)),this.registerFeature(new w.DocumentLinkFeature(this)),this.registerFeature(new x.ExecuteCommandFeature(this)),this.registerFeature(new m.SyncConfigurationFeature(this)),this.registerFeature(new P.TypeDefinitionFeature(this)),this.registerFeature(new N.ImplementationFeature(this)),this.registerFeature(new _.ColorProviderFeature(this)),void 0===this.clientOptions.workspaceFolder&&this.registerFeature(new I.WorkspaceFoldersFeature(this)),this.registerFeature(new q.FoldingRangeFeature(this)),this.registerFeature(new O.DeclarationFeature(this)),this.registerFeature(new L.SelectionRangeFeature(this)),this.registerFeature(new B.ProgressFeature(this)),this.registerFeature(new M.CallHierarchyFeature(this)),this.registerFeature(new j.SemanticTokensFeature(this)),this.registerFeature(new W.LinkedEditingFeature(this)),this.registerFeature(new H.DidCreateFilesFeature(this)),this.registerFeature(new H.DidRenameFilesFeature(this)),this.registerFeature(new H.DidDeleteFilesFeature(this)),this.registerFeature(new H.WillCreateFilesFeature(this)),this.registerFeature(new H.WillRenameFilesFeature(this)),this.registerFeature(new H.WillDeleteFilesFeature(this)),this.registerFeature(new $.TypeHierarchyFeature(this)),this.registerFeature(new U.InlineValueFeature(this)),this.registerFeature(new K.InlayHintsFeature(this)),this.registerFeature(new p.DiagnosticFeature(this)),this.registerFeature(new h.NotebookDocumentSyncFeature(this))}registerProposedFeatures(){this.registerFeatures(J.createAll(this))}fillInitializeParams(e){for(let t of this._features)a.func(t.fillInitializeParams)&&t.fillInitializeParams(e)}computeClientCapabilities(){const e={};(0,d.ensure)(e,"workspace").applyEdit=!0;const t=(0,d.ensure)((0,d.ensure)(e,"workspace"),"workspaceEdit");t.documentChanges=!0,t.resourceOperations=[r.ResourceOperationKind.Create,r.ResourceOperationKind.Rename,r.ResourceOperationKind.Delete],t.failureHandling=r.FailureHandlingKind.TextOnlyTransactional,t.normalizesLineEndings=!0,t.changeAnnotationSupport={groupsOnLabel:!0};const n=(0,d.ensure)((0,d.ensure)(e,"textDocument"),"publishDiagnostics");n.relatedInformation=!0,n.versionSupport=!1,n.tagSupport={valueSet:[r.DiagnosticTag.Unnecessary,r.DiagnosticTag.Deprecated]},n.codeDescriptionSupport=!0,n.dataSupport=!0;const i=(0,d.ensure)(e,"window");(0,d.ensure)(i,"showMessage").messageActionItem={additionalPropertiesSupport:!0},(0,d.ensure)(i,"showDocument").support=!0;const o=(0,d.ensure)(e,"general");o.staleRequestSupport={cancel:!0,retryOnContentModified:Array.from(ee.RequestsToCancelOnContentModified)},o.regularExpressions={engine:"ECMAScript",version:"ES2020"},o.markdown={parser:"marked",version:"1.1.0"},o.positionEncodings=["utf-16"],this._clientOptions.markdown.supportHtml&&(o.markdown.allowedTags=["ul","li","p","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"]);for(let t of this._features)t.fillClientCapabilities(e);return e}initializeFeatures(e){const t=this._clientOptions.documentSelector;for(const e of this._features)a.func(e.preInitialize)&&e.preInitialize(this._capabilities,t);for(const e of this._features)e.initialize(this._capabilities,t)}async handleRegistrationRequest(e){if(this.isRunning())for(const t of e.registrations){const e=this._dynamicFeatures.get(t.method);if(void 0===e)return Promise.reject(new Error(`No feature implementation for ${t.method} found. Registration failed.`));const n=t.registerOptions??{};n.documentSelector=n.documentSelector??this._clientOptions.documentSelector;const i={id:t.id,registerOptions:n};try{e.register(i)}catch(e){return Promise.reject(e)}}else for(const t of e.registrations)this._ignoredRegistrations.add(t.id)}async handleUnregistrationRequest(e){for(let t of e.unregisterations){if(this._ignoredRegistrations.has(t.id))continue;const e=this._dynamicFeatures.get(t.method);if(!e)return Promise.reject(new Error(`No feature implementation for ${t.method} found. Unregistration failed.`));e.unregister(t.id)}}async handleApplyWorkspaceEdit(e){const t=e.edit,n=await this.workspaceEditLock.lock((()=>this._p2c.asWorkspaceEdit(t))),o=new Map;i.workspace.textDocuments.forEach((e=>o.set(e.uri.toString(),e)));let s=!1;if(t.documentChanges)for(const e of t.documentChanges)if(r.TextDocumentEdit.is(e)&&e.textDocument.version&&e.textDocument.version>=0){const t=o.get(e.textDocument.uri);if(t&&t.version!==e.textDocument.version){s=!0;break}}return s?Promise.resolve({applied:!1}):a.asPromise(i.workspace.applyEdit(n).then((e=>({applied:e}))))}handleFailedRequest(e,t,n,o,s=!0){if(n instanceof r.ResponseError){if(n.code===r.ErrorCodes.PendingResponseRejected||n.code===r.ErrorCodes.ConnectionInactive)return o;if(n.code===r.LSPErrorCodes.RequestCancelled||n.code===r.LSPErrorCodes.ServerCancelled){if(void 0!==t&&t.isCancellationRequested)return o;throw void 0!==n.data?new d.LSPCancellationError(n.data):new i.CancellationError}if(n.code===r.LSPErrorCodes.ContentModified){if(ee.RequestsToCancelOnContentModified.has(e.method))throw new i.CancellationError;return o}}throw this.error(`Request ${e.method} failed.`,n,s),n}}t.BaseLanguageClient=ee,ee.RequestsToCancelOnContentModified=new Set([r.SemanticTokensRequest.method,r.SemanticTokensRangeRequest.method,r.SemanticTokensDeltaRequest.method]);class te{error(e){(0,r.RAL)().console.error(e)}warn(e){(0,r.RAL)().console.warn(e)}info(e){(0,r.RAL)().console.info(e)}log(e){(0,r.RAL)().console.log(e)}}!function(e){e.createAll=function(e){return[]}}(J=t.ProposedFeatures||(t.ProposedFeatures={}))},9474:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeActionFeature=void 0;const i=n(9496),r=n(273),o=n(1980),s=n(8909);class a extends s.TextDocumentLanguageFeature{constructor(e){super(e,r.CodeActionRequest.type)}fillClientCapabilities(e){const t=(0,s.ensure)((0,s.ensure)(e,"textDocument"),"codeAction");t.dynamicRegistration=!0,t.isPreferredSupport=!0,t.disabledSupport=!0,t.dataSupport=!0,t.resolveSupport={properties:["edit"]},t.codeActionLiteralSupport={codeActionKind:{valueSet:[r.CodeActionKind.Empty,r.CodeActionKind.QuickFix,r.CodeActionKind.Refactor,r.CodeActionKind.RefactorExtract,r.CodeActionKind.RefactorInline,r.CodeActionKind.RefactorRewrite,r.CodeActionKind.Source,r.CodeActionKind.SourceOrganizeImports]}},t.honorsChangeAnnotations=!1}initialize(e,t){const n=this.getRegistrationOptions(t,e.codeActionProvider);n&&this.register({id:o.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,n={provideCodeActions:(e,t,n,i)=>{const o=this._client,s=async(e,t,n,i)=>{const s={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(e),range:o.code2ProtocolConverter.asRange(t),context:await o.code2ProtocolConverter.asCodeActionContext(n,i)};return o.sendRequest(r.CodeActionRequest.type,s,i).then((e=>i.isCancellationRequested||null==e?null:o.protocol2CodeConverter.asCodeActionResult(e,i)),(e=>o.handleFailedRequest(r.CodeActionRequest.type,i,e,null)))},a=o.middleware;return a.provideCodeActions?a.provideCodeActions(e,t,n,i,s):s(e,t,n,i)},resolveCodeAction:e.resolveProvider?(e,t)=>{const n=this._client,i=this._client.middleware,o=async(e,t)=>n.sendRequest(r.CodeActionResolveRequest.type,await n.code2ProtocolConverter.asCodeAction(e,t),t).then((i=>t.isCancellationRequested?e:n.protocol2CodeConverter.asCodeAction(i,t)),(i=>n.handleFailedRequest(r.CodeActionResolveRequest.type,t,i,e)));return i.resolveCodeAction?i.resolveCodeAction(e,t,o):o(e,t)}:void 0};return[i.languages.registerCodeActionsProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),n]}}t.CodeActionFeature=a},71:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createConverter=void 0;const i=n(9496),r=n(273),o=n(9763),s=n(4904),a=n(1807),u=n(583),c=n(8705),l=n(6434),d=n(5316),p=n(8714),h=n(1365),m=n(3912),g=n(1065);var f;!function(e){e.is=function(e){const t=e;return t&&!!t.inserting&&!!t.replacing}}(f||(f={})),t.createConverter=function(e){const t=e||(e=>e.toString());function n(e){return t(e)}function y(e){return{uri:t(e.uri)}}function D(e){return{uri:t(e.uri),languageId:e.languageId,version:e.version,text:e.getText()}}function C(e){switch(e){case i.TextDocumentSaveReason.Manual:return r.TextDocumentSaveReason.Manual;case i.TextDocumentSaveReason.AfterDelay:return r.TextDocumentSaveReason.AfterDelay;case i.TextDocumentSaveReason.FocusOut:return r.TextDocumentSaveReason.FocusOut}return r.TextDocumentSaveReason.Manual}function v(e){switch(e){case i.CompletionTriggerKind.TriggerCharacter:return r.CompletionTriggerKind.TriggerCharacter;case i.CompletionTriggerKind.TriggerForIncompleteCompletions:return r.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return r.CompletionTriggerKind.Invoked}}function S(e){switch(e){case i.SignatureHelpTriggerKind.Invoke:return r.SignatureHelpTriggerKind.Invoked;case i.SignatureHelpTriggerKind.TriggerCharacter:return r.SignatureHelpTriggerKind.TriggerCharacter;case i.SignatureHelpTriggerKind.ContentChange:return r.SignatureHelpTriggerKind.ContentChange}}function E(e){return{label:e.label}}function b(e){return{label:e.label,parameters:(t=e.parameters,t.map(E))};var t}function T(e){return{line:e.line,character:e.character}}function A(e){return null==e?e:{line:e.line>r.uinteger.MAX_VALUE?r.uinteger.MAX_VALUE:e.line,character:e.character>r.uinteger.MAX_VALUE?r.uinteger.MAX_VALUE:e.character}}function F(e){return null==e?e:{start:A(e.start),end:A(e.end)}}function R(e){return null==e?e:r.Location.create(n(e.uri),F(e.range))}function w(e){switch(e){case i.DiagnosticSeverity.Error:return r.DiagnosticSeverity.Error;case i.DiagnosticSeverity.Warning:return r.DiagnosticSeverity.Warning;case i.DiagnosticSeverity.Information:return r.DiagnosticSeverity.Information;case i.DiagnosticSeverity.Hint:return r.DiagnosticSeverity.Hint}}function x(e){switch(e){case i.DiagnosticTag.Unnecessary:return r.DiagnosticTag.Unnecessary;case i.DiagnosticTag.Deprecated:return r.DiagnosticTag.Deprecated;default:return}}function k(e){return{message:e.message,location:R(e.location)}}function _(e){const t=r.Diagnostic.create(F(e.range),e.message),i=e instanceof d.ProtocolDiagnostic?e:void 0;void 0!==i&&void 0!==i.data&&(t.data=i.data);const s=function(e){if(null!=e)return o.number(e)||o.string(e)?e:{value:e.value,target:n(e.target)}}(e.code);return d.DiagnosticCode.is(s)?void 0!==i&&i.hasDiagnosticCode?t.code=s:(t.code=s.value,t.codeDescription={href:s.target}):t.code=s,o.number(e.severity)&&(t.severity=w(e.severity)),Array.isArray(e.tags)&&(t.tags=function(e){if(!e)return;let t=[];for(let n of e){let e=x(n);void 0!==e&&t.push(e)}return t.length>0?t:void 0}(e.tags)),e.relatedInformation&&(t.relatedInformation=e.relatedInformation.map(k)),e.source&&(t.source=e.source),t}function N(e,t){return null==e?e:s.map(e,_,t)}function P(e){if(e===i.CompletionItemTag.Deprecated)return r.CompletionItemTag.Deprecated}function I(e){return{range:F(e.range),newText:e.newText}}function q(e){return null==e?e:e.map(I)}function O(e){return e<=i.SymbolKind.TypeParameter?e+1:r.SymbolKind.Property}function L(e){return e}function B(e){return e.map(L)}function M(e){let t=r.Command.create(e.title,e.command);return e.arguments&&(t.arguments=e.arguments),t}function j(e){const t=r.InlayHintLabelPart.create(e.value);return void 0!==e.location&&(t.location=R(e.location)),void 0!==e.command&&(t.command=M(e.command)),void 0!==e.tooltip&&(t.tooltip=H(e.tooltip)),t}function H(e){return"string"==typeof e?e:{kind:r.MarkupKind.Markdown,value:e.value}}return{asUri:n,asTextDocumentIdentifier:y,asTextDocumentItem:D,asVersionedTextDocumentIdentifier:function(e){return{uri:t(e.uri),version:e.version}},asOpenTextDocumentParams:function(e){return{textDocument:D(e)}},asChangeTextDocumentParams:function(e){if(function(e){let t=e;return!!t.uri&&!!t.version}(e))return{textDocument:{uri:t(e.uri),version:e.version},contentChanges:[{text:e.getText()}]};if(function(e){let t=e;return!!t.document&&!!t.contentChanges}(e)){let n=e.document;return{textDocument:{uri:t(n.uri),version:n.version},contentChanges:e.contentChanges.map((e=>{let t=e.range;return{range:{start:{line:t.start.line,character:t.start.character},end:{line:t.end.line,character:t.end.character}},rangeLength:e.rangeLength,text:e.text}}))}}throw Error("Unsupported text document change parameter")},asCloseTextDocumentParams:function(e){return{textDocument:y(e)}},asSaveTextDocumentParams:function(e,t=!1){let n={textDocument:y(e)};return t&&(n.text=e.getText()),n},asWillSaveTextDocumentParams:function(e){return{textDocument:y(e.document),reason:C(e.reason)}},asDidCreateFilesParams:function(e){return{files:e.files.map((e=>({uri:t(e)})))}},asDidRenameFilesParams:function(e){return{files:e.files.map((e=>({oldUri:t(e.oldUri),newUri:t(e.newUri)})))}},asDidDeleteFilesParams:function(e){return{files:e.files.map((e=>({uri:t(e)})))}},asWillCreateFilesParams:function(e){return{files:e.files.map((e=>({uri:t(e)})))}},asWillRenameFilesParams:function(e){return{files:e.files.map((e=>({oldUri:t(e.oldUri),newUri:t(e.newUri)})))}},asWillDeleteFilesParams:function(e){return{files:e.files.map((e=>({uri:t(e)})))}},asTextDocumentPositionParams:function(e,t){return{textDocument:y(e),position:T(t)}},asCompletionParams:function(e,t,n){return{textDocument:y(e),position:T(t),context:{triggerKind:v(n.triggerKind),triggerCharacter:n.triggerCharacter}}},asSignatureHelpParams:function(e,t,n){return{textDocument:y(e),position:T(t),context:{isRetrigger:n.isRetrigger,triggerCharacter:n.triggerCharacter,triggerKind:S(n.triggerKind),activeSignatureHelp:(i=n.activeSignatureHelp,void 0===i?i:{signatures:(r=i.signatures,r.map(b)),activeSignature:i.activeSignature,activeParameter:i.activeParameter})}};var i,r},asWorkerPosition:T,asRange:F,asPosition:A,asPositions:function(e,t){return s.map(e,A,t)},asLocation:R,asDiagnosticSeverity:w,asDiagnosticTag:x,asDiagnostic:_,asDiagnostics:N,asCompletionItem:function(e,t=!1){let n,s;o.string(e.label)?n=e.label:(n=e.label.label,!t||void 0===e.label.detail&&void 0===e.label.description||(s={detail:e.label.detail,description:e.label.description}));let u={label:n};void 0!==s&&(u.labelDetails=s);let c=e instanceof a.default?e:void 0;var l,d;e.detail&&(u.detail=e.detail),e.documentation&&(c&&"$string"!==c.documentationFormat?u.documentation=function(e,t){switch(e){case"$string":return t;case r.MarkupKind.PlainText:return{kind:e,value:t};case r.MarkupKind.Markdown:return{kind:e,value:t.value};default:return`Unsupported Markup content received. Kind is: ${e}`}}(c.documentationFormat,e.documentation):u.documentation=e.documentation),e.filterText&&(u.filterText=e.filterText),function(e,t){let n,o,s=r.InsertTextFormat.PlainText;t.textEdit?(n=t.textEdit.newText,o=t.textEdit.range):t.insertText instanceof i.SnippetString?(s=r.InsertTextFormat.Snippet,n=t.insertText.value):n=t.insertText,t.range&&(o=t.range),e.insertTextFormat=s,t.fromEdit&&void 0!==n&&void 0!==o?e.textEdit=function(e,t){return f.is(t)?r.InsertReplaceEdit.create(e,F(t.inserting),F(t.replacing)):{newText:e,range:F(t)}}(n,o):e.insertText=n}(u,e),o.number(e.kind)&&(u.kind=(l=e.kind,void 0!==(d=c&&c.originalItemKind)?d:l+1)),e.sortText&&(u.sortText=e.sortText),e.additionalTextEdits&&(u.additionalTextEdits=q(e.additionalTextEdits)),e.commitCharacters&&(u.commitCharacters=e.commitCharacters.slice()),e.command&&(u.command=M(e.command)),!0!==e.preselect&&!1!==e.preselect||(u.preselect=e.preselect);const p=function(e){if(void 0===e)return e;const t=[];for(let n of e){const e=P(n);void 0!==e&&t.push(e)}return t}(e.tags);if(c){if(void 0!==c.data&&(u.data=c.data),!0===c.deprecated||!1===c.deprecated){if(!0===c.deprecated&&void 0!==p&&p.length>0){const e=p.indexOf(i.CompletionItemTag.Deprecated);-1!==e&&p.splice(e,1)}u.deprecated=c.deprecated}void 0!==c.insertTextMode&&(u.insertTextMode=c.insertTextMode)}return void 0!==p&&p.length>0&&(u.tags=p),void 0===u.insertTextMode&&!0===e.keepWhitespace&&(u.insertTextMode=r.InsertTextMode.adjustIndentation),u},asTextEdit:I,asSymbolKind:O,asSymbolTag:L,asSymbolTags:B,asReferenceParams:function(e,t,n){return{textDocument:y(e),position:T(t),context:{includeDeclaration:n.includeDeclaration}}},asCodeAction:async function(e,t){let n=r.CodeAction.create(e.title);if(e instanceof l.default&&void 0!==e.data&&(n.data=e.data),void 0!==e.kind&&(n.kind=function(e){if(null!=e)return e.value}(e.kind)),void 0!==e.diagnostics&&(n.diagnostics=await N(e.diagnostics,t)),void 0!==e.edit)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return void 0!==e.command&&(n.command=M(e.command)),void 0!==e.isPreferred&&(n.isPreferred=e.isPreferred),void 0!==e.disabled&&(n.disabled={reason:e.disabled.reason}),n},asCodeActionContext:async function(e,t){if(null==e)return e;let n;return e.only&&o.string(e.only.value)&&(n=[e.only.value]),r.CodeActionContext.create(await N(e.diagnostics,t),n,function(e){switch(e){case i.CodeActionTriggerKind.Invoke:return r.CodeActionTriggerKind.Invoked;case i.CodeActionTriggerKind.Automatic:return r.CodeActionTriggerKind.Automatic;default:return}}(e.triggerKind))},asInlineValueContext:function(e){return null==e?e:r.InlineValueContext.create(e.frameId,F(e.stoppedLocation))},asCommand:M,asCodeLens:function(e){let t=r.CodeLens.create(F(e.range));return e.command&&(t.command=M(e.command)),e instanceof u.default&&e.data&&(t.data=e.data),t},asFormattingOptions:function(e,t){const n={tabSize:e.tabSize,insertSpaces:e.insertSpaces};return t.trimTrailingWhitespace&&(n.trimTrailingWhitespace=!0),t.trimFinalNewlines&&(n.trimFinalNewlines=!0),t.insertFinalNewline&&(n.insertFinalNewline=!0),n},asDocumentSymbolParams:function(e){return{textDocument:y(e)}},asCodeLensParams:function(e){return{textDocument:y(e)}},asDocumentLink:function(e){let t=r.DocumentLink.create(F(e.range));e.target&&(t.target=n(e.target)),void 0!==e.tooltip&&(t.tooltip=e.tooltip);let i=e instanceof c.default?e:void 0;return i&&i.data&&(t.data=i.data),t},asDocumentLinkParams:function(e){return{textDocument:y(e)}},asCallHierarchyItem:function(e){const t={name:e.name,kind:O(e.kind),uri:n(e.uri),range:F(e.range),selectionRange:F(e.selectionRange)};return void 0!==e.detail&&e.detail.length>0&&(t.detail=e.detail),void 0!==e.tags&&(t.tags=B(e.tags)),e instanceof p.default&&void 0!==e.data&&(t.data=e.data),t},asTypeHierarchyItem:function(e){const t={name:e.name,kind:O(e.kind),uri:n(e.uri),range:F(e.range),selectionRange:F(e.selectionRange)};return void 0!==e.detail&&e.detail.length>0&&(t.detail=e.detail),void 0!==e.tags&&(t.tags=B(e.tags)),e instanceof h.default&&void 0!==e.data&&(t.data=e.data),t},asInlayHint:function(e){const t="string"==typeof e.label?e.label:e.label.map(j),n=r.InlayHint.create(A(e.position),t);return void 0!==e.kind&&(n.kind=e.kind),void 0!==e.textEdits&&(n.textEdits=q(e.textEdits)),void 0!==e.tooltip&&(n.tooltip=H(e.tooltip)),void 0!==e.paddingLeft&&(n.paddingLeft=e.paddingLeft),void 0!==e.paddingRight&&(n.paddingRight=e.paddingRight),e instanceof g.default&&void 0!==e.data&&(n.data=e.data),n},asWorkspaceSymbol:function(e){const n=e instanceof m.default?{name:e.name,kind:O(e.kind),location:e.hasRange?R(e.location):{uri:t(e.location.uri)},data:e.data}:{name:e.name,kind:O(e.kind),location:R(e.location)};return void 0!==e.tags&&(n.tags=B(e.tags)),""!==e.containerName&&(n.containerName=e.containerName),n}}}},7711:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeLensFeature=void 0;const i=n(9496),r=n(273),o=n(1980),s=n(8909);class a extends s.TextDocumentLanguageFeature{constructor(e){super(e,r.CodeLensRequest.type)}fillClientCapabilities(e){(0,s.ensure)((0,s.ensure)(e,"textDocument"),"codeLens").dynamicRegistration=!0,(0,s.ensure)((0,s.ensure)(e,"workspace"),"codeLens").refreshSupport=!0}initialize(e,t){this._client.onRequest(r.CodeLensRefreshRequest.type,(async()=>{for(const e of this.getAllProviders())e.onDidChangeCodeLensEmitter.fire()}));const n=this.getRegistrationOptions(t,e.codeLensProvider);n&&this.register({id:o.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,n=new i.EventEmitter,o={onDidChangeCodeLenses:n.event,provideCodeLenses:(e,t)=>{const n=this._client,i=(e,t)=>n.sendRequest(r.CodeLensRequest.type,n.code2ProtocolConverter.asCodeLensParams(e),t).then((e=>t.isCancellationRequested?null:n.protocol2CodeConverter.asCodeLenses(e,t)),(e=>n.handleFailedRequest(r.CodeLensRequest.type,t,e,null))),o=n.middleware;return o.provideCodeLenses?o.provideCodeLenses(e,t,i):i(e,t)},resolveCodeLens:e.resolveProvider?(e,t)=>{const n=this._client,i=(e,t)=>n.sendRequest(r.CodeLensResolveRequest.type,n.code2ProtocolConverter.asCodeLens(e),t).then((i=>t.isCancellationRequested?e:n.protocol2CodeConverter.asCodeLens(i)),(i=>n.handleFailedRequest(r.CodeLensResolveRequest.type,t,i,e))),o=n.middleware;return o.resolveCodeLens?o.resolveCodeLens(e,t,i):i(e,t)}:void 0};return[i.languages.registerCodeLensProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),o),{provider:o,onDidChangeCodeLensEmitter:n}]}}t.CodeLensFeature=a},8880:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorProviderFeature=void 0;const i=n(9496),r=n(273),o=n(8909);class s extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.DocumentColorRequest.type)}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,t){let[n,i]=this.getRegistration(t,e.colorProvider);n&&i&&this.register({id:n,registerOptions:i})}registerLanguageProvider(e){const t=e.documentSelector,n={provideColorPresentations:(e,t,n)=>{const i=this._client,o=(e,t,n)=>{const o={color:e,textDocument:i.code2ProtocolConverter.asTextDocumentIdentifier(t.document),range:i.code2ProtocolConverter.asRange(t.range)};return i.sendRequest(r.ColorPresentationRequest.type,o,n).then((e=>n.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorPresentations(e,n)),(e=>i.handleFailedRequest(r.ColorPresentationRequest.type,n,e,null)))},s=i.middleware;return s.provideColorPresentations?s.provideColorPresentations(e,t,n,o):o(e,t,n)},provideDocumentColors:(e,t)=>{const n=this._client,i=(e,t)=>{const i={textDocument:n.code2ProtocolConverter.asTextDocumentIdentifier(e)};return n.sendRequest(r.DocumentColorRequest.type,i,t).then((e=>t.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorInformations(e,t)),(e=>n.handleFailedRequest(r.DocumentColorRequest.type,t,e,null)))},o=n.middleware;return o.provideDocumentColors?o.provideDocumentColors(e,t,i):i(e,t)}};return[i.languages.registerColorProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n),n]}}t.ColorProviderFeature=s},1435:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompletionItemFeature=void 0;const i=n(9496),r=n(273),o=n(8909),s=n(1980),a=[r.CompletionItemKind.Text,r.CompletionItemKind.Method,r.CompletionItemKind.Function,r.CompletionItemKind.Constructor,r.CompletionItemKind.Field,r.CompletionItemKind.Variable,r.CompletionItemKind.Class,r.CompletionItemKind.Interface,r.CompletionItemKind.Module,r.CompletionItemKind.Property,r.CompletionItemKind.Unit,r.CompletionItemKind.Value,r.CompletionItemKind.Enum,r.CompletionItemKind.Keyword,r.CompletionItemKind.Snippet,r.CompletionItemKind.Color,r.CompletionItemKind.File,r.CompletionItemKind.Reference,r.CompletionItemKind.Folder,r.CompletionItemKind.EnumMember,r.CompletionItemKind.Constant,r.CompletionItemKind.Struct,r.CompletionItemKind.Event,r.CompletionItemKind.Operator,r.CompletionItemKind.TypeParameter];class u extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.CompletionRequest.type),this.labelDetailsSupport=new Map}fillClientCapabilities(e){let t=(0,o.ensure)((0,o.ensure)(e,"textDocument"),"completion");t.dynamicRegistration=!0,t.contextSupport=!0,t.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[r.MarkupKind.Markdown,r.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[r.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[r.InsertTextMode.asIs,r.InsertTextMode.adjustIndentation]},labelDetailsSupport:!0},t.insertTextMode=r.InsertTextMode.adjustIndentation,t.completionItemKind={valueSet:a},t.completionList={itemDefaults:["commitCharacters","editRange","insertTextFormat","insertTextMode"]}}initialize(e,t){const n=this.getRegistrationOptions(t,e.completionProvider);n&&this.register({id:s.generateUuid(),registerOptions:n})}registerLanguageProvider(e,t){this.labelDetailsSupport.set(t,!!e.completionItem?.labelDetailsSupport);const n=e.triggerCharacters??[],o=e.allCommitCharacters,s=e.documentSelector,a={provideCompletionItems:(e,t,n,i)=>{const s=this._client,a=this._client.middleware,u=(e,t,n,i)=>s.sendRequest(r.CompletionRequest.type,s.code2ProtocolConverter.asCompletionParams(e,t,n),i).then((e=>i.isCancellationRequested?null:s.protocol2CodeConverter.asCompletionResult(e,o,i)),(e=>s.handleFailedRequest(r.CompletionRequest.type,i,e,null)));return a.provideCompletionItem?a.provideCompletionItem(e,t,i,n,u):u(e,t,i,n)},resolveCompletionItem:e.resolveProvider?(e,n)=>{const i=this._client,o=this._client.middleware,s=(e,n)=>i.sendRequest(r.CompletionResolveRequest.type,i.code2ProtocolConverter.asCompletionItem(e,!!this.labelDetailsSupport.get(t)),n).then((e=>n.isCancellationRequested?null:i.protocol2CodeConverter.asCompletionItem(e)),(t=>i.handleFailedRequest(r.CompletionResolveRequest.type,n,t,e)));return o.resolveCompletionItem?o.resolveCompletionItem(e,n,s):s(e,n)}:void 0};return[i.languages.registerCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(s),a,...n),a]}}t.CompletionItemFeature=u},6495:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncConfigurationFeature=t.toJSONObject=t.ConfigurationFeature=void 0;const i=n(9496),r=n(273),o=n(9763),s=n(1980),a=n(8909);function u(e){if(e){if(Array.isArray(e))return e.map(u);if("object"==typeof e){const t=Object.create(null);for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=u(e[n]));return t}}return e}t.ConfigurationFeature=class{constructor(e){this._client=e}getState(){return{kind:"static"}}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(r.ConfigurationRequest.type,((t,n)=>{let i=e=>{let t=[];for(let n of e.items){let e=void 0!==n.scopeUri&&null!==n.scopeUri?this._client.protocol2CodeConverter.asUri(n.scopeUri):void 0;t.push(this.getConfiguration(e,null!==n.section?n.section:void 0))}return t},r=e.middleware.workspace;return r&&r.configuration?r.configuration(t,n,i):i(t)}))}getConfiguration(e,t){let n=null;if(t){let r=t.lastIndexOf(".");if(-1===r)n=u(i.workspace.getConfiguration(void 0,e).get(t));else{let o=i.workspace.getConfiguration(t.substr(0,r),e);o&&(n=u(o.get(t.substr(r+1))))}}else{let t=i.workspace.getConfiguration(void 0,e);n={};for(let e of Object.keys(t))t.has(e)&&(n[e]=u(t.get(e)))}return void 0===n&&(n=null),n}dispose(){}},t.toJSONObject=u,t.SyncConfigurationFeature=class{constructor(e){this._client=e,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return r.DidChangeConfigurationNotification.type}fillClientCapabilities(e){(0,a.ensure)((0,a.ensure)(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let e=this._client.clientOptions.synchronize?.configurationSection;void 0!==e&&this.register({id:s.generateUuid(),registerOptions:{section:e}})}register(e){let t=i.workspace.onDidChangeConfiguration((t=>{this.onDidChangeConfiguration(e.registerOptions.section,t)}));this._listeners.set(e.id,t),void 0!==e.registerOptions.section&&this.onDidChangeConfiguration(e.registerOptions.section,void 0)}unregister(e){let t=this._listeners.get(e);t&&(this._listeners.delete(e),t.dispose())}dispose(){for(const e of this._listeners.values())e.dispose();this._listeners.clear()}onDidChangeConfiguration(e,t){let n;if(n=o.string(e)?[e]:e,void 0!==n&&void 0!==t&&!n.some((e=>t.affectsConfiguration(e))))return;const i=async e=>void 0===e?this._client.sendNotification(r.DidChangeConfigurationNotification.type,{settings:null}):this._client.sendNotification(r.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(e)});let s=this._client.middleware.workspace?.didChangeConfiguration;(s?s(n,i):i(n)).catch((e=>{this._client.error(`Sending notification ${r.DidChangeConfigurationNotification.type.method} failed`,e)}))}extractSettingsInformation(e){function t(e,t){let n=e;for(let e=0;e<t.length-1;e++){let i=n[t[e]];i||(i=Object.create(null),n[t[e]]=i),n=i}return n}let n=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,r=Object.create(null);for(let o=0;o<e.length;o++){let s=e[o],a=s.indexOf("."),c=null;if(c=a>=0?i.workspace.getConfiguration(s.substr(0,a),n).get(s.substr(a+1)):i.workspace.getConfiguration(void 0,n).get(s),c){let n=e[o].split(".");t(r,n)[n[n.length-1]]=u(c)}}return r}}},707:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeclarationFeature=void 0;const i=n(9496),r=n(273),o=n(8909);class s extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.DeclarationRequest.type)}fillClientCapabilities(e){const t=(0,o.ensure)((0,o.ensure)(e,"textDocument"),"declaration");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){const[n,i]=this.getRegistration(t,e.declarationProvider);n&&i&&this.register({id:n,registerOptions:i})}registerLanguageProvider(e){const t=e.documentSelector,n={provideDeclaration:(e,t,n)=>{const i=this._client,o=(e,t,n)=>i.sendRequest(r.DeclarationRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(e,t),n).then((e=>n.isCancellationRequested?null:i.protocol2CodeConverter.asDeclarationResult(e,n)),(e=>i.handleFailedRequest(r.DeclarationRequest.type,n,e,null))),s=i.middleware;return s.provideDeclaration?s.provideDeclaration(e,t,n,o):o(e,t,n)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return i.languages.registerDeclarationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.DeclarationFeature=s},122:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefinitionFeature=void 0;const i=n(9496),r=n(273),o=n(8909),s=n(1980);class a extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.DefinitionRequest.type)}fillClientCapabilities(e){let t=(0,o.ensure)((0,o.ensure)(e,"textDocument"),"definition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.definitionProvider);n&&this.register({id:s.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,n={provideDefinition:(e,t,n)=>{const i=this._client,o=(e,t,n)=>i.sendRequest(r.DefinitionRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(e,t),n).then((e=>n.isCancellationRequested?null:i.protocol2CodeConverter.asDefinitionResult(e,n)),(e=>i.handleFailedRequest(r.DefinitionRequest.type,n,e,null))),s=i.middleware;return s.provideDefinition?s.provideDefinition(e,t,n,o):o(e,t,n)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return i.languages.registerDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.DefinitionFeature=a},2570:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagnosticFeature=t.DiagnosticPullMode=t.vsdiag=void 0;const i=n(1171),r=n(9496),o=n(273),s=n(1980),a=n(8909);function u(e,t){return void 0===e[t]&&(e[t]={}),e[t]}var c,l,d,p;!function(e){let t;!function(e){e.full="full",e.unChanged="unChanged"}(t=e.DocumentDiagnosticReportKind||(e.DocumentDiagnosticReportKind={}))}(c=t.vsdiag||(t.vsdiag={})),function(e){e.onType="onType",e.onSave="onSave"}(l=t.DiagnosticPullMode||(t.DiagnosticPullMode={})),function(e){e.active="open",e.reschedule="reschedule",e.outDated="drop"}(d||(d={}));class h{constructor(){this.open=new Set,this._onOpen=new r.EventEmitter,this._onClose=new r.EventEmitter,h.fillTabResources(this.open);void 0!==r.window.tabGroups.onDidChangeTabs?this.disposable=r.window.tabGroups.onDidChangeTabs((e=>{if(0===e.closed.length&&0===e.opened.length)return;const t=this.open,n=new Set;h.fillTabResources(n);const i=new Set,o=new Set(n);for(const e of t.values())n.has(e)?o.delete(e):i.add(e);if(this.open=n,i.size>0){const e=new Set;for(const t of i)e.add(r.Uri.parse(t));this._onClose.fire(e)}if(o.size>0){const e=new Set;for(const t of o)e.add(r.Uri.parse(t));this._onOpen.fire(e)}})):this.disposable={dispose:()=>{}}}get onClose(){return this._onClose.event}get onOpen(){return this._onOpen.event}dispose(){this.disposable.dispose()}isActive(e){return e instanceof r.Uri?r.window.activeTextEditor?.document.uri===e:r.window.activeTextEditor?.document===e}isVisible(e){const t=e instanceof r.Uri?e:e.uri;return this.open.has(t.toString())}getTabResources(){const e=new Set;return h.fillTabResources(new Set,e),e}static fillTabResources(e,t){const n=e??new Set;for(const e of r.window.tabGroups.all)for(const i of e.tabs){const e=i.input;let o;e instanceof r.TabInputText?o=e.uri:e instanceof r.TabInputTextDiff&&(o=e.modified),void 0===o||n.has(o.toString())||(n.add(o.toString()),void 0!==t&&t.add(o))}}}!function(e){e[e.document=1]="document",e[e.workspace=2]="workspace"}(p||(p={}));class m{constructor(){this.documentPullStates=new Map,this.workspacePullStates=new Map}track(e,t,n){const i=e===p.document?this.documentPullStates:this.workspacePullStates,[o,s,a]=t instanceof r.Uri?[t.toString(),t,n]:[t.uri.toString(),t.uri,t.version];let u=i.get(o);return void 0===u&&(u={document:s,pulledVersion:a,resultId:void 0},i.set(o,u)),u}update(e,t,n,i){const o=e===p.document?this.documentPullStates:this.workspacePullStates,[s,a,u,c]=t instanceof r.Uri?[t.toString(),t,n,i]:[t.uri.toString(),t.uri,t.version,n];let l=o.get(s);void 0===l?(l={document:a,pulledVersion:u,resultId:c},o.set(s,l)):(l.pulledVersion=u,l.resultId=c)}unTrack(e,t){const n=t instanceof r.Uri?t.toString():t.uri.toString();(e===p.document?this.documentPullStates:this.workspacePullStates).delete(n)}tracks(e,t){const n=t instanceof r.Uri?t.toString():t.uri.toString();return(e===p.document?this.documentPullStates:this.workspacePullStates).has(n)}getResultId(e,t){const n=t instanceof r.Uri?t.toString():t.uri.toString();return(e===p.document?this.documentPullStates:this.workspacePullStates).get(n)?.resultId}getAllResultIds(){const e=[];for(let[t,n]of this.workspacePullStates)this.documentPullStates.has(t)&&(n=this.documentPullStates.get(t)),void 0!==n.resultId&&e.push({uri:t,value:n.resultId});return e}}class g{constructor(e,t,n){this.client=e,this.tabs=t,this.options=n,this.isDisposed=!1,this.onDidChangeDiagnosticsEmitter=new r.EventEmitter,this.provider=this.createProvider(),this.diagnostics=r.languages.createDiagnosticCollection(n.identifier),this.openRequests=new Map,this.documentStates=new m,this.workspaceErrorCounter=0}knows(e,t){return this.documentStates.tracks(e,t)}forget(e,t){this.documentStates.unTrack(e,t)}pull(e,t){if(this.isDisposed)return;const n=e instanceof r.Uri?e:e.uri;this.pullAsync(e).then((()=>{t&&t()}),(e=>{this.client.error(`Document pull failed for text document ${n.toString()}`,e,!1)}))}async pullAsync(e,t){if(this.isDisposed)return;const n=e instanceof r.Uri,i=n?e:e.uri,s=i.toString();t=n?t:e.version;const u=this.openRequests.get(s),l=n?this.documentStates.track(p.document,e,t):this.documentStates.track(p.document,e);if(void 0===u){const n=new r.CancellationTokenSource;let u,h;this.openRequests.set(s,{state:d.active,document:e,version:t,tokenSource:n});try{u=await this.provider.provideDiagnostics(e,l.resultId,n.token)??{kind:c.DocumentDiagnosticReportKind.full,items:[]}}catch(t){if(t instanceof a.LSPCancellationError&&o.DiagnosticServerCancellationData.is(t.data)&&!1===t.data.retriggerRequest&&(h={state:d.outDated,document:e}),!(void 0===h&&t instanceof r.CancellationError))throw t;h={state:d.reschedule,document:e}}if(h=h??this.openRequests.get(s),void 0===h)return this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${s}`),void this.diagnostics.delete(i);if(this.openRequests.delete(s),!this.tabs.isVisible(e))return void this.documentStates.unTrack(p.document,e);if(h.state===d.outDated)return;void 0!==u&&(u.kind===c.DocumentDiagnosticReportKind.full&&this.diagnostics.set(i,u.items),l.pulledVersion=t,l.resultId=u.resultId),h.state===d.reschedule&&this.pull(e)}else u.state===d.active?(u.tokenSource.cancel(),this.openRequests.set(s,{state:d.reschedule,document:u.document})):u.state===d.outDated&&this.openRequests.set(s,{state:d.reschedule,document:u.document})}forgetDocument(e){const t=e instanceof r.Uri?e:e.uri,n=t.toString(),i=this.openRequests.get(n);this.options.workspaceDiagnostics?void 0!==i?this.openRequests.set(n,{state:d.reschedule,document:e}):this.pull(e,(()=>{this.forget(p.document,e)})):(void 0!==i&&(i.state===d.active&&i.tokenSource.cancel(),this.openRequests.set(n,{state:d.outDated,document:e})),this.diagnostics.delete(t),this.forget(p.document,e))}pullWorkspace(){this.isDisposed||this.pullWorkspaceAsync().then((()=>{this.workspaceTimeout=(0,o.RAL)().timer.setTimeout((()=>{this.pullWorkspace()}),2e3)}),(e=>{e instanceof a.LSPCancellationError||o.DiagnosticServerCancellationData.is(e.data)||(this.client.error("Workspace diagnostic pull failed.",e,!1),this.workspaceErrorCounter++),this.workspaceErrorCounter<=5&&(this.workspaceTimeout=(0,o.RAL)().timer.setTimeout((()=>{this.pullWorkspace()}),2e3))}))}async pullWorkspaceAsync(){if(!this.provider.provideWorkspaceDiagnostics||this.isDisposed)return;void 0!==this.workspaceCancellation&&(this.workspaceCancellation.cancel(),this.workspaceCancellation=void 0),this.workspaceCancellation=new r.CancellationTokenSource;const e=this.documentStates.getAllResultIds().map((e=>({uri:this.client.protocol2CodeConverter.asUri(e.uri),value:e.value})));await this.provider.provideWorkspaceDiagnostics(e,this.workspaceCancellation.token,(e=>{if(e&&!this.isDisposed)for(const t of e.items)t.kind===c.DocumentDiagnosticReportKind.full&&(this.documentStates.tracks(p.document,t.uri)||this.diagnostics.set(t.uri,t.items)),this.documentStates.update(p.workspace,t.uri,t.version??void 0,t.resultId)}))}createProvider(){const e={onDidChangeDiagnostics:this.onDidChangeDiagnosticsEmitter.event,provideDiagnostics:(e,t,n)=>{const i=(e,t,n)=>{const i={identifier:this.options.identifier,textDocument:{uri:this.client.code2ProtocolConverter.asUri(e instanceof r.Uri?e:e.uri)},previousResultId:t};return!0!==this.isDisposed&&this.client.isRunning()?this.client.sendRequest(o.DocumentDiagnosticRequest.type,i,n).then((async e=>null==e||this.isDisposed||n.isCancellationRequested?{kind:c.DocumentDiagnosticReportKind.full,items:[]}:e.kind===o.DocumentDiagnosticReportKind.Full?{kind:c.DocumentDiagnosticReportKind.full,resultId:e.resultId,items:await this.client.protocol2CodeConverter.asDiagnostics(e.items,n)}:{kind:c.DocumentDiagnosticReportKind.unChanged,resultId:e.resultId}),(e=>this.client.handleFailedRequest(o.DocumentDiagnosticRequest.type,n,e,{kind:c.DocumentDiagnosticReportKind.full,items:[]}))):{kind:c.DocumentDiagnosticReportKind.full,items:[]}},s=this.client.middleware;return s.provideDiagnostics?s.provideDiagnostics(e,t,n,i):i(e,t,n)}};return this.options.workspaceDiagnostics&&(e.provideWorkspaceDiagnostics=(e,t,n)=>{const i=async e=>e.kind===o.DocumentDiagnosticReportKind.Full?{kind:c.DocumentDiagnosticReportKind.full,uri:this.client.protocol2CodeConverter.asUri(e.uri),resultId:e.resultId,version:e.version,items:await this.client.protocol2CodeConverter.asDiagnostics(e.items,t)}:{kind:c.DocumentDiagnosticReportKind.unChanged,uri:this.client.protocol2CodeConverter.asUri(e.uri),resultId:e.resultId,version:e.version},r=e=>{const t=[];for(const n of e)t.push({uri:this.client.code2ProtocolConverter.asUri(n.uri),value:n.value});return t},a=(e,t)=>{const a=(0,s.generateUuid)(),u=this.client.onProgress(o.WorkspaceDiagnosticRequest.partialResult,a,(async e=>{if(null==e)return void n(null);const t={items:[]};for(const n of e.items)try{t.items.push(await i(n))}catch(e){this.client.error("Converting workspace diagnostics failed.",e)}n(t)})),c={identifier:this.options.identifier,previousResultIds:r(e),partialResultToken:a};return!0!==this.isDisposed&&this.client.isRunning()?this.client.sendRequest(o.WorkspaceDiagnosticRequest.type,c,t).then((async e=>{if(t.isCancellationRequested)return{items:[]};const r={items:[]};for(const t of e.items)r.items.push(await i(t));return u.dispose(),n(r),{items:[]}}),(e=>(u.dispose(),this.client.handleFailedRequest(o.DocumentDiagnosticRequest.type,t,e,{items:[]})))):{items:[]}},u=this.client.middleware;return u.provideWorkspaceDiagnostics?u.provideWorkspaceDiagnostics(e,t,n,a):a(e,t)}),e}dispose(){this.isDisposed=!0,this.workspaceCancellation?.cancel(),this.workspaceTimeout?.dispose();for(const[e,t]of this.openRequests)t.state===d.active&&t.tokenSource.cancel(),this.openRequests.set(e,{state:d.outDated,document:t.document});this.diagnostics.dispose()}}class f{constructor(e){this.diagnosticRequestor=e,this.documents=new o.LinkedMap,this.isDisposed=!1}add(e){if(!0===this.isDisposed)return;const t=e instanceof r.Uri?e.toString():e.uri.toString();this.documents.has(t)||(this.documents.set(t,e,o.Touch.Last),this.trigger())}remove(e){const t=e instanceof r.Uri?e.toString():e.uri.toString();this.documents.has(t)&&(this.documents.delete(t),this.diagnosticRequestor.pull(e)),0===this.documents.size?this.stop():e===this.endDocument&&(this.endDocument=this.documents.last)}trigger(){!0!==this.isDisposed&&(void 0===this.intervalHandle?(this.endDocument=this.documents.last,this.intervalHandle=(0,o.RAL)().timer.setInterval((()=>{const e=this.documents.first;if(void 0!==e){const t=e instanceof r.Uri?e.toString():e.uri.toString();this.diagnosticRequestor.pull(e),this.documents.set(t,e,o.Touch.Last),e===this.endDocument&&this.stop()}}),200)):this.endDocument=this.documents.last)}dispose(){this.isDisposed=!0,this.stop(),this.documents.clear()}stop(){this.intervalHandle?.dispose(),this.intervalHandle=void 0,this.endDocument=void 0}}class y{constructor(e,t,n){const s=e.clientOptions.diagnosticPullOptions??{onChange:!0,onSave:!1},a=e.protocol2CodeConverter.asDocumentSelector(n.documentSelector),u=[],c=e=>e instanceof r.Uri?(e=>{const t=n.documentSelector;if(void 0!==s.match)return s.match(t,e);for(const n of t)if(o.TextDocumentFilter.is(n)){if("string"==typeof n)return!1;if(void 0!==n.language&&"*"!==n.language)return!1;if(void 0!==n.scheme&&"*"!==n.scheme&&n.scheme!==e.scheme)return!1;if(void 0!==n.pattern){const t=new i.Minimatch(n.pattern,{noext:!0});if(!t.makeRe())return!1;if(!t.match(e.fsPath))return!1}}return!0})(e):r.languages.match(a,e)>0&&t.isVisible(e),d=e=>e instanceof r.Uri?this.activeTextDocument?.uri.toString()===e.toString():this.activeTextDocument===e;this.diagnosticRequestor=new g(e,t,n),this.backgroundScheduler=new f(this.diagnosticRequestor);const h=e=>{c(e)&&n.interFileDependencies&&!d(e)&&this.backgroundScheduler.add(e)};this.activeTextDocument=r.window.activeTextEditor?.document,r.window.onDidChangeActiveTextEditor((e=>{const t=this.activeTextDocument;this.activeTextDocument=e?.document,void 0!==t&&h(t),void 0!==this.activeTextDocument&&this.backgroundScheduler.remove(this.activeTextDocument)}));const m=e.getFeature(o.DidOpenTextDocumentNotification.method);u.push(m.onNotificationSent((e=>{const t=e.original;c(t)&&this.diagnosticRequestor.pull(t,(()=>{h(t)}))})));const y=new Set;for(const e of r.workspace.textDocuments)c(e)&&(this.diagnosticRequestor.pull(e,(()=>{h(e)})),y.add(e.uri.toString()));if(!0===s.onTabs)for(const e of t.getTabResources())!y.has(e.toString())&&c(e)&&this.diagnosticRequestor.pull(e,(()=>{h(e)}));if(t.onOpen((e=>{for(const t of e)c(t)&&!this.diagnosticRequestor.knows(p.document,t)&&this.diagnosticRequestor.pull(t,(()=>{h(t)}))})),!0===s.onChange){const t=e.getFeature(o.DidChangeTextDocumentNotification.method);u.push(t.onNotificationSent((async e=>{const t=e.original.document;(void 0===s.filter||!s.filter(t,l.onType))&&this.diagnosticRequestor.knows(p.document,t)&&e.original.contentChanges.length>0&&this.diagnosticRequestor.pull(t,(()=>{this.backgroundScheduler.trigger()}))})))}if(!0===s.onSave){const t=e.getFeature(o.DidSaveTextDocumentNotification.method);u.push(t.onNotificationSent((e=>{const t=e.original;void 0!==s.filter&&s.filter(t,l.onSave)||!this.diagnosticRequestor.knows(p.document,t)||this.diagnosticRequestor.pull(e.original,(()=>{this.backgroundScheduler.trigger()}))})))}const D=e.getFeature(o.DidCloseTextDocumentNotification.method);u.push(D.onNotificationSent((e=>{this.cleanUpDocument(e.original)}))),t.onClose((e=>{for(const t of e)this.cleanUpDocument(t)})),this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event((()=>{for(const e of r.workspace.textDocuments)c(e)&&this.diagnosticRequestor.pull(e)})),!0===n.workspaceDiagnostics&&"da348dc5-c30a-4515-9d98-31ff3be38d14"!==n.identifier&&this.diagnosticRequestor.pullWorkspace(),this.disposable=r.Disposable.from(...u,this.backgroundScheduler,this.diagnosticRequestor)}get onDidChangeDiagnosticsEmitter(){return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter}get diagnostics(){return this.diagnosticRequestor.provider}cleanUpDocument(e){this.diagnosticRequestor.knows(p.document,e)&&(this.diagnosticRequestor.forgetDocument(e),this.backgroundScheduler.remove(e))}}class D extends a.TextDocumentLanguageFeature{constructor(e){super(e,o.DocumentDiagnosticRequest.type)}fillClientCapabilities(e){let t=u(u(e,"textDocument"),"diagnostic");t.dynamicRegistration=!0,t.relatedDocumentSupport=!1,u(u(e,"workspace"),"diagnostics").refreshSupport=!0}initialize(e,t){this._client.onRequest(o.DiagnosticRefreshRequest.type,(async()=>{for(const e of this.getAllProviders())e.onDidChangeDiagnosticsEmitter.fire()}));let[n,i]=this.getRegistration(t,e.diagnosticProvider);n&&i&&this.register({id:n,registerOptions:i})}dispose(){void 0!==this.tabs&&(this.tabs.dispose(),this.tabs=void 0),super.dispose()}registerLanguageProvider(e){void 0===this.tabs&&(this.tabs=new h);const t=new y(this._client,this.tabs,e);return[t.disposable,t]}}t.DiagnosticFeature=D},9959:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentHighlightFeature=void 0;const i=n(9496),r=n(273),o=n(8909),s=n(1980);class a extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.DocumentHighlightRequest.type)}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.documentHighlightProvider);n&&this.register({id:s.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,n={provideDocumentHighlights:(e,t,n)=>{const i=this._client,o=(e,t,n)=>i.sendRequest(r.DocumentHighlightRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(e,t),n).then((e=>n.isCancellationRequested?null:i.protocol2CodeConverter.asDocumentHighlights(e,n)),(e=>i.handleFailedRequest(r.DocumentHighlightRequest.type,n,e,null))),s=i.middleware;return s.provideDocumentHighlights?s.provideDocumentHighlights(e,t,n,o):o(e,t,n)}};return[i.languages.registerDocumentHighlightProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n),n]}}t.DocumentHighlightFeature=a},3471:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentLinkFeature=void 0;const i=n(9496),r=n(273),o=n(8909),s=n(1980);class a extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.DocumentLinkRequest.type)}fillClientCapabilities(e){const t=(0,o.ensure)((0,o.ensure)(e,"textDocument"),"documentLink");t.dynamicRegistration=!0,t.tooltipSupport=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.documentLinkProvider);n&&this.register({id:s.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,n={provideDocumentLinks:(e,t)=>{const n=this._client,i=(e,t)=>n.sendRequest(r.DocumentLinkRequest.type,n.code2ProtocolConverter.asDocumentLinkParams(e),t).then((e=>t.isCancellationRequested?null:n.protocol2CodeConverter.asDocumentLinks(e,t)),(e=>n.handleFailedRequest(r.DocumentLinkRequest.type,t,e,null))),o=n.middleware;return o.provideDocumentLinks?o.provideDocumentLinks(e,t,i):i(e,t)},resolveDocumentLink:e.resolveProvider?(e,t)=>{const n=this._client;let i=(e,t)=>n.sendRequest(r.DocumentLinkResolveRequest.type,n.code2ProtocolConverter.asDocumentLink(e),t).then((i=>t.isCancellationRequested?e:n.protocol2CodeConverter.asDocumentLink(i)),(i=>n.handleFailedRequest(r.DocumentLinkResolveRequest.type,t,i,e)));const o=n.middleware;return o.resolveDocumentLink?o.resolveDocumentLink(e,t,i):i(e,t)}:void 0};return[i.languages.registerDocumentLinkProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n),n]}}t.DocumentLinkFeature=a},2483:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentSymbolFeature=t.SupportedSymbolTags=t.SupportedSymbolKinds=void 0;const i=n(9496),r=n(273),o=n(8909),s=n(1980);t.SupportedSymbolKinds=[r.SymbolKind.File,r.SymbolKind.Module,r.SymbolKind.Namespace,r.SymbolKind.Package,r.SymbolKind.Class,r.SymbolKind.Method,r.SymbolKind.Property,r.SymbolKind.Field,r.SymbolKind.Constructor,r.SymbolKind.Enum,r.SymbolKind.Interface,r.SymbolKind.Function,r.SymbolKind.Variable,r.SymbolKind.Constant,r.SymbolKind.String,r.SymbolKind.Number,r.SymbolKind.Boolean,r.SymbolKind.Array,r.SymbolKind.Object,r.SymbolKind.Key,r.SymbolKind.Null,r.SymbolKind.EnumMember,r.SymbolKind.Struct,r.SymbolKind.Event,r.SymbolKind.Operator,r.SymbolKind.TypeParameter],t.SupportedSymbolTags=[r.SymbolTag.Deprecated];class a extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.DocumentSymbolRequest.type)}fillClientCapabilities(e){let n=(0,o.ensure)((0,o.ensure)(e,"textDocument"),"documentSymbol");n.dynamicRegistration=!0,n.symbolKind={valueSet:t.SupportedSymbolKinds},n.hierarchicalDocumentSymbolSupport=!0,n.tagSupport={valueSet:t.SupportedSymbolTags},n.labelSupport=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.documentSymbolProvider);n&&this.register({id:s.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,n={provideDocumentSymbols:(e,t)=>{const n=this._client,i=(e,t)=>n.sendRequest(r.DocumentSymbolRequest.type,n.code2ProtocolConverter.asDocumentSymbolParams(e),t).then((async e=>{if(t.isCancellationRequested||null==e)return null;if(0===e.length)return[];{const i=e[0];return r.DocumentSymbol.is(i)?await n.protocol2CodeConverter.asDocumentSymbols(e,t):await n.protocol2CodeConverter.asSymbolInformations(e,t)}}),(e=>n.handleFailedRequest(r.DocumentSymbolRequest.type,t,e,null))),o=n.middleware;return o.provideDocumentSymbols?o.provideDocumentSymbols(e,t,i):i(e,t)}},o=void 0!==e.label?{label:e.label}:void 0;return[i.languages.registerDocumentSymbolProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n,o),n]}}t.DocumentSymbolFeature=a},4849:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExecuteCommandFeature=void 0;const i=n(9496),r=n(273),o=n(1980),s=n(8909);t.ExecuteCommandFeature=class{constructor(e){this._client=e,this._commands=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._commands.size>0}}get registrationType(){return r.ExecuteCommandRequest.type}fillClientCapabilities(e){(0,s.ensure)((0,s.ensure)(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){e.executeCommandProvider&&this.register({id:o.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e){const t=this._client,n=t.middleware,o=(e,n)=>{let i={command:e,arguments:n};return t.sendRequest(r.ExecuteCommandRequest.type,i).then(void 0,(e=>t.handleFailedRequest(r.ExecuteCommandRequest.type,void 0,e,void 0)))};if(e.registerOptions.commands){const t=[];for(const r of e.registerOptions.commands)t.push(i.commands.registerCommand(r,((...e)=>n.executeCommand?n.executeCommand(r,e,o):o(r,e))));this._commands.set(e.id,t)}}unregister(e){let t=this._commands.get(e);t&&t.forEach((e=>e.dispose()))}dispose(){this._commands.forEach((e=>{e.forEach((e=>e.dispose()))})),this._commands.clear()}}},8909:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceFeature=t.TextDocumentLanguageFeature=t.TextDocumentEventFeature=t.DynamicDocumentFeature=t.DynamicFeature=t.StaticFeature=t.ensure=t.LSPCancellationError=void 0;const i=n(9496),r=n(273),o=n(9763),s=n(1980);class a extends i.CancellationError{constructor(e){super(),this.data=e}}t.LSPCancellationError=a,t.ensure=function(e,t){return void 0===e[t]&&(e[t]={}),e[t]},(t.StaticFeature||(t.StaticFeature={})).is=function(e){const t=e;return null!=t&&o.func(t.fillClientCapabilities)&&o.func(t.initialize)&&o.func(t.getState)&&o.func(t.dispose)&&(void 0===t.fillInitializeParams||o.func(t.fillInitializeParams))},(t.DynamicFeature||(t.DynamicFeature={})).is=function(e){const t=e;return null!=t&&o.func(t.fillClientCapabilities)&&o.func(t.initialize)&&o.func(t.getState)&&o.func(t.dispose)&&(void 0===t.fillInitializeParams||o.func(t.fillInitializeParams))&&o.func(t.register)&&o.func(t.unregister)&&void 0!==t.registrationType};class u{constructor(e){this._client=e}getState(){const e=this.getDocumentSelectors();let t=0;for(const n of e){t++;for(const e of i.workspace.textDocuments)if(i.languages.match(n,e)>0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}const n=t>0;return{kind:"document",id:this.registrationType.method,registrations:n,matches:!1}}}t.DynamicDocumentFeature=u,t.TextDocumentEventFeature=class extends u{constructor(e,t,n,r,o,s,a){super(e),this._event=t,this._type=n,this._middleware=r,this._createParams=o,this._textDocument=s,this._selectorFilter=a,this._selectors=new Map,this._onNotificationSent=new i.EventEmitter}static textDocumentFilter(e,t){for(const n of e)if(i.languages.match(n,t)>0)return!0;return!1}getStateInfo(){return[this._selectors.values(),!1]}getDocumentSelectors(){return this._selectors.values()}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=this._event((e=>{this.callback(e).catch((e=>{this._client.error(`Sending document notification ${this._type.method} failed.`,e)}))}))),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}async callback(e){const t=async e=>{const t=this._createParams(e);await this._client.sendNotification(this._type,t).catch(),this.notificationSent(e,this._type,t)};if(this.matches(e)){const n=this._middleware();return n?n(e,(e=>t(e))):t(e)}}matches(e){return!this._client.hasDedicatedTextSynchronizationFeature(this._textDocument(e))&&(!this._selectorFilter||this._selectorFilter(this._selectors.values(),e))}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(e,t,n){this._onNotificationSent.fire({original:e,type:t,params:n})}unregister(e){this._selectors.delete(e),0===this._selectors.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._onNotificationSent.dispose(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(e){for(const t of this._selectors.values())if(i.languages.match(t,e)>0)return{send:e=>this.callback(e)}}},t.TextDocumentLanguageFeature=class extends u{constructor(e,t){super(e),this._registrationType=t,this._registrations=new Map}*getDocumentSelectors(){for(const e of this._registrations.values()){const t=e.data.registerOptions.documentSelector;null!==t&&(yield this._client.protocol2CodeConverter.asDocumentSelector(t))}}get registrationType(){return this._registrationType}register(e){if(!e.registerOptions.documentSelector)return;let t=this.registerLanguageProvider(e.registerOptions,e.id);this._registrations.set(e.id,{disposable:t[0],data:e,provider:t[1]})}unregister(e){let t=this._registrations.get(e);void 0!==t&&t.disposable.dispose()}dispose(){this._registrations.forEach((e=>{e.disposable.dispose()})),this._registrations.clear()}getRegistration(e,t){if(!t)return[void 0,void 0];if(r.TextDocumentRegistrationOptions.is(t)){const n=r.StaticRegistrationOptions.hasId(t)?t.id:s.generateUuid(),i=t.documentSelector||e;if(i)return[n,Object.assign({},t,{documentSelector:i})]}else if(o.boolean(t)&&!0===t||r.WorkDoneProgressOptions.is(t)){if(!e)return[void 0,void 0];let n=o.boolean(t)&&!0===t?{documentSelector:e}:Object.assign({},t,{documentSelector:e});return[s.generateUuid(),n]}return[void 0,void 0]}getRegistrationOptions(e,t){if(e&&t)return o.boolean(t)&&!0===t?{documentSelector:e}:Object.assign({},t,{documentSelector:e})}getProvider(e){for(const t of this._registrations.values()){let n=t.data.registerOptions.documentSelector;if(null!==n&&i.languages.match(this._client.protocol2CodeConverter.asDocumentSelector(n),e)>0)return t.provider}}getAllProviders(){const e=[];for(const t of this._registrations.values())e.push(t.provider);return e}},t.WorkspaceFeature=class{constructor(e,t){this._client=e,this._registrationType=t,this._registrations=new Map}getState(){const e=this._registrations.size>0;return{kind:"workspace",id:this._registrationType.method,registrations:e}}get registrationType(){return this._registrationType}register(e){const t=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:t[0],provider:t[1]})}unregister(e){let t=this._registrations.get(e);void 0!==t&&t.disposable.dispose()}dispose(){this._registrations.forEach((e=>{e.disposable.dispose()})),this._registrations.clear()}getProviders(){const e=[];for(const t of this._registrations.values())e.push(t.provider);return e}}},7606:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WillDeleteFilesFeature=t.WillRenameFilesFeature=t.WillCreateFilesFeature=t.DidDeleteFilesFeature=t.DidRenameFilesFeature=t.DidCreateFilesFeature=void 0;const i=n(9496),r=n(1171),o=n(273),s=n(1980);function a(e,t){return void 0===e[t]&&(e[t]={}),e[t]}function u(e,t,n){e[t]=n}class c{constructor(e,t,n,i,r){this._client=e,this._event=t,this._registrationType=n,this._clientCapability=i,this._serverCapability=r,this._filters=new Map}getState(){return{kind:"workspace",id:this._registrationType.method,registrations:this._filters.size>0}}filterSize(){return this._filters.size}get registrationType(){return this._registrationType}fillClientCapabilities(e){const t=a(a(e,"workspace"),"fileOperations");u(t,"dynamicRegistration",!0),u(t,this._clientCapability,!0)}initialize(e){const t=e.workspace?.fileOperations,n=void 0!==t?t[this._serverCapability]:void 0;if(void 0!==n?.filters)try{this.register({id:s.generateUuid(),registerOptions:{filters:n.filters}})}catch(e){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${e}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));const t=e.registerOptions.filters.map((e=>{const t=new r.Minimatch(e.pattern.glob,c.asMinimatchOptions(e.pattern.options));if(!t.makeRe())throw new Error(`Invalid pattern ${e.pattern.glob}!`);return{scheme:e.scheme,matcher:t,kind:e.pattern.matches}}));this._filters.set(e.id,t)}unregister(e){this._filters.delete(e),0===this._filters.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._filters.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getFileType(e){return c.getFileType(e)}async filter(e,t){const n=await Promise.all(e.files.map((async e=>{const n=t(e),r=n.fsPath.replace(/\\/g,"/");for(const e of this._filters.values())for(const t of e)if(void 0===t.scheme||t.scheme===n.scheme)if(t.matcher.match(r)){if(void 0===t.kind)return!0;const e=await this.getFileType(n);if(void 0===e)return this._client.error(`Failed to determine file type for ${n.toString()}.`),!0;if(e===i.FileType.File&&t.kind===o.FileOperationPatternKind.file||e===i.FileType.Directory&&t.kind===o.FileOperationPatternKind.folder)return!0}else if(t.kind===o.FileOperationPatternKind.folder&&await c.getFileType(n)===i.FileType.Directory&&t.matcher.match(`${r}/`))return!0;return!1}))),r=e.files.filter(((e,t)=>n[t]));return{...e,files:r}}static async getFileType(e){try{return(await i.workspace.fs.stat(e)).type}catch(e){return}}static asMinimatchOptions(e){if(void 0!==e)return!0===e.ignoreCase?{nocase:!0}:void 0}}class l extends c{constructor(e,t,n,i,r,o,s){super(e,t,n,i,r),this._notificationType=n,this._accessUri=o,this._createParams=s}async send(e){const t=await this.filter(e,this._accessUri);if(t.files.length){const e=async e=>this._client.sendNotification(this._notificationType,this._createParams(e));return this.doSend(t,e)}}}class d extends l{constructor(){super(...arguments),this._fsPathFileTypes=new Map}async getFileType(e){const t=e.fsPath;if(this._fsPathFileTypes.has(t))return this._fsPathFileTypes.get(t);const n=await c.getFileType(e);return n&&this._fsPathFileTypes.set(t,n),n}async cacheFileTypes(e,t){await this.filter(e,t)}clearFileTypeCache(){this._fsPathFileTypes.clear()}unregister(e){super.unregister(e),0===this.filterSize()&&this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}dispose(){super.dispose(),this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}}t.DidCreateFilesFeature=class extends l{constructor(e){super(e,i.workspace.onDidCreateFiles,o.DidCreateFilesNotification.type,"didCreate","didCreate",(e=>e),e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,t){const n=this._client.middleware.workspace;return n?.didCreateFiles?n.didCreateFiles(e,t):t(e)}},t.DidRenameFilesFeature=class extends d{constructor(e){super(e,i.workspace.onDidRenameFiles,o.DidRenameFilesNotification.type,"didRename","didRename",(e=>e.oldUri),e.code2ProtocolConverter.asDidRenameFilesParams)}register(e){this._willListener||(this._willListener=i.workspace.onWillRenameFiles(this.willRename,this)),super.register(e)}willRename(e){e.waitUntil(this.cacheFileTypes(e,(e=>e.oldUri)))}doSend(e,t){this.clearFileTypeCache();const n=this._client.middleware.workspace;return n?.didRenameFiles?n.didRenameFiles(e,t):t(e)}},t.DidDeleteFilesFeature=class extends d{constructor(e){super(e,i.workspace.onDidDeleteFiles,o.DidDeleteFilesNotification.type,"didDelete","didDelete",(e=>e),e.code2ProtocolConverter.asDidDeleteFilesParams)}register(e){this._willListener||(this._willListener=i.workspace.onWillDeleteFiles(this.willDelete,this)),super.register(e)}willDelete(e){e.waitUntil(this.cacheFileTypes(e,(e=>e)))}doSend(e,t){this.clearFileTypeCache();const n=this._client.middleware.workspace;return n?.didDeleteFiles?n.didDeleteFiles(e,t):t(e)}};class p extends c{constructor(e,t,n,i,r,o,s){super(e,t,n,i,r),this._requestType=n,this._accessUri=o,this._createParams=s}async send(e){const t=this.waitUntil(e);e.waitUntil(t)}async waitUntil(e){const t=await this.filter(e,this._accessUri);if(t.files.length){const e=e=>this._client.sendRequest(this._requestType,this._createParams(e),e.token).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(t,e)}}}t.WillCreateFilesFeature=class extends p{constructor(e){super(e,i.workspace.onWillCreateFiles,o.WillCreateFilesRequest.type,"willCreate","willCreate",(e=>e),e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,t){const n=this._client.middleware.workspace;return n?.willCreateFiles?n.willCreateFiles(e,t):t(e)}},t.WillRenameFilesFeature=class extends p{constructor(e){super(e,i.workspace.onWillRenameFiles,o.WillRenameFilesRequest.type,"willRename","willRename",(e=>e.oldUri),e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,t){const n=this._client.middleware.workspace;return n?.willRenameFiles?n.willRenameFiles(e,t):t(e)}},t.WillDeleteFilesFeature=class extends p{constructor(e){super(e,i.workspace.onWillDeleteFiles,o.WillDeleteFilesRequest.type,"willDelete","willDelete",(e=>e),e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,t){const n=this._client.middleware.workspace;return n?.willDeleteFiles?n.willDeleteFiles(e,t):t(e)}}},5338:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileSystemWatcherFeature=void 0;const i=n(9496),r=n(273),o=n(8909);t.FileSystemWatcherFeature=class{constructor(e,t){this._client=e,this._notifyFileEvent=t,this._watchers=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._watchers.size>0}}get registrationType(){return r.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0,(0,o.ensure)((0,o.ensure)(e,"workspace"),"didChangeWatchedFiles").relativePatternSupport=!0}initialize(e,t){}register(e){if(!Array.isArray(e.registerOptions.watchers))return;const t=[];for(const n of e.registerOptions.watchers){const e=this._client.protocol2CodeConverter.asGlobPattern(n.globPattern);if(void 0===e)continue;let o=!0,s=!0,a=!0;void 0!==n.kind&&null!==n.kind&&(o=0!=(n.kind&r.WatchKind.Create),s=0!=(n.kind&r.WatchKind.Change),a=0!=(n.kind&r.WatchKind.Delete));const u=i.workspace.createFileSystemWatcher(e,!o,!s,!a);this.hookListeners(u,o,s,a,t),t.push(u)}this._watchers.set(e.id,t)}registerRaw(e,t){let n=[];for(let e of t)this.hookListeners(e,!0,!0,!0,n);this._watchers.set(e,n)}hookListeners(e,t,n,i,o){t&&e.onDidCreate((e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:r.FileChangeType.Created})),null,o),n&&e.onDidChange((e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:r.FileChangeType.Changed})),null,o),i&&e.onDidDelete((e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:r.FileChangeType.Deleted})),null,o)}unregister(e){let t=this._watchers.get(e);if(t)for(let e of t)e.dispose()}dispose(){this._watchers.forEach((e=>{for(let t of e)t.dispose()})),this._watchers.clear()}}},6454:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FoldingRangeFeature=void 0;const i=n(9496),r=n(273),o=n(8909);class s extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.FoldingRangeRequest.type)}fillClientCapabilities(e){let t=(0,o.ensure)((0,o.ensure)(e,"textDocument"),"foldingRange");t.dynamicRegistration=!0,t.rangeLimit=5e3,t.lineFoldingOnly=!0,t.foldingRangeKind={valueSet:[r.FoldingRangeKind.Comment,r.FoldingRangeKind.Imports,r.FoldingRangeKind.Region]},t.foldingRange={collapsedText:!1}}initialize(e,t){let[n,i]=this.getRegistration(t,e.foldingRangeProvider);n&&i&&this.register({id:n,registerOptions:i})}registerLanguageProvider(e){const t=e.documentSelector,n={provideFoldingRanges:(e,t,n)=>{const i=this._client,o=(e,t,n)=>{const o={textDocument:i.code2ProtocolConverter.asTextDocumentIdentifier(e)};return i.sendRequest(r.FoldingRangeRequest.type,o,n).then((e=>n.isCancellationRequested?null:i.protocol2CodeConverter.asFoldingRanges(e,n)),(e=>i.handleFailedRequest(r.FoldingRangeRequest.type,n,e,null)))},s=i.middleware;return s.provideFoldingRanges?s.provideFoldingRanges(e,t,n,o):o(e,0,n)}};return[i.languages.registerFoldingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n),n]}}t.FoldingRangeFeature=s},6426:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentOnTypeFormattingFeature=t.DocumentRangeFormattingFeature=t.DocumentFormattingFeature=void 0;const i=n(9496),r=n(273),o=n(1980),s=n(8909);var a;!function(e){e.fromConfiguration=function(e){const t=i.workspace.getConfiguration("files",e);return{trimTrailingWhitespace:t.get("trimTrailingWhitespace"),trimFinalNewlines:t.get("trimFinalNewlines"),insertFinalNewline:t.get("insertFinalNewline")}}}(a||(a={}));class u extends s.TextDocumentLanguageFeature{constructor(e){super(e,r.DocumentFormattingRequest.type)}fillClientCapabilities(e){(0,s.ensure)((0,s.ensure)(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.documentFormattingProvider);n&&this.register({id:o.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,n={provideDocumentFormattingEdits:(e,t,n)=>{const i=this._client,o=(e,t,n)=>{const o={textDocument:i.code2ProtocolConverter.asTextDocumentIdentifier(e),options:i.code2ProtocolConverter.asFormattingOptions(t,a.fromConfiguration(e))};return i.sendRequest(r.DocumentFormattingRequest.type,o,n).then((e=>n.isCancellationRequested?null:i.protocol2CodeConverter.asTextEdits(e,n)),(e=>i.handleFailedRequest(r.DocumentFormattingRequest.type,n,e,null)))},s=i.middleware;return s.provideDocumentFormattingEdits?s.provideDocumentFormattingEdits(e,t,n,o):o(e,t,n)}};return[i.languages.registerDocumentFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n),n]}}t.DocumentFormattingFeature=u;class c extends s.TextDocumentLanguageFeature{constructor(e){super(e,r.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){(0,s.ensure)((0,s.ensure)(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.documentRangeFormattingProvider);n&&this.register({id:o.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,n={provideDocumentRangeFormattingEdits:(e,t,n,i)=>{const o=this._client,s=(e,t,n,i)=>{const s={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(e),range:o.code2ProtocolConverter.asRange(t),options:o.code2ProtocolConverter.asFormattingOptions(n,a.fromConfiguration(e))};return o.sendRequest(r.DocumentRangeFormattingRequest.type,s,i).then((e=>i.isCancellationRequested?null:o.protocol2CodeConverter.asTextEdits(e,i)),(e=>o.handleFailedRequest(r.DocumentRangeFormattingRequest.type,i,e,null)))},u=o.middleware;return u.provideDocumentRangeFormattingEdits?u.provideDocumentRangeFormattingEdits(e,t,n,i,s):s(e,t,n,i)}};return[i.languages.registerDocumentRangeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n),n]}}t.DocumentRangeFormattingFeature=c;class l extends s.TextDocumentLanguageFeature{constructor(e){super(e,r.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){(0,s.ensure)((0,s.ensure)(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.documentOnTypeFormattingProvider);n&&this.register({id:o.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,n={provideOnTypeFormattingEdits:(e,t,n,i,o)=>{const s=this._client,u=(e,t,n,i,o)=>{let u={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(e),position:s.code2ProtocolConverter.asPosition(t),ch:n,options:s.code2ProtocolConverter.asFormattingOptions(i,a.fromConfiguration(e))};return s.sendRequest(r.DocumentOnTypeFormattingRequest.type,u,o).then((e=>o.isCancellationRequested?null:s.protocol2CodeConverter.asTextEdits(e,o)),(e=>s.handleFailedRequest(r.DocumentOnTypeFormattingRequest.type,o,e,null)))},c=s.middleware;return c.provideOnTypeFormattingEdits?c.provideOnTypeFormattingEdits(e,t,n,i,o,u):u(e,t,n,i,o)}},o=e.moreTriggerCharacter||[];return[i.languages.registerOnTypeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n,e.firstTriggerCharacter,...o),n]}}t.DocumentOnTypeFormattingFeature=l},6782:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HoverFeature=void 0;const i=n(9496),r=n(273),o=n(8909),s=n(1980);class a extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.HoverRequest.type)}fillClientCapabilities(e){const t=(0,o.ensure)((0,o.ensure)(e,"textDocument"),"hover");t.dynamicRegistration=!0,t.contentFormat=[r.MarkupKind.Markdown,r.MarkupKind.PlainText]}initialize(e,t){const n=this.getRegistrationOptions(t,e.hoverProvider);n&&this.register({id:s.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,n={provideHover:(e,t,n)=>{const i=this._client,o=(e,t,n)=>i.sendRequest(r.HoverRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(e,t),n).then((e=>n.isCancellationRequested?null:i.protocol2CodeConverter.asHover(e)),(e=>i.handleFailedRequest(r.HoverRequest.type,n,e,null))),s=i.middleware;return s.provideHover?s.provideHover(e,t,n,o):o(e,t,n)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return i.languages.registerHoverProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.HoverFeature=a},9889:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImplementationFeature=void 0;const i=n(9496),r=n(273),o=n(8909);class s extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.ImplementationRequest.type)}fillClientCapabilities(e){let t=(0,o.ensure)((0,o.ensure)(e,"textDocument"),"implementation");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[n,i]=this.getRegistration(t,e.implementationProvider);n&&i&&this.register({id:n,registerOptions:i})}registerLanguageProvider(e){const t=e.documentSelector,n={provideImplementation:(e,t,n)=>{const i=this._client,o=(e,t,n)=>i.sendRequest(r.ImplementationRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(e,t),n).then((e=>n.isCancellationRequested?null:i.protocol2CodeConverter.asDefinitionResult(e,n)),(e=>i.handleFailedRequest(r.ImplementationRequest.type,n,e,null))),s=i.middleware;return s.provideImplementation?s.provideImplementation(e,t,n,o):o(e,t,n)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return i.languages.registerImplementationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.ImplementationFeature=s},6190:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InlayHintsFeature=void 0;const i=n(9496),r=n(273),o=n(8909);class s extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.InlayHintRequest.type)}fillClientCapabilities(e){const t=(0,o.ensure)((0,o.ensure)(e,"textDocument"),"inlayHint");t.dynamicRegistration=!0,t.resolveSupport={properties:["tooltip","textEdits","label.tooltip","label.location","label.command"]},(0,o.ensure)((0,o.ensure)(e,"workspace"),"inlayHint").refreshSupport=!0}initialize(e,t){this._client.onRequest(r.InlayHintRefreshRequest.type,(async()=>{for(const e of this.getAllProviders())e.onDidChangeInlayHints.fire()}));const[n,i]=this.getRegistration(t,e.inlayHintProvider);n&&i&&this.register({id:n,registerOptions:i})}registerLanguageProvider(e){const t=e.documentSelector,n=new i.EventEmitter,o={onDidChangeInlayHints:n.event,provideInlayHints:(e,t,n)=>{const i=this._client,o=async(e,t,n)=>{const o={textDocument:i.code2ProtocolConverter.asTextDocumentIdentifier(e),range:i.code2ProtocolConverter.asRange(t)};try{const e=await i.sendRequest(r.InlayHintRequest.type,o,n);return n.isCancellationRequested?null:i.protocol2CodeConverter.asInlayHints(e,n)}catch(e){return i.handleFailedRequest(r.InlayHintRequest.type,n,e,null)}},s=i.middleware;return s.provideInlayHints?s.provideInlayHints(e,t,n,o):o(e,t,n)}};return o.resolveInlayHint=!0===e.resolveProvider?(e,t)=>{const n=this._client,i=async(e,t)=>{try{const i=await n.sendRequest(r.InlayHintResolveRequest.type,n.code2ProtocolConverter.asInlayHint(e),t);if(t.isCancellationRequested)return null;const o=n.protocol2CodeConverter.asInlayHint(i,t);return t.isCancellationRequested?null:o}catch(e){return n.handleFailedRequest(r.InlayHintResolveRequest.type,t,e,null)}},o=n.middleware;return o.resolveInlayHint?o.resolveInlayHint(e,t,i):i(e,t)}:void 0,[this.registerProvider(t,o),{provider:o,onDidChangeInlayHints:n}]}registerProvider(e,t){return i.languages.registerInlayHintsProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.InlayHintsFeature=s},5098:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InlineValueFeature=void 0;const i=n(9496),r=n(273),o=n(8909);class s extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.InlineValueRequest.type)}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"inlineValue").dynamicRegistration=!0,(0,o.ensure)((0,o.ensure)(e,"workspace"),"inlineValue").refreshSupport=!0}initialize(e,t){this._client.onRequest(r.InlineValueRefreshRequest.type,(async()=>{for(const e of this.getAllProviders())e.onDidChangeInlineValues.fire()}));const[n,i]=this.getRegistration(t,e.inlineValueProvider);n&&i&&this.register({id:n,registerOptions:i})}registerLanguageProvider(e){const t=e.documentSelector,n=new i.EventEmitter,o={onDidChangeInlineValues:n.event,provideInlineValues:(e,t,n,i)=>{const o=this._client,s=(e,t,n,i)=>{const s={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(e),range:o.code2ProtocolConverter.asRange(t),context:o.code2ProtocolConverter.asInlineValueContext(n)};return o.sendRequest(r.InlineValueRequest.type,s,i).then((e=>i.isCancellationRequested?null:o.protocol2CodeConverter.asInlineValues(e,i)),(e=>o.handleFailedRequest(r.InlineValueRequest.type,i,e,null)))},a=o.middleware;return a.provideInlineValues?a.provideInlineValues(e,t,n,i,s):s(e,t,n,i)}};return[this.registerProvider(t,o),{provider:o,onDidChangeInlineValues:n}]}registerProvider(e,t){return i.languages.registerInlineValuesProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.InlineValueFeature=s},3483:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedEditingFeature=void 0;const i=n(9496),r=n(273),o=n(8909);class s extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"linkedEditingRange").dynamicRegistration=!0}initialize(e,t){let[n,i]=this.getRegistration(t,e.linkedEditingRangeProvider);n&&i&&this.register({id:n,registerOptions:i})}registerLanguageProvider(e){const t=e.documentSelector,n={provideLinkedEditingRanges:(e,t,n)=>{const i=this._client,o=(e,t,n)=>i.sendRequest(r.LinkedEditingRangeRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(e,t),n).then((e=>n.isCancellationRequested?null:i.protocol2CodeConverter.asLinkedEditingRanges(e,n)),(e=>i.handleFailedRequest(r.LinkedEditingRangeRequest.type,n,e,null))),s=i.middleware;return s.provideLinkedEditingRange?s.provideLinkedEditingRange(e,t,n,o):o(e,t,n)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return i.languages.registerLinkedEditingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.LinkedEditingFeature=s},203:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookDocumentSyncFeature=void 0;const i=n(9496),r=n(1171),o=n(273),s=n(1980),a=n(9763);function u(e,t){return void 0===e[t]&&(e[t]={}),e[t]}var c,l,d,p,h;!function(e){let t;!function(t){function n(e,t){return e.map((e=>s(e,t)))}function r(e){return u(new Set,e)}function s(e,t){const n=o.NotebookCell.create(function(e){switch(e){case i.NotebookCellKind.Markup:return o.NotebookCellKind.Markup;case i.NotebookCellKind.Code:return o.NotebookCellKind.Code}}(e.kind),t.asUri(e.document.uri));return Object.keys(e.metadata).length>0&&(n.metadata=r(e.metadata)),void 0!==e.executionSummary&&a.number(e.executionSummary.executionOrder)&&a.boolean(e.executionSummary.success)&&(n.executionSummary={executionOrder:e.executionSummary.executionOrder,success:e.executionSummary.success}),n}function u(e,t){if(e.has(t))throw new Error("Can't deep copy cyclic structures.");if(Array.isArray(t)){const n=[];for(const i of t)if(null!==i&&"object"==typeof i||Array.isArray(i))n.push(u(e,i));else{if(i instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");n.push(i)}return n}{const n=Object.keys(t),i=Object.create(null);for(const r of n){const n=t[r];if(null!==n&&"object"==typeof n||Array.isArray(n))i[r]=u(e,n);else{if(n instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");i[r]=n}}return i}}t.asVersionedNotebookDocumentIdentifier=function(e,t){return{version:e.version,uri:t.asUri(e.uri)}},t.asNotebookDocument=function(e,t,i){const s=o.NotebookDocument.create(i.asUri(e.uri),e.notebookType,e.version,n(t,i));return Object.keys(e.metadata).length>0&&(s.metadata=r(e.metadata)),s},t.asNotebookCells=n,t.asMetadata=r,t.asNotebookCell=s,t.asTextContentChange=function(e,t){const n=t.asChangeTextDocumentParams(e);return{document:n.textDocument,changes:n.contentChanges}},t.asNotebookDocumentChangeEvent=function(t,n){const i=Object.create(null);if(t.metadata&&(i.metadata=e.c2p.asMetadata(t.metadata)),void 0!==t.cells){const r=Object.create(null),o=t.cells;o.structure&&(r.structure={array:{start:o.structure.array.start,deleteCount:o.structure.array.deleteCount,cells:void 0!==o.structure.array.cells?o.structure.array.cells.map((t=>e.c2p.asNotebookCell(t,n))):void 0},didOpen:void 0!==o.structure.didOpen?o.structure.didOpen.map((e=>n.asOpenTextDocumentParams(e.document).textDocument)):void 0,didClose:void 0!==o.structure.didClose?o.structure.didClose.map((e=>n.asCloseTextDocumentParams(e.document).textDocument)):void 0}),void 0!==o.data&&(r.data=o.data.map((t=>e.c2p.asNotebookCell(t,n)))),void 0!==o.textContent&&(r.textContent=o.textContent.map((t=>e.c2p.asTextContentChange(t,n)))),Object.keys(r).length>0&&(i.cells=r)}return i}}(t=e.c2p||(e.c2p={}))}(c||(c={})),function(e){function t(e,t,i=!0){return!(e.kind!==t.kind||e.document.uri.toString()!==t.document.uri.toString()||e.document.languageId!==t.document.languageId||!function(e,t){return e===t||void 0!==e&&void 0!==t&&(e.executionOrder===t.executionOrder&&e.success===t.success&&function(e,t){return e===t||void 0!==e&&void 0!==t&&(e.startTime===t.startTime&&e.endTime===t.endTime)}(e.timing,t.timing))}(e.executionSummary,t.executionSummary))&&(!i||i&&n(e.metadata,t.metadata))}function n(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(typeof e!=typeof t)return!1;if("object"!=typeof e)return!1;const r=Array.isArray(e),o=Array.isArray(t);if(r!==o)return!1;if(r&&o){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1}if(i(e)&&i(t)){const i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;if(i.sort(),r.sort(),!n(i,r))return!1;for(let r=0;r<i.length;r++){const o=i[r];if(!n(e[o],t[o]))return!1}return!0}return!1}function i(e){return null!==e&&"object"==typeof e}e.computeDiff=function(e,n,i){const r=e.length,o=n.length;let s=0;for(;s<o&&s<r&&t(e[s],n[s],i);)s++;if(s<o&&s<r){let a=r-1,u=o-1;for(;a>=0&&u>=0&&t(e[a],n[u],i);)a--,u--;const c=a+1-s,l=s===u+1?void 0:n.slice(s,u+1);return void 0!==l?{start:s,deleteCount:c,cells:l}:{start:s,deleteCount:c}}return s<o?{start:s,deleteCount:0,cells:n.slice(s)}:s<r?{start:s,deleteCount:r-s}:void 0},e.isObjectLiteral=i}(l||(l={})),function(e){e.matchNotebook=function(e,t){if("string"==typeof e)return"*"===e||t.notebookType===e;if(void 0!==e.notebookType&&"*"!==e.notebookType&&t.notebookType!==e.notebookType)return!1;const n=t.uri;if(void 0!==e.scheme&&"*"!==e.scheme&&n.scheme!==e.scheme)return!1;if(void 0!==e.pattern){const t=new r.Minimatch(e.pattern,{noext:!0});if(!t.makeRe())return!1;if(!t.match(n.fsPath))return!1}return!0}}(d||(d={})),function(e){function t(e,t,n,i){return void 0===t&&void 0===n?{notebook:e,language:i}:{notebook:{notebookType:e,scheme:t,pattern:n},language:i}}e.asDocumentSelector=function(e){const n=e.notebookSelector,i=[];for(const e of n){const n=("string"==typeof e.notebook?e.notebook:e.notebook?.notebookType)??"*",r="string"==typeof e.notebook?void 0:e.notebook?.scheme,o="string"==typeof e.notebook?void 0:e.notebook?.pattern;if(void 0!==e.cells)for(const s of e.cells)i.push(t(n,r,o,s.language));else i.push(t(n,r,o,void 0))}return i}}(p||(p={})),function(e){e.create=function(e){return{cells:e,uris:new Set(e.map((e=>e.document.uri.toString())))}}}(h||(h={}));class m{constructor(e,t){this.client=e,this.options=t,this.notebookSyncInfo=new Map,this.notebookDidOpen=new Set,this.disposables=[],this.selector=e.protocol2CodeConverter.asDocumentSelector(p.asDocumentSelector(t)),i.workspace.onDidOpenNotebookDocument((e=>{this.notebookDidOpen.add(e.uri.toString()),this.didOpen(e)}),void 0,this.disposables);for(const e of i.workspace.notebookDocuments)this.notebookDidOpen.add(e.uri.toString()),this.didOpen(e);i.workspace.onDidChangeNotebookDocument((e=>this.didChangeNotebookDocument(e)),void 0,this.disposables),!0===this.options.save&&i.workspace.onDidSaveNotebookDocument((e=>this.didSave(e)),void 0,this.disposables),i.workspace.onDidCloseNotebookDocument((e=>{this.didClose(e),this.notebookDidOpen.delete(e.uri.toString())}),void 0,this.disposables)}getState(){for(const e of i.workspace.notebookDocuments)if(void 0!==this.getMatchingCells(e))return{kind:"document",id:"$internal",registrations:!0,matches:!0};return{kind:"document",id:"$internal",registrations:!0,matches:!1}}get mode(){return"notebook"}handles(e){return i.languages.match(this.selector,e)>0}didOpenNotebookCellTextDocument(e,t){if(0===i.languages.match(this.selector,t.document))return;if(!this.notebookDidOpen.has(e.uri.toString()))return;const n=this.notebookSyncInfo.get(e.uri.toString()),r=this.cellMatches(e,t);if(void 0!==n){const i=n.uris.has(t.document.uri.toString());if(r&&i||!r&&!i)return;if(r){const t=this.getMatchingCells(e);if(void 0!==t){const i=this.asNotebookDocumentChangeEvent(e,void 0,n,t);void 0!==i&&this.doSendChange(i,t).catch((()=>{}))}}}else r&&this.doSendOpen(e,[t]).catch((()=>{}))}didChangeNotebookCellTextDocument(e,t){0!==i.languages.match(this.selector,t.document)&&this.doSendChange({notebook:e,cells:{textContent:[t]}},void 0).catch((()=>{}))}didCloseNotebookCellTextDocument(e,t){const n=this.notebookSyncInfo.get(e.uri.toString());if(void 0===n)return;const i=t.document.uri,r=n.cells.findIndex((e=>e.document.uri.toString()===i.toString()));if(-1!==r)if(0===r&&1===n.cells.length)this.doSendClose(e,n.cells).catch((()=>{}));else{const t=n.cells.slice(),i=t.splice(r,1);this.doSendChange({notebook:e,cells:{structure:{array:{start:r,deleteCount:1},didClose:i}}},t).catch((()=>{}))}}dispose(){for(const e of this.disposables)e.dispose()}didOpen(e,t=this.getMatchingCells(e),n=this.notebookSyncInfo.get(e.uri.toString())){if(void 0!==n)if(void 0!==t){const i=this.asNotebookDocumentChangeEvent(e,void 0,n,t);void 0!==i&&this.doSendChange(i,t).catch((()=>{}))}else this.doSendClose(e,[]).catch((()=>{}));else{if(void 0===t)return;this.doSendOpen(e,t).catch((()=>{}))}}didChangeNotebookDocument(e){const t=e.notebook,n=this.notebookSyncInfo.get(t.uri.toString());if(void 0===n){if(0===e.contentChanges.length)return;const i=this.getMatchingCells(t);if(void 0===i)return;this.didOpen(t,i,n)}else{const i=this.getMatchingCells(t);if(void 0===i)return void this.didClose(t,n);const r=this.asNotebookDocumentChangeEvent(e.notebook,e,n,i);void 0!==r&&this.doSendChange(r,i).catch((()=>{}))}}didSave(e){void 0!==this.notebookSyncInfo.get(e.uri.toString())&&this.doSendSave(e).catch((()=>{}))}didClose(e,t=this.notebookSyncInfo.get(e.uri.toString())){if(void 0===t)return;const n=e.getCells().filter((e=>t.uris.has(e.document.uri.toString())));this.doSendClose(e,n).catch((()=>{}))}async sendDidOpenNotebookDocument(e){const t=this.getMatchingCells(e);if(void 0!==t)return this.doSendOpen(e,t)}async doSendOpen(e,t){const n=async(e,t)=>{const n=c.c2p.asNotebookDocument(e,t,this.client.code2ProtocolConverter),i=t.map((e=>this.client.code2ProtocolConverter.asTextDocumentItem(e.document)));try{await this.client.sendNotification(o.DidOpenNotebookDocumentNotification.type,{notebookDocument:n,cellTextDocuments:i})}catch(e){throw this.client.error("Sending DidOpenNotebookDocumentNotification failed",e),e}},i=this.client.middleware?.notebooks;return this.notebookSyncInfo.set(e.uri.toString(),h.create(t)),void 0!==i?.didOpen?i.didOpen(e,t,n):n(e,t)}async sendDidChangeNotebookDocument(e){return this.doSendChange(e,void 0)}async doSendChange(e,t=this.getMatchingCells(e.notebook)){const n=async e=>{try{await this.client.sendNotification(o.DidChangeNotebookDocumentNotification.type,{notebookDocument:c.c2p.asVersionedNotebookDocumentIdentifier(e.notebook,this.client.code2ProtocolConverter),change:c.c2p.asNotebookDocumentChangeEvent(e,this.client.code2ProtocolConverter)})}catch(e){throw this.client.error("Sending DidChangeNotebookDocumentNotification failed",e),e}},i=this.client.middleware?.notebooks;return void 0!==e.cells?.structure&&this.notebookSyncInfo.set(e.notebook.uri.toString(),h.create(t??[])),void 0!==i?.didChange?i?.didChange(e,n):n(e)}async sendDidSaveNotebookDocument(e){return this.doSendSave(e)}async doSendSave(e){const t=async e=>{try{await this.client.sendNotification(o.DidSaveNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(e.uri)}})}catch(e){throw this.client.error("Sending DidSaveNotebookDocumentNotification failed",e),e}},n=this.client.middleware?.notebooks;return void 0!==n?.didSave?n.didSave(e,t):t(e)}async sendDidCloseNotebookDocument(e){return this.doSendClose(e,this.getMatchingCells(e)??[])}async doSendClose(e,t){const n=async(e,t)=>{try{await this.client.sendNotification(o.DidCloseNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(e.uri)},cellTextDocuments:t.map((e=>this.client.code2ProtocolConverter.asTextDocumentIdentifier(e.document)))})}catch(e){throw this.client.error("Sending DidCloseNotebookDocumentNotification failed",e),e}},i=this.client.middleware?.notebooks;return this.notebookSyncInfo.delete(e.uri.toString()),void 0!==i?.didClose?i.didClose(e,t,n):n(e,t)}asNotebookDocumentChangeEvent(e,t,n,i){if(void 0!==t&&t.notebook!==e)throw new Error("Notebook must be identical");const r={notebook:e};let o;if(void 0!==t?.metadata&&(r.metadata=c.c2p.asMetadata(t.metadata)),void 0!==t?.cellChanges&&t.cellChanges.length>0){const e=[];o=new Set(i.map((e=>e.document.uri.toString())));for(const n of t.cellChanges)!o.has(n.cell.document.uri.toString())||void 0===n.executionSummary&&void 0===n.metadata||e.push(n.cell);e.length>0&&(r.cells=r.cells??{},r.cells.data=e)}if((void 0!==t?.contentChanges&&t.contentChanges.length>0||void 0===t)&&void 0!==n&&void 0!==i){const e=n.cells,t=i,o=l.computeDiff(e,t,!1);let s,a;if(void 0!==o){s=void 0===o.cells?new Map:new Map(o.cells.map((e=>[e.document.uri.toString(),e]))),a=0===o.deleteCount?new Map:new Map(e.slice(o.start,o.start+o.deleteCount).map((e=>[e.document.uri.toString(),e])));for(const e of Array.from(a.keys()))s.has(e)&&(a.delete(e),s.delete(e));r.cells=r.cells??{};const t=[],n=[];if(s.size>0||a.size>0){for(const e of s.values())t.push(e);for(const e of a.values())n.push(e)}r.cells.structure={array:o,didOpen:t,didClose:n}}}return Object.keys(r).length>1?r:void 0}getMatchingCells(e,t=e.getCells()){if(void 0!==this.options.notebookSelector)for(const n of this.options.notebookSelector)if(void 0===n.notebook||d.matchNotebook(n.notebook,e)){const i=this.filterCells(e,t,n.cells);return 0===i.length?void 0:i}}cellMatches(e,t){const n=this.getMatchingCells(e,[t]);return void 0!==n&&n[0]===t}filterCells(e,t,n){const i=void 0!==n?t.filter((e=>{const t=e.document.languageId;return n.some((e=>"*"===e.language||t===e.language))})):t;return"function"==typeof this.client.clientOptions.notebookDocumentOptions?.filterCells?this.client.clientOptions.notebookDocumentOptions.filterCells(e,i):i}}class g{constructor(e){this.client=e,this.registrations=new Map,this.registrationType=o.NotebookDocumentSyncRegistrationType.type,i.workspace.onDidOpenTextDocument((e=>{if(e.uri.scheme!==g.CellScheme)return;const[t,n]=this.findNotebookDocumentAndCell(e);if(void 0!==t&&void 0!==n)for(const e of this.registrations.values())e instanceof m&&e.didOpenNotebookCellTextDocument(t,n)})),i.workspace.onDidChangeTextDocument((e=>{if(0===e.contentChanges.length)return;const t=e.document;if(t.uri.scheme!==g.CellScheme)return;const[n]=this.findNotebookDocumentAndCell(t);if(void 0!==n)for(const t of this.registrations.values())t instanceof m&&t.didChangeNotebookCellTextDocument(n,e)})),i.workspace.onDidCloseTextDocument((e=>{if(e.uri.scheme!==g.CellScheme)return;const[t,n]=this.findNotebookDocumentAndCell(e);if(void 0!==t&&void 0!==n)for(const e of this.registrations.values())e instanceof m&&e.didCloseNotebookCellTextDocument(t,n)}))}getState(){if(0===this.registrations.size)return{kind:"document",id:this.registrationType.method,registrations:!1,matches:!1};for(const e of this.registrations.values()){const t=e.getState();if("document"===t.kind&&!0===t.registrations&&!0===t.matches)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!1}}fillClientCapabilities(e){const t=u(u(e,"notebookDocument"),"synchronization");t.dynamicRegistration=!0,t.executionSummarySupport=!0}preInitialize(e){const t=e.notebookDocumentSync;void 0!==t&&(this.dedicatedChannel=this.client.protocol2CodeConverter.asDocumentSelector(p.asDocumentSelector(t)))}initialize(e){const t=e.notebookDocumentSync;if(void 0===t)return;const n=t.id??s.generateUuid();this.register({id:n,registerOptions:t})}register(e){const t=new m(this.client,e.registerOptions);this.registrations.set(e.id,t)}unregister(e){const t=this.registrations.get(e);t&&t.dispose()}dispose(){for(const e of this.registrations.values())e.dispose();this.registrations.clear()}handles(e){if(e.uri.scheme!==g.CellScheme)return!1;if(void 0!==this.dedicatedChannel&&i.languages.match(this.dedicatedChannel,e)>0)return!0;for(const t of this.registrations.values())if(t.handles(e))return!0;return!1}getProvider(e){for(const t of this.registrations.values())if(t.handles(e.document))return t}findNotebookDocumentAndCell(e){const t=e.uri.toString();for(const e of i.workspace.notebookDocuments)for(const n of e.getCells())if(n.document.uri.toString()===t)return[e,n];return[void 0,void 0]}}t.NotebookDocumentSyncFeature=g,g.CellScheme="vscode-notebook-cell"},3603:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressFeature=void 0;const i=n(273),r=n(8071);t.ProgressFeature=class{constructor(e){this._client=e,this.activeParts=new Set}getState(){return{kind:"window",id:i.WorkDoneProgressCreateRequest.method,registrations:this.activeParts.size>0}}fillClientCapabilities(e){var t,n;(t=e,n="window",void 0===t[n]&&(t[n]=Object.create(null)),t[n]).workDoneProgress=!0}initialize(){const e=this._client,t=e=>{this.activeParts.delete(e)};e.onRequest(i.WorkDoneProgressCreateRequest.type,(e=>{this.activeParts.add(new r.ProgressPart(this._client,e.token,t))}))}dispose(){for(const e of this.activeParts)e.done();this.activeParts.clear()}}},8071:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressPart=void 0;const i=n(9496),r=n(273),o=n(9763);t.ProgressPart=class{constructor(e,t,n){this._client=e,this._token=t,this._reported=0,this._infinite=!1,this._lspProgressDisposable=this._client.onProgress(r.WorkDoneProgress.type,this._token,(e=>{switch(e.kind){case"begin":this.begin(e);break;case"report":this.report(e);break;case"end":this.done(),n&&n(this)}}))}begin(e){this._infinite=void 0===e.percentage,void 0!==this._lspProgressDisposable&&i.window.withProgress({location:i.ProgressLocation.Window,cancellable:e.cancellable,title:e.title},(async(t,n)=>{if(void 0!==this._lspProgressDisposable)return this._progress=t,this._cancellationToken=n,this._tokenDisposable=this._cancellationToken.onCancellationRequested((()=>{this._client.sendNotification(r.WorkDoneProgressCancelNotification.type,{token:this._token})})),this.report(e),new Promise(((e,t)=>{this._resolve=e,this._reject=t}))}))}report(e){if(this._infinite&&o.string(e.message))void 0!==this._progress&&this._progress.report({message:e.message});else if(o.number(e.percentage)){const t=Math.max(0,Math.min(e.percentage,100)),n=Math.max(0,t-this._reported);this._reported+=n,void 0!==this._progress&&this._progress.report({message:e.message,increment:n})}}cancel(){this.cleanup(),void 0!==this._reject&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this.cleanup(),void 0!==this._resolve&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}cleanup(){void 0!==this._lspProgressDisposable&&(this._lspProgressDisposable.dispose(),this._lspProgressDisposable=void 0),void 0!==this._tokenDisposable&&(this._tokenDisposable.dispose(),this._tokenDisposable=void 0),this._progress=void 0,this._cancellationToken=void 0}}},8714:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(9496);class r extends i.CallHierarchyItem{constructor(e,t,n,i,r,o,s){super(e,t,n,i,r,o),void 0!==s&&(this.data=s)}}t.default=r},6434:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(9496);class r extends i.CodeAction{constructor(e,t){super(e),this.data=t}}t.default=r},583:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(9496);class r extends i.CodeLens{constructor(e){super(e)}}t.default=r},1807:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(9496);class r extends i.CompletionItem{constructor(e){super(e)}}t.default=r},8785:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createConverter=void 0;const i=n(9496),r=n(273),o=n(9763),s=n(4904),a=n(1807),u=n(583),c=n(8705),l=n(6434),d=n(5316),p=n(8714),h=n(1365),m=n(3912),g=n(1065),f=n(273);var y;!function(e){e.is=function(e){let t=e;return t&&o.string(t.language)&&o.string(t.value)}}(y||(y={})),t.createConverter=function(e,t,n){const D=e||(e=>i.Uri.parse(e));function C(e){return D(e)}function v(e){let t=new d.ProtocolDiagnostic(b(e.range),e.message,A(e.severity),e.data);if(void 0!==e.code)if("string"==typeof e.code||"number"==typeof e.code)r.CodeDescription.is(e.codeDescription)?t.code={value:e.code,target:C(e.codeDescription.href)}:t.code=e.code;else if(d.DiagnosticCode.is(e.code)){t.hasDiagnosticCode=!0;const n=e.code;t.code={value:n.value,target:C(n.target)}}return e.source&&(t.source=e.source),e.relatedInformation&&(t.relatedInformation=function(e){const t=new Array(e.length);for(let n=0;n<e.length;n++){const r=e[n];t[n]=new i.DiagnosticRelatedInformation(L(r.location),r.message)}return t}(e.relatedInformation)),Array.isArray(e.tags)&&(t.tags=function(e){if(!e)return;let t=[];for(let n of e){let e=S(n);void 0!==e&&t.push(e)}return t.length>0?t:void 0}(e.tags)),t}function S(e){switch(e){case r.DiagnosticTag.Unnecessary:return i.DiagnosticTag.Unnecessary;case r.DiagnosticTag.Deprecated:return i.DiagnosticTag.Deprecated;default:return}}function E(e){return e?new i.Position(e.line,e.character):void 0}function b(e){return e?new i.Range(e.start.line,e.start.character,e.end.line,e.end.character):void 0}async function T(e,t){return s.map(e,(e=>new i.Range(e.start.line,e.start.character,e.end.line,e.end.character)),t)}function A(e){if(null==e)return i.DiagnosticSeverity.Error;switch(e){case r.DiagnosticSeverity.Error:return i.DiagnosticSeverity.Error;case r.DiagnosticSeverity.Warning:return i.DiagnosticSeverity.Warning;case r.DiagnosticSeverity.Information:return i.DiagnosticSeverity.Information;case r.DiagnosticSeverity.Hint:return i.DiagnosticSeverity.Hint}return i.DiagnosticSeverity.Error}function F(e){if(o.string(e))return e;switch(e.kind){case r.MarkupKind.Markdown:return R(e.value);case r.MarkupKind.PlainText:return e.value;default:return`Unsupported Markup content received. Kind is: ${e.kind}`}}function R(e){let o;if(void 0===e||"string"==typeof e)o=new i.MarkdownString(e);else switch(e.kind){case r.MarkupKind.Markdown:o=new i.MarkdownString(e.value);break;case r.MarkupKind.PlainText:o=new i.MarkdownString,o.appendText(e.value);break;default:o=new i.MarkdownString,o.appendText(`Unsupported Markup content received. Kind is: ${e.kind}`)}return o.isTrusted=t,o.supportHtml=n,o}function w(e){if(e===r.CompletionItemTag.Deprecated)return i.CompletionItemTag.Deprecated}function x(e,t,n,s,u,c){const l=function(e){if(null==e)return[];const t=[];for(const n of e){const e=w(n);void 0!==e&&t.push(e)}return t}(e.tags),d=function(e){return r.CompletionItemLabelDetails.is(e.labelDetails)?{label:e.label,detail:e.labelDetails.detail,description:e.labelDetails.description}:e.label}(e),p=new a.default(d);e.detail&&(p.detail=e.detail),e.documentation&&(p.documentation=F(e.documentation),p.documentationFormat=o.string(e.documentation)?"$string":e.documentation.kind),e.filterText&&(p.filterText=e.filterText);const h=function(e,t,n){const o=e.insertTextFormat??n;if(void 0!==e.textEdit||void 0!==t){const[n,a]=void 0!==e.textEdit?(s=e.textEdit,r.InsertReplaceEdit.is(s)?[{inserting:b(s.insert),replacing:b(s.replace)},s.newText]:[b(s.range),s.newText]):[t,e.textEditText??e.label];return o===r.InsertTextFormat.Snippet?{text:new i.SnippetString(a),range:n,fromEdit:!0}:{text:a,range:n,fromEdit:!0}}return e.insertText?o===r.InsertTextFormat.Snippet?{text:new i.SnippetString(e.insertText),fromEdit:!1}:{text:e.insertText,fromEdit:!1}:void 0;var s}(e,n,u);if(h&&(p.insertText=h.text,p.range=h.range,p.fromEdit=h.fromEdit),o.number(e.kind)){let[t,n]=(m=e.kind,r.CompletionItemKind.Text<=m&&m<=r.CompletionItemKind.TypeParameter?[m-1,void 0]:[i.CompletionItemKind.Text,m]);p.kind=t,n&&(p.originalItemKind=n)}var m;e.sortText&&(p.sortText=e.sortText),e.additionalTextEdits&&(p.additionalTextEdits=N(e.additionalTextEdits));const g=void 0!==e.commitCharacters?o.stringArray(e.commitCharacters)?e.commitCharacters:void 0:t;g&&(p.commitCharacters=g.slice()),e.command&&(p.command=G(e.command)),!0!==e.deprecated&&!1!==e.deprecated||(p.deprecated=e.deprecated,!0===e.deprecated&&l.push(i.CompletionItemTag.Deprecated)),!0!==e.preselect&&!1!==e.preselect||(p.preselect=e.preselect);const f=e.data??c;void 0!==f&&(p.data=f),l.length>0&&(p.tags=l);const y=e.insertTextMode??s;return void 0!==y&&(p.insertTextMode=y,y===r.InsertTextMode.asIs&&(p.keepWhitespace=!0)),p}function k(e){if(e)return new i.TextEdit(b(e.range),e.newText)}async function _(e,t){if(e)return s.map(e,k,t)}function N(e){if(!e)return;const t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=k(e[n]);return t}async function P(e,t){return s.mapAsync(e,I,t)}async function I(e,t){let n=new i.SignatureInformation(e.label);return void 0!==e.documentation&&(n.documentation=F(e.documentation)),void 0!==e.parameters&&(n.parameters=await q(e.parameters,t)),void 0!==e.activeParameter&&(n.activeParameter=e.activeParameter),n}function q(e,t){return s.map(e,O,t)}function O(e){let t=new i.ParameterInformation(e.label);return e.documentation&&(t.documentation=F(e.documentation)),t}function L(e){return e?new i.Location(D(e.uri),b(e.range)):void 0}function B(e){if(!e)return;let t={targetUri:D(e.targetUri),targetRange:b(e.targetRange),originSelectionRange:b(e.originSelectionRange),targetSelectionRange:b(e.targetSelectionRange)};if(!t.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return t}async function M(e,t){if(e){if(o.array(e)){if(0===e.length)return[];if(r.LocationLink.is(e[0])){const n=e;return s.map(n,B,t)}{const n=e;return s.map(n,L,t)}}return r.LocationLink.is(e)?[B(e)]:L(e)}}function j(e){let t=new i.DocumentHighlight(b(e.range));return o.number(e.kind)&&(t.kind=H(e.kind)),t}function H(e){switch(e){case r.DocumentHighlightKind.Text:return i.DocumentHighlightKind.Text;case r.DocumentHighlightKind.Read:return i.DocumentHighlightKind.Read;case r.DocumentHighlightKind.Write:return i.DocumentHighlightKind.Write}return i.DocumentHighlightKind.Text}function W(e){return e<=r.SymbolKind.TypeParameter?e-1:i.SymbolKind.Property}function $(e){if(e===r.SymbolTag.Deprecated)return i.SymbolTag.Deprecated}function U(e){if(null==e)return;const t=[];for(const n of e){const e=$(n);void 0!==e&&t.push(e)}return 0===t.length?void 0:t}function K(e){const t=e.data,n=e.location,r=void 0===n.range||void 0!==t?new m.default(e.name,W(e.kind),e.containerName??"",void 0===n.range?D(n.uri):new i.Location(D(e.location.uri),b(n.range)),t):new i.SymbolInformation(e.name,W(e.kind),e.containerName??"",new i.Location(D(e.location.uri),b(n.range)));return z(r,e),r}function V(e){let t=new i.DocumentSymbol(e.name,e.detail||"",W(e.kind),b(e.range),b(e.selectionRange));if(z(t,e),void 0!==e.children&&e.children.length>0){let n=[];for(let t of e.children)n.push(V(t));t.children=n}return t}function z(e,t){e.tags=U(t.tags),t.deprecated&&(e.tags?e.tags.includes(i.SymbolTag.Deprecated)||(e.tags=e.tags.concat(i.SymbolTag.Deprecated)):e.tags=[i.SymbolTag.Deprecated])}function G(e){let t={title:e.title,command:e.command};return e.arguments&&(t.arguments=e.arguments),t}const Q=new Map;function X(e){if(null==e)return;let t=Q.get(e);if(t)return t;let n=e.split(".");t=i.CodeActionKind.Empty;for(let e of n)t=t.append(e);return t}async function J(e,t){if(null==e)return;let n=new l.default(e.title,e.data);return void 0!==e.kind&&(n.kind=X(e.kind)),void 0!==e.diagnostics&&(n.diagnostics=function(e){const t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=v(e[n]);return t}(e.diagnostics)),void 0!==e.edit&&(n.edit=await Z(e.edit,t)),void 0!==e.command&&(n.command=G(e.command)),void 0!==e.isPreferred&&(n.isPreferred=e.isPreferred),void 0!==e.disabled&&(n.disabled={reason:e.disabled.reason}),n}function Y(e){if(!e)return;let t=new u.default(b(e.range));return e.command&&(t.command=G(e.command)),void 0!==e.data&&null!==e.data&&(t.data=e.data),t}async function Z(e,t){if(!e)return;const n=new Map;if(void 0!==e.changeAnnotations){const i=e.changeAnnotations;await s.forEach(Object.keys(i),(e=>{const t=function(e){if(void 0!==e)return{label:e.label,needsConfirmation:!!e.needsConfirmation,description:e.description}}(i[e]);n.set(e,t)}),t)}const o=e=>void 0===e?void 0:n.get(e),a=new i.WorkspaceEdit;if(e.documentChanges){const n=e.documentChanges;await s.forEach(n,(e=>{if(r.CreateFile.is(e))a.createFile(D(e.uri),e.options,o(e.annotationId));else if(r.RenameFile.is(e))a.renameFile(D(e.oldUri),D(e.newUri),e.options,o(e.annotationId));else if(r.DeleteFile.is(e))a.deleteFile(D(e.uri),e.options,o(e.annotationId));else{if(!r.TextDocumentEdit.is(e))throw new Error(`Unknown workspace edit change received:\n${JSON.stringify(e,void 0,4)}`);{const t=D(e.textDocument.uri);for(const n of e.edits)r.AnnotatedTextEdit.is(n)?a.replace(t,b(n.range),n.newText,o(n.annotationId)):a.replace(t,b(n.range),n.newText)}}}),t)}else if(e.changes){const n=e.changes;await s.forEach(Object.keys(n),(e=>{a.set(D(e),N(n[e]))}),t)}return a}function ee(e){let t=b(e.range),n=e.target?C(e.target):void 0,i=new c.default(t,n);return void 0!==e.tooltip&&(i.tooltip=e.tooltip),void 0!==e.data&&null!==e.data&&(i.data=e.data),i}function te(e){return new i.Color(e.red,e.green,e.blue,e.alpha)}function ne(e){return new i.ColorInformation(b(e.range),te(e.color))}function ie(e){let t=new i.ColorPresentation(e.label);return t.additionalTextEdits=N(e.additionalTextEdits),e.textEdit&&(t.textEdit=k(e.textEdit)),t}function re(e){if(e)switch(e){case r.FoldingRangeKind.Comment:return i.FoldingRangeKind.Comment;case r.FoldingRangeKind.Imports:return i.FoldingRangeKind.Imports;case r.FoldingRangeKind.Region:return i.FoldingRangeKind.Region}}function oe(e){return new i.FoldingRange(e.startLine,e.endLine,re(e.kind))}function se(e){return new i.SelectionRange(b(e.range),e.parent?se(e.parent):void 0)}function ae(e){return r.InlineValueText.is(e)?new i.InlineValueText(b(e.range),e.text):r.InlineValueVariableLookup.is(e)?new i.InlineValueVariableLookup(b(e.range),e.variableName,e.caseSensitiveLookup):new i.InlineValueEvaluatableExpression(b(e.range),e.expression)}async function ue(e,t){const n="string"==typeof e.label?e.label:await s.map(e.label,ce,t),i=new g.default(E(e.position),n);return void 0!==e.kind&&(i.kind=e.kind),void 0!==e.textEdits&&(i.textEdits=await _(e.textEdits,t)),void 0!==e.tooltip&&(i.tooltip=le(e.tooltip)),void 0!==e.paddingLeft&&(i.paddingLeft=e.paddingLeft),void 0!==e.paddingRight&&(i.paddingRight=e.paddingRight),void 0!==e.data&&(i.data=e.data),i}function ce(e){const t=new i.InlayHintLabelPart(e.value);return void 0!==e.location&&(t.location=L(e.location)),void 0!==e.tooltip&&(t.tooltip=le(e.tooltip)),void 0!==e.command&&(t.command=G(e.command)),t}function le(e){return"string"==typeof e?e:R(e)}function de(e){if(null===e)return;const t=new p.default(W(e.kind),e.name,e.detail||"",C(e.uri),b(e.range),b(e.selectionRange),e.data);return void 0!==e.tags&&(t.tags=U(e.tags)),t}async function pe(e,t){return new i.CallHierarchyIncomingCall(de(e.from),await T(e.fromRanges,t))}async function he(e,t){return new i.CallHierarchyOutgoingCall(de(e.to),await T(e.fromRanges,t))}function me(e){return new i.SemanticTokensEdit(e.start,e.deleteCount,void 0!==e.data?new Uint32Array(e.data):void 0)}function ge(e){if(null===e)return;let t=new h.default(W(e.kind),e.name,e.detail||"",C(e.uri),b(e.range),b(e.selectionRange),e.data);return void 0!==e.tags&&(t.tags=U(e.tags)),t}return Q.set(r.CodeActionKind.Empty,i.CodeActionKind.Empty),Q.set(r.CodeActionKind.QuickFix,i.CodeActionKind.QuickFix),Q.set(r.CodeActionKind.Refactor,i.CodeActionKind.Refactor),Q.set(r.CodeActionKind.RefactorExtract,i.CodeActionKind.RefactorExtract),Q.set(r.CodeActionKind.RefactorInline,i.CodeActionKind.RefactorInline),Q.set(r.CodeActionKind.RefactorRewrite,i.CodeActionKind.RefactorRewrite),Q.set(r.CodeActionKind.Source,i.CodeActionKind.Source),Q.set(r.CodeActionKind.SourceOrganizeImports,i.CodeActionKind.SourceOrganizeImports),{asUri:C,asDocumentSelector:function(e){const t=[];for(const n of e)if("string"==typeof n)t.push(n);else if(f.NotebookCellTextDocumentFilter.is(n))if("string"==typeof n.notebook)t.push({notebookType:n.notebook,language:n.language});else{const e=n.notebook.notebookType??"*";t.push({notebookType:e,scheme:n.notebook.scheme,pattern:n.notebook.pattern,language:n.language})}else f.TextDocumentFilter.is(n)&&t.push({language:n.language,scheme:n.scheme,pattern:n.pattern});return t},asDiagnostics:async function(e,t){return s.map(e,v,t)},asDiagnostic:v,asRange:b,asRanges:T,asPosition:E,asDiagnosticSeverity:A,asDiagnosticTag:S,asHover:function(e){if(e)return new i.Hover(function(e){if(o.string(e))return R(e);if(y.is(e))return R().appendCodeblock(e.value,e.language);if(Array.isArray(e)){let t=[];for(let n of e){let e=R();y.is(n)?e.appendCodeblock(n.value,n.language):e.appendMarkdown(n),t.push(e)}return t}return R(e)}(e.contents),b(e.range))},asCompletionResult:async function(e,t,n){if(!e)return;if(Array.isArray(e))return s.map(e,(e=>x(e,t)),n);const o=e,{defaultRange:a,commitCharacters:u}=function(e,t){const n=e.itemDefaults?.editRange,i=e.itemDefaults?.commitCharacters??t;return r.Range.is(n)?{defaultRange:b(n),commitCharacters:i}:void 0!==n?{defaultRange:{inserting:b(n.insert),replacing:b(n.replace)},commitCharacters:i}:{defaultRange:void 0,commitCharacters:i}}(o,t),c=await s.map(o.items,(e=>x(e,u,a,o.itemDefaults?.insertTextMode,o.itemDefaults?.insertTextFormat,o.itemDefaults?.data)),n);return new i.CompletionList(c,o.isIncomplete)},asCompletionItem:x,asTextEdit:k,asTextEdits:_,asSignatureHelp:async function(e,t){if(!e)return;let n=new i.SignatureHelp;return o.number(e.activeSignature)?n.activeSignature=e.activeSignature:n.activeSignature=0,o.number(e.activeParameter)?n.activeParameter=e.activeParameter:n.activeParameter=0,e.signatures&&(n.signatures=await P(e.signatures,t)),n},asSignatureInformations:P,asSignatureInformation:I,asParameterInformations:q,asParameterInformation:O,asDeclarationResult:async function(e,t){if(e)return M(e,t)},asDefinitionResult:async function(e,t){if(e)return M(e,t)},asLocation:L,asReferences:async function(e,t){if(e)return s.map(e,L,t)},asDocumentHighlights:async function(e,t){if(e)return s.map(e,j,t)},asDocumentHighlight:j,asDocumentHighlightKind:H,asSymbolKind:W,asSymbolTag:$,asSymbolTags:U,asSymbolInformations:async function(e,t){if(e)return s.map(e,K,t)},asSymbolInformation:K,asDocumentSymbols:async function(e,t){if(null!=e)return s.map(e,V,t)},asDocumentSymbol:V,asCommand:G,asCommands:async function(e,t){if(e)return s.map(e,G,t)},asCodeAction:J,asCodeActionKind:X,asCodeActionKinds:function(e){if(null!=e)return e.map((e=>X(e)))},asCodeActionResult:function(e,t){return s.mapAsync(e,(async e=>r.Command.is(e)?G(e):J(e,t)),t)},asCodeLens:Y,asCodeLenses:async function(e,t){if(e)return s.map(e,Y,t)},asWorkspaceEdit:Z,asDocumentLink:ee,asDocumentLinks:async function(e,t){if(e)return s.map(e,ee,t)},asFoldingRangeKind:re,asFoldingRange:oe,asFoldingRanges:async function(e,t){if(e)return s.map(e,oe,t)},asColor:te,asColorInformation:ne,asColorInformations:async function(e,t){if(e)return s.map(e,ne,t)},asColorPresentation:ie,asColorPresentations:async function(e,t){if(e)return s.map(e,ie,t)},asSelectionRange:se,asSelectionRanges:async function(e,t){return Array.isArray(e)?s.map(e,se,t):[]},asInlineValue:ae,asInlineValues:async function(e,t){return Array.isArray(e)?s.map(e,ae,t):[]},asInlayHint:ue,asInlayHints:async function(e,t){if(Array.isArray(e))return s.mapAsync(e,ue,t)},asSemanticTokensLegend:function(e){return e},asSemanticTokens:async function(e,t){if(null!=e)return new i.SemanticTokens(new Uint32Array(e.data),e.resultId)},asSemanticTokensEdit:me,asSemanticTokensEdits:async function(e,t){if(null!=e)return new i.SemanticTokensEdits(e.edits.map(me),e.resultId)},asCallHierarchyItem:de,asCallHierarchyItems:async function(e,t){if(null!==e)return s.map(e,de,t)},asCallHierarchyIncomingCall:pe,asCallHierarchyIncomingCalls:async function(e,t){if(null!==e)return s.mapAsync(e,pe,t)},asCallHierarchyOutgoingCall:he,asCallHierarchyOutgoingCalls:async function(e,t){if(null!==e)return s.mapAsync(e,he,t)},asLinkedEditingRanges:async function(e,t){if(null!=e)return new i.LinkedEditingRanges(await T(e.ranges,t),function(e){if(null!=e)return new RegExp(e)}(e.wordPattern))},asTypeHierarchyItem:ge,asTypeHierarchyItems:async function(e,t){if(null!==e)return s.map(e,ge,t)},asGlobPattern:function(e){if(o.string(e))return e;if(r.RelativePattern.is(e)){if(r.URI.is(e.baseUri))return new i.RelativePattern(C(e.baseUri),e.pattern);if(r.WorkspaceFolder.is(e.baseUri)){const t=i.workspace.getWorkspaceFolder(C(e.baseUri.uri));return void 0!==t?new i.RelativePattern(t,e.pattern):void 0}}}}}},5316:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProtocolDiagnostic=t.DiagnosticCode=void 0;const i=n(9496),r=n(9763);(t.DiagnosticCode||(t.DiagnosticCode={})).is=function(e){const t=e;return null!=t&&(r.number(t.value)||r.string(t.value))&&r.string(t.target)};class o extends i.Diagnostic{constructor(e,t,n,i){super(e,t,n),this.data=i,this.hasDiagnosticCode=!1}}t.ProtocolDiagnostic=o},8705:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(9496);class r extends i.DocumentLink{constructor(e,t){super(e,t)}}t.default=r},1065:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(9496);class r extends i.InlayHint{constructor(e,t,n){super(e,t,n)}}t.default=r},1365:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(9496);class r extends i.TypeHierarchyItem{constructor(e,t,n,i,r,o,s){super(e,t,n,i,r,o),void 0!==s&&(this.data=s)}}t.default=r},3912:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(9496);class r extends i.SymbolInformation{constructor(e,t,n,r,o){const s=!(r instanceof i.Uri);super(e,t,n,s?r:new i.Location(r,new i.Range(0,0,0,0))),this.hasRange=s,void 0!==o&&(this.data=o)}}t.default=r},8480:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReferencesFeature=void 0;const i=n(9496),r=n(273),o=n(8909),s=n(1980);class a extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.ReferencesRequest.type)}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.referencesProvider);n&&this.register({id:s.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,n={provideReferences:(e,t,n,i)=>{const o=this._client,s=(e,t,n,i)=>o.sendRequest(r.ReferencesRequest.type,o.code2ProtocolConverter.asReferenceParams(e,t,n),i).then((e=>i.isCancellationRequested?null:o.protocol2CodeConverter.asReferences(e,i)),(e=>o.handleFailedRequest(r.ReferencesRequest.type,i,e,null))),a=o.middleware;return a.provideReferences?a.provideReferences(e,t,n,i,s):s(e,t,n,i)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return i.languages.registerReferenceProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.ReferencesFeature=a},6458:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RenameFeature=void 0;const i=n(9496),r=n(273),o=n(1980),s=n(9763),a=n(8909);class u extends a.TextDocumentLanguageFeature{constructor(e){super(e,r.RenameRequest.type)}fillClientCapabilities(e){let t=(0,a.ensure)((0,a.ensure)(e,"textDocument"),"rename");t.dynamicRegistration=!0,t.prepareSupport=!0,t.prepareSupportDefaultBehavior=r.PrepareSupportDefaultBehavior.Identifier,t.honorsChangeAnnotations=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.renameProvider);n&&(s.boolean(e.renameProvider)&&(n.prepareProvider=!1),this.register({id:o.generateUuid(),registerOptions:n}))}registerLanguageProvider(e){const t=e.documentSelector,n={provideRenameEdits:(e,t,n,i)=>{const o=this._client,s=(e,t,n,i)=>{let s={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(e),position:o.code2ProtocolConverter.asPosition(t),newName:n};return o.sendRequest(r.RenameRequest.type,s,i).then((e=>i.isCancellationRequested?null:o.protocol2CodeConverter.asWorkspaceEdit(e,i)),(e=>o.handleFailedRequest(r.RenameRequest.type,i,e,null,!1)))},a=o.middleware;return a.provideRenameEdits?a.provideRenameEdits(e,t,n,i,s):s(e,t,n,i)},prepareRename:e.prepareProvider?(e,t,n)=>{const i=this._client,o=(e,t,n)=>{let o={textDocument:i.code2ProtocolConverter.asTextDocumentIdentifier(e),position:i.code2ProtocolConverter.asPosition(t)};return i.sendRequest(r.PrepareRenameRequest.type,o,n).then((e=>n.isCancellationRequested?null:r.Range.is(e)?i.protocol2CodeConverter.asRange(e):this.isDefaultBehavior(e)?!0===e.defaultBehavior?null:Promise.reject(new Error("The element can't be renamed.")):e&&r.Range.is(e.range)?{range:i.protocol2CodeConverter.asRange(e.range),placeholder:e.placeholder}:Promise.reject(new Error("The element can't be renamed."))),(e=>{throw"string"==typeof e.message?new Error(e.message):new Error("The element can't be renamed.")}))},s=i.middleware;return s.prepareRename?s.prepareRename(e,t,n,o):o(e,t,n)}:void 0};return[this.registerProvider(t,n),n]}registerProvider(e,t){return i.languages.registerRenameProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}isDefaultBehavior(e){const t=e;return t&&s.boolean(t.defaultBehavior)}}t.RenameFeature=u},750:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionRangeFeature=void 0;const i=n(9496),r=n(273),o=n(8909);class s extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.SelectionRangeRequest.type)}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"selectionRange").dynamicRegistration=!0}initialize(e,t){const[n,i]=this.getRegistration(t,e.selectionRangeProvider);n&&i&&this.register({id:n,registerOptions:i})}registerLanguageProvider(e){const t=e.documentSelector,n={provideSelectionRanges:(e,t,n)=>{const i=this._client,o=async(e,t,n)=>{const o={textDocument:i.code2ProtocolConverter.asTextDocumentIdentifier(e),positions:await i.code2ProtocolConverter.asPositions(t,n)};return i.sendRequest(r.SelectionRangeRequest.type,o,n).then((e=>n.isCancellationRequested?null:i.protocol2CodeConverter.asSelectionRanges(e,n)),(e=>i.handleFailedRequest(r.SelectionRangeRequest.type,n,e,null)))},s=i.middleware;return s.provideSelectionRanges?s.provideSelectionRanges(e,t,n,o):o(e,t,n)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return i.languages.registerSelectionRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.SelectionRangeFeature=s},9957:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SemanticTokensFeature=void 0;const i=n(9496),r=n(273),o=n(8909),s=n(9763);class a extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){const t=(0,o.ensure)((0,o.ensure)(e,"textDocument"),"semanticTokens");t.dynamicRegistration=!0,t.tokenTypes=[r.SemanticTokenTypes.namespace,r.SemanticTokenTypes.type,r.SemanticTokenTypes.class,r.SemanticTokenTypes.enum,r.SemanticTokenTypes.interface,r.SemanticTokenTypes.struct,r.SemanticTokenTypes.typeParameter,r.SemanticTokenTypes.parameter,r.SemanticTokenTypes.variable,r.SemanticTokenTypes.property,r.SemanticTokenTypes.enumMember,r.SemanticTokenTypes.event,r.SemanticTokenTypes.function,r.SemanticTokenTypes.method,r.SemanticTokenTypes.macro,r.SemanticTokenTypes.keyword,r.SemanticTokenTypes.modifier,r.SemanticTokenTypes.comment,r.SemanticTokenTypes.string,r.SemanticTokenTypes.number,r.SemanticTokenTypes.regexp,r.SemanticTokenTypes.operator,r.SemanticTokenTypes.decorator],t.tokenModifiers=[r.SemanticTokenModifiers.declaration,r.SemanticTokenModifiers.definition,r.SemanticTokenModifiers.readonly,r.SemanticTokenModifiers.static,r.SemanticTokenModifiers.deprecated,r.SemanticTokenModifiers.abstract,r.SemanticTokenModifiers.async,r.SemanticTokenModifiers.modification,r.SemanticTokenModifiers.documentation,r.SemanticTokenModifiers.defaultLibrary],t.formats=[r.TokenFormat.Relative],t.requests={range:!0,full:{delta:!0}},t.multilineTokenSupport=!1,t.overlappingTokenSupport=!1,t.serverCancelSupport=!0,t.augmentsSyntaxTokens=!0,(0,o.ensure)((0,o.ensure)(e,"workspace"),"semanticTokens").refreshSupport=!0}initialize(e,t){this._client.onRequest(r.SemanticTokensRefreshRequest.type,(async()=>{for(const e of this.getAllProviders())e.onDidChangeSemanticTokensEmitter.fire()}));const[n,i]=this.getRegistration(t,e.semanticTokensProvider);n&&i&&this.register({id:n,registerOptions:i})}registerLanguageProvider(e){const t=e.documentSelector,n=s.boolean(e.full)?e.full:void 0!==e.full,o=void 0!==e.full&&"boolean"!=typeof e.full&&!0===e.full.delta,a=new i.EventEmitter,u=n?{onDidChangeSemanticTokens:a.event,provideDocumentSemanticTokens:(e,t)=>{const n=this._client,i=n.middleware,o=(e,t)=>{const i={textDocument:n.code2ProtocolConverter.asTextDocumentIdentifier(e)};return n.sendRequest(r.SemanticTokensRequest.type,i,t).then((e=>t.isCancellationRequested?null:n.protocol2CodeConverter.asSemanticTokens(e,t)),(e=>n.handleFailedRequest(r.SemanticTokensRequest.type,t,e,null)))};return i.provideDocumentSemanticTokens?i.provideDocumentSemanticTokens(e,t,o):o(e,t)},provideDocumentSemanticTokensEdits:o?(e,t,n)=>{const i=this._client,o=i.middleware,s=(e,t,n)=>{const o={textDocument:i.code2ProtocolConverter.asTextDocumentIdentifier(e),previousResultId:t};return i.sendRequest(r.SemanticTokensDeltaRequest.type,o,n).then((async e=>n.isCancellationRequested?null:r.SemanticTokens.is(e)?await i.protocol2CodeConverter.asSemanticTokens(e,n):await i.protocol2CodeConverter.asSemanticTokensEdits(e,n)),(e=>i.handleFailedRequest(r.SemanticTokensDeltaRequest.type,n,e,null)))};return o.provideDocumentSemanticTokensEdits?o.provideDocumentSemanticTokensEdits(e,t,n,s):s(e,t,n)}:void 0}:void 0,c=!0===e.range?{provideDocumentRangeSemanticTokens:(e,t,n)=>{const i=this._client,o=i.middleware,s=(e,t,n)=>{const o={textDocument:i.code2ProtocolConverter.asTextDocumentIdentifier(e),range:i.code2ProtocolConverter.asRange(t)};return i.sendRequest(r.SemanticTokensRangeRequest.type,o,n).then((e=>n.isCancellationRequested?null:i.protocol2CodeConverter.asSemanticTokens(e,n)),(e=>i.handleFailedRequest(r.SemanticTokensRangeRequest.type,n,e,null)))};return o.provideDocumentRangeSemanticTokens?o.provideDocumentRangeSemanticTokens(e,t,n,s):s(e,t,n)}}:void 0,l=[],d=this._client,p=d.protocol2CodeConverter.asSemanticTokensLegend(e.legend),h=d.protocol2CodeConverter.asDocumentSelector(t);return void 0!==u&&l.push(i.languages.registerDocumentSemanticTokensProvider(h,u,p)),void 0!==c&&l.push(i.languages.registerDocumentRangeSemanticTokensProvider(h,c,p)),[new i.Disposable((()=>l.forEach((e=>e.dispose())))),{range:c,full:u,onDidChangeSemanticTokensEmitter:a}]}}t.SemanticTokensFeature=a},2908:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SignatureHelpFeature=void 0;const i=n(9496),r=n(273),o=n(8909),s=n(1980);class a extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.SignatureHelpRequest.type)}fillClientCapabilities(e){let t=(0,o.ensure)((0,o.ensure)(e,"textDocument"),"signatureHelp");t.dynamicRegistration=!0,t.signatureInformation={documentationFormat:[r.MarkupKind.Markdown,r.MarkupKind.PlainText]},t.signatureInformation.parameterInformation={labelOffsetSupport:!0},t.signatureInformation.activeParameterSupport=!0,t.contextSupport=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.signatureHelpProvider);n&&this.register({id:s.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t={provideSignatureHelp:(e,t,n,i)=>{const o=this._client,s=(e,t,n,i)=>o.sendRequest(r.SignatureHelpRequest.type,o.code2ProtocolConverter.asSignatureHelpParams(e,t,n),i).then((e=>i.isCancellationRequested?null:o.protocol2CodeConverter.asSignatureHelp(e,i)),(e=>o.handleFailedRequest(r.SignatureHelpRequest.type,i,e,null))),a=o.middleware;return a.provideSignatureHelp?a.provideSignatureHelp(e,t,i,n,s):s(e,t,i,n)}};return[this.registerProvider(e,t),t]}registerProvider(e,t){const n=this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector);if(void 0===e.retriggerCharacters){const r=e.triggerCharacters||[];return i.languages.registerSignatureHelpProvider(n,t,...r)}{const r={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};return i.languages.registerSignatureHelpProvider(n,t,r)}}}t.SignatureHelpFeature=a},743:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DidSaveTextDocumentFeature=t.WillSaveWaitUntilFeature=t.WillSaveFeature=t.DidChangeTextDocumentFeature=t.DidCloseTextDocumentFeature=t.DidOpenTextDocumentFeature=void 0;const i=n(9496),r=n(273),o=n(8909),s=n(4904),a=n(1980);class u extends o.TextDocumentEventFeature{constructor(e,t){super(e,i.workspace.onDidOpenTextDocument,r.DidOpenTextDocumentNotification.type,(()=>e.middleware.didOpen),(t=>e.code2ProtocolConverter.asOpenTextDocumentParams(t)),(e=>e),o.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=t}get openDocuments(){return this._syncedDocuments.values()}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){const n=e.resolvedTextDocumentSync;t&&n&&n.openClose&&this.register({id:a.generateUuid(),registerOptions:{documentSelector:t}})}get registrationType(){return r.DidOpenTextDocumentNotification.type}register(e){if(super.register(e),!e.registerOptions.documentSelector)return;const t=this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector);i.workspace.textDocuments.forEach((e=>{const n=e.uri.toString();if(!this._syncedDocuments.has(n)&&i.languages.match(t,e)>0&&!this._client.hasDedicatedTextSynchronizationFeature(e)){const t=this._client.middleware,i=e=>this._client.sendNotification(this._type,this._createParams(e));(t.didOpen?t.didOpen(e,i):i(e)).catch((e=>{this._client.error(`Sending document notification ${this._type.method} failed`,e)})),this._syncedDocuments.set(n,e)}}))}notificationSent(e,t,n){super.notificationSent(e,t,n),this._syncedDocuments.set(e.uri.toString(),e)}}t.DidOpenTextDocumentFeature=u;class c extends o.TextDocumentEventFeature{constructor(e,t){super(e,i.workspace.onDidCloseTextDocument,r.DidCloseTextDocumentNotification.type,(()=>e.middleware.didClose),(t=>e.code2ProtocolConverter.asCloseTextDocumentParams(t)),(e=>e),o.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=t}get registrationType(){return r.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.openClose&&this.register({id:a.generateUuid(),registerOptions:{documentSelector:t}})}notificationSent(e,t,n){super.notificationSent(e,t,n),this._syncedDocuments.delete(e.uri.toString())}unregister(e){const t=this._selectors.get(e);super.unregister(e);const n=this._selectors.values();this._syncedDocuments.forEach((e=>{if(i.languages.match(t,e)>0&&!this._selectorFilter(n,e)&&!this._client.hasDedicatedTextSynchronizationFeature(e)){let t=this._client.middleware,n=e=>this._client.sendNotification(this._type,this._createParams(e));this._syncedDocuments.delete(e.uri.toString()),(t.didClose?t.didClose(e,n):n(e)).catch((e=>{this._client.error(`Sending document notification ${this._type.method} failed`,e)}))}}))}}t.DidCloseTextDocumentFeature=c;class l extends o.DynamicDocumentFeature{constructor(e){super(e),this._forcingDelivery=!1,this._changeData=new Map,this._onNotificationSent=new i.EventEmitter}get registrationType(){return r.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&void 0!==n.change&&n.change!==r.TextDocumentSyncKind.None&&this.register({id:a.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{syncKind:n.change})})}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=i.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(e.id,{syncKind:e.registerOptions.syncKind,documentSelector:this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)}))}*getDocumentSelectors(){for(const e of this._changeData.values())yield e.documentSelector}async callback(e){if(0===e.contentChanges.length)return;const t=[];for(const n of this._changeData.values())if(i.languages.match(n.documentSelector,e.document)>0&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){const i=this._client.middleware;if(n.syncKind===r.TextDocumentSyncKind.Incremental){const n=async e=>{const t=this._client.code2ProtocolConverter.asChangeTextDocumentParams(e);await this._client.sendNotification(r.DidChangeTextDocumentNotification.type,t),this.notificationSent(e,r.DidChangeTextDocumentNotification.type,t)};t.push(i.didChange?i.didChange(e,(e=>n(e))):n(e))}else if(n.syncKind===r.TextDocumentSyncKind.Full){const n=async e=>{const t=async e=>{const t=this._client.code2ProtocolConverter.asChangeTextDocumentParams(e.document);await this._client.sendNotification(r.DidChangeTextDocumentNotification.type,t),this.notificationSent(e,r.DidChangeTextDocumentNotification.type,t)};return this._changeDelayer?(this._changeDelayer.uri!==e.document.uri.toString()&&(await this.forceDelivery(),this._changeDelayer.uri=e.document.uri.toString()),this._changeDelayer.delayer.trigger((()=>t(e)))):(this._changeDelayer={uri:e.document.uri.toString(),delayer:new s.Delayer(200)},this._changeDelayer.delayer.trigger((()=>t(e)),-1))};t.push(i.didChange?i.didChange(e,(e=>n(e))):n(e))}}return Promise.all(t).then(void 0,(e=>{throw this._client.error(`Sending document notification ${r.DidChangeTextDocumentNotification.type.method} failed`,e),e}))}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(e,t,n){this._onNotificationSent.fire({original:e,type:t,params:n})}unregister(e){this._changeData.delete(e),0===this._changeData.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){void 0!==this._changeDelayer&&this._changeDelayer.delayer.cancel(),this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}async forceDelivery(){if(!this._forcingDelivery&&this._changeDelayer)try{return this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}getProvider(e){for(const t of this._changeData.values())if(i.languages.match(t.documentSelector,e)>0)return{send:e=>this.callback(e)}}}t.DidChangeTextDocumentFeature=l;class d extends o.TextDocumentEventFeature{constructor(e){super(e,i.workspace.onWillSaveTextDocument,r.WillSaveTextDocumentNotification.type,(()=>e.middleware.willSave),(t=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(t)),(e=>e.document),((e,t)=>o.TextDocumentEventFeature.textDocumentFilter(e,t.document)))}get registrationType(){return r.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"synchronization").willSave=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.willSave&&this.register({id:a.generateUuid(),registerOptions:{documentSelector:t}})}}t.WillSaveFeature=d;class p extends o.DynamicDocumentFeature{constructor(e){super(e),this._selectors=new Map}getDocumentSelectors(){return this._selectors.values()}get registrationType(){return r.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"synchronization").willSaveWaitUntil=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.willSaveWaitUntil&&this.register({id:a.generateUuid(),registerOptions:{documentSelector:t}})}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=i.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}callback(e){if(o.TextDocumentEventFeature.textDocumentFilter(this._selectors.values(),e.document)&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let t=this._client.middleware,n=e=>this._client.sendRequest(r.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(e)).then((async e=>{let t=await this._client.protocol2CodeConverter.asTextEdits(e);return void 0===t?[]:t}));e.waitUntil(t.willSaveWaitUntil?t.willSaveWaitUntil(e,n):n(e))}}unregister(e){this._selectors.delete(e),0===this._selectors.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}}t.WillSaveWaitUntilFeature=p;class h extends o.TextDocumentEventFeature{constructor(e){super(e,i.workspace.onDidSaveTextDocument,r.DidSaveTextDocumentNotification.type,(()=>e.middleware.didSave),(t=>e.code2ProtocolConverter.asSaveTextDocumentParams(t,this._includeText)),(e=>e),o.TextDocumentEventFeature.textDocumentFilter),this._includeText=!1}get registrationType(){return r.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"synchronization").didSave=!0}initialize(e,t){const n=e.resolvedTextDocumentSync;if(t&&n&&n.save){const e="boolean"==typeof n.save?{includeText:!1}:{includeText:!!n.save.includeText};this.register({id:a.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e)})}}register(e){this._includeText=!!e.registerOptions.includeText,super.register(e)}}t.DidSaveTextDocumentFeature=h},328:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeDefinitionFeature=void 0;const i=n(9496),r=n(273),o=n(8909);class s extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.TypeDefinitionRequest.type)}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let t=(0,o.ensure)((0,o.ensure)(e,"textDocument"),"typeDefinition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[n,i]=this.getRegistration(t,e.typeDefinitionProvider);n&&i&&this.register({id:n,registerOptions:i})}registerLanguageProvider(e){const t=e.documentSelector,n={provideTypeDefinition:(e,t,n)=>{const i=this._client,o=(e,t,n)=>i.sendRequest(r.TypeDefinitionRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(e,t),n).then((e=>n.isCancellationRequested?null:i.protocol2CodeConverter.asDefinitionResult(e,n)),(e=>i.handleFailedRequest(r.TypeDefinitionRequest.type,n,e,null))),s=i.middleware;return s.provideTypeDefinition?s.provideTypeDefinition(e,t,n,o):o(e,t,n)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return i.languages.registerTypeDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.TypeDefinitionFeature=s},4175:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeHierarchyFeature=void 0;const i=n(9496),r=n(273),o=n(8909);class s{constructor(e){this.client=e,this.middleware=e.middleware}prepareTypeHierarchy(e,t,n){const i=this.client,o=this.middleware,s=(e,t,n)=>{const o=i.code2ProtocolConverter.asTextDocumentPositionParams(e,t);return i.sendRequest(r.TypeHierarchyPrepareRequest.type,o,n).then((e=>n.isCancellationRequested?null:i.protocol2CodeConverter.asTypeHierarchyItems(e,n)),(e=>i.handleFailedRequest(r.TypeHierarchyPrepareRequest.type,n,e,null)))};return o.prepareTypeHierarchy?o.prepareTypeHierarchy(e,t,n,s):s(e,t,n)}provideTypeHierarchySupertypes(e,t){const n=this.client,i=this.middleware,o=(e,t)=>{const i={item:n.code2ProtocolConverter.asTypeHierarchyItem(e)};return n.sendRequest(r.TypeHierarchySupertypesRequest.type,i,t).then((e=>t.isCancellationRequested?null:n.protocol2CodeConverter.asTypeHierarchyItems(e,t)),(e=>n.handleFailedRequest(r.TypeHierarchySupertypesRequest.type,t,e,null)))};return i.provideTypeHierarchySupertypes?i.provideTypeHierarchySupertypes(e,t,o):o(e,t)}provideTypeHierarchySubtypes(e,t){const n=this.client,i=this.middleware,o=(e,t)=>{const i={item:n.code2ProtocolConverter.asTypeHierarchyItem(e)};return n.sendRequest(r.TypeHierarchySubtypesRequest.type,i,t).then((e=>t.isCancellationRequested?null:n.protocol2CodeConverter.asTypeHierarchyItems(e,t)),(e=>n.handleFailedRequest(r.TypeHierarchySubtypesRequest.type,t,e,null)))};return i.provideTypeHierarchySubtypes?i.provideTypeHierarchySubtypes(e,t,o):o(e,t)}}class a extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.TypeHierarchyPrepareRequest.type)}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"typeHierarchy").dynamicRegistration=!0}initialize(e,t){const[n,i]=this.getRegistration(t,e.typeHierarchyProvider);n&&i&&this.register({id:n,registerOptions:i})}registerLanguageProvider(e){const t=this._client,n=new s(t);return[i.languages.registerTypeHierarchyProvider(t.protocol2CodeConverter.asDocumentSelector(e.documentSelector),n),n]}}t.TypeHierarchyFeature=a},4904:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forEach=t.mapAsync=t.map=t.clearTestMode=t.setTestMode=t.Semaphore=t.Delayer=void 0;const i=n(273);t.Delayer=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,t=this.defaultDelay){return this.task=e,t>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((e=>{this.onSuccess=e})).then((()=>{this.completionPromise=void 0,this.onSuccess=void 0;var e=this.task();return this.task=void 0,e}))),(t>=0||void 0===this.timeout)&&(this.timeout=(0,i.RAL)().timer.setTimeout((()=>{this.timeout=void 0,this.onSuccess(void 0)}),t>=0?t:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return void 0!==this.timeout}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){void 0!==this.timeout&&(this.timeout.dispose(),this.timeout=void 0)}},t.Semaphore=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise(((t,n)=>{this._waiting.push({thunk:e,resolve:t,reject:n}),this.runNext()}))}get active(){return this._active}runNext(){0!==this._waiting.length&&this._active!==this._capacity&&(0,i.RAL)().timer.setImmediate((()=>this.doRunNext()))}doRunNext(){if(0===this._waiting.length||this._active===this._capacity)return;const e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const t=e.thunk();t instanceof Promise?t.then((t=>{this._active--,e.resolve(t),this.runNext()}),(t=>{this._active--,e.reject(t),this.runNext()})):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}};let r=!1;t.setTestMode=function(){r=!0},t.clearTestMode=function(){r=!1};class o{constructor(e=15){this.yieldAfter=!0===r?Math.max(e,2):Math.max(e,15),this.startTime=Date.now(),this.counter=0,this.total=0,this.counterInterval=1}start(){this.counter=0,this.total=0,this.counterInterval=1,this.startTime=Date.now()}shouldYield(){if(++this.counter>=this.counterInterval){const e=Date.now()-this.startTime,t=Math.max(0,this.yieldAfter-e);if(this.total+=this.counter,this.counter=0,e>=this.yieldAfter||t<=1)return this.counterInterval=1,this.total=0,!0;switch(e){case 0:case 1:this.counterInterval=2*this.total}}return!1}}t.map=async function(e,t,n,r){if(0===e.length)return[];const s=new Array(e.length),a=new o(r?.yieldAfter);function u(n){a.start();for(let i=n;i<e.length;i++)if(s[i]=t(e[i]),a.shouldYield())return r?.yieldCallback&&r.yieldCallback(),i+1;return-1}let c=u(0);for(;-1!==c&&(void 0===n||!n.isCancellationRequested);)c=await new Promise((e=>{(0,i.RAL)().timer.setImmediate((()=>{e(u(c))}))}));return s},t.mapAsync=async function(e,t,n,r){if(0===e.length)return[];const s=new Array(e.length),a=new o(r?.yieldAfter);async function u(i){a.start();for(let o=i;o<e.length;o++)if(s[o]=await t(e[o],n),a.shouldYield())return r?.yieldCallback&&r.yieldCallback(),o+1;return-1}let c=await u(0);for(;-1!==c&&(void 0===n||!n.isCancellationRequested);)c=await new Promise((e=>{(0,i.RAL)().timer.setImmediate((()=>{e(u(c))}))}));return s},t.forEach=async function(e,t,n,r){if(0===e.length)return;const s=new o(r?.yieldAfter);function a(n){s.start();for(let i=n;i<e.length;i++)if(t(e[i]),s.shouldYield())return r?.yieldCallback&&r.yieldCallback(),i+1;return-1}let u=a(0);for(;-1!==u&&(void 0===n||!n.isCancellationRequested);)u=await new Promise((e=>{(0,i.RAL)().timer.setImmediate((()=>{e(a(u))}))}))}},9763:(e,t)=>{"use strict";function n(e){return"string"==typeof e||e instanceof String}function i(e){return"function"==typeof e}function r(e){return Array.isArray(e)}function o(e){return e&&i(e.then)}Object.defineProperty(t,"__esModule",{value:!0}),t.asPromise=t.thenable=t.typedArray=t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0,t.boolean=function(e){return!0===e||!1===e},t.string=n,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=i,t.array=r,t.stringArray=function(e){return r(e)&&e.every((e=>n(e)))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.thenable=o,t.asPromise=function(e){return e instanceof Promise?e:o(e)?new Promise(((t,n)=>{e.then((e=>t(e)),(e=>n(e)))})):Promise.resolve(e)}},1980:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateUuid=t.parse=t.isUUID=t.v4=t.empty=void 0;class n{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}}class i extends n{constructor(){super([i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),"-",i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),"-","4",i._randomHex(),i._randomHex(),i._randomHex(),"-",i._oneOf(i._timeHighBits),i._randomHex(),i._randomHex(),i._randomHex(),"-",i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return i._oneOf(i._chars)}}function r(){return new i}i._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],i._timeHighBits=["8","9","a","b"],t.empty=new n("00000000-0000-0000-0000-000000000000"),t.v4=r;const o=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function s(e){return o.test(e)}t.isUUID=s,t.parse=function(e){if(!s(e))throw new Error("invalid uuid");return new n(e)},t.generateUuid=function(){return r().asHex()}},5941:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceFoldersFeature=t.arrayDiff=void 0;const i=n(1980),r=n(9496),o=n(273);function s(e,t){if(void 0!==e)return e[t]}function a(e,t){return e.filter((e=>t.indexOf(e)<0))}t.arrayDiff=a,t.WorkspaceFoldersFeature=class{constructor(e){this._client=e,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return o.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){const t=r.workspace.workspaceFolders;this.initializeWithFolders(t),e.workspaceFolders=void 0===t?null:t.map((e=>this.asProtocol(e)))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){const t=this._client;t.onRequest(o.WorkspaceFoldersRequest.type,(e=>{const n=()=>{const e=r.workspace.workspaceFolders;return void 0===e?null:e.map((e=>this.asProtocol(e)))},i=t.middleware.workspace;return i&&i.workspaceFolders?i.workspaceFolders(e,n):n()}));const n=s(s(s(e,"workspace"),"workspaceFolders"),"changeNotifications");let a;"string"==typeof n?a=n:!0===n&&(a=i.generateUuid()),a&&this.register({id:a,registerOptions:void 0})}sendInitialEvent(e){let t;if(this._initialFolders&&e){const n=a(this._initialFolders,e),i=a(e,this._initialFolders);(i.length>0||n.length>0)&&(t=this.doSendEvent(i,n))}else this._initialFolders?t=this.doSendEvent([],this._initialFolders):e&&(t=this.doSendEvent(e,[]));void 0!==t&&t.catch((e=>{this._client.error(`Sending notification ${o.DidChangeWorkspaceFoldersNotification.type.method} failed`,e)}))}doSendEvent(e,t){let n={event:{added:e.map((e=>this.asProtocol(e))),removed:t.map((e=>this.asProtocol(e)))}};return this._client.sendNotification(o.DidChangeWorkspaceFoldersNotification.type,n)}register(e){let t=e.id,n=this._client,i=r.workspace.onDidChangeWorkspaceFolders((e=>{let t=e=>this.doSendEvent(e.added,e.removed),i=n.middleware.workspace;(i&&i.didChangeWorkspaceFolders?i.didChangeWorkspaceFolders(e,t):t(e)).catch((e=>{this._client.error(`Sending notification ${o.DidChangeWorkspaceFoldersNotification.type.method} failed`,e)}))}));this._listeners.set(t,i),this.sendInitialEvent(r.workspace.workspaceFolders)}unregister(e){let t=this._listeners.get(e);void 0!==t&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return void 0===e?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}}},3051:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceSymbolFeature=void 0;const i=n(9496),r=n(273),o=n(8909),s=n(2483),a=n(1980);class u extends o.WorkspaceFeature{constructor(e){super(e,r.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let t=(0,o.ensure)((0,o.ensure)(e,"workspace"),"symbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:s.SupportedSymbolKinds},t.tagSupport={valueSet:s.SupportedSymbolTags},t.resolveSupport={properties:["location.range"]}}initialize(e){e.workspaceSymbolProvider&&this.register({id:a.generateUuid(),registerOptions:!0===e.workspaceSymbolProvider?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){const t={provideWorkspaceSymbols:(e,t)=>{const n=this._client,i=(e,t)=>n.sendRequest(r.WorkspaceSymbolRequest.type,{query:e},t).then((e=>t.isCancellationRequested?null:n.protocol2CodeConverter.asSymbolInformations(e,t)),(e=>n.handleFailedRequest(r.WorkspaceSymbolRequest.type,t,e,null))),o=n.middleware;return o.provideWorkspaceSymbols?o.provideWorkspaceSymbols(e,t,i):i(e,t)},resolveWorkspaceSymbol:!0===e.resolveProvider?(e,t)=>{const n=this._client,i=(e,t)=>n.sendRequest(r.WorkspaceSymbolResolveRequest.type,n.code2ProtocolConverter.asWorkspaceSymbol(e),t).then((e=>t.isCancellationRequested?null:n.protocol2CodeConverter.asSymbolInformation(e)),(e=>n.handleFailedRequest(r.WorkspaceSymbolResolveRequest.type,t,e,null))),o=n.middleware;return o.resolveWorkspaceSymbol?o.resolveWorkspaceSymbol(e,t,i):i(e,t)}:void 0};return[i.languages.registerWorkspaceSymbolProvider(t),t]}}t.WorkspaceSymbolFeature=u},2850:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.SettingMonitor=t.LanguageClient=t.TransportKind=void 0;const o=n(2081),s=n(7147),a=n(1017),u=n(9496),c=n(9763),l=n(4384),d=n(794),p=n(6560),h=n(3959),m=n(5712);r(n(6560),t),r(n(5734),t);const g="^1.67.0";var f,y,D,C,v,S;!function(e){e[e.stdio=0]="stdio",e[e.ipc=1]="ipc",e[e.pipe=2]="pipe",e[e.socket=3]="socket"}(f=t.TransportKind||(t.TransportKind={})),function(e){e.isSocket=function(e){const t=e;return t&&t.kind===f.socket&&c.number(t.port)}}(y||(y={})),function(e){e.is=function(e){return c.string(e.command)}}(D||(D={})),function(e){e.is=function(e){return c.string(e.module)}}(C||(C={})),function(e){e.is=function(e){let t=e;return t&&void 0!==t.writer&&void 0!==t.reader}}(v||(v={})),function(e){e.is=function(e){let t=e;return t&&void 0!==t.process&&"boolean"==typeof t.detached}}(S||(S={}));class E extends l.BaseLanguageClient{constructor(e,t,n,i,r){let o,s,a,u,l;c.string(t)?(o=e,s=t,a=n,u=i,l=!!r):(o=e.toLowerCase(),s=e,a=t,u=n,l=i),void 0===l&&(l=!1),super(o,s,u),this._serverOptions=a,this._forceDebug=l,this._isInDebugMode=l;try{this.checkVersion()}catch(e){throw c.string(e.message)&&this.outputChannel.appendLine(e.message),e}}checkVersion(){const e=h(u.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${u.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!m(e,g))throw new Error(`The language client requires VS Code version ${g} but received version ${u.version}`)}get isInDebugMode(){return this._isInDebugMode}async restart(){await this.stop(),this.isInDebugMode?(await new Promise((e=>setTimeout(e,1e3))),await this.start()):await this.start()}stop(e=2e3){return super.stop(e).finally((()=>{if(this._serverProcess){const e=this._serverProcess;this._serverProcess=void 0,void 0!==this._isDetached&&this._isDetached||this.checkProcessDied(e),this._isDetached=void 0}}))}checkProcessDied(e){e&&void 0!==e.pid&&setTimeout((()=>{try{void 0!==e.pid&&(process.kill(e.pid,0),(0,d.terminate)(e))}catch(e){}}),2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(e){super.fillInitializeParams(e),null===e.processId&&(e.processId=process.pid)}createMessageTransports(e){function t(e,t){if(!e&&!t)return;const n=Object.create(null);return Object.keys(process.env).forEach((e=>n[e]=process.env[e])),t&&(n.ELECTRON_RUN_AS_NODE="1",n.ELECTRON_NO_ASAR="1"),e&&Object.keys(e).forEach((t=>n[t]=e[t])),n}const n=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],i=["--debug","--debug-brk","--inspect","--inspect-brk"];function r(e){if(null===e.stdin||null===e.stdout||null===e.stderr)throw new Error("Process created without stdio streams")}const s=this._serverOptions;if(c.func(s))return s().then((t=>{if(l.MessageTransports.is(t))return this._isDetached=!!t.detached,t;if(v.is(t))return this._isDetached=!!t.detached,{reader:new p.StreamMessageReader(t.reader),writer:new p.StreamMessageWriter(t.writer)};{let n;return S.is(t)?(n=t.process,this._isDetached=t.detached):(n=t,this._isDetached=!1),n.stderr.on("data",(t=>this.outputChannel.append(c.string(t)?t:t.toString(e)))),{reader:new p.StreamMessageReader(n.stdout),writer:new p.StreamMessageWriter(n.stdin)}}}));let a,u=s;return u.run||u.debug?this._forceDebug||function(){let e=process.execArgv;return!!e&&e.some((e=>n.some((t=>e.startsWith(t)))||i.some((t=>e===t))))}()?(a=u.debug,this._isInDebugMode=!0):(a=u.run,this._isInDebugMode=!1):a=s,this._getServerWorkingDir(a.options).then((n=>{if(C.is(a)&&a.module){let i=a,s=i.transport||f.stdio;if(!i.runtime){let a;return new Promise(((u,l)=>{const d=(i.args&&i.args.slice())??[];s===f.ipc?d.push("--node-ipc"):s===f.stdio?d.push("--stdio"):s===f.pipe?(a=(0,p.generateRandomPipeName)(),d.push(`--pipe=${a}`)):y.isSocket(s)&&d.push(`--socket=${s.port}`),d.push(`--clientProcessId=${process.pid.toString()}`);const h=i.options??Object.create(null);if(h.env=t(h.env,!0),h.execArgv=h.execArgv||[],h.cwd=n,h.silent=!0,s===f.ipc||s===f.stdio){const t=o.fork(i.module,d||[],h);r(t),this._serverProcess=t,t.stderr.on("data",(t=>this.outputChannel.append(c.string(t)?t:t.toString(e)))),s===f.ipc?(t.stdout.on("data",(t=>this.outputChannel.append(c.string(t)?t:t.toString(e)))),u({reader:new p.IPCMessageReader(this._serverProcess),writer:new p.IPCMessageWriter(this._serverProcess)})):u({reader:new p.StreamMessageReader(t.stdout),writer:new p.StreamMessageWriter(t.stdin)})}else s===f.pipe?(0,p.createClientPipeTransport)(a).then((t=>{const n=o.fork(i.module,d||[],h);r(n),this._serverProcess=n,n.stderr.on("data",(t=>this.outputChannel.append(c.string(t)?t:t.toString(e)))),n.stdout.on("data",(t=>this.outputChannel.append(c.string(t)?t:t.toString(e)))),t.onConnected().then((e=>{u({reader:e[0],writer:e[1]})}),l)}),l):y.isSocket(s)&&(0,p.createClientSocketTransport)(s.port).then((t=>{const n=o.fork(i.module,d||[],h);r(n),this._serverProcess=n,n.stderr.on("data",(t=>this.outputChannel.append(c.string(t)?t:t.toString(e)))),n.stdout.on("data",(t=>this.outputChannel.append(c.string(t)?t:t.toString(e)))),t.onConnected().then((e=>{u({reader:e[0],writer:e[1]})}),l)}),l)}))}{const r=[],a=i.options??Object.create(null);a.execArgv&&a.execArgv.forEach((e=>r.push(e))),r.push(i.module),i.args&&i.args.forEach((e=>r.push(e)));const u=Object.create(null);u.cwd=n,u.env=t(a.env,!1);const l=this._getRuntimePath(i.runtime,n);let d;if(s===f.ipc?(u.stdio=[null,null,null,"ipc"],r.push("--node-ipc")):s===f.stdio?r.push("--stdio"):s===f.pipe?(d=(0,p.generateRandomPipeName)(),r.push(`--pipe=${d}`)):y.isSocket(s)&&r.push(`--socket=${s.port}`),r.push(`--clientProcessId=${process.pid.toString()}`),s===f.ipc||s===f.stdio){const t=o.spawn(l,r,u);return t&&t.pid?(this._serverProcess=t,t.stderr.on("data",(t=>this.outputChannel.append(c.string(t)?t:t.toString(e)))),s===f.ipc?(t.stdout.on("data",(t=>this.outputChannel.append(c.string(t)?t:t.toString(e)))),Promise.resolve({reader:new p.IPCMessageReader(t),writer:new p.IPCMessageWriter(t)})):Promise.resolve({reader:new p.StreamMessageReader(t.stdout),writer:new p.StreamMessageWriter(t.stdin)})):b(t,`Launching server using runtime ${l} failed.`)}if(s===f.pipe)return(0,p.createClientPipeTransport)(d).then((t=>{const n=o.spawn(l,r,u);return n&&n.pid?(this._serverProcess=n,n.stderr.on("data",(t=>this.outputChannel.append(c.string(t)?t:t.toString(e)))),n.stdout.on("data",(t=>this.outputChannel.append(c.string(t)?t:t.toString(e)))),t.onConnected().then((e=>({reader:e[0],writer:e[1]})))):b(n,`Launching server using runtime ${l} failed.`)}));if(y.isSocket(s))return(0,p.createClientSocketTransport)(s.port).then((t=>{const n=o.spawn(l,r,u);return n&&n.pid?(this._serverProcess=n,n.stderr.on("data",(t=>this.outputChannel.append(c.string(t)?t:t.toString(e)))),n.stdout.on("data",(t=>this.outputChannel.append(c.string(t)?t:t.toString(e)))),t.onConnected().then((e=>({reader:e[0],writer:e[1]})))):b(n,`Launching server using runtime ${l} failed.`)}))}}else if(D.is(a)&&a.command){const t=a,i=void 0!==a.args?a.args.slice(0):[];let r;const s=a.transport;if(s===f.stdio)i.push("--stdio");else if(s===f.pipe)r=(0,p.generateRandomPipeName)(),i.push(`--pipe=${r}`);else if(y.isSocket(s))i.push(`--socket=${s.port}`);else if(s===f.ipc)throw new Error("Transport kind ipc is not support for command executable");const u=Object.assign({},t.options);if(u.cwd=u.cwd||n,void 0===s||s===f.stdio){const n=o.spawn(t.command,i,u);return n&&n.pid?(n.stderr.on("data",(t=>this.outputChannel.append(c.string(t)?t:t.toString(e)))),this._serverProcess=n,this._isDetached=!!u.detached,Promise.resolve({reader:new p.StreamMessageReader(n.stdout),writer:new p.StreamMessageWriter(n.stdin)})):b(n,`Launching server using command ${t.command} failed.`)}if(s===f.pipe)return(0,p.createClientPipeTransport)(r).then((n=>{const r=o.spawn(t.command,i,u);return r&&r.pid?(this._serverProcess=r,this._isDetached=!!u.detached,r.stderr.on("data",(t=>this.outputChannel.append(c.string(t)?t:t.toString(e)))),r.stdout.on("data",(t=>this.outputChannel.append(c.string(t)?t:t.toString(e)))),n.onConnected().then((e=>({reader:e[0],writer:e[1]})))):b(r,`Launching server using command ${t.command} failed.`)}));if(y.isSocket(s))return(0,p.createClientSocketTransport)(s.port).then((n=>{const r=o.spawn(t.command,i,u);return r&&r.pid?(this._serverProcess=r,this._isDetached=!!u.detached,r.stderr.on("data",(t=>this.outputChannel.append(c.string(t)?t:t.toString(e)))),r.stdout.on("data",(t=>this.outputChannel.append(c.string(t)?t:t.toString(e)))),n.onConnected().then((e=>({reader:e[0],writer:e[1]})))):b(r,`Launching server using command ${t.command} failed.`)}))}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(s,null,4)))}))}_getRuntimePath(e,t){if(a.isAbsolute(e))return e;const n=this._mainGetRootPath();if(void 0!==n){const t=a.join(n,e);if(s.existsSync(t))return t}if(void 0!==t){const n=a.join(t,e);if(s.existsSync(n))return n}return e}_mainGetRootPath(){let e=u.workspace.workspaceFolders;if(!e||0===e.length)return;let t=e[0];return"file"===t.uri.scheme?t.uri.fsPath:void 0}_getServerWorkingDir(e){let t=e&&e.cwd;return t||(t=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),t?new Promise((e=>{s.lstat(t,((n,i)=>{e(!n&&i.isDirectory()?t:void 0)}))})):Promise.resolve(void 0)}getLocale(){const e=process.env.VSCODE_NLS_CONFIG;if(void 0===e)return"en";let t;try{t=JSON.parse(e)}catch(e){}return void 0===t||"string"!=typeof t.locale?"en":t.locale}}function b(e,t){return null===e?Promise.reject(t):new Promise(((n,i)=>{e.on("error",(e=>{i(`${t} ${e}`)})),setImmediate((()=>i(t)))}))}t.LanguageClient=E,t.SettingMonitor=class{constructor(e,t){this._client=e,this._setting=t,this._listeners=[]}start(){return u.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new u.Disposable((()=>{this._client.needsStop()&&this._client.stop()}))}onDidChangeConfiguration(){let e=this._setting.indexOf("."),t=e>=0?this._setting.substr(0,e):this._setting,n=e>=0?this._setting.substr(e+1):void 0,i=n?u.workspace.getConfiguration(t).get(n,!1):u.workspace.getConfiguration(t);i&&this._client.needsStart()?this._client.start().catch((e=>this._client.error("Start failed after configuration change",e,"force"))):!i&&this._client.needsStop()&&this._client.stop().catch((e=>this._client.error("Stop failed after configuration change",e,"force")))}}},794:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.terminate=void 0;const i=n(2081),r=n(1017),o="win32"===process.platform,s="darwin"===process.platform,a="linux"===process.platform;t.terminate=function(e,t){if(o)try{let n={stdio:["pipe","pipe","ignore"]};return t&&(n.cwd=t),i.execFileSync("taskkill",["/T","/F","/PID",e.pid.toString()],n),!0}catch(e){return!1}else{if(!a&&!s)return e.kill("SIGKILL"),!0;try{var n=(0,r.join)(__dirname,"terminateProcess.sh");return!i.spawnSync(n,[e.pid.toString()]).error}catch(e){return!1}}}},2847:(e,t,n)=>{"use strict";e.exports=n(2850)},1661:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.LSPErrorCodes=t.createProtocolConnection=void 0,r(n(4389),t),r(n(1674),t),r(n(6140),t),r(n(542),t);var o,s=n(3767);Object.defineProperty(t,"createProtocolConnection",{enumerable:!0,get:function(){return s.createProtocolConnection}}),(o=t.LSPErrorCodes||(t.LSPErrorCodes={})).lspReservedErrorRangeStart=-32899,o.RequestFailed=-32803,o.ServerCancelled=-32802,o.ContentModified=-32801,o.RequestCancelled=-32800,o.lspReservedErrorRangeEnd=-32800},3767:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createProtocolConnection=void 0;const i=n(4389);t.createProtocolConnection=function(e,t,n,r){return i.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,i.createMessageConnection)(e,t,n,r)}},6140:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProtocolNotificationType=t.ProtocolNotificationType0=t.ProtocolRequestType=t.ProtocolRequestType0=t.RegistrationType=t.MessageDirection=void 0;const i=n(4389);var r;(r=t.MessageDirection||(t.MessageDirection={})).clientToServer="clientToServer",r.serverToClient="serverToClient",r.both="both",t.RegistrationType=class{constructor(e){this.method=e}};class o extends i.RequestType0{constructor(e){super(e)}}t.ProtocolRequestType0=o;class s extends i.RequestType{constructor(e){super(e,i.ParameterStructures.byName)}}t.ProtocolRequestType=s;class a extends i.NotificationType0{constructor(e){super(e)}}t.ProtocolNotificationType0=a;class u extends i.NotificationType{constructor(e){super(e,i.ParameterStructures.byName)}}t.ProtocolNotificationType=u},2918:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallHierarchyOutgoingCallsRequest=t.CallHierarchyIncomingCallsRequest=t.CallHierarchyPrepareRequest=void 0;const i=n(6140);var r,o,s;(s=t.CallHierarchyPrepareRequest||(t.CallHierarchyPrepareRequest={})).method="textDocument/prepareCallHierarchy",s.messageDirection=i.MessageDirection.clientToServer,s.type=new i.ProtocolRequestType(s.method),(o=t.CallHierarchyIncomingCallsRequest||(t.CallHierarchyIncomingCallsRequest={})).method="callHierarchy/incomingCalls",o.messageDirection=i.MessageDirection.clientToServer,o.type=new i.ProtocolRequestType(o.method),(r=t.CallHierarchyOutgoingCallsRequest||(t.CallHierarchyOutgoingCallsRequest={})).method="callHierarchy/outgoingCalls",r.messageDirection=i.MessageDirection.clientToServer,r.type=new i.ProtocolRequestType(r.method)},9891:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorPresentationRequest=t.DocumentColorRequest=void 0;const i=n(6140);var r,o;(o=t.DocumentColorRequest||(t.DocumentColorRequest={})).method="textDocument/documentColor",o.messageDirection=i.MessageDirection.clientToServer,o.type=new i.ProtocolRequestType(o.method),(r=t.ColorPresentationRequest||(t.ColorPresentationRequest={})).method="textDocument/colorPresentation",r.messageDirection=i.MessageDirection.clientToServer,r.type=new i.ProtocolRequestType(r.method)},5934:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationRequest=void 0;const i=n(6140);var r;(r=t.ConfigurationRequest||(t.ConfigurationRequest={})).method="workspace/configuration",r.messageDirection=i.MessageDirection.serverToClient,r.type=new i.ProtocolRequestType(r.method)},764:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeclarationRequest=void 0;const i=n(6140);var r;(r=t.DeclarationRequest||(t.DeclarationRequest={})).method="textDocument/declaration",r.messageDirection=i.MessageDirection.clientToServer,r.type=new i.ProtocolRequestType(r.method)},9824:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagnosticRefreshRequest=t.WorkspaceDiagnosticRequest=t.DocumentDiagnosticRequest=t.DocumentDiagnosticReportKind=t.DiagnosticServerCancellationData=void 0;const i=n(4389),r=n(9533),o=n(6140);var s,a,u,c;(t.DiagnosticServerCancellationData||(t.DiagnosticServerCancellationData={})).is=function(e){const t=e;return t&&r.boolean(t.retriggerRequest)},(c=t.DocumentDiagnosticReportKind||(t.DocumentDiagnosticReportKind={})).Full="full",c.Unchanged="unchanged",(u=t.DocumentDiagnosticRequest||(t.DocumentDiagnosticRequest={})).method="textDocument/diagnostic",u.messageDirection=o.MessageDirection.clientToServer,u.type=new o.ProtocolRequestType(u.method),u.partialResult=new i.ProgressType,(a=t.WorkspaceDiagnosticRequest||(t.WorkspaceDiagnosticRequest={})).method="workspace/diagnostic",a.messageDirection=o.MessageDirection.clientToServer,a.type=new o.ProtocolRequestType(a.method),a.partialResult=new i.ProgressType,(s=t.DiagnosticRefreshRequest||(t.DiagnosticRefreshRequest={})).method="workspace/diagnostic/refresh",s.messageDirection=o.MessageDirection.clientToServer,s.type=new o.ProtocolRequestType0(s.method)},7846:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WillDeleteFilesRequest=t.DidDeleteFilesNotification=t.DidRenameFilesNotification=t.WillRenameFilesRequest=t.DidCreateFilesNotification=t.WillCreateFilesRequest=t.FileOperationPatternKind=void 0;const i=n(6140);var r,o,s,a,u,c,l;(l=t.FileOperationPatternKind||(t.FileOperationPatternKind={})).file="file",l.folder="folder",(c=t.WillCreateFilesRequest||(t.WillCreateFilesRequest={})).method="workspace/willCreateFiles",c.messageDirection=i.MessageDirection.clientToServer,c.type=new i.ProtocolRequestType(c.method),(u=t.DidCreateFilesNotification||(t.DidCreateFilesNotification={})).method="workspace/didCreateFiles",u.messageDirection=i.MessageDirection.clientToServer,u.type=new i.ProtocolNotificationType(u.method),(a=t.WillRenameFilesRequest||(t.WillRenameFilesRequest={})).method="workspace/willRenameFiles",a.messageDirection=i.MessageDirection.clientToServer,a.type=new i.ProtocolRequestType(a.method),(s=t.DidRenameFilesNotification||(t.DidRenameFilesNotification={})).method="workspace/didRenameFiles",s.messageDirection=i.MessageDirection.clientToServer,s.type=new i.ProtocolNotificationType(s.method),(o=t.DidDeleteFilesNotification||(t.DidDeleteFilesNotification={})).method="workspace/didDeleteFiles",o.messageDirection=i.MessageDirection.clientToServer,o.type=new i.ProtocolNotificationType(o.method),(r=t.WillDeleteFilesRequest||(t.WillDeleteFilesRequest={})).method="workspace/willDeleteFiles",r.messageDirection=i.MessageDirection.clientToServer,r.type=new i.ProtocolRequestType(r.method)},3394:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FoldingRangeRequest=void 0;const i=n(6140);var r;(r=t.FoldingRangeRequest||(t.FoldingRangeRequest={})).method="textDocument/foldingRange",r.messageDirection=i.MessageDirection.clientToServer,r.type=new i.ProtocolRequestType(r.method)},2122:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImplementationRequest=void 0;const i=n(6140);var r;(r=t.ImplementationRequest||(t.ImplementationRequest={})).method="textDocument/implementation",r.messageDirection=i.MessageDirection.clientToServer,r.type=new i.ProtocolRequestType(r.method)},9999:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InlayHintRefreshRequest=t.InlayHintResolveRequest=t.InlayHintRequest=void 0;const i=n(6140);var r,o,s;(s=t.InlayHintRequest||(t.InlayHintRequest={})).method="textDocument/inlayHint",s.messageDirection=i.MessageDirection.clientToServer,s.type=new i.ProtocolRequestType(s.method),(o=t.InlayHintResolveRequest||(t.InlayHintResolveRequest={})).method="inlayHint/resolve",o.messageDirection=i.MessageDirection.clientToServer,o.type=new i.ProtocolRequestType(o.method),(r=t.InlayHintRefreshRequest||(t.InlayHintRefreshRequest={})).method="workspace/inlayHint/refresh",r.messageDirection=i.MessageDirection.clientToServer,r.type=new i.ProtocolRequestType0(r.method)},5246:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InlineValueRefreshRequest=t.InlineValueRequest=void 0;const i=n(6140);var r,o;(o=t.InlineValueRequest||(t.InlineValueRequest={})).method="textDocument/inlineValue",o.messageDirection=i.MessageDirection.clientToServer,o.type=new i.ProtocolRequestType(o.method),(r=t.InlineValueRefreshRequest||(t.InlineValueRefreshRequest={})).method="workspace/inlineValue/refresh",r.messageDirection=i.MessageDirection.clientToServer,r.type=new i.ProtocolRequestType0(r.method)},542:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceSymbolRequest=t.CodeActionResolveRequest=t.CodeActionRequest=t.DocumentSymbolRequest=t.DocumentHighlightRequest=t.ReferencesRequest=t.DefinitionRequest=t.SignatureHelpRequest=t.SignatureHelpTriggerKind=t.HoverRequest=t.CompletionResolveRequest=t.CompletionRequest=t.CompletionTriggerKind=t.PublishDiagnosticsNotification=t.WatchKind=t.RelativePattern=t.FileChangeType=t.DidChangeWatchedFilesNotification=t.WillSaveTextDocumentWaitUntilRequest=t.WillSaveTextDocumentNotification=t.TextDocumentSaveReason=t.DidSaveTextDocumentNotification=t.DidCloseTextDocumentNotification=t.DidChangeTextDocumentNotification=t.TextDocumentContentChangeEvent=t.DidOpenTextDocumentNotification=t.TextDocumentSyncKind=t.TelemetryEventNotification=t.LogMessageNotification=t.ShowMessageRequest=t.ShowMessageNotification=t.MessageType=t.DidChangeConfigurationNotification=t.ExitNotification=t.ShutdownRequest=t.InitializedNotification=t.InitializeErrorCodes=t.InitializeRequest=t.WorkDoneProgressOptions=t.TextDocumentRegistrationOptions=t.StaticRegistrationOptions=t.PositionEncodingKind=t.FailureHandlingKind=t.ResourceOperationKind=t.UnregistrationRequest=t.RegistrationRequest=t.DocumentSelector=t.NotebookCellTextDocumentFilter=t.NotebookDocumentFilter=t.TextDocumentFilter=void 0,t.TypeHierarchySubtypesRequest=t.TypeHierarchyPrepareRequest=t.MonikerRequest=t.MonikerKind=t.UniquenessLevel=t.WillDeleteFilesRequest=t.DidDeleteFilesNotification=t.WillRenameFilesRequest=t.DidRenameFilesNotification=t.WillCreateFilesRequest=t.DidCreateFilesNotification=t.FileOperationPatternKind=t.LinkedEditingRangeRequest=t.ShowDocumentRequest=t.SemanticTokensRegistrationType=t.SemanticTokensRefreshRequest=t.SemanticTokensRangeRequest=t.SemanticTokensDeltaRequest=t.SemanticTokensRequest=t.TokenFormat=t.CallHierarchyPrepareRequest=t.CallHierarchyOutgoingCallsRequest=t.CallHierarchyIncomingCallsRequest=t.WorkDoneProgressCancelNotification=t.WorkDoneProgressCreateRequest=t.WorkDoneProgress=t.SelectionRangeRequest=t.DeclarationRequest=t.FoldingRangeRequest=t.ColorPresentationRequest=t.DocumentColorRequest=t.ConfigurationRequest=t.DidChangeWorkspaceFoldersNotification=t.WorkspaceFoldersRequest=t.TypeDefinitionRequest=t.ImplementationRequest=t.ApplyWorkspaceEditRequest=t.ExecuteCommandRequest=t.PrepareRenameRequest=t.RenameRequest=t.PrepareSupportDefaultBehavior=t.DocumentOnTypeFormattingRequest=t.DocumentRangeFormattingRequest=t.DocumentFormattingRequest=t.DocumentLinkResolveRequest=t.DocumentLinkRequest=t.CodeLensRefreshRequest=t.CodeLensResolveRequest=t.CodeLensRequest=t.WorkspaceSymbolResolveRequest=void 0,t.DidCloseNotebookDocumentNotification=t.DidSaveNotebookDocumentNotification=t.DidChangeNotebookDocumentNotification=t.NotebookCellArrayChange=t.DidOpenNotebookDocumentNotification=t.NotebookDocumentSyncRegistrationType=t.NotebookDocument=t.NotebookCell=t.ExecutionSummary=t.NotebookCellKind=t.DiagnosticRefreshRequest=t.WorkspaceDiagnosticRequest=t.DocumentDiagnosticRequest=t.DocumentDiagnosticReportKind=t.DiagnosticServerCancellationData=t.InlayHintRefreshRequest=t.InlayHintResolveRequest=t.InlayHintRequest=t.InlineValueRefreshRequest=t.InlineValueRequest=t.TypeHierarchySupertypesRequest=void 0;const i=n(6140),r=n(1674),o=n(9533),s=n(2122);Object.defineProperty(t,"ImplementationRequest",{enumerable:!0,get:function(){return s.ImplementationRequest}});const a=n(1589);Object.defineProperty(t,"TypeDefinitionRequest",{enumerable:!0,get:function(){return a.TypeDefinitionRequest}});const u=n(8744);Object.defineProperty(t,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return u.WorkspaceFoldersRequest}}),Object.defineProperty(t,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return u.DidChangeWorkspaceFoldersNotification}});const c=n(5934);Object.defineProperty(t,"ConfigurationRequest",{enumerable:!0,get:function(){return c.ConfigurationRequest}});const l=n(9891);Object.defineProperty(t,"DocumentColorRequest",{enumerable:!0,get:function(){return l.DocumentColorRequest}}),Object.defineProperty(t,"ColorPresentationRequest",{enumerable:!0,get:function(){return l.ColorPresentationRequest}});const d=n(3394);Object.defineProperty(t,"FoldingRangeRequest",{enumerable:!0,get:function(){return d.FoldingRangeRequest}});const p=n(764);Object.defineProperty(t,"DeclarationRequest",{enumerable:!0,get:function(){return p.DeclarationRequest}});const h=n(5206);Object.defineProperty(t,"SelectionRangeRequest",{enumerable:!0,get:function(){return h.SelectionRangeRequest}});const m=n(1862);Object.defineProperty(t,"WorkDoneProgress",{enumerable:!0,get:function(){return m.WorkDoneProgress}}),Object.defineProperty(t,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return m.WorkDoneProgressCreateRequest}}),Object.defineProperty(t,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return m.WorkDoneProgressCancelNotification}});const g=n(2918);Object.defineProperty(t,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return g.CallHierarchyIncomingCallsRequest}}),Object.defineProperty(t,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return g.CallHierarchyOutgoingCallsRequest}}),Object.defineProperty(t,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return g.CallHierarchyPrepareRequest}});const f=n(9434);Object.defineProperty(t,"TokenFormat",{enumerable:!0,get:function(){return f.TokenFormat}}),Object.defineProperty(t,"SemanticTokensRequest",{enumerable:!0,get:function(){return f.SemanticTokensRequest}}),Object.defineProperty(t,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return f.SemanticTokensDeltaRequest}}),Object.defineProperty(t,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return f.SemanticTokensRangeRequest}}),Object.defineProperty(t,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return f.SemanticTokensRefreshRequest}}),Object.defineProperty(t,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return f.SemanticTokensRegistrationType}});const y=n(5726);Object.defineProperty(t,"ShowDocumentRequest",{enumerable:!0,get:function(){return y.ShowDocumentRequest}});const D=n(6305);Object.defineProperty(t,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return D.LinkedEditingRangeRequest}});const C=n(7846);Object.defineProperty(t,"FileOperationPatternKind",{enumerable:!0,get:function(){return C.FileOperationPatternKind}}),Object.defineProperty(t,"DidCreateFilesNotification",{enumerable:!0,get:function(){return C.DidCreateFilesNotification}}),Object.defineProperty(t,"WillCreateFilesRequest",{enumerable:!0,get:function(){return C.WillCreateFilesRequest}}),Object.defineProperty(t,"DidRenameFilesNotification",{enumerable:!0,get:function(){return C.DidRenameFilesNotification}}),Object.defineProperty(t,"WillRenameFilesRequest",{enumerable:!0,get:function(){return C.WillRenameFilesRequest}}),Object.defineProperty(t,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return C.DidDeleteFilesNotification}}),Object.defineProperty(t,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return C.WillDeleteFilesRequest}});const v=n(3443);Object.defineProperty(t,"UniquenessLevel",{enumerable:!0,get:function(){return v.UniquenessLevel}}),Object.defineProperty(t,"MonikerKind",{enumerable:!0,get:function(){return v.MonikerKind}}),Object.defineProperty(t,"MonikerRequest",{enumerable:!0,get:function(){return v.MonikerRequest}});const S=n(3693);Object.defineProperty(t,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return S.TypeHierarchyPrepareRequest}}),Object.defineProperty(t,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return S.TypeHierarchySubtypesRequest}}),Object.defineProperty(t,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return S.TypeHierarchySupertypesRequest}});const E=n(5246);Object.defineProperty(t,"InlineValueRequest",{enumerable:!0,get:function(){return E.InlineValueRequest}}),Object.defineProperty(t,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return E.InlineValueRefreshRequest}});const b=n(9999);Object.defineProperty(t,"InlayHintRequest",{enumerable:!0,get:function(){return b.InlayHintRequest}}),Object.defineProperty(t,"InlayHintResolveRequest",{enumerable:!0,get:function(){return b.InlayHintResolveRequest}}),Object.defineProperty(t,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return b.InlayHintRefreshRequest}});const T=n(9824);Object.defineProperty(t,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return T.DiagnosticServerCancellationData}}),Object.defineProperty(t,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return T.DocumentDiagnosticReportKind}}),Object.defineProperty(t,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return T.DocumentDiagnosticRequest}}),Object.defineProperty(t,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return T.WorkspaceDiagnosticRequest}}),Object.defineProperty(t,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return T.DiagnosticRefreshRequest}});const A=n(7169);var F,R,w,x,k,_,N,P,I,q,O,L,B,M,j,H,W,$,U,K,V,z,G,Q,X,J,Y,Z,ee,te,ne,ie,re,oe,se,ae,ue,ce,le,de,pe,he,me,ge,fe,ye,De,Ce,ve,Se,Ee,be,Te,Ae,Fe,Re,we,xe,ke;Object.defineProperty(t,"NotebookCellKind",{enumerable:!0,get:function(){return A.NotebookCellKind}}),Object.defineProperty(t,"ExecutionSummary",{enumerable:!0,get:function(){return A.ExecutionSummary}}),Object.defineProperty(t,"NotebookCell",{enumerable:!0,get:function(){return A.NotebookCell}}),Object.defineProperty(t,"NotebookDocument",{enumerable:!0,get:function(){return A.NotebookDocument}}),Object.defineProperty(t,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return A.NotebookDocumentSyncRegistrationType}}),Object.defineProperty(t,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return A.DidOpenNotebookDocumentNotification}}),Object.defineProperty(t,"NotebookCellArrayChange",{enumerable:!0,get:function(){return A.NotebookCellArrayChange}}),Object.defineProperty(t,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return A.DidChangeNotebookDocumentNotification}}),Object.defineProperty(t,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return A.DidSaveNotebookDocumentNotification}}),Object.defineProperty(t,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return A.DidCloseNotebookDocumentNotification}}),function(e){e.is=function(e){const t=e;return o.string(t.language)||o.string(t.scheme)||o.string(t.pattern)}}(F=t.TextDocumentFilter||(t.TextDocumentFilter={})),function(e){e.is=function(e){const t=e;return o.objectLiteral(t)&&(o.string(t.notebookType)||o.string(t.scheme)||o.string(t.pattern))}}(R=t.NotebookDocumentFilter||(t.NotebookDocumentFilter={})),function(e){e.is=function(e){const t=e;return o.objectLiteral(t)&&(o.string(t.notebook)||R.is(t.notebook))&&(void 0===t.language||o.string(t.language))}}(w=t.NotebookCellTextDocumentFilter||(t.NotebookCellTextDocumentFilter={})),function(e){e.is=function(e){if(!Array.isArray(e))return!1;for(let t of e)if(!o.string(t)&&!F.is(t)&&!w.is(t))return!1;return!0}}(x=t.DocumentSelector||(t.DocumentSelector={})),(ke=t.RegistrationRequest||(t.RegistrationRequest={})).method="client/registerCapability",ke.messageDirection=i.MessageDirection.serverToClient,ke.type=new i.ProtocolRequestType(ke.method),(xe=t.UnregistrationRequest||(t.UnregistrationRequest={})).method="client/unregisterCapability",xe.messageDirection=i.MessageDirection.serverToClient,xe.type=new i.ProtocolRequestType(xe.method),(we=t.ResourceOperationKind||(t.ResourceOperationKind={})).Create="create",we.Rename="rename",we.Delete="delete",(Re=t.FailureHandlingKind||(t.FailureHandlingKind={})).Abort="abort",Re.Transactional="transactional",Re.TextOnlyTransactional="textOnlyTransactional",Re.Undo="undo",(Fe=t.PositionEncodingKind||(t.PositionEncodingKind={})).UTF8="utf-8",Fe.UTF16="utf-16",Fe.UTF32="utf-32",(t.StaticRegistrationOptions||(t.StaticRegistrationOptions={})).hasId=function(e){const t=e;return t&&o.string(t.id)&&t.id.length>0},(t.TextDocumentRegistrationOptions||(t.TextDocumentRegistrationOptions={})).is=function(e){const t=e;return t&&(null===t.documentSelector||x.is(t.documentSelector))},(Ae=t.WorkDoneProgressOptions||(t.WorkDoneProgressOptions={})).is=function(e){const t=e;return o.objectLiteral(t)&&(void 0===t.workDoneProgress||o.boolean(t.workDoneProgress))},Ae.hasWorkDoneProgress=function(e){const t=e;return t&&o.boolean(t.workDoneProgress)},(Te=t.InitializeRequest||(t.InitializeRequest={})).method="initialize",Te.messageDirection=i.MessageDirection.clientToServer,Te.type=new i.ProtocolRequestType(Te.method),(t.InitializeErrorCodes||(t.InitializeErrorCodes={})).unknownProtocolVersion=1,(be=t.InitializedNotification||(t.InitializedNotification={})).method="initialized",be.messageDirection=i.MessageDirection.clientToServer,be.type=new i.ProtocolNotificationType(be.method),(Ee=t.ShutdownRequest||(t.ShutdownRequest={})).method="shutdown",Ee.messageDirection=i.MessageDirection.clientToServer,Ee.type=new i.ProtocolRequestType0(Ee.method),(Se=t.ExitNotification||(t.ExitNotification={})).method="exit",Se.messageDirection=i.MessageDirection.clientToServer,Se.type=new i.ProtocolNotificationType0(Se.method),(ve=t.DidChangeConfigurationNotification||(t.DidChangeConfigurationNotification={})).method="workspace/didChangeConfiguration",ve.messageDirection=i.MessageDirection.clientToServer,ve.type=new i.ProtocolNotificationType(ve.method),(Ce=t.MessageType||(t.MessageType={})).Error=1,Ce.Warning=2,Ce.Info=3,Ce.Log=4,(De=t.ShowMessageNotification||(t.ShowMessageNotification={})).method="window/showMessage",De.messageDirection=i.MessageDirection.serverToClient,De.type=new i.ProtocolNotificationType(De.method),(ye=t.ShowMessageRequest||(t.ShowMessageRequest={})).method="window/showMessageRequest",ye.messageDirection=i.MessageDirection.serverToClient,ye.type=new i.ProtocolRequestType(ye.method),(fe=t.LogMessageNotification||(t.LogMessageNotification={})).method="window/logMessage",fe.messageDirection=i.MessageDirection.serverToClient,fe.type=new i.ProtocolNotificationType(fe.method),(ge=t.TelemetryEventNotification||(t.TelemetryEventNotification={})).method="telemetry/event",ge.messageDirection=i.MessageDirection.serverToClient,ge.type=new i.ProtocolNotificationType(ge.method),(me=t.TextDocumentSyncKind||(t.TextDocumentSyncKind={})).None=0,me.Full=1,me.Incremental=2,(he=t.DidOpenTextDocumentNotification||(t.DidOpenTextDocumentNotification={})).method="textDocument/didOpen",he.messageDirection=i.MessageDirection.clientToServer,he.type=new i.ProtocolNotificationType(he.method),(pe=t.TextDocumentContentChangeEvent||(t.TextDocumentContentChangeEvent={})).isIncremental=function(e){let t=e;return null!=t&&"string"==typeof t.text&&void 0!==t.range&&(void 0===t.rangeLength||"number"==typeof t.rangeLength)},pe.isFull=function(e){let t=e;return null!=t&&"string"==typeof t.text&&void 0===t.range&&void 0===t.rangeLength},(de=t.DidChangeTextDocumentNotification||(t.DidChangeTextDocumentNotification={})).method="textDocument/didChange",de.messageDirection=i.MessageDirection.clientToServer,de.type=new i.ProtocolNotificationType(de.method),(le=t.DidCloseTextDocumentNotification||(t.DidCloseTextDocumentNotification={})).method="textDocument/didClose",le.messageDirection=i.MessageDirection.clientToServer,le.type=new i.ProtocolNotificationType(le.method),(ce=t.DidSaveTextDocumentNotification||(t.DidSaveTextDocumentNotification={})).method="textDocument/didSave",ce.messageDirection=i.MessageDirection.clientToServer,ce.type=new i.ProtocolNotificationType(ce.method),(ue=t.TextDocumentSaveReason||(t.TextDocumentSaveReason={})).Manual=1,ue.AfterDelay=2,ue.FocusOut=3,(ae=t.WillSaveTextDocumentNotification||(t.WillSaveTextDocumentNotification={})).method="textDocument/willSave",ae.messageDirection=i.MessageDirection.clientToServer,ae.type=new i.ProtocolNotificationType(ae.method),(se=t.WillSaveTextDocumentWaitUntilRequest||(t.WillSaveTextDocumentWaitUntilRequest={})).method="textDocument/willSaveWaitUntil",se.messageDirection=i.MessageDirection.clientToServer,se.type=new i.ProtocolRequestType(se.method),(oe=t.DidChangeWatchedFilesNotification||(t.DidChangeWatchedFilesNotification={})).method="workspace/didChangeWatchedFiles",oe.messageDirection=i.MessageDirection.clientToServer,oe.type=new i.ProtocolNotificationType(oe.method),(re=t.FileChangeType||(t.FileChangeType={})).Created=1,re.Changed=2,re.Deleted=3,(t.RelativePattern||(t.RelativePattern={})).is=function(e){const t=e;return o.objectLiteral(t)&&(r.URI.is(t.baseUri)||r.WorkspaceFolder.is(t.baseUri))&&o.string(t.pattern)},(ie=t.WatchKind||(t.WatchKind={})).Create=1,ie.Change=2,ie.Delete=4,(ne=t.PublishDiagnosticsNotification||(t.PublishDiagnosticsNotification={})).method="textDocument/publishDiagnostics",ne.messageDirection=i.MessageDirection.serverToClient,ne.type=new i.ProtocolNotificationType(ne.method),(te=t.CompletionTriggerKind||(t.CompletionTriggerKind={})).Invoked=1,te.TriggerCharacter=2,te.TriggerForIncompleteCompletions=3,(ee=t.CompletionRequest||(t.CompletionRequest={})).method="textDocument/completion",ee.messageDirection=i.MessageDirection.clientToServer,ee.type=new i.ProtocolRequestType(ee.method),(Z=t.CompletionResolveRequest||(t.CompletionResolveRequest={})).method="completionItem/resolve",Z.messageDirection=i.MessageDirection.clientToServer,Z.type=new i.ProtocolRequestType(Z.method),(Y=t.HoverRequest||(t.HoverRequest={})).method="textDocument/hover",Y.messageDirection=i.MessageDirection.clientToServer,Y.type=new i.ProtocolRequestType(Y.method),(J=t.SignatureHelpTriggerKind||(t.SignatureHelpTriggerKind={})).Invoked=1,J.TriggerCharacter=2,J.ContentChange=3,(X=t.SignatureHelpRequest||(t.SignatureHelpRequest={})).method="textDocument/signatureHelp",X.messageDirection=i.MessageDirection.clientToServer,X.type=new i.ProtocolRequestType(X.method),(Q=t.DefinitionRequest||(t.DefinitionRequest={})).method="textDocument/definition",Q.messageDirection=i.MessageDirection.clientToServer,Q.type=new i.ProtocolRequestType(Q.method),(G=t.ReferencesRequest||(t.ReferencesRequest={})).method="textDocument/references",G.messageDirection=i.MessageDirection.clientToServer,G.type=new i.ProtocolRequestType(G.method),(z=t.DocumentHighlightRequest||(t.DocumentHighlightRequest={})).method="textDocument/documentHighlight",z.messageDirection=i.MessageDirection.clientToServer,z.type=new i.ProtocolRequestType(z.method),(V=t.DocumentSymbolRequest||(t.DocumentSymbolRequest={})).method="textDocument/documentSymbol",V.messageDirection=i.MessageDirection.clientToServer,V.type=new i.ProtocolRequestType(V.method),(K=t.CodeActionRequest||(t.CodeActionRequest={})).method="textDocument/codeAction",K.messageDirection=i.MessageDirection.clientToServer,K.type=new i.ProtocolRequestType(K.method),(U=t.CodeActionResolveRequest||(t.CodeActionResolveRequest={})).method="codeAction/resolve",U.messageDirection=i.MessageDirection.clientToServer,U.type=new i.ProtocolRequestType(U.method),($=t.WorkspaceSymbolRequest||(t.WorkspaceSymbolRequest={})).method="workspace/symbol",$.messageDirection=i.MessageDirection.clientToServer,$.type=new i.ProtocolRequestType($.method),(W=t.WorkspaceSymbolResolveRequest||(t.WorkspaceSymbolResolveRequest={})).method="workspaceSymbol/resolve",W.messageDirection=i.MessageDirection.clientToServer,W.type=new i.ProtocolRequestType(W.method),(H=t.CodeLensRequest||(t.CodeLensRequest={})).method="textDocument/codeLens",H.messageDirection=i.MessageDirection.clientToServer,H.type=new i.ProtocolRequestType(H.method),(j=t.CodeLensResolveRequest||(t.CodeLensResolveRequest={})).method="codeLens/resolve",j.messageDirection=i.MessageDirection.clientToServer,j.type=new i.ProtocolRequestType(j.method),(M=t.CodeLensRefreshRequest||(t.CodeLensRefreshRequest={})).method="workspace/codeLens/refresh",M.messageDirection=i.MessageDirection.serverToClient,M.type=new i.ProtocolRequestType0(M.method),(B=t.DocumentLinkRequest||(t.DocumentLinkRequest={})).method="textDocument/documentLink",B.messageDirection=i.MessageDirection.clientToServer,B.type=new i.ProtocolRequestType(B.method),(L=t.DocumentLinkResolveRequest||(t.DocumentLinkResolveRequest={})).method="documentLink/resolve",L.messageDirection=i.MessageDirection.clientToServer,L.type=new i.ProtocolRequestType(L.method),(O=t.DocumentFormattingRequest||(t.DocumentFormattingRequest={})).method="textDocument/formatting",O.messageDirection=i.MessageDirection.clientToServer,O.type=new i.ProtocolRequestType(O.method),(q=t.DocumentRangeFormattingRequest||(t.DocumentRangeFormattingRequest={})).method="textDocument/rangeFormatting",q.messageDirection=i.MessageDirection.clientToServer,q.type=new i.ProtocolRequestType(q.method),(I=t.DocumentOnTypeFormattingRequest||(t.DocumentOnTypeFormattingRequest={})).method="textDocument/onTypeFormatting",I.messageDirection=i.MessageDirection.clientToServer,I.type=new i.ProtocolRequestType(I.method),(t.PrepareSupportDefaultBehavior||(t.PrepareSupportDefaultBehavior={})).Identifier=1,(P=t.RenameRequest||(t.RenameRequest={})).method="textDocument/rename",P.messageDirection=i.MessageDirection.clientToServer,P.type=new i.ProtocolRequestType(P.method),(N=t.PrepareRenameRequest||(t.PrepareRenameRequest={})).method="textDocument/prepareRename",N.messageDirection=i.MessageDirection.clientToServer,N.type=new i.ProtocolRequestType(N.method),(_=t.ExecuteCommandRequest||(t.ExecuteCommandRequest={})).method="workspace/executeCommand",_.messageDirection=i.MessageDirection.clientToServer,_.type=new i.ProtocolRequestType(_.method),(k=t.ApplyWorkspaceEditRequest||(t.ApplyWorkspaceEditRequest={})).method="workspace/applyEdit",k.messageDirection=i.MessageDirection.serverToClient,k.type=new i.ProtocolRequestType("workspace/applyEdit")},6305:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedEditingRangeRequest=void 0;const i=n(6140);var r;(r=t.LinkedEditingRangeRequest||(t.LinkedEditingRangeRequest={})).method="textDocument/linkedEditingRange",r.messageDirection=i.MessageDirection.clientToServer,r.type=new i.ProtocolRequestType(r.method)},3443:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MonikerRequest=t.MonikerKind=t.UniquenessLevel=void 0;const i=n(6140);var r,o,s;(s=t.UniquenessLevel||(t.UniquenessLevel={})).document="document",s.project="project",s.group="group",s.scheme="scheme",s.global="global",(o=t.MonikerKind||(t.MonikerKind={})).$import="import",o.$export="export",o.local="local",(r=t.MonikerRequest||(t.MonikerRequest={})).method="textDocument/moniker",r.messageDirection=i.MessageDirection.clientToServer,r.type=new i.ProtocolRequestType(r.method)},7169:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DidCloseNotebookDocumentNotification=t.DidSaveNotebookDocumentNotification=t.DidChangeNotebookDocumentNotification=t.NotebookCellArrayChange=t.DidOpenNotebookDocumentNotification=t.NotebookDocumentSyncRegistrationType=t.NotebookDocument=t.NotebookCell=t.ExecutionSummary=t.NotebookCellKind=void 0;const i=n(1674),r=n(9533),o=n(6140);var s,a,u,c,l,d,p,h,m,g;!function(e){e.Markup=1,e.Code=2,e.is=function(e){return 1===e||2===e}}(s=t.NotebookCellKind||(t.NotebookCellKind={})),function(e){e.create=function(e,t){const n={executionOrder:e};return!0!==t&&!1!==t||(n.success=t),n},e.is=function(e){const t=e;return r.objectLiteral(t)&&i.uinteger.is(t.executionOrder)&&(void 0===t.success||r.boolean(t.success))},e.equals=function(e,t){return e===t||null!=e&&null!=t&&e.executionOrder===t.executionOrder&&e.success===t.success}}(a=t.ExecutionSummary||(t.ExecutionSummary={})),function(e){function t(e,n){if(e===n)return!0;if(null==e||null==n)return!1;if(typeof e!=typeof n)return!1;if("object"!=typeof e)return!1;const i=Array.isArray(e),o=Array.isArray(n);if(i!==o)return!1;if(i&&o){if(e.length!==n.length)return!1;for(let i=0;i<e.length;i++)if(!t(e[i],n[i]))return!1}if(r.objectLiteral(e)&&r.objectLiteral(n)){const i=Object.keys(e),r=Object.keys(n);if(i.length!==r.length)return!1;if(i.sort(),r.sort(),!t(i,r))return!1;for(let r=0;r<i.length;r++){const o=i[r];if(!t(e[o],n[o]))return!1}}return!0}e.create=function(e,t){return{kind:e,document:t}},e.is=function(e){const t=e;return r.objectLiteral(t)&&s.is(t.kind)&&i.DocumentUri.is(t.document)&&(void 0===t.metadata||r.objectLiteral(t.metadata))},e.diff=function(e,n){const i=new Set;return e.document!==n.document&&i.add("document"),e.kind!==n.kind&&i.add("kind"),e.executionSummary!==n.executionSummary&&i.add("executionSummary"),void 0===e.metadata&&void 0===n.metadata||t(e.metadata,n.metadata)||i.add("metadata"),void 0===e.executionSummary&&void 0===n.executionSummary||a.equals(e.executionSummary,n.executionSummary)||i.add("executionSummary"),i}}(u=t.NotebookCell||(t.NotebookCell={})),(g=t.NotebookDocument||(t.NotebookDocument={})).create=function(e,t,n,i){return{uri:e,notebookType:t,version:n,cells:i}},g.is=function(e){const t=e;return r.objectLiteral(t)&&r.string(t.uri)&&i.integer.is(t.version)&&r.typedArray(t.cells,u.is)},function(e){e.method="notebookDocument/sync",e.messageDirection=o.MessageDirection.clientToServer,e.type=new o.RegistrationType(e.method)}(c=t.NotebookDocumentSyncRegistrationType||(t.NotebookDocumentSyncRegistrationType={})),(m=t.DidOpenNotebookDocumentNotification||(t.DidOpenNotebookDocumentNotification={})).method="notebookDocument/didOpen",m.messageDirection=o.MessageDirection.clientToServer,m.type=new o.ProtocolNotificationType(m.method),m.registrationMethod=c.method,(h=t.NotebookCellArrayChange||(t.NotebookCellArrayChange={})).is=function(e){const t=e;return r.objectLiteral(t)&&i.uinteger.is(t.start)&&i.uinteger.is(t.deleteCount)&&(void 0===t.cells||r.typedArray(t.cells,u.is))},h.create=function(e,t,n){const i={start:e,deleteCount:t};return void 0!==n&&(i.cells=n),i},(p=t.DidChangeNotebookDocumentNotification||(t.DidChangeNotebookDocumentNotification={})).method="notebookDocument/didChange",p.messageDirection=o.MessageDirection.clientToServer,p.type=new o.ProtocolNotificationType(p.method),p.registrationMethod=c.method,(d=t.DidSaveNotebookDocumentNotification||(t.DidSaveNotebookDocumentNotification={})).method="notebookDocument/didSave",d.messageDirection=o.MessageDirection.clientToServer,d.type=new o.ProtocolNotificationType(d.method),d.registrationMethod=c.method,(l=t.DidCloseNotebookDocumentNotification||(t.DidCloseNotebookDocumentNotification={})).method="notebookDocument/didClose",l.messageDirection=o.MessageDirection.clientToServer,l.type=new o.ProtocolNotificationType(l.method),l.registrationMethod=c.method},1862:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkDoneProgressCancelNotification=t.WorkDoneProgressCreateRequest=t.WorkDoneProgress=void 0;const i=n(4389),r=n(6140);var o,s,a;(a=t.WorkDoneProgress||(t.WorkDoneProgress={})).type=new i.ProgressType,a.is=function(e){return e===a.type},(s=t.WorkDoneProgressCreateRequest||(t.WorkDoneProgressCreateRequest={})).method="window/workDoneProgress/create",s.messageDirection=r.MessageDirection.serverToClient,s.type=new r.ProtocolRequestType(s.method),(o=t.WorkDoneProgressCancelNotification||(t.WorkDoneProgressCancelNotification={})).method="window/workDoneProgress/cancel",o.messageDirection=r.MessageDirection.clientToServer,o.type=new r.ProtocolNotificationType(o.method)},5206:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionRangeRequest=void 0;const i=n(6140);var r;(r=t.SelectionRangeRequest||(t.SelectionRangeRequest={})).method="textDocument/selectionRange",r.messageDirection=i.MessageDirection.clientToServer,r.type=new i.ProtocolRequestType(r.method)},9434:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SemanticTokensRefreshRequest=t.SemanticTokensRangeRequest=t.SemanticTokensDeltaRequest=t.SemanticTokensRequest=t.SemanticTokensRegistrationType=t.TokenFormat=void 0;const i=n(6140);var r,o,s,a,u;(t.TokenFormat||(t.TokenFormat={})).Relative="relative",function(e){e.method="textDocument/semanticTokens",e.type=new i.RegistrationType(e.method)}(r=t.SemanticTokensRegistrationType||(t.SemanticTokensRegistrationType={})),(u=t.SemanticTokensRequest||(t.SemanticTokensRequest={})).method="textDocument/semanticTokens/full",u.messageDirection=i.MessageDirection.clientToServer,u.type=new i.ProtocolRequestType(u.method),u.registrationMethod=r.method,(a=t.SemanticTokensDeltaRequest||(t.SemanticTokensDeltaRequest={})).method="textDocument/semanticTokens/full/delta",a.messageDirection=i.MessageDirection.clientToServer,a.type=new i.ProtocolRequestType(a.method),a.registrationMethod=r.method,(s=t.SemanticTokensRangeRequest||(t.SemanticTokensRangeRequest={})).method="textDocument/semanticTokens/range",s.messageDirection=i.MessageDirection.clientToServer,s.type=new i.ProtocolRequestType(s.method),s.registrationMethod=r.method,(o=t.SemanticTokensRefreshRequest||(t.SemanticTokensRefreshRequest={})).method="workspace/semanticTokens/refresh",o.messageDirection=i.MessageDirection.clientToServer,o.type=new i.ProtocolRequestType0(o.method)},5726:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShowDocumentRequest=void 0;const i=n(6140);var r;(r=t.ShowDocumentRequest||(t.ShowDocumentRequest={})).method="window/showDocument",r.messageDirection=i.MessageDirection.serverToClient,r.type=new i.ProtocolRequestType(r.method)},1589:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeDefinitionRequest=void 0;const i=n(6140);var r;(r=t.TypeDefinitionRequest||(t.TypeDefinitionRequest={})).method="textDocument/typeDefinition",r.messageDirection=i.MessageDirection.clientToServer,r.type=new i.ProtocolRequestType(r.method)},3693:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeHierarchySubtypesRequest=t.TypeHierarchySupertypesRequest=t.TypeHierarchyPrepareRequest=void 0;const i=n(6140);var r,o,s;(s=t.TypeHierarchyPrepareRequest||(t.TypeHierarchyPrepareRequest={})).method="textDocument/prepareTypeHierarchy",s.messageDirection=i.MessageDirection.clientToServer,s.type=new i.ProtocolRequestType(s.method),(o=t.TypeHierarchySupertypesRequest||(t.TypeHierarchySupertypesRequest={})).method="typeHierarchy/supertypes",o.messageDirection=i.MessageDirection.clientToServer,o.type=new i.ProtocolRequestType(o.method),(r=t.TypeHierarchySubtypesRequest||(t.TypeHierarchySubtypesRequest={})).method="typeHierarchy/subtypes",r.messageDirection=i.MessageDirection.clientToServer,r.type=new i.ProtocolRequestType(r.method)},8744:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DidChangeWorkspaceFoldersNotification=t.WorkspaceFoldersRequest=void 0;const i=n(6140);var r,o;(o=t.WorkspaceFoldersRequest||(t.WorkspaceFoldersRequest={})).method="workspace/workspaceFolders",o.messageDirection=i.MessageDirection.serverToClient,o.type=new i.ProtocolRequestType0(o.method),(r=t.DidChangeWorkspaceFoldersNotification||(t.DidChangeWorkspaceFoldersNotification={})).method="workspace/didChangeWorkspaceFolders",r.messageDirection=i.MessageDirection.clientToServer,r.type=new i.ProtocolNotificationType(r.method)},9533:(e,t)=>{"use strict";function n(e){return"string"==typeof e||e instanceof String}function i(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.objectLiteral=t.typedArray=t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0,t.boolean=function(e){return!0===e||!1===e},t.string=n,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=i,t.stringArray=function(e){return i(e)&&e.every((e=>n(e)))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.objectLiteral=function(e){return null!==e&&"object"==typeof e}},273:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.createProtocolConnection=void 0;const o=n(5028);r(n(5028),t),r(n(1661),t),t.createProtocolConnection=function(e,t,n,i){return(0,o.createMessageConnection)(e,t,n,i)}},6560:(e,t,n)=>{"use strict";e.exports=n(273)},1674:(e,t,n)=>{"use strict";var i,r,o,s,a,u,c,l,d,p,h,m,g,f,y,D,C,v,S,E,b,T,A,F,R,w,x,k;n.r(t),n.d(t,{AnnotatedTextEdit:()=>A,ChangeAnnotation:()=>b,ChangeAnnotationIdentifier:()=>T,CodeAction:()=>oe,CodeActionContext:()=>re,CodeActionKind:()=>ne,CodeActionTriggerKind:()=>ie,CodeDescription:()=>C,CodeLens:()=>se,Color:()=>d,ColorInformation:()=>p,ColorPresentation:()=>h,Command:()=>S,CompletionItem:()=>$,CompletionItemKind:()=>L,CompletionItemLabelDetails:()=>W,CompletionItemTag:()=>M,CompletionList:()=>U,CreateFile:()=>R,DeleteFile:()=>x,Diagnostic:()=>v,DiagnosticRelatedInformation:()=>f,DiagnosticSeverity:()=>y,DiagnosticTag:()=>D,DocumentHighlight:()=>X,DocumentHighlightKind:()=>Q,DocumentLink:()=>ue,DocumentSymbol:()=>te,DocumentUri:()=>i,EOL:()=>Ae,FoldingRange:()=>g,FoldingRangeKind:()=>m,FormattingOptions:()=>ae,Hover:()=>V,InlayHint:()=>Ce,InlayHintKind:()=>ye,InlayHintLabelPart:()=>De,InlineValueContext:()=>fe,InlineValueEvaluatableExpression:()=>ge,InlineValueText:()=>he,InlineValueVariableLookup:()=>me,InsertReplaceEdit:()=>j,InsertTextFormat:()=>B,InsertTextMode:()=>H,Location:()=>c,LocationLink:()=>l,MarkedString:()=>K,MarkupContent:()=>O,MarkupKind:()=>q,OptionalVersionedTextDocumentIdentifier:()=>P,ParameterInformation:()=>z,Position:()=>a,Range:()=>u,RenameFile:()=>w,SelectionRange:()=>ce,SemanticTokenModifiers:()=>de,SemanticTokenTypes:()=>le,SemanticTokens:()=>pe,SignatureInformation:()=>G,SymbolInformation:()=>Z,SymbolKind:()=>J,SymbolTag:()=>Y,TextDocument:()=>Te,TextDocumentEdit:()=>F,TextDocumentIdentifier:()=>_,TextDocumentItem:()=>I,TextEdit:()=>E,URI:()=>r,VersionedTextDocumentIdentifier:()=>N,WorkspaceChange:()=>be,WorkspaceEdit:()=>k,WorkspaceFolder:()=>ve,WorkspaceSymbol:()=>ee,integer:()=>o,uinteger:()=>s}),function(e){e.is=function(e){return"string"==typeof e}}(i||(i={})),function(e){e.is=function(e){return"string"==typeof e}}(r||(r={})),function(e){e.MIN_VALUE=-2147483648,e.MAX_VALUE=2147483647,e.is=function(t){return"number"==typeof t&&e.MIN_VALUE<=t&&t<=e.MAX_VALUE}}(o||(o={})),function(e){e.MIN_VALUE=0,e.MAX_VALUE=2147483647,e.is=function(t){return"number"==typeof t&&e.MIN_VALUE<=t&&t<=e.MAX_VALUE}}(s||(s={})),function(e){e.create=function(e,t){return e===Number.MAX_VALUE&&(e=s.MAX_VALUE),t===Number.MAX_VALUE&&(t=s.MAX_VALUE),{line:e,character:t}},e.is=function(e){var t=e;return Fe.objectLiteral(t)&&Fe.uinteger(t.line)&&Fe.uinteger(t.character)}}(a||(a={})),function(e){e.create=function(e,t,n,i){if(Fe.uinteger(e)&&Fe.uinteger(t)&&Fe.uinteger(n)&&Fe.uinteger(i))return{start:a.create(e,t),end:a.create(n,i)};if(a.is(e)&&a.is(t))return{start:e,end:t};throw new Error("Range#create called with invalid arguments[".concat(e,", ").concat(t,", ").concat(n,", ").concat(i,"]"))},e.is=function(e){var t=e;return Fe.objectLiteral(t)&&a.is(t.start)&&a.is(t.end)}}(u||(u={})),function(e){e.create=function(e,t){return{uri:e,range:t}},e.is=function(e){var t=e;return Fe.objectLiteral(t)&&u.is(t.range)&&(Fe.string(t.uri)||Fe.undefined(t.uri))}}(c||(c={})),function(e){e.create=function(e,t,n,i){return{targetUri:e,targetRange:t,targetSelectionRange:n,originSelectionRange:i}},e.is=function(e){var t=e;return Fe.objectLiteral(t)&&u.is(t.targetRange)&&Fe.string(t.targetUri)&&u.is(t.targetSelectionRange)&&(u.is(t.originSelectionRange)||Fe.undefined(t.originSelectionRange))}}(l||(l={})),function(e){e.create=function(e,t,n,i){return{red:e,green:t,blue:n,alpha:i}},e.is=function(e){var t=e;return Fe.objectLiteral(t)&&Fe.numberRange(t.red,0,1)&&Fe.numberRange(t.green,0,1)&&Fe.numberRange(t.blue,0,1)&&Fe.numberRange(t.alpha,0,1)}}(d||(d={})),function(e){e.create=function(e,t){return{range:e,color:t}},e.is=function(e){var t=e;return Fe.objectLiteral(t)&&u.is(t.range)&&d.is(t.color)}}(p||(p={})),function(e){e.create=function(e,t,n){return{label:e,textEdit:t,additionalTextEdits:n}},e.is=function(e){var t=e;return Fe.objectLiteral(t)&&Fe.string(t.label)&&(Fe.undefined(t.textEdit)||E.is(t))&&(Fe.undefined(t.additionalTextEdits)||Fe.typedArray(t.additionalTextEdits,E.is))}}(h||(h={})),function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(m||(m={})),function(e){e.create=function(e,t,n,i,r,o){var s={startLine:e,endLine:t};return Fe.defined(n)&&(s.startCharacter=n),Fe.defined(i)&&(s.endCharacter=i),Fe.defined(r)&&(s.kind=r),Fe.defined(o)&&(s.collapsedText=o),s},e.is=function(e){var t=e;return Fe.objectLiteral(t)&&Fe.uinteger(t.startLine)&&Fe.uinteger(t.startLine)&&(Fe.undefined(t.startCharacter)||Fe.uinteger(t.startCharacter))&&(Fe.undefined(t.endCharacter)||Fe.uinteger(t.endCharacter))&&(Fe.undefined(t.kind)||Fe.string(t.kind))}}(g||(g={})),function(e){e.create=function(e,t){return{location:e,message:t}},e.is=function(e){var t=e;return Fe.defined(t)&&c.is(t.location)&&Fe.string(t.message)}}(f||(f={})),function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4}(y||(y={})),function(e){e.Unnecessary=1,e.Deprecated=2}(D||(D={})),function(e){e.is=function(e){var t=e;return Fe.objectLiteral(t)&&Fe.string(t.href)}}(C||(C={})),function(e){e.create=function(e,t,n,i,r,o){var s={range:e,message:t};return Fe.defined(n)&&(s.severity=n),Fe.defined(i)&&(s.code=i),Fe.defined(r)&&(s.source=r),Fe.defined(o)&&(s.relatedInformation=o),s},e.is=function(e){var t,n=e;return Fe.defined(n)&&u.is(n.range)&&Fe.string(n.message)&&(Fe.number(n.severity)||Fe.undefined(n.severity))&&(Fe.integer(n.code)||Fe.string(n.code)||Fe.undefined(n.code))&&(Fe.undefined(n.codeDescription)||Fe.string(null===(t=n.codeDescription)||void 0===t?void 0:t.href))&&(Fe.string(n.source)||Fe.undefined(n.source))&&(Fe.undefined(n.relatedInformation)||Fe.typedArray(n.relatedInformation,f.is))}}(v||(v={})),function(e){e.create=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var r={title:e,command:t};return Fe.defined(n)&&n.length>0&&(r.arguments=n),r},e.is=function(e){var t=e;return Fe.defined(t)&&Fe.string(t.title)&&Fe.string(t.command)}}(S||(S={})),function(e){e.replace=function(e,t){return{range:e,newText:t}},e.insert=function(e,t){return{range:{start:e,end:e},newText:t}},e.del=function(e){return{range:e,newText:""}},e.is=function(e){var t=e;return Fe.objectLiteral(t)&&Fe.string(t.newText)&&u.is(t.range)}}(E||(E={})),function(e){e.create=function(e,t,n){var i={label:e};return void 0!==t&&(i.needsConfirmation=t),void 0!==n&&(i.description=n),i},e.is=function(e){var t=e;return Fe.objectLiteral(t)&&Fe.string(t.label)&&(Fe.boolean(t.needsConfirmation)||void 0===t.needsConfirmation)&&(Fe.string(t.description)||void 0===t.description)}}(b||(b={})),function(e){e.is=function(e){var t=e;return Fe.string(t)}}(T||(T={})),function(e){e.replace=function(e,t,n){return{range:e,newText:t,annotationId:n}},e.insert=function(e,t,n){return{range:{start:e,end:e},newText:t,annotationId:n}},e.del=function(e,t){return{range:e,newText:"",annotationId:t}},e.is=function(e){var t=e;return E.is(t)&&(b.is(t.annotationId)||T.is(t.annotationId))}}(A||(A={})),function(e){e.create=function(e,t){return{textDocument:e,edits:t}},e.is=function(e){var t=e;return Fe.defined(t)&&P.is(t.textDocument)&&Array.isArray(t.edits)}}(F||(F={})),function(e){e.create=function(e,t,n){var i={kind:"create",uri:e};return void 0===t||void 0===t.overwrite&&void 0===t.ignoreIfExists||(i.options=t),void 0!==n&&(i.annotationId=n),i},e.is=function(e){var t=e;return t&&"create"===t.kind&&Fe.string(t.uri)&&(void 0===t.options||(void 0===t.options.overwrite||Fe.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||Fe.boolean(t.options.ignoreIfExists)))&&(void 0===t.annotationId||T.is(t.annotationId))}}(R||(R={})),function(e){e.create=function(e,t,n,i){var r={kind:"rename",oldUri:e,newUri:t};return void 0===n||void 0===n.overwrite&&void 0===n.ignoreIfExists||(r.options=n),void 0!==i&&(r.annotationId=i),r},e.is=function(e){var t=e;return t&&"rename"===t.kind&&Fe.string(t.oldUri)&&Fe.string(t.newUri)&&(void 0===t.options||(void 0===t.options.overwrite||Fe.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||Fe.boolean(t.options.ignoreIfExists)))&&(void 0===t.annotationId||T.is(t.annotationId))}}(w||(w={})),function(e){e.create=function(e,t,n){var i={kind:"delete",uri:e};return void 0===t||void 0===t.recursive&&void 0===t.ignoreIfNotExists||(i.options=t),void 0!==n&&(i.annotationId=n),i},e.is=function(e){var t=e;return t&&"delete"===t.kind&&Fe.string(t.uri)&&(void 0===t.options||(void 0===t.options.recursive||Fe.boolean(t.options.recursive))&&(void 0===t.options.ignoreIfNotExists||Fe.boolean(t.options.ignoreIfNotExists)))&&(void 0===t.annotationId||T.is(t.annotationId))}}(x||(x={})),function(e){e.is=function(e){var t=e;return t&&(void 0!==t.changes||void 0!==t.documentChanges)&&(void 0===t.documentChanges||t.documentChanges.every((function(e){return Fe.string(e.kind)?R.is(e)||w.is(e)||x.is(e):F.is(e)})))}}(k||(k={}));var _,N,P,I,q,O,L,B,M,j,H,W,$,U,K,V,z,G,Q,X,J,Y,Z,ee,te,ne,ie,re,oe,se,ae,ue,ce,le,de,pe,he,me,ge,fe,ye,De,Ce,ve,Se=function(){function e(e,t){this.edits=e,this.changeAnnotations=t}return e.prototype.insert=function(e,t,n){var i,r;if(void 0===n?i=E.insert(e,t):T.is(n)?(r=n,i=A.insert(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),r=this.changeAnnotations.manage(n),i=A.insert(e,t,r)),this.edits.push(i),void 0!==r)return r},e.prototype.replace=function(e,t,n){var i,r;if(void 0===n?i=E.replace(e,t):T.is(n)?(r=n,i=A.replace(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),r=this.changeAnnotations.manage(n),i=A.replace(e,t,r)),this.edits.push(i),void 0!==r)return r},e.prototype.delete=function(e,t){var n,i;if(void 0===t?n=E.del(e):T.is(t)?(i=t,n=A.del(e,t)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(t),n=A.del(e,i)),this.edits.push(n),void 0!==i)return i},e.prototype.add=function(e){this.edits.push(e)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e.prototype.assertChangeAnnotations=function(e){if(void 0===e)throw new Error("Text edit change is not configured to manage change annotations.")},e}(),Ee=function(){function e(e){this._annotations=void 0===e?Object.create(null):e,this._counter=0,this._size=0}return e.prototype.all=function(){return this._annotations},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.manage=function(e,t){var n;if(T.is(e)?n=e:(n=this.nextId(),t=e),void 0!==this._annotations[n])throw new Error("Id ".concat(n," is already in use."));if(void 0===t)throw new Error("No annotation provided for id ".concat(n));return this._annotations[n]=t,this._size++,n},e.prototype.nextId=function(){return this._counter++,this._counter.toString()},e}(),be=function(){function e(e){var t=this;this._textEditChanges=Object.create(null),void 0!==e?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new Ee(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach((function(e){if(F.is(e)){var n=new Se(e.edits,t._changeAnnotations);t._textEditChanges[e.textDocument.uri]=n}}))):e.changes&&Object.keys(e.changes).forEach((function(n){var i=new Se(e.changes[n]);t._textEditChanges[n]=i}))):this._workspaceEdit={}}return Object.defineProperty(e.prototype,"edit",{get:function(){return this.initDocumentChanges(),void 0!==this._changeAnnotations&&(0===this._changeAnnotations.size?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),e.prototype.getTextEditChange=function(e){if(P.is(e)){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var t={uri:e.uri,version:e.version};if(!(i=this._textEditChanges[t.uri])){var n={textDocument:t,edits:r=[]};this._workspaceEdit.documentChanges.push(n),i=new Se(r,this._changeAnnotations),this._textEditChanges[t.uri]=i}return i}if(this.initChanges(),void 0===this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var i;if(!(i=this._textEditChanges[e])){var r=[];this._workspaceEdit.changes[e]=r,i=new Se(r),this._textEditChanges[e]=i}return i},e.prototype.initDocumentChanges=function(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._changeAnnotations=new Ee,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},e.prototype.initChanges=function(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._workspaceEdit.changes=Object.create(null))},e.prototype.createFile=function(e,t,n){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var i,r,o;if(b.is(t)||T.is(t)?i=t:n=t,void 0===i?r=R.create(e,n):(o=T.is(i)?i:this._changeAnnotations.manage(i),r=R.create(e,n,o)),this._workspaceEdit.documentChanges.push(r),void 0!==o)return o},e.prototype.renameFile=function(e,t,n,i){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var r,o,s;if(b.is(n)||T.is(n)?r=n:i=n,void 0===r?o=w.create(e,t,i):(s=T.is(r)?r:this._changeAnnotations.manage(r),o=w.create(e,t,i,s)),this._workspaceEdit.documentChanges.push(o),void 0!==s)return s},e.prototype.deleteFile=function(e,t,n){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var i,r,o;if(b.is(t)||T.is(t)?i=t:n=t,void 0===i?r=x.create(e,n):(o=T.is(i)?i:this._changeAnnotations.manage(i),r=x.create(e,n,o)),this._workspaceEdit.documentChanges.push(r),void 0!==o)return o},e}();!function(e){e.create=function(e){return{uri:e}},e.is=function(e){var t=e;return Fe.defined(t)&&Fe.string(t.uri)}}(_||(_={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){var t=e;return Fe.defined(t)&&Fe.string(t.uri)&&Fe.integer(t.version)}}(N||(N={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){var t=e;return Fe.defined(t)&&Fe.string(t.uri)&&(null===t.version||Fe.integer(t.version))}}(P||(P={})),function(e){e.create=function(e,t,n,i){return{uri:e,languageId:t,version:n,text:i}},e.is=function(e){var t=e;return Fe.defined(t)&&Fe.string(t.uri)&&Fe.string(t.languageId)&&Fe.integer(t.version)&&Fe.string(t.text)}}(I||(I={})),function(e){e.PlainText="plaintext",e.Markdown="markdown",e.is=function(t){var n=t;return n===e.PlainText||n===e.Markdown}}(q||(q={})),function(e){e.is=function(e){var t=e;return Fe.objectLiteral(e)&&q.is(t.kind)&&Fe.string(t.value)}}(O||(O={})),function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25}(L||(L={})),function(e){e.PlainText=1,e.Snippet=2}(B||(B={})),function(e){e.Deprecated=1}(M||(M={})),function(e){e.create=function(e,t,n){return{newText:e,insert:t,replace:n}},e.is=function(e){var t=e;return t&&Fe.string(t.newText)&&u.is(t.insert)&&u.is(t.replace)}}(j||(j={})),function(e){e.asIs=1,e.adjustIndentation=2}(H||(H={})),function(e){e.is=function(e){var t=e;return t&&(Fe.string(t.detail)||void 0===t.detail)&&(Fe.string(t.description)||void 0===t.description)}}(W||(W={})),function(e){e.create=function(e){return{label:e}}}($||($={})),function(e){e.create=function(e,t){return{items:e||[],isIncomplete:!!t}}}(U||(U={})),function(e){e.fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},e.is=function(e){var t=e;return Fe.string(t)||Fe.objectLiteral(t)&&Fe.string(t.language)&&Fe.string(t.value)}}(K||(K={})),function(e){e.is=function(e){var t=e;return!!t&&Fe.objectLiteral(t)&&(O.is(t.contents)||K.is(t.contents)||Fe.typedArray(t.contents,K.is))&&(void 0===e.range||u.is(e.range))}}(V||(V={})),function(e){e.create=function(e,t){return t?{label:e,documentation:t}:{label:e}}}(z||(z={})),function(e){e.create=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var r={label:e};return Fe.defined(t)&&(r.documentation=t),Fe.defined(n)?r.parameters=n:r.parameters=[],r}}(G||(G={})),function(e){e.Text=1,e.Read=2,e.Write=3}(Q||(Q={})),function(e){e.create=function(e,t){var n={range:e};return Fe.number(t)&&(n.kind=t),n}}(X||(X={})),function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26}(J||(J={})),function(e){e.Deprecated=1}(Y||(Y={})),function(e){e.create=function(e,t,n,i,r){var o={name:e,kind:t,location:{uri:i,range:n}};return r&&(o.containerName=r),o}}(Z||(Z={})),function(e){e.create=function(e,t,n,i){return void 0!==i?{name:e,kind:t,location:{uri:n,range:i}}:{name:e,kind:t,location:{uri:n}}}}(ee||(ee={})),function(e){e.create=function(e,t,n,i,r,o){var s={name:e,detail:t,kind:n,range:i,selectionRange:r};return void 0!==o&&(s.children=o),s},e.is=function(e){var t=e;return t&&Fe.string(t.name)&&Fe.number(t.kind)&&u.is(t.range)&&u.is(t.selectionRange)&&(void 0===t.detail||Fe.string(t.detail))&&(void 0===t.deprecated||Fe.boolean(t.deprecated))&&(void 0===t.children||Array.isArray(t.children))&&(void 0===t.tags||Array.isArray(t.tags))}}(te||(te={})),function(e){e.Empty="",e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports",e.SourceFixAll="source.fixAll"}(ne||(ne={})),function(e){e.Invoked=1,e.Automatic=2}(ie||(ie={})),function(e){e.create=function(e,t,n){var i={diagnostics:e};return null!=t&&(i.only=t),null!=n&&(i.triggerKind=n),i},e.is=function(e){var t=e;return Fe.defined(t)&&Fe.typedArray(t.diagnostics,v.is)&&(void 0===t.only||Fe.typedArray(t.only,Fe.string))&&(void 0===t.triggerKind||t.triggerKind===ie.Invoked||t.triggerKind===ie.Automatic)}}(re||(re={})),function(e){e.create=function(e,t,n){var i={title:e},r=!0;return"string"==typeof t?(r=!1,i.kind=t):S.is(t)?i.command=t:i.edit=t,r&&void 0!==n&&(i.kind=n),i},e.is=function(e){var t=e;return t&&Fe.string(t.title)&&(void 0===t.diagnostics||Fe.typedArray(t.diagnostics,v.is))&&(void 0===t.kind||Fe.string(t.kind))&&(void 0!==t.edit||void 0!==t.command)&&(void 0===t.command||S.is(t.command))&&(void 0===t.isPreferred||Fe.boolean(t.isPreferred))&&(void 0===t.edit||k.is(t.edit))}}(oe||(oe={})),function(e){e.create=function(e,t){var n={range:e};return Fe.defined(t)&&(n.data=t),n},e.is=function(e){var t=e;return Fe.defined(t)&&u.is(t.range)&&(Fe.undefined(t.command)||S.is(t.command))}}(se||(se={})),function(e){e.create=function(e,t){return{tabSize:e,insertSpaces:t}},e.is=function(e){var t=e;return Fe.defined(t)&&Fe.uinteger(t.tabSize)&&Fe.boolean(t.insertSpaces)}}(ae||(ae={})),function(e){e.create=function(e,t,n){return{range:e,target:t,data:n}},e.is=function(e){var t=e;return Fe.defined(t)&&u.is(t.range)&&(Fe.undefined(t.target)||Fe.string(t.target))}}(ue||(ue={})),function(e){e.create=function(e,t){return{range:e,parent:t}},e.is=function(t){var n=t;return Fe.objectLiteral(n)&&u.is(n.range)&&(void 0===n.parent||e.is(n.parent))}}(ce||(ce={})),function(e){e.namespace="namespace",e.type="type",e.class="class",e.enum="enum",e.interface="interface",e.struct="struct",e.typeParameter="typeParameter",e.parameter="parameter",e.variable="variable",e.property="property",e.enumMember="enumMember",e.event="event",e.function="function",e.method="method",e.macro="macro",e.keyword="keyword",e.modifier="modifier",e.comment="comment",e.string="string",e.number="number",e.regexp="regexp",e.operator="operator",e.decorator="decorator"}(le||(le={})),function(e){e.declaration="declaration",e.definition="definition",e.readonly="readonly",e.static="static",e.deprecated="deprecated",e.abstract="abstract",e.async="async",e.modification="modification",e.documentation="documentation",e.defaultLibrary="defaultLibrary"}(de||(de={})),function(e){e.is=function(e){var t=e;return Fe.objectLiteral(t)&&(void 0===t.resultId||"string"==typeof t.resultId)&&Array.isArray(t.data)&&(0===t.data.length||"number"==typeof t.data[0])}}(pe||(pe={})),function(e){e.create=function(e,t){return{range:e,text:t}},e.is=function(e){var t=e;return null!=t&&u.is(t.range)&&Fe.string(t.text)}}(he||(he={})),function(e){e.create=function(e,t,n){return{range:e,variableName:t,caseSensitiveLookup:n}},e.is=function(e){var t=e;return null!=t&&u.is(t.range)&&Fe.boolean(t.caseSensitiveLookup)&&(Fe.string(t.variableName)||void 0===t.variableName)}}(me||(me={})),function(e){e.create=function(e,t){return{range:e,expression:t}},e.is=function(e){var t=e;return null!=t&&u.is(t.range)&&(Fe.string(t.expression)||void 0===t.expression)}}(ge||(ge={})),function(e){e.create=function(e,t){return{frameId:e,stoppedLocation:t}},e.is=function(e){var t=e;return Fe.defined(t)&&u.is(e.stoppedLocation)}}(fe||(fe={})),function(e){e.Type=1,e.Parameter=2,e.is=function(e){return 1===e||2===e}}(ye||(ye={})),function(e){e.create=function(e){return{value:e}},e.is=function(e){var t=e;return Fe.objectLiteral(t)&&(void 0===t.tooltip||Fe.string(t.tooltip)||O.is(t.tooltip))&&(void 0===t.location||c.is(t.location))&&(void 0===t.command||S.is(t.command))}}(De||(De={})),function(e){e.create=function(e,t,n){var i={position:e,label:t};return void 0!==n&&(i.kind=n),i},e.is=function(e){var t=e;return Fe.objectLiteral(t)&&a.is(t.position)&&(Fe.string(t.label)||Fe.typedArray(t.label,De.is))&&(void 0===t.kind||ye.is(t.kind))&&void 0===t.textEdits||Fe.typedArray(t.textEdits,E.is)&&(void 0===t.tooltip||Fe.string(t.tooltip)||O.is(t.tooltip))&&(void 0===t.paddingLeft||Fe.boolean(t.paddingLeft))&&(void 0===t.paddingRight||Fe.boolean(t.paddingRight))}}(Ce||(Ce={})),function(e){e.is=function(e){var t=e;return Fe.objectLiteral(t)&&r.is(t.uri)&&Fe.string(t.name)}}(ve||(ve={}));var Te,Ae=["\n","\r\n","\r"];!function(e){function t(e,n){if(e.length<=1)return e;var i=e.length/2|0,r=e.slice(0,i),o=e.slice(i);t(r,n),t(o,n);for(var s=0,a=0,u=0;s<r.length&&a<o.length;){var c=n(r[s],o[a]);e[u++]=c<=0?r[s++]:o[a++]}for(;s<r.length;)e[u++]=r[s++];for(;a<o.length;)e[u++]=o[a++];return e}e.create=function(e,t,n,i){return new Re(e,t,n,i)},e.is=function(e){var t=e;return!!(Fe.defined(t)&&Fe.string(t.uri)&&(Fe.undefined(t.languageId)||Fe.string(t.languageId))&&Fe.uinteger(t.lineCount)&&Fe.func(t.getText)&&Fe.func(t.positionAt)&&Fe.func(t.offsetAt))},e.applyEdits=function(e,n){for(var i=e.getText(),r=t(n,(function(e,t){var n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n})),o=i.length,s=r.length-1;s>=0;s--){var a=r[s],u=e.offsetAt(a.range.start),c=e.offsetAt(a.range.end);if(!(c<=o))throw new Error("Overlapping edit");i=i.substring(0,u)+a.newText+i.substring(c,i.length),o=u}return i}}(Te||(Te={}));var Fe,Re=function(){function e(e,t,n,i){this._uri=e,this._languageId=t,this._version=n,this._content=i,this._lineOffsets=void 0}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content},e.prototype.update=function(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0},e.prototype.getLineOffsets=function(){if(void 0===this._lineOffsets){for(var e=[],t=this._content,n=!0,i=0;i<t.length;i++){n&&(e.push(i),n=!1);var r=t.charAt(i);n="\r"===r||"\n"===r,"\r"===r&&i+1<t.length&&"\n"===t.charAt(i+1)&&i++}n&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),n=0,i=t.length;if(0===i)return a.create(0,e);for(;n<i;){var r=Math.floor((n+i)/2);t[r]>e?i=r:n=r+1}var o=n-1;return a.create(o,e-t[o])},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var n=t[e.line],i=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,i),n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),e}();!function(e){var t=Object.prototype.toString;e.defined=function(e){return void 0!==e},e.undefined=function(e){return void 0===e},e.boolean=function(e){return!0===e||!1===e},e.string=function(e){return"[object String]"===t.call(e)},e.number=function(e){return"[object Number]"===t.call(e)},e.numberRange=function(e,n,i){return"[object Number]"===t.call(e)&&n<=e&&e<=i},e.integer=function(e){return"[object Number]"===t.call(e)&&-2147483648<=e&&e<=2147483647},e.uinteger=function(e){return"[object Number]"===t.call(e)&&0<=e&&e<=2147483647},e.func=function(e){return"[object Function]"===t.call(e)},e.objectLiteral=function(e){return null!==e&&"object"==typeof e},e.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)}}(Fe||(Fe={}))},9602:e=>{"use strict";e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},4411:(e,t,n)=>{"use strict";function i(e){var t=this;if(t instanceof i||(t=new i),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}function r(e,t){e.tail=new s(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function o(e,t){e.head=new s(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function s(e,t,n,i){if(!(this instanceof s))return new s(e,t,n,i);this.list=i,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}e.exports=i,i.Node=s,i.create=i,i.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t},i.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},i.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},i.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)r(this,arguments[e]);return this.length},i.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)o(this,arguments[e]);return this.length},i.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},i.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},i.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,i=0;null!==n;i++)e.call(t,n.value,i,this),n=n.next},i.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,i=this.length-1;null!==n;i--)e.call(t,n.value,i,this),n=n.prev},i.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},i.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},i.prototype.map=function(e,t){t=t||this;for(var n=new i,r=this.head;null!==r;)n.push(e.call(t,r.value,this)),r=r.next;return n},i.prototype.mapReverse=function(e,t){t=t||this;for(var n=new i,r=this.tail;null!==r;)n.push(e.call(t,r.value,this)),r=r.prev;return n},i.prototype.reduce=function(e,t){var n,i=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");i=this.head.next,n=this.head.value}for(var r=0;null!==i;r++)n=e(n,i.value,r),i=i.next;return n},i.prototype.reduceReverse=function(e,t){var n,i=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");i=this.tail.prev,n=this.tail.value}for(var r=this.length-1;null!==i;r--)n=e(n,i.value,r),i=i.prev;return n},i.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},i.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},i.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new i;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,o=this.head;null!==o&&r<e;r++)o=o.next;for(;null!==o&&r<t;r++,o=o.next)n.push(o.value);return n},i.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new i;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,o=this.tail;null!==o&&r>t;r--)o=o.prev;for(;null!==o&&r>e;r--,o=o.prev)n.push(o.value);return n},i.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var i=0,r=this.head;null!==r&&i<e;i++)r=r.next;var o,a,u,c,l=[];for(i=0;r&&i<t;i++)l.push(r.value),r=this.removeNode(r);for(null===r&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev),i=0;i<n.length;i++)o=this,a=r,u=n[i],c=void 0,null===(c=a===o.head?new s(u,null,a,o):new s(u,a,a.next,o)).next&&(o.tail=c),null===c.prev&&(o.head=c),o.length++,r=c;return l},i.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var i=n.prev;n.prev=n.next,n.next=i}return this.head=t,this.tail=e,this};try{n(9602)(i)}catch(e){}},3920:e=>{"use strict";e.exports=require("prettier")},9496:e=>{"use strict";e.exports=require("vscode")},2081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},7147:e=>{"use strict";e.exports=require("fs")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},3837:e=>{"use strict";e.exports=require("util")}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};(()=>{"use strict";var e=i;Object.defineProperty(e,"__esModule",{value:!0}),e.deactivate=e.activate=void 0;const t=n(3837),r=n(2081),o=n(9496),s=n(2847),a=n(4654),u=(0,t.promisify)(r.exec),c=[{language:"liquid",scheme:"file"},{language:"liquid",scheme:"untitled"}];class l extends Error{}const d="win32"===process.platform;let p,h;function m(e){const[t,n]=e.split(".");return o.workspace.getConfiguration(t).get(n)}async function g(){const e=await async function(){m("shopifyLiquid.disableWindowsWarning")||!d||C||(C=!0,o.window.showWarningMessage("Shopify Liquid support on Windows is experimental. Please report any issue."));const e=m("shopifyLiquid.languageServerPath"),t=m("shopifyLiquid.shopifyCLIPath");try{const n=t&&await S(t)||e&&await E(e)||await async function(){try{return S(await v("shopify"))}catch(e){return}}()||await async function(){try{return E(await v("theme-check-language-server"))}catch(e){return}}();if(!n)throw new Error("No executable found");return n}catch(e){e instanceof l?o.window.showErrorMessage(e.message):d?o.window.showWarningMessage("The 'theme-check-language-server' executable was not found on your $PATH. Was it installed? The path can also be changed via the \"shopifyLiquid.languageServerPath\" setting."):(console.error(e),o.window.showWarningMessage("The 'shopify' executable was not found on your $PATH. Was it installed? The path can also be changed via the \"shopifyLiquid.shopifyCLIPath\" setting."))}}();console.info("shopify.theme-check-vscode Server options %s",JSON.stringify(e,null,2)),e&&(p=new s.LanguageClient("shopifyLiquid","Theme Check Language Server",e,{documentSelector:[{scheme:"file",language:"liquid"},{scheme:"file",language:"plaintext"},{scheme:"file",language:"html"},{scheme:"file",language:"javascript"},{scheme:"file",language:"css"},{scheme:"file",language:"scss"},{scheme:"file",language:"json"}]}),p.start())}async function f(){try{p&&await Promise.race([p.stop(),(1e3,new Promise((e=>setTimeout(e,1e3))))])}catch(e){console.error(e)}finally{h=void 0,p=void 0}}async function y(){p&&await f(),await g()}function D(e){const t=e.affectsConfiguration("shopifyLiquid.languageServerPath"),n=e.affectsConfiguration("shopifyLiquid.shopifyCLIPath");(t||n)&&y()}e.activate=async function(e){h=e,h.subscriptions.push(o.commands.registerCommand("shopifyLiquid.restart",y)),h.subscriptions.push(o.commands.registerCommand("shopifyLiquid.runChecks",(()=>p.sendRequest("workspace/executeCommand",{command:"runChecks"}))));const t=new Map,n=o.languages.createDiagnosticCollection("prettier-plugin-liquid");h.subscriptions.push(n);const i=o.languages.registerDocumentFormattingEditProvider(c,new a.default(n,t));h.subscriptions.push(i),o.workspace.onDidChangeConfiguration(D),o.workspace.onDidChangeTextDocument((({document:e})=>{t.get(e.uri)!==e.version&&n.delete(e.uri)})),await g()},e.deactivate=function(){return f()};let C=!1;async function v(e){if(d){const{stdout:t}=await u(`where.exe ${e}`),n=t.replace(/\r/g,"").split("\n").filter((e=>e.endsWith("bat")));return n.length>0&&n[0]}{const{stdout:t}=await u(`which ${e}`);return t.split("\n")[0].replace("\r","")}}async function S(e){if(!d&&"string"==typeof e&&""!==e)return{command:e,args:["theme","language-server"]}}async function E(e){if("string"==typeof e&&""!==e)return await async function(e){try{!d&&await u(`[[ -f "${e}" ]]`)}catch(t){throw new l(`${e} not found, are you sure this is the correct path?`)}}(e),{command:e}}})(),module.exports=i})();
//# sourceMappingURL=extension.js.map